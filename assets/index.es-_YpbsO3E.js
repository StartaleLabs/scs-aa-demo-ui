const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/index-CCVXPQLC.js","assets/index-oQAZxsEo.js","assets/index-CtKu3gDI.css"])))=>i.map(i=>d[i]);
import{o as mr,t as yr,q as Tc,s as jc,u as Vu,w as Ie,x as d5,y as na,z as p5,A as g5,I as oa,B as Bn,D as md,E as v5,F as b5,G as Ju,H as m5,m as wc,f as y5,J as tf,K as w5,L as kr,M as _5,N as A5,O as fi,P as nn,Q as _s,R as oo,T as ea,U as Qu,W as Gi,X as Yu,Y as Wu,Z as rf,$ as Xu,a0 as Cn,a1 as Js,a2 as vn,_ as x5}from"./index-oQAZxsEo.js";import{a as nf,r as Zu}from"./inherits_browser-9pxEXhK8.js";var wh={},zt={},_h,yd;function Ms(){if(yd)return _h;yd=1,_h=r;function r(e,t){if(!e)throw new Error(t||"Assertion failed")}return r.equal=function(t,i,s){if(t!=i)throw new Error(s||"Assertion failed: "+t+" != "+i)},_h}var wd;function bn(){if(wd)return zt;wd=1;var r=Ms(),e=nf();zt.inherits=e;function t(y,c){return(y.charCodeAt(c)&64512)!==55296||c<0||c+1>=y.length?!1:(y.charCodeAt(c+1)&64512)===56320}function i(y,c){if(Array.isArray(y))return y.slice();if(!y)return[];var h=[];if(typeof y=="string")if(c){if(c==="hex")for(y=y.replace(/[^a-z0-9]+/ig,""),y.length%2!==0&&(y="0"+y),m=0;m<y.length;m+=2)h.push(parseInt(y[m]+y[m+1],16))}else for(var p=0,m=0;m<y.length;m++){var _=y.charCodeAt(m);_<128?h[p++]=_:_<2048?(h[p++]=_>>6|192,h[p++]=_&63|128):t(y,m)?(_=65536+((_&1023)<<10)+(y.charCodeAt(++m)&1023),h[p++]=_>>18|240,h[p++]=_>>12&63|128,h[p++]=_>>6&63|128,h[p++]=_&63|128):(h[p++]=_>>12|224,h[p++]=_>>6&63|128,h[p++]=_&63|128)}else for(m=0;m<y.length;m++)h[m]=y[m]|0;return h}zt.toArray=i;function s(y){for(var c="",h=0;h<y.length;h++)c+=u(y[h].toString(16));return c}zt.toHex=s;function a(y){var c=y>>>24|y>>>8&65280|y<<8&16711680|(y&255)<<24;return c>>>0}zt.htonl=a;function f(y,c){for(var h="",p=0;p<y.length;p++){var m=y[p];c==="little"&&(m=a(m)),h+=d(m.toString(16))}return h}zt.toHex32=f;function u(y){return y.length===1?"0"+y:y}zt.zero2=u;function d(y){return y.length===7?"0"+y:y.length===6?"00"+y:y.length===5?"000"+y:y.length===4?"0000"+y:y.length===3?"00000"+y:y.length===2?"000000"+y:y.length===1?"0000000"+y:y}zt.zero8=d;function l(y,c,h,p){var m=h-c;r(m%4===0);for(var _=new Array(m/4),I=0,S=c;I<_.length;I++,S+=4){var v;p==="big"?v=y[S]<<24|y[S+1]<<16|y[S+2]<<8|y[S+3]:v=y[S+3]<<24|y[S+2]<<16|y[S+1]<<8|y[S],_[I]=v>>>0}return _}zt.join32=l;function w(y,c){for(var h=new Array(y.length*4),p=0,m=0;p<y.length;p++,m+=4){var _=y[p];c==="big"?(h[m]=_>>>24,h[m+1]=_>>>16&255,h[m+2]=_>>>8&255,h[m+3]=_&255):(h[m+3]=_>>>24,h[m+2]=_>>>16&255,h[m+1]=_>>>8&255,h[m]=_&255)}return h}zt.split32=w;function x(y,c){return y>>>c|y<<32-c}zt.rotr32=x;function C(y,c){return y<<c|y>>>32-c}zt.rotl32=C;function R(y,c){return y+c>>>0}zt.sum32=R;function N(y,c,h){return y+c+h>>>0}zt.sum32_3=N;function T(y,c,h,p){return y+c+h+p>>>0}zt.sum32_4=T;function U(y,c,h,p,m){return y+c+h+p+m>>>0}zt.sum32_5=U;function Q(y,c,h,p){var m=y[c],_=y[c+1],I=p+_>>>0,S=(I<p?1:0)+h+m;y[c]=S>>>0,y[c+1]=I}zt.sum64=Q;function F(y,c,h,p){var m=c+p>>>0,_=(m<c?1:0)+y+h;return _>>>0}zt.sum64_hi=F;function V(y,c,h,p){var m=c+p;return m>>>0}zt.sum64_lo=V;function D(y,c,h,p,m,_,I,S){var v=0,b=c;b=b+p>>>0,v+=b<c?1:0,b=b+_>>>0,v+=b<_?1:0,b=b+S>>>0,v+=b<S?1:0;var O=y+h+m+I+v;return O>>>0}zt.sum64_4_hi=D;function B(y,c,h,p,m,_,I,S){var v=c+p+_+S;return v>>>0}zt.sum64_4_lo=B;function H(y,c,h,p,m,_,I,S,v,b){var O=0,W=c;W=W+p>>>0,O+=W<c?1:0,W=W+_>>>0,O+=W<_?1:0,W=W+S>>>0,O+=W<S?1:0,W=W+b>>>0,O+=W<b?1:0;var te=y+h+m+I+v+O;return te>>>0}zt.sum64_5_hi=H;function E(y,c,h,p,m,_,I,S,v,b){var O=c+p+_+S+b;return O>>>0}zt.sum64_5_lo=E;function $(y,c,h){var p=c<<32-h|y>>>h;return p>>>0}zt.rotr64_hi=$;function ne(y,c,h){var p=y<<32-h|c>>>h;return p>>>0}zt.rotr64_lo=ne;function fe(y,c,h){return y>>>h}zt.shr64_hi=fe;function z(y,c,h){var p=y<<32-h|c>>>h;return p>>>0}return zt.shr64_lo=z,zt}var Ah={},_d;function co(){if(_d)return Ah;_d=1;var r=bn(),e=Ms();function t(){this.pending=null,this.pendingTotal=0,this.blockSize=this.constructor.blockSize,this.outSize=this.constructor.outSize,this.hmacStrength=this.constructor.hmacStrength,this.padLength=this.constructor.padLength/8,this.endian="big",this._delta8=this.blockSize/8,this._delta32=this.blockSize/32}return Ah.BlockHash=t,t.prototype.update=function(s,a){if(s=r.toArray(s,a),this.pending?this.pending=this.pending.concat(s):this.pending=s,this.pendingTotal+=s.length,this.pending.length>=this._delta8){s=this.pending;var f=s.length%this._delta8;this.pending=s.slice(s.length-f,s.length),this.pending.length===0&&(this.pending=null),s=r.join32(s,0,s.length-f,this.endian);for(var u=0;u<s.length;u+=this._delta32)this._update(s,u,u+this._delta32)}return this},t.prototype.digest=function(s){return this.update(this._pad()),e(this.pending===null),this._digest(s)},t.prototype._pad=function(){var s=this.pendingTotal,a=this._delta8,f=a-(s+this.padLength)%a,u=new Array(f+this.padLength);u[0]=128;for(var d=1;d<f;d++)u[d]=0;if(s<<=3,this.endian==="big"){for(var l=8;l<this.padLength;l++)u[d++]=0;u[d++]=0,u[d++]=0,u[d++]=0,u[d++]=0,u[d++]=s>>>24&255,u[d++]=s>>>16&255,u[d++]=s>>>8&255,u[d++]=s&255}else for(u[d++]=s&255,u[d++]=s>>>8&255,u[d++]=s>>>16&255,u[d++]=s>>>24&255,u[d++]=0,u[d++]=0,u[d++]=0,u[d++]=0,l=8;l<this.padLength;l++)u[d++]=0;return u},Ah}var gs={},en={},Ad;function rg(){if(Ad)return en;Ad=1;var r=bn(),e=r.rotr32;function t(w,x,C,R){if(w===0)return i(x,C,R);if(w===1||w===3)return a(x,C,R);if(w===2)return s(x,C,R)}en.ft_1=t;function i(w,x,C){return w&x^~w&C}en.ch32=i;function s(w,x,C){return w&x^w&C^x&C}en.maj32=s;function a(w,x,C){return w^x^C}en.p32=a;function f(w){return e(w,2)^e(w,13)^e(w,22)}en.s0_256=f;function u(w){return e(w,6)^e(w,11)^e(w,25)}en.s1_256=u;function d(w){return e(w,7)^e(w,18)^w>>>3}en.g0_256=d;function l(w){return e(w,17)^e(w,19)^w>>>10}return en.g1_256=l,en}var xh,xd;function E5(){if(xd)return xh;xd=1;var r=bn(),e=co(),t=rg(),i=r.rotl32,s=r.sum32,a=r.sum32_5,f=t.ft_1,u=e.BlockHash,d=[1518500249,1859775393,2400959708,3395469782];function l(){if(!(this instanceof l))return new l;u.call(this),this.h=[1732584193,4023233417,2562383102,271733878,3285377520],this.W=new Array(80)}return r.inherits(l,u),xh=l,l.blockSize=512,l.outSize=160,l.hmacStrength=80,l.padLength=64,l.prototype._update=function(x,C){for(var R=this.W,N=0;N<16;N++)R[N]=x[C+N];for(;N<R.length;N++)R[N]=i(R[N-3]^R[N-8]^R[N-14]^R[N-16],1);var T=this.h[0],U=this.h[1],Q=this.h[2],F=this.h[3],V=this.h[4];for(N=0;N<R.length;N++){var D=~~(N/20),B=a(i(T,5),f(D,U,Q,F),V,R[N],d[D]);V=F,F=Q,Q=i(U,30),U=T,T=B}this.h[0]=s(this.h[0],T),this.h[1]=s(this.h[1],U),this.h[2]=s(this.h[2],Q),this.h[3]=s(this.h[3],F),this.h[4]=s(this.h[4],V)},l.prototype._digest=function(x){return x==="hex"?r.toHex32(this.h,"big"):r.split32(this.h,"big")},xh}var Eh,Ed;function ig(){if(Ed)return Eh;Ed=1;var r=bn(),e=co(),t=rg(),i=Ms(),s=r.sum32,a=r.sum32_4,f=r.sum32_5,u=t.ch32,d=t.maj32,l=t.s0_256,w=t.s1_256,x=t.g0_256,C=t.g1_256,R=e.BlockHash,N=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298];function T(){if(!(this instanceof T))return new T;R.call(this),this.h=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225],this.k=N,this.W=new Array(64)}return r.inherits(T,R),Eh=T,T.blockSize=512,T.outSize=256,T.hmacStrength=192,T.padLength=64,T.prototype._update=function(Q,F){for(var V=this.W,D=0;D<16;D++)V[D]=Q[F+D];for(;D<V.length;D++)V[D]=a(C(V[D-2]),V[D-7],x(V[D-15]),V[D-16]);var B=this.h[0],H=this.h[1],E=this.h[2],$=this.h[3],ne=this.h[4],fe=this.h[5],z=this.h[6],y=this.h[7];for(i(this.k.length===V.length),D=0;D<V.length;D++){var c=f(y,w(ne),u(ne,fe,z),this.k[D],V[D]),h=s(l(B),d(B,H,E));y=z,z=fe,fe=ne,ne=s($,c),$=E,E=H,H=B,B=s(c,h)}this.h[0]=s(this.h[0],B),this.h[1]=s(this.h[1],H),this.h[2]=s(this.h[2],E),this.h[3]=s(this.h[3],$),this.h[4]=s(this.h[4],ne),this.h[5]=s(this.h[5],fe),this.h[6]=s(this.h[6],z),this.h[7]=s(this.h[7],y)},T.prototype._digest=function(Q){return Q==="hex"?r.toHex32(this.h,"big"):r.split32(this.h,"big")},Eh}var Sh,Sd;function S5(){if(Sd)return Sh;Sd=1;var r=bn(),e=ig();function t(){if(!(this instanceof t))return new t;e.call(this),this.h=[3238371032,914150663,812702999,4144912697,4290775857,1750603025,1694076839,3204075428]}return r.inherits(t,e),Sh=t,t.blockSize=512,t.outSize=224,t.hmacStrength=192,t.padLength=64,t.prototype._digest=function(s){return s==="hex"?r.toHex32(this.h.slice(0,7),"big"):r.split32(this.h.slice(0,7),"big")},Sh}var Mh,Md;function ng(){if(Md)return Mh;Md=1;var r=bn(),e=co(),t=Ms(),i=r.rotr64_hi,s=r.rotr64_lo,a=r.shr64_hi,f=r.shr64_lo,u=r.sum64,d=r.sum64_hi,l=r.sum64_lo,w=r.sum64_4_hi,x=r.sum64_4_lo,C=r.sum64_5_hi,R=r.sum64_5_lo,N=e.BlockHash,T=[1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591];function U(){if(!(this instanceof U))return new U;N.call(this),this.h=[1779033703,4089235720,3144134277,2227873595,1013904242,4271175723,2773480762,1595750129,1359893119,2917565137,2600822924,725511199,528734635,4215389547,1541459225,327033209],this.k=T,this.W=new Array(160)}r.inherits(U,N),Mh=U,U.blockSize=1024,U.outSize=512,U.hmacStrength=192,U.padLength=128,U.prototype._prepareBlock=function(h,p){for(var m=this.W,_=0;_<32;_++)m[_]=h[p+_];for(;_<m.length;_+=2){var I=z(m[_-4],m[_-3]),S=y(m[_-4],m[_-3]),v=m[_-14],b=m[_-13],O=ne(m[_-30],m[_-29]),W=fe(m[_-30],m[_-29]),te=m[_-32],P=m[_-31];m[_]=w(I,S,v,b,O,W,te,P),m[_+1]=x(I,S,v,b,O,W,te,P)}},U.prototype._update=function(h,p){this._prepareBlock(h,p);var m=this.W,_=this.h[0],I=this.h[1],S=this.h[2],v=this.h[3],b=this.h[4],O=this.h[5],W=this.h[6],te=this.h[7],P=this.h[8],ee=this.h[9],k=this.h[10],G=this.h[11],J=this.h[12],A=this.h[13],K=this.h[14],ae=this.h[15];t(this.k.length===m.length);for(var oe=0;oe<m.length;oe+=2){var he=K,be=ae,we=E(P,ee),Me=$(P,ee),Qe=Q(P,ee,k,G,J),Ce=F(P,ee,k,G,J,A),Te=this.k[oe],Se=this.k[oe+1],me=m[oe],Ne=m[oe+1],Oe=C(he,be,we,Me,Qe,Ce,Te,Se,me,Ne),ve=R(he,be,we,Me,Qe,Ce,Te,Se,me,Ne);he=B(_,I),be=H(_,I),we=V(_,I,S,v,b),Me=D(_,I,S,v,b,O);var qe=d(he,be,we,Me),xe=l(he,be,we,Me);K=J,ae=A,J=k,A=G,k=P,G=ee,P=d(W,te,Oe,ve),ee=l(te,te,Oe,ve),W=b,te=O,b=S,O=v,S=_,v=I,_=d(Oe,ve,qe,xe),I=l(Oe,ve,qe,xe)}u(this.h,0,_,I),u(this.h,2,S,v),u(this.h,4,b,O),u(this.h,6,W,te),u(this.h,8,P,ee),u(this.h,10,k,G),u(this.h,12,J,A),u(this.h,14,K,ae)},U.prototype._digest=function(h){return h==="hex"?r.toHex32(this.h,"big"):r.split32(this.h,"big")};function Q(c,h,p,m,_){var I=c&p^~c&_;return I<0&&(I+=4294967296),I}function F(c,h,p,m,_,I){var S=h&m^~h&I;return S<0&&(S+=4294967296),S}function V(c,h,p,m,_){var I=c&p^c&_^p&_;return I<0&&(I+=4294967296),I}function D(c,h,p,m,_,I){var S=h&m^h&I^m&I;return S<0&&(S+=4294967296),S}function B(c,h){var p=i(c,h,28),m=i(h,c,2),_=i(h,c,7),I=p^m^_;return I<0&&(I+=4294967296),I}function H(c,h){var p=s(c,h,28),m=s(h,c,2),_=s(h,c,7),I=p^m^_;return I<0&&(I+=4294967296),I}function E(c,h){var p=i(c,h,14),m=i(c,h,18),_=i(h,c,9),I=p^m^_;return I<0&&(I+=4294967296),I}function $(c,h){var p=s(c,h,14),m=s(c,h,18),_=s(h,c,9),I=p^m^_;return I<0&&(I+=4294967296),I}function ne(c,h){var p=i(c,h,1),m=i(c,h,8),_=a(c,h,7),I=p^m^_;return I<0&&(I+=4294967296),I}function fe(c,h){var p=s(c,h,1),m=s(c,h,8),_=f(c,h,7),I=p^m^_;return I<0&&(I+=4294967296),I}function z(c,h){var p=i(c,h,19),m=i(h,c,29),_=a(c,h,6),I=p^m^_;return I<0&&(I+=4294967296),I}function y(c,h){var p=s(c,h,19),m=s(h,c,29),_=f(c,h,6),I=p^m^_;return I<0&&(I+=4294967296),I}return Mh}var Ih,Id;function M5(){if(Id)return Ih;Id=1;var r=bn(),e=ng();function t(){if(!(this instanceof t))return new t;e.call(this),this.h=[3418070365,3238371032,1654270250,914150663,2438529370,812702999,355462360,4144912697,1731405415,4290775857,2394180231,1750603025,3675008525,1694076839,1203062813,3204075428]}return r.inherits(t,e),Ih=t,t.blockSize=1024,t.outSize=384,t.hmacStrength=192,t.padLength=128,t.prototype._digest=function(s){return s==="hex"?r.toHex32(this.h.slice(0,12),"big"):r.split32(this.h.slice(0,12),"big")},Ih}var Pd;function I5(){return Pd||(Pd=1,gs.sha1=E5(),gs.sha224=S5(),gs.sha256=ig(),gs.sha384=M5(),gs.sha512=ng()),gs}var Ph={},Rd;function P5(){if(Rd)return Ph;Rd=1;var r=bn(),e=co(),t=r.rotl32,i=r.sum32,s=r.sum32_3,a=r.sum32_4,f=e.BlockHash;function u(){if(!(this instanceof u))return new u;f.call(this),this.h=[1732584193,4023233417,2562383102,271733878,3285377520],this.endian="little"}r.inherits(u,f),Ph.ripemd160=u,u.blockSize=512,u.outSize=160,u.hmacStrength=192,u.padLength=64,u.prototype._update=function(U,Q){for(var F=this.h[0],V=this.h[1],D=this.h[2],B=this.h[3],H=this.h[4],E=F,$=V,ne=D,fe=B,z=H,y=0;y<80;y++){var c=i(t(a(F,d(y,V,D,B),U[x[y]+Q],l(y)),R[y]),H);F=H,H=B,B=t(D,10),D=V,V=c,c=i(t(a(E,d(79-y,$,ne,fe),U[C[y]+Q],w(y)),N[y]),z),E=z,z=fe,fe=t(ne,10),ne=$,$=c}c=s(this.h[1],D,fe),this.h[1]=s(this.h[2],B,z),this.h[2]=s(this.h[3],H,E),this.h[3]=s(this.h[4],F,$),this.h[4]=s(this.h[0],V,ne),this.h[0]=c},u.prototype._digest=function(U){return U==="hex"?r.toHex32(this.h,"little"):r.split32(this.h,"little")};function d(T,U,Q,F){return T<=15?U^Q^F:T<=31?U&Q|~U&F:T<=47?(U|~Q)^F:T<=63?U&F|Q&~F:U^(Q|~F)}function l(T){return T<=15?0:T<=31?1518500249:T<=47?1859775393:T<=63?2400959708:2840853838}function w(T){return T<=15?1352829926:T<=31?1548603684:T<=47?1836072691:T<=63?2053994217:0}var x=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13],C=[5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11],R=[11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6],N=[8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11];return Ph}var Rh,Cd;function R5(){if(Cd)return Rh;Cd=1;var r=bn(),e=Ms();function t(i,s,a){if(!(this instanceof t))return new t(i,s,a);this.Hash=i,this.blockSize=i.blockSize/8,this.outSize=i.outSize/8,this.inner=null,this.outer=null,this._init(r.toArray(s,a))}return Rh=t,t.prototype._init=function(s){s.length>this.blockSize&&(s=new this.Hash().update(s).digest()),e(s.length<=this.blockSize);for(var a=s.length;a<this.blockSize;a++)s.push(0);for(a=0;a<s.length;a++)s[a]^=54;for(this.inner=new this.Hash().update(s),a=0;a<s.length;a++)s[a]^=106;this.outer=new this.Hash().update(s)},t.prototype.update=function(s,a){return this.inner.update(s,a),this},t.prototype.digest=function(s){return this.outer.update(this.inner.digest()),this.outer.digest(s)},Rh}var Nd;function e0(){return Nd||(Nd=1,function(r){var e=r;e.utils=bn(),e.common=co(),e.sha=I5(),e.ripemd=P5(),e.hmac=R5(),e.sha1=e.sha.sha1,e.sha256=e.sha.sha256,e.sha224=e.sha.sha224,e.sha384=e.sha.sha384,e.sha512=e.sha.sha512,e.ripemd160=e.ripemd.ripemd160}(wh)),wh}var Ch={},Nh,Od;function C5(){return Od||(Od=1,Nh=r=>encodeURIComponent(r).replace(/[!'()*]/g,e=>`%${e.charCodeAt(0).toString(16).toUpperCase()}`)),Nh}var Oh,qd;function N5(){if(qd)return Oh;qd=1;var r="%[a-f0-9]{2}",e=new RegExp("("+r+")|([^%]+?)","gi"),t=new RegExp("("+r+")+","gi");function i(f,u){try{return[decodeURIComponent(f.join(""))]}catch{}if(f.length===1)return f;u=u||1;var d=f.slice(0,u),l=f.slice(u);return Array.prototype.concat.call([],i(d),i(l))}function s(f){try{return decodeURIComponent(f)}catch{for(var u=f.match(e)||[],d=1;d<u.length;d++)f=i(u,d).join(""),u=f.match(e)||[];return f}}function a(f){for(var u={"%FE%FF":"��","%FF%FE":"��"},d=t.exec(f);d;){try{u[d[0]]=decodeURIComponent(d[0])}catch{var l=s(d[0]);l!==d[0]&&(u[d[0]]=l)}d=t.exec(f)}u["%C2"]="�";for(var w=Object.keys(u),x=0;x<w.length;x++){var C=w[x];f=f.replace(new RegExp(C,"g"),u[C])}return f}return Oh=function(f){if(typeof f!="string")throw new TypeError("Expected `encodedURI` to be of type `string`, got `"+typeof f+"`");try{return f=f.replace(/\+/g," "),decodeURIComponent(f)}catch{return a(f)}},Oh}var qh,Td;function O5(){return Td||(Td=1,qh=(r,e)=>{if(!(typeof r=="string"&&typeof e=="string"))throw new TypeError("Expected the arguments to be of type `string`");if(e==="")return[r];const t=r.indexOf(e);return t===-1?[r]:[r.slice(0,t),r.slice(t+e.length)]}),qh}var Th,Fd;function q5(){return Fd||(Fd=1,Th=function(r,e){for(var t={},i=Object.keys(r),s=Array.isArray(e),a=0;a<i.length;a++){var f=i[a],u=r[f];(s?e.indexOf(f)!==-1:e(f,u,r))&&(t[f]=u)}return t}),Th}var Dd;function T5(){return Dd||(Dd=1,function(r){const e=C5(),t=N5(),i=O5(),s=q5(),a=F=>F==null,f=Symbol("encodeFragmentIdentifier");function u(F){switch(F.arrayFormat){case"index":return V=>(D,B)=>{const H=D.length;return B===void 0||F.skipNull&&B===null||F.skipEmptyString&&B===""?D:B===null?[...D,[w(V,F),"[",H,"]"].join("")]:[...D,[w(V,F),"[",w(H,F),"]=",w(B,F)].join("")]};case"bracket":return V=>(D,B)=>B===void 0||F.skipNull&&B===null||F.skipEmptyString&&B===""?D:B===null?[...D,[w(V,F),"[]"].join("")]:[...D,[w(V,F),"[]=",w(B,F)].join("")];case"colon-list-separator":return V=>(D,B)=>B===void 0||F.skipNull&&B===null||F.skipEmptyString&&B===""?D:B===null?[...D,[w(V,F),":list="].join("")]:[...D,[w(V,F),":list=",w(B,F)].join("")];case"comma":case"separator":case"bracket-separator":{const V=F.arrayFormat==="bracket-separator"?"[]=":"=";return D=>(B,H)=>H===void 0||F.skipNull&&H===null||F.skipEmptyString&&H===""?B:(H=H===null?"":H,B.length===0?[[w(D,F),V,w(H,F)].join("")]:[[B,w(H,F)].join(F.arrayFormatSeparator)])}default:return V=>(D,B)=>B===void 0||F.skipNull&&B===null||F.skipEmptyString&&B===""?D:B===null?[...D,w(V,F)]:[...D,[w(V,F),"=",w(B,F)].join("")]}}function d(F){let V;switch(F.arrayFormat){case"index":return(D,B,H)=>{if(V=/\[(\d*)\]$/.exec(D),D=D.replace(/\[\d*\]$/,""),!V){H[D]=B;return}H[D]===void 0&&(H[D]={}),H[D][V[1]]=B};case"bracket":return(D,B,H)=>{if(V=/(\[\])$/.exec(D),D=D.replace(/\[\]$/,""),!V){H[D]=B;return}if(H[D]===void 0){H[D]=[B];return}H[D]=[].concat(H[D],B)};case"colon-list-separator":return(D,B,H)=>{if(V=/(:list)$/.exec(D),D=D.replace(/:list$/,""),!V){H[D]=B;return}if(H[D]===void 0){H[D]=[B];return}H[D]=[].concat(H[D],B)};case"comma":case"separator":return(D,B,H)=>{const E=typeof B=="string"&&B.includes(F.arrayFormatSeparator),$=typeof B=="string"&&!E&&x(B,F).includes(F.arrayFormatSeparator);B=$?x(B,F):B;const ne=E||$?B.split(F.arrayFormatSeparator).map(fe=>x(fe,F)):B===null?B:x(B,F);H[D]=ne};case"bracket-separator":return(D,B,H)=>{const E=/(\[\])$/.test(D);if(D=D.replace(/\[\]$/,""),!E){H[D]=B&&x(B,F);return}const $=B===null?[]:B.split(F.arrayFormatSeparator).map(ne=>x(ne,F));if(H[D]===void 0){H[D]=$;return}H[D]=[].concat(H[D],$)};default:return(D,B,H)=>{if(H[D]===void 0){H[D]=B;return}H[D]=[].concat(H[D],B)}}}function l(F){if(typeof F!="string"||F.length!==1)throw new TypeError("arrayFormatSeparator must be single character string")}function w(F,V){return V.encode?V.strict?e(F):encodeURIComponent(F):F}function x(F,V){return V.decode?t(F):F}function C(F){return Array.isArray(F)?F.sort():typeof F=="object"?C(Object.keys(F)).sort((V,D)=>Number(V)-Number(D)).map(V=>F[V]):F}function R(F){const V=F.indexOf("#");return V!==-1&&(F=F.slice(0,V)),F}function N(F){let V="";const D=F.indexOf("#");return D!==-1&&(V=F.slice(D)),V}function T(F){F=R(F);const V=F.indexOf("?");return V===-1?"":F.slice(V+1)}function U(F,V){return V.parseNumbers&&!Number.isNaN(Number(F))&&typeof F=="string"&&F.trim()!==""?F=Number(F):V.parseBooleans&&F!==null&&(F.toLowerCase()==="true"||F.toLowerCase()==="false")&&(F=F.toLowerCase()==="true"),F}function Q(F,V){V=Object.assign({decode:!0,sort:!0,arrayFormat:"none",arrayFormatSeparator:",",parseNumbers:!1,parseBooleans:!1},V),l(V.arrayFormatSeparator);const D=d(V),B=Object.create(null);if(typeof F!="string"||(F=F.trim().replace(/^[?#&]/,""),!F))return B;for(const H of F.split("&")){if(H==="")continue;let[E,$]=i(V.decode?H.replace(/\+/g," "):H,"=");$=$===void 0?null:["comma","separator","bracket-separator"].includes(V.arrayFormat)?$:x($,V),D(x(E,V),$,B)}for(const H of Object.keys(B)){const E=B[H];if(typeof E=="object"&&E!==null)for(const $ of Object.keys(E))E[$]=U(E[$],V);else B[H]=U(E,V)}return V.sort===!1?B:(V.sort===!0?Object.keys(B).sort():Object.keys(B).sort(V.sort)).reduce((H,E)=>{const $=B[E];return $&&typeof $=="object"&&!Array.isArray($)?H[E]=C($):H[E]=$,H},Object.create(null))}r.extract=T,r.parse=Q,r.stringify=(F,V)=>{if(!F)return"";V=Object.assign({encode:!0,strict:!0,arrayFormat:"none",arrayFormatSeparator:","},V),l(V.arrayFormatSeparator);const D=$=>V.skipNull&&a(F[$])||V.skipEmptyString&&F[$]==="",B=u(V),H={};for(const $ of Object.keys(F))D($)||(H[$]=F[$]);const E=Object.keys(H);return V.sort!==!1&&E.sort(V.sort),E.map($=>{const ne=F[$];return ne===void 0?"":ne===null?w($,V):Array.isArray(ne)?ne.length===0&&V.arrayFormat==="bracket-separator"?w($,V)+"[]":ne.reduce(B($),[]).join("&"):w($,V)+"="+w(ne,V)}).filter($=>$.length>0).join("&")},r.parseUrl=(F,V)=>{V=Object.assign({decode:!0},V);const[D,B]=i(F,"#");return Object.assign({url:D.split("?")[0]||"",query:Q(T(F),V)},V&&V.parseFragmentIdentifier&&B?{fragmentIdentifier:x(B,V)}:{})},r.stringifyUrl=(F,V)=>{V=Object.assign({encode:!0,strict:!0,[f]:!0},V);const D=R(F.url).split("?")[0]||"",B=r.extract(F.url),H=r.parse(B,{sort:!1}),E=Object.assign(H,F.query);let $=r.stringify(E,V);$&&($=`?${$}`);let ne=N(F.url);return F.fragmentIdentifier&&(ne=`#${V[f]?w(F.fragmentIdentifier,V):F.fragmentIdentifier}`),`${D}${$}${ne}`},r.pick=(F,V,D)=>{D=Object.assign({parseFragmentIdentifier:!0,[f]:!1},D);const{url:B,query:H,fragmentIdentifier:E}=r.parseUrl(F,D);return r.stringifyUrl({url:B,query:s(H,V),fragmentIdentifier:E},D)},r.exclude=(F,V,D)=>{const B=Array.isArray(V)?H=>!V.includes(H):(H,E)=>!V(H,E);return r.pick(F,B,D)}}(Ch)),Ch}var Hc=T5(),Fh={},Ta={},At={},Dh={},Bd;function F5(){return Bd||(Bd=1,function(r){Object.defineProperty(r,"__esModule",{value:!0});function e(u,d){var l=u>>>16&65535,w=u&65535,x=d>>>16&65535,C=d&65535;return w*C+(l*C+w*x<<16>>>0)|0}r.mul=Math.imul||e;function t(u,d){return u+d|0}r.add=t;function i(u,d){return u-d|0}r.sub=i;function s(u,d){return u<<d|u>>>32-d}r.rotl=s;function a(u,d){return u<<32-d|u>>>d}r.rotr=a;function f(u){return typeof u=="number"&&isFinite(u)&&Math.floor(u)===u}r.isInteger=Number.isInteger||f,r.MAX_SAFE_INTEGER=9007199254740991,r.isSafeInteger=function(u){return r.isInteger(u)&&u>=-r.MAX_SAFE_INTEGER&&u<=r.MAX_SAFE_INTEGER}}(Dh)),Dh}var Ld;function fo(){if(Ld)return At;Ld=1,Object.defineProperty(At,"__esModule",{value:!0});var r=F5();function e(p,m){return m===void 0&&(m=0),(p[m+0]<<8|p[m+1])<<16>>16}At.readInt16BE=e;function t(p,m){return m===void 0&&(m=0),(p[m+0]<<8|p[m+1])>>>0}At.readUint16BE=t;function i(p,m){return m===void 0&&(m=0),(p[m+1]<<8|p[m])<<16>>16}At.readInt16LE=i;function s(p,m){return m===void 0&&(m=0),(p[m+1]<<8|p[m])>>>0}At.readUint16LE=s;function a(p,m,_){return m===void 0&&(m=new Uint8Array(2)),_===void 0&&(_=0),m[_+0]=p>>>8,m[_+1]=p>>>0,m}At.writeUint16BE=a,At.writeInt16BE=a;function f(p,m,_){return m===void 0&&(m=new Uint8Array(2)),_===void 0&&(_=0),m[_+0]=p>>>0,m[_+1]=p>>>8,m}At.writeUint16LE=f,At.writeInt16LE=f;function u(p,m){return m===void 0&&(m=0),p[m]<<24|p[m+1]<<16|p[m+2]<<8|p[m+3]}At.readInt32BE=u;function d(p,m){return m===void 0&&(m=0),(p[m]<<24|p[m+1]<<16|p[m+2]<<8|p[m+3])>>>0}At.readUint32BE=d;function l(p,m){return m===void 0&&(m=0),p[m+3]<<24|p[m+2]<<16|p[m+1]<<8|p[m]}At.readInt32LE=l;function w(p,m){return m===void 0&&(m=0),(p[m+3]<<24|p[m+2]<<16|p[m+1]<<8|p[m])>>>0}At.readUint32LE=w;function x(p,m,_){return m===void 0&&(m=new Uint8Array(4)),_===void 0&&(_=0),m[_+0]=p>>>24,m[_+1]=p>>>16,m[_+2]=p>>>8,m[_+3]=p>>>0,m}At.writeUint32BE=x,At.writeInt32BE=x;function C(p,m,_){return m===void 0&&(m=new Uint8Array(4)),_===void 0&&(_=0),m[_+0]=p>>>0,m[_+1]=p>>>8,m[_+2]=p>>>16,m[_+3]=p>>>24,m}At.writeUint32LE=C,At.writeInt32LE=C;function R(p,m){m===void 0&&(m=0);var _=u(p,m),I=u(p,m+4);return _*4294967296+I-(I>>31)*4294967296}At.readInt64BE=R;function N(p,m){m===void 0&&(m=0);var _=d(p,m),I=d(p,m+4);return _*4294967296+I}At.readUint64BE=N;function T(p,m){m===void 0&&(m=0);var _=l(p,m),I=l(p,m+4);return I*4294967296+_-(_>>31)*4294967296}At.readInt64LE=T;function U(p,m){m===void 0&&(m=0);var _=w(p,m),I=w(p,m+4);return I*4294967296+_}At.readUint64LE=U;function Q(p,m,_){return m===void 0&&(m=new Uint8Array(8)),_===void 0&&(_=0),x(p/4294967296>>>0,m,_),x(p>>>0,m,_+4),m}At.writeUint64BE=Q,At.writeInt64BE=Q;function F(p,m,_){return m===void 0&&(m=new Uint8Array(8)),_===void 0&&(_=0),C(p>>>0,m,_),C(p/4294967296>>>0,m,_+4),m}At.writeUint64LE=F,At.writeInt64LE=F;function V(p,m,_){if(_===void 0&&(_=0),p%8!==0)throw new Error("readUintBE supports only bitLengths divisible by 8");if(p/8>m.length-_)throw new Error("readUintBE: array is too short for the given bitLength");for(var I=0,S=1,v=p/8+_-1;v>=_;v--)I+=m[v]*S,S*=256;return I}At.readUintBE=V;function D(p,m,_){if(_===void 0&&(_=0),p%8!==0)throw new Error("readUintLE supports only bitLengths divisible by 8");if(p/8>m.length-_)throw new Error("readUintLE: array is too short for the given bitLength");for(var I=0,S=1,v=_;v<_+p/8;v++)I+=m[v]*S,S*=256;return I}At.readUintLE=D;function B(p,m,_,I){if(_===void 0&&(_=new Uint8Array(p/8)),I===void 0&&(I=0),p%8!==0)throw new Error("writeUintBE supports only bitLengths divisible by 8");if(!r.isSafeInteger(m))throw new Error("writeUintBE value must be an integer");for(var S=1,v=p/8+I-1;v>=I;v--)_[v]=m/S&255,S*=256;return _}At.writeUintBE=B;function H(p,m,_,I){if(_===void 0&&(_=new Uint8Array(p/8)),I===void 0&&(I=0),p%8!==0)throw new Error("writeUintLE supports only bitLengths divisible by 8");if(!r.isSafeInteger(m))throw new Error("writeUintLE value must be an integer");for(var S=1,v=I;v<I+p/8;v++)_[v]=m/S&255,S*=256;return _}At.writeUintLE=H;function E(p,m){m===void 0&&(m=0);var _=new DataView(p.buffer,p.byteOffset,p.byteLength);return _.getFloat32(m)}At.readFloat32BE=E;function $(p,m){m===void 0&&(m=0);var _=new DataView(p.buffer,p.byteOffset,p.byteLength);return _.getFloat32(m,!0)}At.readFloat32LE=$;function ne(p,m){m===void 0&&(m=0);var _=new DataView(p.buffer,p.byteOffset,p.byteLength);return _.getFloat64(m)}At.readFloat64BE=ne;function fe(p,m){m===void 0&&(m=0);var _=new DataView(p.buffer,p.byteOffset,p.byteLength);return _.getFloat64(m,!0)}At.readFloat64LE=fe;function z(p,m,_){m===void 0&&(m=new Uint8Array(4)),_===void 0&&(_=0);var I=new DataView(m.buffer,m.byteOffset,m.byteLength);return I.setFloat32(_,p),m}At.writeFloat32BE=z;function y(p,m,_){m===void 0&&(m=new Uint8Array(4)),_===void 0&&(_=0);var I=new DataView(m.buffer,m.byteOffset,m.byteLength);return I.setFloat32(_,p,!0),m}At.writeFloat32LE=y;function c(p,m,_){m===void 0&&(m=new Uint8Array(8)),_===void 0&&(_=0);var I=new DataView(m.buffer,m.byteOffset,m.byteLength);return I.setFloat64(_,p),m}At.writeFloat64BE=c;function h(p,m,_){m===void 0&&(m=new Uint8Array(8)),_===void 0&&(_=0);var I=new DataView(m.buffer,m.byteOffset,m.byteLength);return I.setFloat64(_,p,!0),m}return At.writeFloat64LE=h,At}var _c={},Ud;function Vi(){if(Ud)return _c;Ud=1,Object.defineProperty(_c,"__esModule",{value:!0});function r(e){for(var t=0;t<e.length;t++)e[t]=0;return e}return _c.wipe=r,_c}var zd;function D5(){if(zd)return Ta;zd=1,Object.defineProperty(Ta,"__esModule",{value:!0});var r=fo(),e=Vi(),t=20;function i(u,d,l){for(var w=1634760805,x=857760878,C=2036477234,R=1797285236,N=l[3]<<24|l[2]<<16|l[1]<<8|l[0],T=l[7]<<24|l[6]<<16|l[5]<<8|l[4],U=l[11]<<24|l[10]<<16|l[9]<<8|l[8],Q=l[15]<<24|l[14]<<16|l[13]<<8|l[12],F=l[19]<<24|l[18]<<16|l[17]<<8|l[16],V=l[23]<<24|l[22]<<16|l[21]<<8|l[20],D=l[27]<<24|l[26]<<16|l[25]<<8|l[24],B=l[31]<<24|l[30]<<16|l[29]<<8|l[28],H=d[3]<<24|d[2]<<16|d[1]<<8|d[0],E=d[7]<<24|d[6]<<16|d[5]<<8|d[4],$=d[11]<<24|d[10]<<16|d[9]<<8|d[8],ne=d[15]<<24|d[14]<<16|d[13]<<8|d[12],fe=w,z=x,y=C,c=R,h=N,p=T,m=U,_=Q,I=F,S=V,v=D,b=B,O=H,W=E,te=$,P=ne,ee=0;ee<t;ee+=2)fe=fe+h|0,O^=fe,O=O>>>16|O<<16,I=I+O|0,h^=I,h=h>>>20|h<<12,z=z+p|0,W^=z,W=W>>>16|W<<16,S=S+W|0,p^=S,p=p>>>20|p<<12,y=y+m|0,te^=y,te=te>>>16|te<<16,v=v+te|0,m^=v,m=m>>>20|m<<12,c=c+_|0,P^=c,P=P>>>16|P<<16,b=b+P|0,_^=b,_=_>>>20|_<<12,y=y+m|0,te^=y,te=te>>>24|te<<8,v=v+te|0,m^=v,m=m>>>25|m<<7,c=c+_|0,P^=c,P=P>>>24|P<<8,b=b+P|0,_^=b,_=_>>>25|_<<7,z=z+p|0,W^=z,W=W>>>24|W<<8,S=S+W|0,p^=S,p=p>>>25|p<<7,fe=fe+h|0,O^=fe,O=O>>>24|O<<8,I=I+O|0,h^=I,h=h>>>25|h<<7,fe=fe+p|0,P^=fe,P=P>>>16|P<<16,v=v+P|0,p^=v,p=p>>>20|p<<12,z=z+m|0,O^=z,O=O>>>16|O<<16,b=b+O|0,m^=b,m=m>>>20|m<<12,y=y+_|0,W^=y,W=W>>>16|W<<16,I=I+W|0,_^=I,_=_>>>20|_<<12,c=c+h|0,te^=c,te=te>>>16|te<<16,S=S+te|0,h^=S,h=h>>>20|h<<12,y=y+_|0,W^=y,W=W>>>24|W<<8,I=I+W|0,_^=I,_=_>>>25|_<<7,c=c+h|0,te^=c,te=te>>>24|te<<8,S=S+te|0,h^=S,h=h>>>25|h<<7,z=z+m|0,O^=z,O=O>>>24|O<<8,b=b+O|0,m^=b,m=m>>>25|m<<7,fe=fe+p|0,P^=fe,P=P>>>24|P<<8,v=v+P|0,p^=v,p=p>>>25|p<<7;r.writeUint32LE(fe+w|0,u,0),r.writeUint32LE(z+x|0,u,4),r.writeUint32LE(y+C|0,u,8),r.writeUint32LE(c+R|0,u,12),r.writeUint32LE(h+N|0,u,16),r.writeUint32LE(p+T|0,u,20),r.writeUint32LE(m+U|0,u,24),r.writeUint32LE(_+Q|0,u,28),r.writeUint32LE(I+F|0,u,32),r.writeUint32LE(S+V|0,u,36),r.writeUint32LE(v+D|0,u,40),r.writeUint32LE(b+B|0,u,44),r.writeUint32LE(O+H|0,u,48),r.writeUint32LE(W+E|0,u,52),r.writeUint32LE(te+$|0,u,56),r.writeUint32LE(P+ne|0,u,60)}function s(u,d,l,w,x){if(x===void 0&&(x=0),u.length!==32)throw new Error("ChaCha: key size must be 32 bytes");if(w.length<l.length)throw new Error("ChaCha: destination is shorter than source");var C,R;if(x===0){if(d.length!==8&&d.length!==12)throw new Error("ChaCha nonce must be 8 or 12 bytes");C=new Uint8Array(16),R=C.length-d.length,C.set(d,R)}else{if(d.length!==16)throw new Error("ChaCha nonce with counter must be 16 bytes");C=d,R=x}for(var N=new Uint8Array(64),T=0;T<l.length;T+=64){i(N,C,u);for(var U=T;U<T+64&&U<l.length;U++)w[U]=l[U]^N[U-T];f(C,0,R)}return e.wipe(N),x===0&&e.wipe(C),w}Ta.streamXOR=s;function a(u,d,l,w){return w===void 0&&(w=0),e.wipe(l),s(u,d,l,l,w)}Ta.stream=a;function f(u,d,l){for(var w=1;l--;)w=w+(u[d]&255)|0,u[d]=w&255,w>>>=8,d++;if(w>0)throw new Error("ChaCha: counter overflow")}return Ta}var Bh={},vs={},kd;function t0(){if(kd)return vs;kd=1,Object.defineProperty(vs,"__esModule",{value:!0});function r(s,a,f){return~(s-1)&a|s-1&f}vs.select=r;function e(s,a){return(s|0)-(a|0)-1>>>31&1}vs.lessOrEqual=e;function t(s,a){if(s.length!==a.length)return 0;for(var f=0,u=0;u<s.length;u++)f|=s[u]^a[u];return 1&f-1>>>8}vs.compare=t;function i(s,a){return s.length===0||a.length===0?!1:t(s,a)!==0}return vs.equal=i,vs}var $d;function B5(){return $d||($d=1,function(r){Object.defineProperty(r,"__esModule",{value:!0});var e=t0(),t=Vi();r.DIGEST_LENGTH=16;var i=function(){function f(u){this.digestLength=r.DIGEST_LENGTH,this._buffer=new Uint8Array(16),this._r=new Uint16Array(10),this._h=new Uint16Array(10),this._pad=new Uint16Array(8),this._leftover=0,this._fin=0,this._finished=!1;var d=u[0]|u[1]<<8;this._r[0]=d&8191;var l=u[2]|u[3]<<8;this._r[1]=(d>>>13|l<<3)&8191;var w=u[4]|u[5]<<8;this._r[2]=(l>>>10|w<<6)&7939;var x=u[6]|u[7]<<8;this._r[3]=(w>>>7|x<<9)&8191;var C=u[8]|u[9]<<8;this._r[4]=(x>>>4|C<<12)&255,this._r[5]=C>>>1&8190;var R=u[10]|u[11]<<8;this._r[6]=(C>>>14|R<<2)&8191;var N=u[12]|u[13]<<8;this._r[7]=(R>>>11|N<<5)&8065;var T=u[14]|u[15]<<8;this._r[8]=(N>>>8|T<<8)&8191,this._r[9]=T>>>5&127,this._pad[0]=u[16]|u[17]<<8,this._pad[1]=u[18]|u[19]<<8,this._pad[2]=u[20]|u[21]<<8,this._pad[3]=u[22]|u[23]<<8,this._pad[4]=u[24]|u[25]<<8,this._pad[5]=u[26]|u[27]<<8,this._pad[6]=u[28]|u[29]<<8,this._pad[7]=u[30]|u[31]<<8}return f.prototype._blocks=function(u,d,l){for(var w=this._fin?0:2048,x=this._h[0],C=this._h[1],R=this._h[2],N=this._h[3],T=this._h[4],U=this._h[5],Q=this._h[6],F=this._h[7],V=this._h[8],D=this._h[9],B=this._r[0],H=this._r[1],E=this._r[2],$=this._r[3],ne=this._r[4],fe=this._r[5],z=this._r[6],y=this._r[7],c=this._r[8],h=this._r[9];l>=16;){var p=u[d+0]|u[d+1]<<8;x+=p&8191;var m=u[d+2]|u[d+3]<<8;C+=(p>>>13|m<<3)&8191;var _=u[d+4]|u[d+5]<<8;R+=(m>>>10|_<<6)&8191;var I=u[d+6]|u[d+7]<<8;N+=(_>>>7|I<<9)&8191;var S=u[d+8]|u[d+9]<<8;T+=(I>>>4|S<<12)&8191,U+=S>>>1&8191;var v=u[d+10]|u[d+11]<<8;Q+=(S>>>14|v<<2)&8191;var b=u[d+12]|u[d+13]<<8;F+=(v>>>11|b<<5)&8191;var O=u[d+14]|u[d+15]<<8;V+=(b>>>8|O<<8)&8191,D+=O>>>5|w;var W=0,te=W;te+=x*B,te+=C*(5*h),te+=R*(5*c),te+=N*(5*y),te+=T*(5*z),W=te>>>13,te&=8191,te+=U*(5*fe),te+=Q*(5*ne),te+=F*(5*$),te+=V*(5*E),te+=D*(5*H),W+=te>>>13,te&=8191;var P=W;P+=x*H,P+=C*B,P+=R*(5*h),P+=N*(5*c),P+=T*(5*y),W=P>>>13,P&=8191,P+=U*(5*z),P+=Q*(5*fe),P+=F*(5*ne),P+=V*(5*$),P+=D*(5*E),W+=P>>>13,P&=8191;var ee=W;ee+=x*E,ee+=C*H,ee+=R*B,ee+=N*(5*h),ee+=T*(5*c),W=ee>>>13,ee&=8191,ee+=U*(5*y),ee+=Q*(5*z),ee+=F*(5*fe),ee+=V*(5*ne),ee+=D*(5*$),W+=ee>>>13,ee&=8191;var k=W;k+=x*$,k+=C*E,k+=R*H,k+=N*B,k+=T*(5*h),W=k>>>13,k&=8191,k+=U*(5*c),k+=Q*(5*y),k+=F*(5*z),k+=V*(5*fe),k+=D*(5*ne),W+=k>>>13,k&=8191;var G=W;G+=x*ne,G+=C*$,G+=R*E,G+=N*H,G+=T*B,W=G>>>13,G&=8191,G+=U*(5*h),G+=Q*(5*c),G+=F*(5*y),G+=V*(5*z),G+=D*(5*fe),W+=G>>>13,G&=8191;var J=W;J+=x*fe,J+=C*ne,J+=R*$,J+=N*E,J+=T*H,W=J>>>13,J&=8191,J+=U*B,J+=Q*(5*h),J+=F*(5*c),J+=V*(5*y),J+=D*(5*z),W+=J>>>13,J&=8191;var A=W;A+=x*z,A+=C*fe,A+=R*ne,A+=N*$,A+=T*E,W=A>>>13,A&=8191,A+=U*H,A+=Q*B,A+=F*(5*h),A+=V*(5*c),A+=D*(5*y),W+=A>>>13,A&=8191;var K=W;K+=x*y,K+=C*z,K+=R*fe,K+=N*ne,K+=T*$,W=K>>>13,K&=8191,K+=U*E,K+=Q*H,K+=F*B,K+=V*(5*h),K+=D*(5*c),W+=K>>>13,K&=8191;var ae=W;ae+=x*c,ae+=C*y,ae+=R*z,ae+=N*fe,ae+=T*ne,W=ae>>>13,ae&=8191,ae+=U*$,ae+=Q*E,ae+=F*H,ae+=V*B,ae+=D*(5*h),W+=ae>>>13,ae&=8191;var oe=W;oe+=x*h,oe+=C*c,oe+=R*y,oe+=N*z,oe+=T*fe,W=oe>>>13,oe&=8191,oe+=U*ne,oe+=Q*$,oe+=F*E,oe+=V*H,oe+=D*B,W+=oe>>>13,oe&=8191,W=(W<<2)+W|0,W=W+te|0,te=W&8191,W=W>>>13,P+=W,x=te,C=P,R=ee,N=k,T=G,U=J,Q=A,F=K,V=ae,D=oe,d+=16,l-=16}this._h[0]=x,this._h[1]=C,this._h[2]=R,this._h[3]=N,this._h[4]=T,this._h[5]=U,this._h[6]=Q,this._h[7]=F,this._h[8]=V,this._h[9]=D},f.prototype.finish=function(u,d){d===void 0&&(d=0);var l=new Uint16Array(10),w,x,C,R;if(this._leftover){for(R=this._leftover,this._buffer[R++]=1;R<16;R++)this._buffer[R]=0;this._fin=1,this._blocks(this._buffer,0,16)}for(w=this._h[1]>>>13,this._h[1]&=8191,R=2;R<10;R++)this._h[R]+=w,w=this._h[R]>>>13,this._h[R]&=8191;for(this._h[0]+=w*5,w=this._h[0]>>>13,this._h[0]&=8191,this._h[1]+=w,w=this._h[1]>>>13,this._h[1]&=8191,this._h[2]+=w,l[0]=this._h[0]+5,w=l[0]>>>13,l[0]&=8191,R=1;R<10;R++)l[R]=this._h[R]+w,w=l[R]>>>13,l[R]&=8191;for(l[9]-=8192,x=(w^1)-1,R=0;R<10;R++)l[R]&=x;for(x=~x,R=0;R<10;R++)this._h[R]=this._h[R]&x|l[R];for(this._h[0]=(this._h[0]|this._h[1]<<13)&65535,this._h[1]=(this._h[1]>>>3|this._h[2]<<10)&65535,this._h[2]=(this._h[2]>>>6|this._h[3]<<7)&65535,this._h[3]=(this._h[3]>>>9|this._h[4]<<4)&65535,this._h[4]=(this._h[4]>>>12|this._h[5]<<1|this._h[6]<<14)&65535,this._h[5]=(this._h[6]>>>2|this._h[7]<<11)&65535,this._h[6]=(this._h[7]>>>5|this._h[8]<<8)&65535,this._h[7]=(this._h[8]>>>8|this._h[9]<<5)&65535,C=this._h[0]+this._pad[0],this._h[0]=C&65535,R=1;R<8;R++)C=(this._h[R]+this._pad[R]|0)+(C>>>16)|0,this._h[R]=C&65535;return u[d+0]=this._h[0]>>>0,u[d+1]=this._h[0]>>>8,u[d+2]=this._h[1]>>>0,u[d+3]=this._h[1]>>>8,u[d+4]=this._h[2]>>>0,u[d+5]=this._h[2]>>>8,u[d+6]=this._h[3]>>>0,u[d+7]=this._h[3]>>>8,u[d+8]=this._h[4]>>>0,u[d+9]=this._h[4]>>>8,u[d+10]=this._h[5]>>>0,u[d+11]=this._h[5]>>>8,u[d+12]=this._h[6]>>>0,u[d+13]=this._h[6]>>>8,u[d+14]=this._h[7]>>>0,u[d+15]=this._h[7]>>>8,this._finished=!0,this},f.prototype.update=function(u){var d=0,l=u.length,w;if(this._leftover){w=16-this._leftover,w>l&&(w=l);for(var x=0;x<w;x++)this._buffer[this._leftover+x]=u[d+x];if(l-=w,d+=w,this._leftover+=w,this._leftover<16)return this;this._blocks(this._buffer,0,16),this._leftover=0}if(l>=16&&(w=l-l%16,this._blocks(u,d,w),d+=w,l-=w),l){for(var x=0;x<l;x++)this._buffer[this._leftover+x]=u[d+x];this._leftover+=l}return this},f.prototype.digest=function(){if(this._finished)throw new Error("Poly1305 was finished");var u=new Uint8Array(16);return this.finish(u),u},f.prototype.clean=function(){return t.wipe(this._buffer),t.wipe(this._r),t.wipe(this._h),t.wipe(this._pad),this._leftover=0,this._fin=0,this._finished=!0,this},f}();r.Poly1305=i;function s(f,u){var d=new i(f);d.update(u);var l=d.digest();return d.clean(),l}r.oneTimeAuth=s;function a(f,u){return f.length!==r.DIGEST_LENGTH||u.length!==r.DIGEST_LENGTH?!1:e.equal(f,u)}r.equal=a}(Bh)),Bh}var jd;function L5(){return jd||(jd=1,function(r){Object.defineProperty(r,"__esModule",{value:!0});var e=D5(),t=B5(),i=Vi(),s=fo(),a=t0();r.KEY_LENGTH=32,r.NONCE_LENGTH=12,r.TAG_LENGTH=16;var f=new Uint8Array(16),u=function(){function d(l){if(this.nonceLength=r.NONCE_LENGTH,this.tagLength=r.TAG_LENGTH,l.length!==r.KEY_LENGTH)throw new Error("ChaCha20Poly1305 needs 32-byte key");this._key=new Uint8Array(l)}return d.prototype.seal=function(l,w,x,C){if(l.length>16)throw new Error("ChaCha20Poly1305: incorrect nonce length");var R=new Uint8Array(16);R.set(l,R.length-l.length);var N=new Uint8Array(32);e.stream(this._key,R,N,4);var T=w.length+this.tagLength,U;if(C){if(C.length!==T)throw new Error("ChaCha20Poly1305: incorrect destination length");U=C}else U=new Uint8Array(T);return e.streamXOR(this._key,R,w,U,4),this._authenticate(U.subarray(U.length-this.tagLength,U.length),N,U.subarray(0,U.length-this.tagLength),x),i.wipe(R),U},d.prototype.open=function(l,w,x,C){if(l.length>16)throw new Error("ChaCha20Poly1305: incorrect nonce length");if(w.length<this.tagLength)return null;var R=new Uint8Array(16);R.set(l,R.length-l.length);var N=new Uint8Array(32);e.stream(this._key,R,N,4);var T=new Uint8Array(this.tagLength);if(this._authenticate(T,N,w.subarray(0,w.length-this.tagLength),x),!a.equal(T,w.subarray(w.length-this.tagLength,w.length)))return null;var U=w.length-this.tagLength,Q;if(C){if(C.length!==U)throw new Error("ChaCha20Poly1305: incorrect destination length");Q=C}else Q=new Uint8Array(U);return e.streamXOR(this._key,R,w.subarray(0,w.length-this.tagLength),Q,4),i.wipe(R),Q},d.prototype.clean=function(){return i.wipe(this._key),this},d.prototype._authenticate=function(l,w,x,C){var R=new t.Poly1305(w);C&&(R.update(C),C.length%16>0&&R.update(f.subarray(C.length%16))),R.update(x),x.length%16>0&&R.update(f.subarray(x.length%16));var N=new Uint8Array(8);C&&s.writeUint64LE(C.length,N),R.update(N),s.writeUint64LE(x.length,N),R.update(N);for(var T=R.digest(),U=0;U<T.length;U++)l[U]=T[U];R.clean(),i.wipe(T),i.wipe(N)},d}();r.ChaCha20Poly1305=u}(Fh)),Fh}var sg=L5(),Ac={},Qs={},xc={},Hd;function U5(){if(Hd)return xc;Hd=1,Object.defineProperty(xc,"__esModule",{value:!0});function r(e){return typeof e.saveState<"u"&&typeof e.restoreState<"u"&&typeof e.cleanSavedState<"u"}return xc.isSerializableHash=r,xc}var Kd;function z5(){if(Kd)return Qs;Kd=1,Object.defineProperty(Qs,"__esModule",{value:!0});var r=U5(),e=t0(),t=Vi(),i=function(){function a(f,u){this._finished=!1,this._inner=new f,this._outer=new f,this.blockSize=this._outer.blockSize,this.digestLength=this._outer.digestLength;var d=new Uint8Array(this.blockSize);u.length>this.blockSize?this._inner.update(u).finish(d).clean():d.set(u);for(var l=0;l<d.length;l++)d[l]^=54;this._inner.update(d);for(var l=0;l<d.length;l++)d[l]^=106;this._outer.update(d),r.isSerializableHash(this._inner)&&r.isSerializableHash(this._outer)&&(this._innerKeyedState=this._inner.saveState(),this._outerKeyedState=this._outer.saveState()),t.wipe(d)}return a.prototype.reset=function(){if(!r.isSerializableHash(this._inner)||!r.isSerializableHash(this._outer))throw new Error("hmac: can't reset() because hash doesn't implement restoreState()");return this._inner.restoreState(this._innerKeyedState),this._outer.restoreState(this._outerKeyedState),this._finished=!1,this},a.prototype.clean=function(){r.isSerializableHash(this._inner)&&this._inner.cleanSavedState(this._innerKeyedState),r.isSerializableHash(this._outer)&&this._outer.cleanSavedState(this._outerKeyedState),this._inner.clean(),this._outer.clean()},a.prototype.update=function(f){return this._inner.update(f),this},a.prototype.finish=function(f){return this._finished?(this._outer.finish(f),this):(this._inner.finish(f),this._outer.update(f.subarray(0,this.digestLength)).finish(f),this._finished=!0,this)},a.prototype.digest=function(){var f=new Uint8Array(this.digestLength);return this.finish(f),f},a.prototype.saveState=function(){if(!r.isSerializableHash(this._inner))throw new Error("hmac: can't saveState() because hash doesn't implement it");return this._inner.saveState()},a.prototype.restoreState=function(f){if(!r.isSerializableHash(this._inner)||!r.isSerializableHash(this._outer))throw new Error("hmac: can't restoreState() because hash doesn't implement it");return this._inner.restoreState(f),this._outer.restoreState(this._outerKeyedState),this._finished=!1,this},a.prototype.cleanSavedState=function(f){if(!r.isSerializableHash(this._inner))throw new Error("hmac: can't cleanSavedState() because hash doesn't implement it");this._inner.cleanSavedState(f)},a}();Qs.HMAC=i;function s(a,f,u){var d=new i(a,f);d.update(u);var l=d.digest();return d.clean(),l}return Qs.hmac=s,Qs.equal=e.equal,Qs}var Gd;function k5(){if(Gd)return Ac;Gd=1,Object.defineProperty(Ac,"__esModule",{value:!0});var r=z5(),e=Vi(),t=function(){function i(s,a,f,u){f===void 0&&(f=new Uint8Array(0)),this._counter=new Uint8Array(1),this._hash=s,this._info=u;var d=r.hmac(this._hash,f,a);this._hmac=new r.HMAC(s,d),this._buffer=new Uint8Array(this._hmac.digestLength),this._bufpos=this._buffer.length}return i.prototype._fillBuffer=function(){this._counter[0]++;var s=this._counter[0];if(s===0)throw new Error("hkdf: cannot expand more");this._hmac.reset(),s>1&&this._hmac.update(this._buffer),this._info&&this._hmac.update(this._info),this._hmac.update(this._counter),this._hmac.finish(this._buffer),this._bufpos=0},i.prototype.expand=function(s){for(var a=new Uint8Array(s),f=0;f<a.length;f++)this._bufpos===this._buffer.length&&this._fillBuffer(),a[f]=this._buffer[this._bufpos++];return a},i.prototype.clean=function(){this._hmac.clean(),e.wipe(this._buffer),e.wipe(this._counter),this._bufpos=0},i}();return Ac.HKDF=t,Ac}var $5=k5(),Lh={},Fa={},Da={},Vd;function j5(){if(Vd)return Da;Vd=1,Object.defineProperty(Da,"__esModule",{value:!0}),Da.BrowserRandomSource=void 0;const r=65536;class e{constructor(){this.isAvailable=!1,this.isInstantiated=!1;const i=typeof self<"u"?self.crypto||self.msCrypto:null;i&&i.getRandomValues!==void 0&&(this._crypto=i,this.isAvailable=!0,this.isInstantiated=!0)}randomBytes(i){if(!this.isAvailable||!this._crypto)throw new Error("Browser random byte generator is not available.");const s=new Uint8Array(i);for(let a=0;a<s.length;a+=r)this._crypto.getRandomValues(s.subarray(a,a+Math.min(s.length-a,r)));return s}}return Da.BrowserRandomSource=e,Da}function H5(r){throw new Error('Could not dynamically require "'+r+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var Ba={},Jd;function K5(){if(Jd)return Ba;Jd=1,Object.defineProperty(Ba,"__esModule",{value:!0}),Ba.NodeRandomSource=void 0;const r=Vi();class e{constructor(){if(this.isAvailable=!1,this.isInstantiated=!1,typeof H5<"u"){const i=Zu;i&&i.randomBytes&&(this._crypto=i,this.isAvailable=!0,this.isInstantiated=!0)}}randomBytes(i){if(!this.isAvailable||!this._crypto)throw new Error("Node.js random byte generator is not available.");let s=this._crypto.randomBytes(i);if(s.length!==i)throw new Error("NodeRandomSource: got fewer bytes than requested");const a=new Uint8Array(i);for(let f=0;f<a.length;f++)a[f]=s[f];return(0,r.wipe)(s),a}}return Ba.NodeRandomSource=e,Ba}var Qd;function G5(){if(Qd)return Fa;Qd=1,Object.defineProperty(Fa,"__esModule",{value:!0}),Fa.SystemRandomSource=void 0;const r=j5(),e=K5();class t{constructor(){if(this.isAvailable=!1,this.name="",this._source=new r.BrowserRandomSource,this._source.isAvailable){this.isAvailable=!0,this.name="Browser";return}if(this._source=new e.NodeRandomSource,this._source.isAvailable){this.isAvailable=!0,this.name="Node";return}}randomBytes(s){if(!this.isAvailable)throw new Error("System random byte generator is not available.");return this._source.randomBytes(s)}}return Fa.SystemRandomSource=t,Fa}var Yd;function r0(){return Yd||(Yd=1,function(r){Object.defineProperty(r,"__esModule",{value:!0}),r.randomStringForEntropy=r.randomString=r.randomUint32=r.randomBytes=r.defaultRandomSource=void 0;const e=G5(),t=fo(),i=Vi();r.defaultRandomSource=new e.SystemRandomSource;function s(l,w=r.defaultRandomSource){return w.randomBytes(l)}r.randomBytes=s;function a(l=r.defaultRandomSource){const w=s(4,l),x=(0,t.readUint32LE)(w);return(0,i.wipe)(w),x}r.randomUint32=a;const f="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz";function u(l,w=f,x=r.defaultRandomSource){if(w.length<2)throw new Error("randomString charset is too short");if(w.length>256)throw new Error("randomString charset is too long");let C="";const R=w.length,N=256-256%R;for(;l>0;){const T=s(Math.ceil(l*256/N),x);for(let U=0;U<T.length&&l>0;U++){const Q=T[U];Q<N&&(C+=w.charAt(Q%R),l--)}(0,i.wipe)(T)}return C}r.randomString=u;function d(l,w=f,x=r.defaultRandomSource){const C=Math.ceil(l/(Math.log(w.length)/Math.LN2));return u(C,w,x)}r.randomStringForEntropy=d}(Lh)),Lh}var ho=r0(),Uh={},Wd;function V5(){return Wd||(Wd=1,function(r){Object.defineProperty(r,"__esModule",{value:!0});var e=fo(),t=Vi();r.DIGEST_LENGTH=32,r.BLOCK_SIZE=64;var i=function(){function u(){this.digestLength=r.DIGEST_LENGTH,this.blockSize=r.BLOCK_SIZE,this._state=new Int32Array(8),this._temp=new Int32Array(64),this._buffer=new Uint8Array(128),this._bufferLength=0,this._bytesHashed=0,this._finished=!1,this.reset()}return u.prototype._initState=function(){this._state[0]=1779033703,this._state[1]=3144134277,this._state[2]=1013904242,this._state[3]=2773480762,this._state[4]=1359893119,this._state[5]=2600822924,this._state[6]=528734635,this._state[7]=1541459225},u.prototype.reset=function(){return this._initState(),this._bufferLength=0,this._bytesHashed=0,this._finished=!1,this},u.prototype.clean=function(){t.wipe(this._buffer),t.wipe(this._temp),this.reset()},u.prototype.update=function(d,l){if(l===void 0&&(l=d.length),this._finished)throw new Error("SHA256: can't update because hash was finished.");var w=0;if(this._bytesHashed+=l,this._bufferLength>0){for(;this._bufferLength<this.blockSize&&l>0;)this._buffer[this._bufferLength++]=d[w++],l--;this._bufferLength===this.blockSize&&(a(this._temp,this._state,this._buffer,0,this.blockSize),this._bufferLength=0)}for(l>=this.blockSize&&(w=a(this._temp,this._state,d,w,l),l%=this.blockSize);l>0;)this._buffer[this._bufferLength++]=d[w++],l--;return this},u.prototype.finish=function(d){if(!this._finished){var l=this._bytesHashed,w=this._bufferLength,x=l/536870912|0,C=l<<3,R=l%64<56?64:128;this._buffer[w]=128;for(var N=w+1;N<R-8;N++)this._buffer[N]=0;e.writeUint32BE(x,this._buffer,R-8),e.writeUint32BE(C,this._buffer,R-4),a(this._temp,this._state,this._buffer,0,R),this._finished=!0}for(var N=0;N<this.digestLength/4;N++)e.writeUint32BE(this._state[N],d,N*4);return this},u.prototype.digest=function(){var d=new Uint8Array(this.digestLength);return this.finish(d),d},u.prototype.saveState=function(){if(this._finished)throw new Error("SHA256: cannot save finished state");return{state:new Int32Array(this._state),buffer:this._bufferLength>0?new Uint8Array(this._buffer):void 0,bufferLength:this._bufferLength,bytesHashed:this._bytesHashed}},u.prototype.restoreState=function(d){return this._state.set(d.state),this._bufferLength=d.bufferLength,d.buffer&&this._buffer.set(d.buffer),this._bytesHashed=d.bytesHashed,this._finished=!1,this},u.prototype.cleanSavedState=function(d){t.wipe(d.state),d.buffer&&t.wipe(d.buffer),d.bufferLength=0,d.bytesHashed=0},u}();r.SHA256=i;var s=new Int32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]);function a(u,d,l,w,x){for(;x>=64;){for(var C=d[0],R=d[1],N=d[2],T=d[3],U=d[4],Q=d[5],F=d[6],V=d[7],D=0;D<16;D++){var B=w+D*4;u[D]=e.readUint32BE(l,B)}for(var D=16;D<64;D++){var H=u[D-2],E=(H>>>17|H<<15)^(H>>>19|H<<13)^H>>>10;H=u[D-15];var $=(H>>>7|H<<25)^(H>>>18|H<<14)^H>>>3;u[D]=(E+u[D-7]|0)+($+u[D-16]|0)}for(var D=0;D<64;D++){var E=(((U>>>6|U<<26)^(U>>>11|U<<21)^(U>>>25|U<<7))+(U&Q^~U&F)|0)+(V+(s[D]+u[D]|0)|0)|0,$=((C>>>2|C<<30)^(C>>>13|C<<19)^(C>>>22|C<<10))+(C&R^C&N^R&N)|0;V=F,F=Q,Q=U,U=T+E|0,T=N,N=R,R=C,C=E+$|0}d[0]+=C,d[1]+=R,d[2]+=N,d[3]+=T,d[4]+=U,d[5]+=Q,d[6]+=F,d[7]+=V,w+=64,x-=64}return w}function f(u){var d=new i;d.update(u);var l=d.digest();return d.clean(),l}r.hash=f}(Uh)),Uh}var sf=V5(),zh={},Xd;function J5(){return Xd||(Xd=1,function(r){Object.defineProperty(r,"__esModule",{value:!0}),r.sharedKey=r.generateKeyPair=r.generateKeyPairFromSeed=r.scalarMultBase=r.scalarMult=r.SHARED_KEY_LENGTH=r.SECRET_KEY_LENGTH=r.PUBLIC_KEY_LENGTH=void 0;const e=r0(),t=Vi();r.PUBLIC_KEY_LENGTH=32,r.SECRET_KEY_LENGTH=32,r.SHARED_KEY_LENGTH=32;function i(D){const B=new Float64Array(16);if(D)for(let H=0;H<D.length;H++)B[H]=D[H];return B}const s=new Uint8Array(32);s[0]=9;const a=i([56129,1]);function f(D){let B=1;for(let H=0;H<16;H++){let E=D[H]+B+65535;B=Math.floor(E/65536),D[H]=E-B*65536}D[0]+=B-1+37*(B-1)}function u(D,B,H){const E=~(H-1);for(let $=0;$<16;$++){const ne=E&(D[$]^B[$]);D[$]^=ne,B[$]^=ne}}function d(D,B){const H=i(),E=i();for(let $=0;$<16;$++)E[$]=B[$];f(E),f(E),f(E);for(let $=0;$<2;$++){H[0]=E[0]-65517;for(let fe=1;fe<15;fe++)H[fe]=E[fe]-65535-(H[fe-1]>>16&1),H[fe-1]&=65535;H[15]=E[15]-32767-(H[14]>>16&1);const ne=H[15]>>16&1;H[14]&=65535,u(E,H,1-ne)}for(let $=0;$<16;$++)D[2*$]=E[$]&255,D[2*$+1]=E[$]>>8}function l(D,B){for(let H=0;H<16;H++)D[H]=B[2*H]+(B[2*H+1]<<8);D[15]&=32767}function w(D,B,H){for(let E=0;E<16;E++)D[E]=B[E]+H[E]}function x(D,B,H){for(let E=0;E<16;E++)D[E]=B[E]-H[E]}function C(D,B,H){let E,$,ne=0,fe=0,z=0,y=0,c=0,h=0,p=0,m=0,_=0,I=0,S=0,v=0,b=0,O=0,W=0,te=0,P=0,ee=0,k=0,G=0,J=0,A=0,K=0,ae=0,oe=0,he=0,be=0,we=0,Me=0,Qe=0,Ce=0,Te=H[0],Se=H[1],me=H[2],Ne=H[3],Oe=H[4],ve=H[5],qe=H[6],xe=H[7],ye=H[8],Le=H[9],Pe=H[10],_e=H[11],He=H[12],Ge=H[13],Ee=H[14],Ke=H[15];E=B[0],ne+=E*Te,fe+=E*Se,z+=E*me,y+=E*Ne,c+=E*Oe,h+=E*ve,p+=E*qe,m+=E*xe,_+=E*ye,I+=E*Le,S+=E*Pe,v+=E*_e,b+=E*He,O+=E*Ge,W+=E*Ee,te+=E*Ke,E=B[1],fe+=E*Te,z+=E*Se,y+=E*me,c+=E*Ne,h+=E*Oe,p+=E*ve,m+=E*qe,_+=E*xe,I+=E*ye,S+=E*Le,v+=E*Pe,b+=E*_e,O+=E*He,W+=E*Ge,te+=E*Ee,P+=E*Ke,E=B[2],z+=E*Te,y+=E*Se,c+=E*me,h+=E*Ne,p+=E*Oe,m+=E*ve,_+=E*qe,I+=E*xe,S+=E*ye,v+=E*Le,b+=E*Pe,O+=E*_e,W+=E*He,te+=E*Ge,P+=E*Ee,ee+=E*Ke,E=B[3],y+=E*Te,c+=E*Se,h+=E*me,p+=E*Ne,m+=E*Oe,_+=E*ve,I+=E*qe,S+=E*xe,v+=E*ye,b+=E*Le,O+=E*Pe,W+=E*_e,te+=E*He,P+=E*Ge,ee+=E*Ee,k+=E*Ke,E=B[4],c+=E*Te,h+=E*Se,p+=E*me,m+=E*Ne,_+=E*Oe,I+=E*ve,S+=E*qe,v+=E*xe,b+=E*ye,O+=E*Le,W+=E*Pe,te+=E*_e,P+=E*He,ee+=E*Ge,k+=E*Ee,G+=E*Ke,E=B[5],h+=E*Te,p+=E*Se,m+=E*me,_+=E*Ne,I+=E*Oe,S+=E*ve,v+=E*qe,b+=E*xe,O+=E*ye,W+=E*Le,te+=E*Pe,P+=E*_e,ee+=E*He,k+=E*Ge,G+=E*Ee,J+=E*Ke,E=B[6],p+=E*Te,m+=E*Se,_+=E*me,I+=E*Ne,S+=E*Oe,v+=E*ve,b+=E*qe,O+=E*xe,W+=E*ye,te+=E*Le,P+=E*Pe,ee+=E*_e,k+=E*He,G+=E*Ge,J+=E*Ee,A+=E*Ke,E=B[7],m+=E*Te,_+=E*Se,I+=E*me,S+=E*Ne,v+=E*Oe,b+=E*ve,O+=E*qe,W+=E*xe,te+=E*ye,P+=E*Le,ee+=E*Pe,k+=E*_e,G+=E*He,J+=E*Ge,A+=E*Ee,K+=E*Ke,E=B[8],_+=E*Te,I+=E*Se,S+=E*me,v+=E*Ne,b+=E*Oe,O+=E*ve,W+=E*qe,te+=E*xe,P+=E*ye,ee+=E*Le,k+=E*Pe,G+=E*_e,J+=E*He,A+=E*Ge,K+=E*Ee,ae+=E*Ke,E=B[9],I+=E*Te,S+=E*Se,v+=E*me,b+=E*Ne,O+=E*Oe,W+=E*ve,te+=E*qe,P+=E*xe,ee+=E*ye,k+=E*Le,G+=E*Pe,J+=E*_e,A+=E*He,K+=E*Ge,ae+=E*Ee,oe+=E*Ke,E=B[10],S+=E*Te,v+=E*Se,b+=E*me,O+=E*Ne,W+=E*Oe,te+=E*ve,P+=E*qe,ee+=E*xe,k+=E*ye,G+=E*Le,J+=E*Pe,A+=E*_e,K+=E*He,ae+=E*Ge,oe+=E*Ee,he+=E*Ke,E=B[11],v+=E*Te,b+=E*Se,O+=E*me,W+=E*Ne,te+=E*Oe,P+=E*ve,ee+=E*qe,k+=E*xe,G+=E*ye,J+=E*Le,A+=E*Pe,K+=E*_e,ae+=E*He,oe+=E*Ge,he+=E*Ee,be+=E*Ke,E=B[12],b+=E*Te,O+=E*Se,W+=E*me,te+=E*Ne,P+=E*Oe,ee+=E*ve,k+=E*qe,G+=E*xe,J+=E*ye,A+=E*Le,K+=E*Pe,ae+=E*_e,oe+=E*He,he+=E*Ge,be+=E*Ee,we+=E*Ke,E=B[13],O+=E*Te,W+=E*Se,te+=E*me,P+=E*Ne,ee+=E*Oe,k+=E*ve,G+=E*qe,J+=E*xe,A+=E*ye,K+=E*Le,ae+=E*Pe,oe+=E*_e,he+=E*He,be+=E*Ge,we+=E*Ee,Me+=E*Ke,E=B[14],W+=E*Te,te+=E*Se,P+=E*me,ee+=E*Ne,k+=E*Oe,G+=E*ve,J+=E*qe,A+=E*xe,K+=E*ye,ae+=E*Le,oe+=E*Pe,he+=E*_e,be+=E*He,we+=E*Ge,Me+=E*Ee,Qe+=E*Ke,E=B[15],te+=E*Te,P+=E*Se,ee+=E*me,k+=E*Ne,G+=E*Oe,J+=E*ve,A+=E*qe,K+=E*xe,ae+=E*ye,oe+=E*Le,he+=E*Pe,be+=E*_e,we+=E*He,Me+=E*Ge,Qe+=E*Ee,Ce+=E*Ke,ne+=38*P,fe+=38*ee,z+=38*k,y+=38*G,c+=38*J,h+=38*A,p+=38*K,m+=38*ae,_+=38*oe,I+=38*he,S+=38*be,v+=38*we,b+=38*Me,O+=38*Qe,W+=38*Ce,$=1,E=ne+$+65535,$=Math.floor(E/65536),ne=E-$*65536,E=fe+$+65535,$=Math.floor(E/65536),fe=E-$*65536,E=z+$+65535,$=Math.floor(E/65536),z=E-$*65536,E=y+$+65535,$=Math.floor(E/65536),y=E-$*65536,E=c+$+65535,$=Math.floor(E/65536),c=E-$*65536,E=h+$+65535,$=Math.floor(E/65536),h=E-$*65536,E=p+$+65535,$=Math.floor(E/65536),p=E-$*65536,E=m+$+65535,$=Math.floor(E/65536),m=E-$*65536,E=_+$+65535,$=Math.floor(E/65536),_=E-$*65536,E=I+$+65535,$=Math.floor(E/65536),I=E-$*65536,E=S+$+65535,$=Math.floor(E/65536),S=E-$*65536,E=v+$+65535,$=Math.floor(E/65536),v=E-$*65536,E=b+$+65535,$=Math.floor(E/65536),b=E-$*65536,E=O+$+65535,$=Math.floor(E/65536),O=E-$*65536,E=W+$+65535,$=Math.floor(E/65536),W=E-$*65536,E=te+$+65535,$=Math.floor(E/65536),te=E-$*65536,ne+=$-1+37*($-1),$=1,E=ne+$+65535,$=Math.floor(E/65536),ne=E-$*65536,E=fe+$+65535,$=Math.floor(E/65536),fe=E-$*65536,E=z+$+65535,$=Math.floor(E/65536),z=E-$*65536,E=y+$+65535,$=Math.floor(E/65536),y=E-$*65536,E=c+$+65535,$=Math.floor(E/65536),c=E-$*65536,E=h+$+65535,$=Math.floor(E/65536),h=E-$*65536,E=p+$+65535,$=Math.floor(E/65536),p=E-$*65536,E=m+$+65535,$=Math.floor(E/65536),m=E-$*65536,E=_+$+65535,$=Math.floor(E/65536),_=E-$*65536,E=I+$+65535,$=Math.floor(E/65536),I=E-$*65536,E=S+$+65535,$=Math.floor(E/65536),S=E-$*65536,E=v+$+65535,$=Math.floor(E/65536),v=E-$*65536,E=b+$+65535,$=Math.floor(E/65536),b=E-$*65536,E=O+$+65535,$=Math.floor(E/65536),O=E-$*65536,E=W+$+65535,$=Math.floor(E/65536),W=E-$*65536,E=te+$+65535,$=Math.floor(E/65536),te=E-$*65536,ne+=$-1+37*($-1),D[0]=ne,D[1]=fe,D[2]=z,D[3]=y,D[4]=c,D[5]=h,D[6]=p,D[7]=m,D[8]=_,D[9]=I,D[10]=S,D[11]=v,D[12]=b,D[13]=O,D[14]=W,D[15]=te}function R(D,B){C(D,B,B)}function N(D,B){const H=i();for(let E=0;E<16;E++)H[E]=B[E];for(let E=253;E>=0;E--)R(H,H),E!==2&&E!==4&&C(H,H,B);for(let E=0;E<16;E++)D[E]=H[E]}function T(D,B){const H=new Uint8Array(32),E=new Float64Array(80),$=i(),ne=i(),fe=i(),z=i(),y=i(),c=i();for(let _=0;_<31;_++)H[_]=D[_];H[31]=D[31]&127|64,H[0]&=248,l(E,B);for(let _=0;_<16;_++)ne[_]=E[_];$[0]=z[0]=1;for(let _=254;_>=0;--_){const I=H[_>>>3]>>>(_&7)&1;u($,ne,I),u(fe,z,I),w(y,$,fe),x($,$,fe),w(fe,ne,z),x(ne,ne,z),R(z,y),R(c,$),C($,fe,$),C(fe,ne,y),w(y,$,fe),x($,$,fe),R(ne,$),x(fe,z,c),C($,fe,a),w($,$,z),C(fe,fe,$),C($,z,c),C(z,ne,E),R(ne,y),u($,ne,I),u(fe,z,I)}for(let _=0;_<16;_++)E[_+16]=$[_],E[_+32]=fe[_],E[_+48]=ne[_],E[_+64]=z[_];const h=E.subarray(32),p=E.subarray(16);N(h,h),C(p,p,h);const m=new Uint8Array(32);return d(m,p),m}r.scalarMult=T;function U(D){return T(D,s)}r.scalarMultBase=U;function Q(D){if(D.length!==r.SECRET_KEY_LENGTH)throw new Error(`x25519: seed must be ${r.SECRET_KEY_LENGTH} bytes`);const B=new Uint8Array(D);return{publicKey:U(B),secretKey:B}}r.generateKeyPairFromSeed=Q;function F(D){const B=(0,e.randomBytes)(32,D),H=Q(B);return(0,t.wipe)(B),H}r.generateKeyPair=F;function V(D,B,H=!1){if(D.length!==r.PUBLIC_KEY_LENGTH)throw new Error("X25519: incorrect secret key length");if(B.length!==r.PUBLIC_KEY_LENGTH)throw new Error("X25519: incorrect public key length");const E=T(D,B);if(H){let $=0;for(let ne=0;ne<E.length;ne++)$|=E[ne];if($===0)throw new Error("X25519: invalid shared key")}return E}r.sharedKey=V}(zh)),zh}var ag=J5(),kh={};const Q5="6.6.1",Y5={version:Q5};var $h={},Fc={exports:{}},W5=Fc.exports,Zd;function Ln(){return Zd||(Zd=1,function(r){(function(e,t){function i(z,y){if(!z)throw new Error(y||"Assertion failed")}function s(z,y){z.super_=y;var c=function(){};c.prototype=y.prototype,z.prototype=new c,z.prototype.constructor=z}function a(z,y,c){if(a.isBN(z))return z;this.negative=0,this.words=null,this.length=0,this.red=null,z!==null&&((y==="le"||y==="be")&&(c=y,y=10),this._init(z||0,y||10,c||"be"))}typeof e=="object"?e.exports=a:t.BN=a,a.BN=a,a.wordSize=26;var f;try{typeof window<"u"&&typeof window.Buffer<"u"?f=window.Buffer:f=Zu.Buffer}catch{}a.isBN=function(y){return y instanceof a?!0:y!==null&&typeof y=="object"&&y.constructor.wordSize===a.wordSize&&Array.isArray(y.words)},a.max=function(y,c){return y.cmp(c)>0?y:c},a.min=function(y,c){return y.cmp(c)<0?y:c},a.prototype._init=function(y,c,h){if(typeof y=="number")return this._initNumber(y,c,h);if(typeof y=="object")return this._initArray(y,c,h);c==="hex"&&(c=16),i(c===(c|0)&&c>=2&&c<=36),y=y.toString().replace(/\s+/g,"");var p=0;y[0]==="-"&&(p++,this.negative=1),p<y.length&&(c===16?this._parseHex(y,p,h):(this._parseBase(y,c,p),h==="le"&&this._initArray(this.toArray(),c,h)))},a.prototype._initNumber=function(y,c,h){y<0&&(this.negative=1,y=-y),y<67108864?(this.words=[y&67108863],this.length=1):y<4503599627370496?(this.words=[y&67108863,y/67108864&67108863],this.length=2):(i(y<9007199254740992),this.words=[y&67108863,y/67108864&67108863,1],this.length=3),h==="le"&&this._initArray(this.toArray(),c,h)},a.prototype._initArray=function(y,c,h){if(i(typeof y.length=="number"),y.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(y.length/3),this.words=new Array(this.length);for(var p=0;p<this.length;p++)this.words[p]=0;var m,_,I=0;if(h==="be")for(p=y.length-1,m=0;p>=0;p-=3)_=y[p]|y[p-1]<<8|y[p-2]<<16,this.words[m]|=_<<I&67108863,this.words[m+1]=_>>>26-I&67108863,I+=24,I>=26&&(I-=26,m++);else if(h==="le")for(p=0,m=0;p<y.length;p+=3)_=y[p]|y[p+1]<<8|y[p+2]<<16,this.words[m]|=_<<I&67108863,this.words[m+1]=_>>>26-I&67108863,I+=24,I>=26&&(I-=26,m++);return this.strip()};function u(z,y){var c=z.charCodeAt(y);return c>=65&&c<=70?c-55:c>=97&&c<=102?c-87:c-48&15}function d(z,y,c){var h=u(z,c);return c-1>=y&&(h|=u(z,c-1)<<4),h}a.prototype._parseHex=function(y,c,h){this.length=Math.ceil((y.length-c)/6),this.words=new Array(this.length);for(var p=0;p<this.length;p++)this.words[p]=0;var m=0,_=0,I;if(h==="be")for(p=y.length-1;p>=c;p-=2)I=d(y,c,p)<<m,this.words[_]|=I&67108863,m>=18?(m-=18,_+=1,this.words[_]|=I>>>26):m+=8;else{var S=y.length-c;for(p=S%2===0?c+1:c;p<y.length;p+=2)I=d(y,c,p)<<m,this.words[_]|=I&67108863,m>=18?(m-=18,_+=1,this.words[_]|=I>>>26):m+=8}this.strip()};function l(z,y,c,h){for(var p=0,m=Math.min(z.length,c),_=y;_<m;_++){var I=z.charCodeAt(_)-48;p*=h,I>=49?p+=I-49+10:I>=17?p+=I-17+10:p+=I}return p}a.prototype._parseBase=function(y,c,h){this.words=[0],this.length=1;for(var p=0,m=1;m<=67108863;m*=c)p++;p--,m=m/c|0;for(var _=y.length-h,I=_%p,S=Math.min(_,_-I)+h,v=0,b=h;b<S;b+=p)v=l(y,b,b+p,c),this.imuln(m),this.words[0]+v<67108864?this.words[0]+=v:this._iaddn(v);if(I!==0){var O=1;for(v=l(y,b,y.length,c),b=0;b<I;b++)O*=c;this.imuln(O),this.words[0]+v<67108864?this.words[0]+=v:this._iaddn(v)}this.strip()},a.prototype.copy=function(y){y.words=new Array(this.length);for(var c=0;c<this.length;c++)y.words[c]=this.words[c];y.length=this.length,y.negative=this.negative,y.red=this.red},a.prototype.clone=function(){var y=new a(null);return this.copy(y),y},a.prototype._expand=function(y){for(;this.length<y;)this.words[this.length++]=0;return this},a.prototype.strip=function(){for(;this.length>1&&this.words[this.length-1]===0;)this.length--;return this._normSign()},a.prototype._normSign=function(){return this.length===1&&this.words[0]===0&&(this.negative=0),this},a.prototype.inspect=function(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"};var w=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],x=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],C=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];a.prototype.toString=function(y,c){y=y||10,c=c|0||1;var h;if(y===16||y==="hex"){h="";for(var p=0,m=0,_=0;_<this.length;_++){var I=this.words[_],S=((I<<p|m)&16777215).toString(16);m=I>>>24-p&16777215,p+=2,p>=26&&(p-=26,_--),m!==0||_!==this.length-1?h=w[6-S.length]+S+h:h=S+h}for(m!==0&&(h=m.toString(16)+h);h.length%c!==0;)h="0"+h;return this.negative!==0&&(h="-"+h),h}if(y===(y|0)&&y>=2&&y<=36){var v=x[y],b=C[y];h="";var O=this.clone();for(O.negative=0;!O.isZero();){var W=O.modn(b).toString(y);O=O.idivn(b),O.isZero()?h=W+h:h=w[v-W.length]+W+h}for(this.isZero()&&(h="0"+h);h.length%c!==0;)h="0"+h;return this.negative!==0&&(h="-"+h),h}i(!1,"Base should be between 2 and 36")},a.prototype.toNumber=function(){var y=this.words[0];return this.length===2?y+=this.words[1]*67108864:this.length===3&&this.words[2]===1?y+=4503599627370496+this.words[1]*67108864:this.length>2&&i(!1,"Number can only safely store up to 53 bits"),this.negative!==0?-y:y},a.prototype.toJSON=function(){return this.toString(16)},a.prototype.toBuffer=function(y,c){return i(typeof f<"u"),this.toArrayLike(f,y,c)},a.prototype.toArray=function(y,c){return this.toArrayLike(Array,y,c)},a.prototype.toArrayLike=function(y,c,h){var p=this.byteLength(),m=h||Math.max(1,p);i(p<=m,"byte array longer than desired length"),i(m>0,"Requested array length <= 0"),this.strip();var _=c==="le",I=new y(m),S,v,b=this.clone();if(_){for(v=0;!b.isZero();v++)S=b.andln(255),b.iushrn(8),I[v]=S;for(;v<m;v++)I[v]=0}else{for(v=0;v<m-p;v++)I[v]=0;for(v=0;!b.isZero();v++)S=b.andln(255),b.iushrn(8),I[m-v-1]=S}return I},Math.clz32?a.prototype._countBits=function(y){return 32-Math.clz32(y)}:a.prototype._countBits=function(y){var c=y,h=0;return c>=4096&&(h+=13,c>>>=13),c>=64&&(h+=7,c>>>=7),c>=8&&(h+=4,c>>>=4),c>=2&&(h+=2,c>>>=2),h+c},a.prototype._zeroBits=function(y){if(y===0)return 26;var c=y,h=0;return(c&8191)===0&&(h+=13,c>>>=13),(c&127)===0&&(h+=7,c>>>=7),(c&15)===0&&(h+=4,c>>>=4),(c&3)===0&&(h+=2,c>>>=2),(c&1)===0&&h++,h},a.prototype.bitLength=function(){var y=this.words[this.length-1],c=this._countBits(y);return(this.length-1)*26+c};function R(z){for(var y=new Array(z.bitLength()),c=0;c<y.length;c++){var h=c/26|0,p=c%26;y[c]=(z.words[h]&1<<p)>>>p}return y}a.prototype.zeroBits=function(){if(this.isZero())return 0;for(var y=0,c=0;c<this.length;c++){var h=this._zeroBits(this.words[c]);if(y+=h,h!==26)break}return y},a.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},a.prototype.toTwos=function(y){return this.negative!==0?this.abs().inotn(y).iaddn(1):this.clone()},a.prototype.fromTwos=function(y){return this.testn(y-1)?this.notn(y).iaddn(1).ineg():this.clone()},a.prototype.isNeg=function(){return this.negative!==0},a.prototype.neg=function(){return this.clone().ineg()},a.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},a.prototype.iuor=function(y){for(;this.length<y.length;)this.words[this.length++]=0;for(var c=0;c<y.length;c++)this.words[c]=this.words[c]|y.words[c];return this.strip()},a.prototype.ior=function(y){return i((this.negative|y.negative)===0),this.iuor(y)},a.prototype.or=function(y){return this.length>y.length?this.clone().ior(y):y.clone().ior(this)},a.prototype.uor=function(y){return this.length>y.length?this.clone().iuor(y):y.clone().iuor(this)},a.prototype.iuand=function(y){var c;this.length>y.length?c=y:c=this;for(var h=0;h<c.length;h++)this.words[h]=this.words[h]&y.words[h];return this.length=c.length,this.strip()},a.prototype.iand=function(y){return i((this.negative|y.negative)===0),this.iuand(y)},a.prototype.and=function(y){return this.length>y.length?this.clone().iand(y):y.clone().iand(this)},a.prototype.uand=function(y){return this.length>y.length?this.clone().iuand(y):y.clone().iuand(this)},a.prototype.iuxor=function(y){var c,h;this.length>y.length?(c=this,h=y):(c=y,h=this);for(var p=0;p<h.length;p++)this.words[p]=c.words[p]^h.words[p];if(this!==c)for(;p<c.length;p++)this.words[p]=c.words[p];return this.length=c.length,this.strip()},a.prototype.ixor=function(y){return i((this.negative|y.negative)===0),this.iuxor(y)},a.prototype.xor=function(y){return this.length>y.length?this.clone().ixor(y):y.clone().ixor(this)},a.prototype.uxor=function(y){return this.length>y.length?this.clone().iuxor(y):y.clone().iuxor(this)},a.prototype.inotn=function(y){i(typeof y=="number"&&y>=0);var c=Math.ceil(y/26)|0,h=y%26;this._expand(c),h>0&&c--;for(var p=0;p<c;p++)this.words[p]=~this.words[p]&67108863;return h>0&&(this.words[p]=~this.words[p]&67108863>>26-h),this.strip()},a.prototype.notn=function(y){return this.clone().inotn(y)},a.prototype.setn=function(y,c){i(typeof y=="number"&&y>=0);var h=y/26|0,p=y%26;return this._expand(h+1),c?this.words[h]=this.words[h]|1<<p:this.words[h]=this.words[h]&~(1<<p),this.strip()},a.prototype.iadd=function(y){var c;if(this.negative!==0&&y.negative===0)return this.negative=0,c=this.isub(y),this.negative^=1,this._normSign();if(this.negative===0&&y.negative!==0)return y.negative=0,c=this.isub(y),y.negative=1,c._normSign();var h,p;this.length>y.length?(h=this,p=y):(h=y,p=this);for(var m=0,_=0;_<p.length;_++)c=(h.words[_]|0)+(p.words[_]|0)+m,this.words[_]=c&67108863,m=c>>>26;for(;m!==0&&_<h.length;_++)c=(h.words[_]|0)+m,this.words[_]=c&67108863,m=c>>>26;if(this.length=h.length,m!==0)this.words[this.length]=m,this.length++;else if(h!==this)for(;_<h.length;_++)this.words[_]=h.words[_];return this},a.prototype.add=function(y){var c;return y.negative!==0&&this.negative===0?(y.negative=0,c=this.sub(y),y.negative^=1,c):y.negative===0&&this.negative!==0?(this.negative=0,c=y.sub(this),this.negative=1,c):this.length>y.length?this.clone().iadd(y):y.clone().iadd(this)},a.prototype.isub=function(y){if(y.negative!==0){y.negative=0;var c=this.iadd(y);return y.negative=1,c._normSign()}else if(this.negative!==0)return this.negative=0,this.iadd(y),this.negative=1,this._normSign();var h=this.cmp(y);if(h===0)return this.negative=0,this.length=1,this.words[0]=0,this;var p,m;h>0?(p=this,m=y):(p=y,m=this);for(var _=0,I=0;I<m.length;I++)c=(p.words[I]|0)-(m.words[I]|0)+_,_=c>>26,this.words[I]=c&67108863;for(;_!==0&&I<p.length;I++)c=(p.words[I]|0)+_,_=c>>26,this.words[I]=c&67108863;if(_===0&&I<p.length&&p!==this)for(;I<p.length;I++)this.words[I]=p.words[I];return this.length=Math.max(this.length,I),p!==this&&(this.negative=1),this.strip()},a.prototype.sub=function(y){return this.clone().isub(y)};function N(z,y,c){c.negative=y.negative^z.negative;var h=z.length+y.length|0;c.length=h,h=h-1|0;var p=z.words[0]|0,m=y.words[0]|0,_=p*m,I=_&67108863,S=_/67108864|0;c.words[0]=I;for(var v=1;v<h;v++){for(var b=S>>>26,O=S&67108863,W=Math.min(v,y.length-1),te=Math.max(0,v-z.length+1);te<=W;te++){var P=v-te|0;p=z.words[P]|0,m=y.words[te]|0,_=p*m+O,b+=_/67108864|0,O=_&67108863}c.words[v]=O|0,S=b|0}return S!==0?c.words[v]=S|0:c.length--,c.strip()}var T=function(y,c,h){var p=y.words,m=c.words,_=h.words,I=0,S,v,b,O=p[0]|0,W=O&8191,te=O>>>13,P=p[1]|0,ee=P&8191,k=P>>>13,G=p[2]|0,J=G&8191,A=G>>>13,K=p[3]|0,ae=K&8191,oe=K>>>13,he=p[4]|0,be=he&8191,we=he>>>13,Me=p[5]|0,Qe=Me&8191,Ce=Me>>>13,Te=p[6]|0,Se=Te&8191,me=Te>>>13,Ne=p[7]|0,Oe=Ne&8191,ve=Ne>>>13,qe=p[8]|0,xe=qe&8191,ye=qe>>>13,Le=p[9]|0,Pe=Le&8191,_e=Le>>>13,He=m[0]|0,Ge=He&8191,Ee=He>>>13,Ke=m[1]|0,ut=Ke&8191,Ve=Ke>>>13,wt=m[2]|0,lt=wt&8191,Ye=wt>>>13,xt=m[3]|0,Mt=xt&8191,Fe=xt>>>13,Xe=m[4]|0,tt=Xe&8191,De=Xe>>>13,et=m[5]|0,Ze=et&8191,ze=et>>>13,ft=m[6]|0,rt=ft&8191,ke=ft>>>13,it=m[7]|0,st=it&8191,Be=it>>>13,We=m[8]|0,ht=We&8191,$e=We>>>13,Ot=m[9]|0,qt=Ot&8191,at=Ot>>>13;h.negative=y.negative^c.negative,h.length=19,S=Math.imul(W,Ge),v=Math.imul(W,Ee),v=v+Math.imul(te,Ge)|0,b=Math.imul(te,Ee);var bt=(I+S|0)+((v&8191)<<13)|0;I=(b+(v>>>13)|0)+(bt>>>26)|0,bt&=67108863,S=Math.imul(ee,Ge),v=Math.imul(ee,Ee),v=v+Math.imul(k,Ge)|0,b=Math.imul(k,Ee),S=S+Math.imul(W,ut)|0,v=v+Math.imul(W,Ve)|0,v=v+Math.imul(te,ut)|0,b=b+Math.imul(te,Ve)|0;var Er=(I+S|0)+((v&8191)<<13)|0;I=(b+(v>>>13)|0)+(Er>>>26)|0,Er&=67108863,S=Math.imul(J,Ge),v=Math.imul(J,Ee),v=v+Math.imul(A,Ge)|0,b=Math.imul(A,Ee),S=S+Math.imul(ee,ut)|0,v=v+Math.imul(ee,Ve)|0,v=v+Math.imul(k,ut)|0,b=b+Math.imul(k,Ve)|0,S=S+Math.imul(W,lt)|0,v=v+Math.imul(W,Ye)|0,v=v+Math.imul(te,lt)|0,b=b+Math.imul(te,Ye)|0;var Sr=(I+S|0)+((v&8191)<<13)|0;I=(b+(v>>>13)|0)+(Sr>>>26)|0,Sr&=67108863,S=Math.imul(ae,Ge),v=Math.imul(ae,Ee),v=v+Math.imul(oe,Ge)|0,b=Math.imul(oe,Ee),S=S+Math.imul(J,ut)|0,v=v+Math.imul(J,Ve)|0,v=v+Math.imul(A,ut)|0,b=b+Math.imul(A,Ve)|0,S=S+Math.imul(ee,lt)|0,v=v+Math.imul(ee,Ye)|0,v=v+Math.imul(k,lt)|0,b=b+Math.imul(k,Ye)|0,S=S+Math.imul(W,Mt)|0,v=v+Math.imul(W,Fe)|0,v=v+Math.imul(te,Mt)|0,b=b+Math.imul(te,Fe)|0;var Mr=(I+S|0)+((v&8191)<<13)|0;I=(b+(v>>>13)|0)+(Mr>>>26)|0,Mr&=67108863,S=Math.imul(be,Ge),v=Math.imul(be,Ee),v=v+Math.imul(we,Ge)|0,b=Math.imul(we,Ee),S=S+Math.imul(ae,ut)|0,v=v+Math.imul(ae,Ve)|0,v=v+Math.imul(oe,ut)|0,b=b+Math.imul(oe,Ve)|0,S=S+Math.imul(J,lt)|0,v=v+Math.imul(J,Ye)|0,v=v+Math.imul(A,lt)|0,b=b+Math.imul(A,Ye)|0,S=S+Math.imul(ee,Mt)|0,v=v+Math.imul(ee,Fe)|0,v=v+Math.imul(k,Mt)|0,b=b+Math.imul(k,Fe)|0,S=S+Math.imul(W,tt)|0,v=v+Math.imul(W,De)|0,v=v+Math.imul(te,tt)|0,b=b+Math.imul(te,De)|0;var Ir=(I+S|0)+((v&8191)<<13)|0;I=(b+(v>>>13)|0)+(Ir>>>26)|0,Ir&=67108863,S=Math.imul(Qe,Ge),v=Math.imul(Qe,Ee),v=v+Math.imul(Ce,Ge)|0,b=Math.imul(Ce,Ee),S=S+Math.imul(be,ut)|0,v=v+Math.imul(be,Ve)|0,v=v+Math.imul(we,ut)|0,b=b+Math.imul(we,Ve)|0,S=S+Math.imul(ae,lt)|0,v=v+Math.imul(ae,Ye)|0,v=v+Math.imul(oe,lt)|0,b=b+Math.imul(oe,Ye)|0,S=S+Math.imul(J,Mt)|0,v=v+Math.imul(J,Fe)|0,v=v+Math.imul(A,Mt)|0,b=b+Math.imul(A,Fe)|0,S=S+Math.imul(ee,tt)|0,v=v+Math.imul(ee,De)|0,v=v+Math.imul(k,tt)|0,b=b+Math.imul(k,De)|0,S=S+Math.imul(W,Ze)|0,v=v+Math.imul(W,ze)|0,v=v+Math.imul(te,Ze)|0,b=b+Math.imul(te,ze)|0;var Pr=(I+S|0)+((v&8191)<<13)|0;I=(b+(v>>>13)|0)+(Pr>>>26)|0,Pr&=67108863,S=Math.imul(Se,Ge),v=Math.imul(Se,Ee),v=v+Math.imul(me,Ge)|0,b=Math.imul(me,Ee),S=S+Math.imul(Qe,ut)|0,v=v+Math.imul(Qe,Ve)|0,v=v+Math.imul(Ce,ut)|0,b=b+Math.imul(Ce,Ve)|0,S=S+Math.imul(be,lt)|0,v=v+Math.imul(be,Ye)|0,v=v+Math.imul(we,lt)|0,b=b+Math.imul(we,Ye)|0,S=S+Math.imul(ae,Mt)|0,v=v+Math.imul(ae,Fe)|0,v=v+Math.imul(oe,Mt)|0,b=b+Math.imul(oe,Fe)|0,S=S+Math.imul(J,tt)|0,v=v+Math.imul(J,De)|0,v=v+Math.imul(A,tt)|0,b=b+Math.imul(A,De)|0,S=S+Math.imul(ee,Ze)|0,v=v+Math.imul(ee,ze)|0,v=v+Math.imul(k,Ze)|0,b=b+Math.imul(k,ze)|0,S=S+Math.imul(W,rt)|0,v=v+Math.imul(W,ke)|0,v=v+Math.imul(te,rt)|0,b=b+Math.imul(te,ke)|0;var Xt=(I+S|0)+((v&8191)<<13)|0;I=(b+(v>>>13)|0)+(Xt>>>26)|0,Xt&=67108863,S=Math.imul(Oe,Ge),v=Math.imul(Oe,Ee),v=v+Math.imul(ve,Ge)|0,b=Math.imul(ve,Ee),S=S+Math.imul(Se,ut)|0,v=v+Math.imul(Se,Ve)|0,v=v+Math.imul(me,ut)|0,b=b+Math.imul(me,Ve)|0,S=S+Math.imul(Qe,lt)|0,v=v+Math.imul(Qe,Ye)|0,v=v+Math.imul(Ce,lt)|0,b=b+Math.imul(Ce,Ye)|0,S=S+Math.imul(be,Mt)|0,v=v+Math.imul(be,Fe)|0,v=v+Math.imul(we,Mt)|0,b=b+Math.imul(we,Fe)|0,S=S+Math.imul(ae,tt)|0,v=v+Math.imul(ae,De)|0,v=v+Math.imul(oe,tt)|0,b=b+Math.imul(oe,De)|0,S=S+Math.imul(J,Ze)|0,v=v+Math.imul(J,ze)|0,v=v+Math.imul(A,Ze)|0,b=b+Math.imul(A,ze)|0,S=S+Math.imul(ee,rt)|0,v=v+Math.imul(ee,ke)|0,v=v+Math.imul(k,rt)|0,b=b+Math.imul(k,ke)|0,S=S+Math.imul(W,st)|0,v=v+Math.imul(W,Be)|0,v=v+Math.imul(te,st)|0,b=b+Math.imul(te,Be)|0;var $r=(I+S|0)+((v&8191)<<13)|0;I=(b+(v>>>13)|0)+($r>>>26)|0,$r&=67108863,S=Math.imul(xe,Ge),v=Math.imul(xe,Ee),v=v+Math.imul(ye,Ge)|0,b=Math.imul(ye,Ee),S=S+Math.imul(Oe,ut)|0,v=v+Math.imul(Oe,Ve)|0,v=v+Math.imul(ve,ut)|0,b=b+Math.imul(ve,Ve)|0,S=S+Math.imul(Se,lt)|0,v=v+Math.imul(Se,Ye)|0,v=v+Math.imul(me,lt)|0,b=b+Math.imul(me,Ye)|0,S=S+Math.imul(Qe,Mt)|0,v=v+Math.imul(Qe,Fe)|0,v=v+Math.imul(Ce,Mt)|0,b=b+Math.imul(Ce,Fe)|0,S=S+Math.imul(be,tt)|0,v=v+Math.imul(be,De)|0,v=v+Math.imul(we,tt)|0,b=b+Math.imul(we,De)|0,S=S+Math.imul(ae,Ze)|0,v=v+Math.imul(ae,ze)|0,v=v+Math.imul(oe,Ze)|0,b=b+Math.imul(oe,ze)|0,S=S+Math.imul(J,rt)|0,v=v+Math.imul(J,ke)|0,v=v+Math.imul(A,rt)|0,b=b+Math.imul(A,ke)|0,S=S+Math.imul(ee,st)|0,v=v+Math.imul(ee,Be)|0,v=v+Math.imul(k,st)|0,b=b+Math.imul(k,Be)|0,S=S+Math.imul(W,ht)|0,v=v+Math.imul(W,$e)|0,v=v+Math.imul(te,ht)|0,b=b+Math.imul(te,$e)|0;var Ii=(I+S|0)+((v&8191)<<13)|0;I=(b+(v>>>13)|0)+(Ii>>>26)|0,Ii&=67108863,S=Math.imul(Pe,Ge),v=Math.imul(Pe,Ee),v=v+Math.imul(_e,Ge)|0,b=Math.imul(_e,Ee),S=S+Math.imul(xe,ut)|0,v=v+Math.imul(xe,Ve)|0,v=v+Math.imul(ye,ut)|0,b=b+Math.imul(ye,Ve)|0,S=S+Math.imul(Oe,lt)|0,v=v+Math.imul(Oe,Ye)|0,v=v+Math.imul(ve,lt)|0,b=b+Math.imul(ve,Ye)|0,S=S+Math.imul(Se,Mt)|0,v=v+Math.imul(Se,Fe)|0,v=v+Math.imul(me,Mt)|0,b=b+Math.imul(me,Fe)|0,S=S+Math.imul(Qe,tt)|0,v=v+Math.imul(Qe,De)|0,v=v+Math.imul(Ce,tt)|0,b=b+Math.imul(Ce,De)|0,S=S+Math.imul(be,Ze)|0,v=v+Math.imul(be,ze)|0,v=v+Math.imul(we,Ze)|0,b=b+Math.imul(we,ze)|0,S=S+Math.imul(ae,rt)|0,v=v+Math.imul(ae,ke)|0,v=v+Math.imul(oe,rt)|0,b=b+Math.imul(oe,ke)|0,S=S+Math.imul(J,st)|0,v=v+Math.imul(J,Be)|0,v=v+Math.imul(A,st)|0,b=b+Math.imul(A,Be)|0,S=S+Math.imul(ee,ht)|0,v=v+Math.imul(ee,$e)|0,v=v+Math.imul(k,ht)|0,b=b+Math.imul(k,$e)|0,S=S+Math.imul(W,qt)|0,v=v+Math.imul(W,at)|0,v=v+Math.imul(te,qt)|0,b=b+Math.imul(te,at)|0;var jr=(I+S|0)+((v&8191)<<13)|0;I=(b+(v>>>13)|0)+(jr>>>26)|0,jr&=67108863,S=Math.imul(Pe,ut),v=Math.imul(Pe,Ve),v=v+Math.imul(_e,ut)|0,b=Math.imul(_e,Ve),S=S+Math.imul(xe,lt)|0,v=v+Math.imul(xe,Ye)|0,v=v+Math.imul(ye,lt)|0,b=b+Math.imul(ye,Ye)|0,S=S+Math.imul(Oe,Mt)|0,v=v+Math.imul(Oe,Fe)|0,v=v+Math.imul(ve,Mt)|0,b=b+Math.imul(ve,Fe)|0,S=S+Math.imul(Se,tt)|0,v=v+Math.imul(Se,De)|0,v=v+Math.imul(me,tt)|0,b=b+Math.imul(me,De)|0,S=S+Math.imul(Qe,Ze)|0,v=v+Math.imul(Qe,ze)|0,v=v+Math.imul(Ce,Ze)|0,b=b+Math.imul(Ce,ze)|0,S=S+Math.imul(be,rt)|0,v=v+Math.imul(be,ke)|0,v=v+Math.imul(we,rt)|0,b=b+Math.imul(we,ke)|0,S=S+Math.imul(ae,st)|0,v=v+Math.imul(ae,Be)|0,v=v+Math.imul(oe,st)|0,b=b+Math.imul(oe,Be)|0,S=S+Math.imul(J,ht)|0,v=v+Math.imul(J,$e)|0,v=v+Math.imul(A,ht)|0,b=b+Math.imul(A,$e)|0,S=S+Math.imul(ee,qt)|0,v=v+Math.imul(ee,at)|0,v=v+Math.imul(k,qt)|0,b=b+Math.imul(k,at)|0;var Pi=(I+S|0)+((v&8191)<<13)|0;I=(b+(v>>>13)|0)+(Pi>>>26)|0,Pi&=67108863,S=Math.imul(Pe,lt),v=Math.imul(Pe,Ye),v=v+Math.imul(_e,lt)|0,b=Math.imul(_e,Ye),S=S+Math.imul(xe,Mt)|0,v=v+Math.imul(xe,Fe)|0,v=v+Math.imul(ye,Mt)|0,b=b+Math.imul(ye,Fe)|0,S=S+Math.imul(Oe,tt)|0,v=v+Math.imul(Oe,De)|0,v=v+Math.imul(ve,tt)|0,b=b+Math.imul(ve,De)|0,S=S+Math.imul(Se,Ze)|0,v=v+Math.imul(Se,ze)|0,v=v+Math.imul(me,Ze)|0,b=b+Math.imul(me,ze)|0,S=S+Math.imul(Qe,rt)|0,v=v+Math.imul(Qe,ke)|0,v=v+Math.imul(Ce,rt)|0,b=b+Math.imul(Ce,ke)|0,S=S+Math.imul(be,st)|0,v=v+Math.imul(be,Be)|0,v=v+Math.imul(we,st)|0,b=b+Math.imul(we,Be)|0,S=S+Math.imul(ae,ht)|0,v=v+Math.imul(ae,$e)|0,v=v+Math.imul(oe,ht)|0,b=b+Math.imul(oe,$e)|0,S=S+Math.imul(J,qt)|0,v=v+Math.imul(J,at)|0,v=v+Math.imul(A,qt)|0,b=b+Math.imul(A,at)|0;var Ri=(I+S|0)+((v&8191)<<13)|0;I=(b+(v>>>13)|0)+(Ri>>>26)|0,Ri&=67108863,S=Math.imul(Pe,Mt),v=Math.imul(Pe,Fe),v=v+Math.imul(_e,Mt)|0,b=Math.imul(_e,Fe),S=S+Math.imul(xe,tt)|0,v=v+Math.imul(xe,De)|0,v=v+Math.imul(ye,tt)|0,b=b+Math.imul(ye,De)|0,S=S+Math.imul(Oe,Ze)|0,v=v+Math.imul(Oe,ze)|0,v=v+Math.imul(ve,Ze)|0,b=b+Math.imul(ve,ze)|0,S=S+Math.imul(Se,rt)|0,v=v+Math.imul(Se,ke)|0,v=v+Math.imul(me,rt)|0,b=b+Math.imul(me,ke)|0,S=S+Math.imul(Qe,st)|0,v=v+Math.imul(Qe,Be)|0,v=v+Math.imul(Ce,st)|0,b=b+Math.imul(Ce,Be)|0,S=S+Math.imul(be,ht)|0,v=v+Math.imul(be,$e)|0,v=v+Math.imul(we,ht)|0,b=b+Math.imul(we,$e)|0,S=S+Math.imul(ae,qt)|0,v=v+Math.imul(ae,at)|0,v=v+Math.imul(oe,qt)|0,b=b+Math.imul(oe,at)|0;var Hr=(I+S|0)+((v&8191)<<13)|0;I=(b+(v>>>13)|0)+(Hr>>>26)|0,Hr&=67108863,S=Math.imul(Pe,tt),v=Math.imul(Pe,De),v=v+Math.imul(_e,tt)|0,b=Math.imul(_e,De),S=S+Math.imul(xe,Ze)|0,v=v+Math.imul(xe,ze)|0,v=v+Math.imul(ye,Ze)|0,b=b+Math.imul(ye,ze)|0,S=S+Math.imul(Oe,rt)|0,v=v+Math.imul(Oe,ke)|0,v=v+Math.imul(ve,rt)|0,b=b+Math.imul(ve,ke)|0,S=S+Math.imul(Se,st)|0,v=v+Math.imul(Se,Be)|0,v=v+Math.imul(me,st)|0,b=b+Math.imul(me,Be)|0,S=S+Math.imul(Qe,ht)|0,v=v+Math.imul(Qe,$e)|0,v=v+Math.imul(Ce,ht)|0,b=b+Math.imul(Ce,$e)|0,S=S+Math.imul(be,qt)|0,v=v+Math.imul(be,at)|0,v=v+Math.imul(we,qt)|0,b=b+Math.imul(we,at)|0;var hi=(I+S|0)+((v&8191)<<13)|0;I=(b+(v>>>13)|0)+(hi>>>26)|0,hi&=67108863,S=Math.imul(Pe,Ze),v=Math.imul(Pe,ze),v=v+Math.imul(_e,Ze)|0,b=Math.imul(_e,ze),S=S+Math.imul(xe,rt)|0,v=v+Math.imul(xe,ke)|0,v=v+Math.imul(ye,rt)|0,b=b+Math.imul(ye,ke)|0,S=S+Math.imul(Oe,st)|0,v=v+Math.imul(Oe,Be)|0,v=v+Math.imul(ve,st)|0,b=b+Math.imul(ve,Be)|0,S=S+Math.imul(Se,ht)|0,v=v+Math.imul(Se,$e)|0,v=v+Math.imul(me,ht)|0,b=b+Math.imul(me,$e)|0,S=S+Math.imul(Qe,qt)|0,v=v+Math.imul(Qe,at)|0,v=v+Math.imul(Ce,qt)|0,b=b+Math.imul(Ce,at)|0;var ui=(I+S|0)+((v&8191)<<13)|0;I=(b+(v>>>13)|0)+(ui>>>26)|0,ui&=67108863,S=Math.imul(Pe,rt),v=Math.imul(Pe,ke),v=v+Math.imul(_e,rt)|0,b=Math.imul(_e,ke),S=S+Math.imul(xe,st)|0,v=v+Math.imul(xe,Be)|0,v=v+Math.imul(ye,st)|0,b=b+Math.imul(ye,Be)|0,S=S+Math.imul(Oe,ht)|0,v=v+Math.imul(Oe,$e)|0,v=v+Math.imul(ve,ht)|0,b=b+Math.imul(ve,$e)|0,S=S+Math.imul(Se,qt)|0,v=v+Math.imul(Se,at)|0,v=v+Math.imul(me,qt)|0,b=b+Math.imul(me,at)|0;var fr=(I+S|0)+((v&8191)<<13)|0;I=(b+(v>>>13)|0)+(fr>>>26)|0,fr&=67108863,S=Math.imul(Pe,st),v=Math.imul(Pe,Be),v=v+Math.imul(_e,st)|0,b=Math.imul(_e,Be),S=S+Math.imul(xe,ht)|0,v=v+Math.imul(xe,$e)|0,v=v+Math.imul(ye,ht)|0,b=b+Math.imul(ye,$e)|0,S=S+Math.imul(Oe,qt)|0,v=v+Math.imul(Oe,at)|0,v=v+Math.imul(ve,qt)|0,b=b+Math.imul(ve,at)|0;var Ci=(I+S|0)+((v&8191)<<13)|0;I=(b+(v>>>13)|0)+(Ci>>>26)|0,Ci&=67108863,S=Math.imul(Pe,ht),v=Math.imul(Pe,$e),v=v+Math.imul(_e,ht)|0,b=Math.imul(_e,$e),S=S+Math.imul(xe,qt)|0,v=v+Math.imul(xe,at)|0,v=v+Math.imul(ye,qt)|0,b=b+Math.imul(ye,at)|0;var Ni=(I+S|0)+((v&8191)<<13)|0;I=(b+(v>>>13)|0)+(Ni>>>26)|0,Ni&=67108863,S=Math.imul(Pe,qt),v=Math.imul(Pe,at),v=v+Math.imul(_e,qt)|0,b=Math.imul(_e,at);var Oi=(I+S|0)+((v&8191)<<13)|0;return I=(b+(v>>>13)|0)+(Oi>>>26)|0,Oi&=67108863,_[0]=bt,_[1]=Er,_[2]=Sr,_[3]=Mr,_[4]=Ir,_[5]=Pr,_[6]=Xt,_[7]=$r,_[8]=Ii,_[9]=jr,_[10]=Pi,_[11]=Ri,_[12]=Hr,_[13]=hi,_[14]=ui,_[15]=fr,_[16]=Ci,_[17]=Ni,_[18]=Oi,I!==0&&(_[19]=I,h.length++),h};Math.imul||(T=N);function U(z,y,c){c.negative=y.negative^z.negative,c.length=z.length+y.length;for(var h=0,p=0,m=0;m<c.length-1;m++){var _=p;p=0;for(var I=h&67108863,S=Math.min(m,y.length-1),v=Math.max(0,m-z.length+1);v<=S;v++){var b=m-v,O=z.words[b]|0,W=y.words[v]|0,te=O*W,P=te&67108863;_=_+(te/67108864|0)|0,P=P+I|0,I=P&67108863,_=_+(P>>>26)|0,p+=_>>>26,_&=67108863}c.words[m]=I,h=_,_=p}return h!==0?c.words[m]=h:c.length--,c.strip()}function Q(z,y,c){var h=new F;return h.mulp(z,y,c)}a.prototype.mulTo=function(y,c){var h,p=this.length+y.length;return this.length===10&&y.length===10?h=T(this,y,c):p<63?h=N(this,y,c):p<1024?h=U(this,y,c):h=Q(this,y,c),h};function F(z,y){this.x=z,this.y=y}F.prototype.makeRBT=function(y){for(var c=new Array(y),h=a.prototype._countBits(y)-1,p=0;p<y;p++)c[p]=this.revBin(p,h,y);return c},F.prototype.revBin=function(y,c,h){if(y===0||y===h-1)return y;for(var p=0,m=0;m<c;m++)p|=(y&1)<<c-m-1,y>>=1;return p},F.prototype.permute=function(y,c,h,p,m,_){for(var I=0;I<_;I++)p[I]=c[y[I]],m[I]=h[y[I]]},F.prototype.transform=function(y,c,h,p,m,_){this.permute(_,y,c,h,p,m);for(var I=1;I<m;I<<=1)for(var S=I<<1,v=Math.cos(2*Math.PI/S),b=Math.sin(2*Math.PI/S),O=0;O<m;O+=S)for(var W=v,te=b,P=0;P<I;P++){var ee=h[O+P],k=p[O+P],G=h[O+P+I],J=p[O+P+I],A=W*G-te*J;J=W*J+te*G,G=A,h[O+P]=ee+G,p[O+P]=k+J,h[O+P+I]=ee-G,p[O+P+I]=k-J,P!==S&&(A=v*W-b*te,te=v*te+b*W,W=A)}},F.prototype.guessLen13b=function(y,c){var h=Math.max(c,y)|1,p=h&1,m=0;for(h=h/2|0;h;h=h>>>1)m++;return 1<<m+1+p},F.prototype.conjugate=function(y,c,h){if(!(h<=1))for(var p=0;p<h/2;p++){var m=y[p];y[p]=y[h-p-1],y[h-p-1]=m,m=c[p],c[p]=-c[h-p-1],c[h-p-1]=-m}},F.prototype.normalize13b=function(y,c){for(var h=0,p=0;p<c/2;p++){var m=Math.round(y[2*p+1]/c)*8192+Math.round(y[2*p]/c)+h;y[p]=m&67108863,m<67108864?h=0:h=m/67108864|0}return y},F.prototype.convert13b=function(y,c,h,p){for(var m=0,_=0;_<c;_++)m=m+(y[_]|0),h[2*_]=m&8191,m=m>>>13,h[2*_+1]=m&8191,m=m>>>13;for(_=2*c;_<p;++_)h[_]=0;i(m===0),i((m&-8192)===0)},F.prototype.stub=function(y){for(var c=new Array(y),h=0;h<y;h++)c[h]=0;return c},F.prototype.mulp=function(y,c,h){var p=2*this.guessLen13b(y.length,c.length),m=this.makeRBT(p),_=this.stub(p),I=new Array(p),S=new Array(p),v=new Array(p),b=new Array(p),O=new Array(p),W=new Array(p),te=h.words;te.length=p,this.convert13b(y.words,y.length,I,p),this.convert13b(c.words,c.length,b,p),this.transform(I,_,S,v,p,m),this.transform(b,_,O,W,p,m);for(var P=0;P<p;P++){var ee=S[P]*O[P]-v[P]*W[P];v[P]=S[P]*W[P]+v[P]*O[P],S[P]=ee}return this.conjugate(S,v,p),this.transform(S,v,te,_,p,m),this.conjugate(te,_,p),this.normalize13b(te,p),h.negative=y.negative^c.negative,h.length=y.length+c.length,h.strip()},a.prototype.mul=function(y){var c=new a(null);return c.words=new Array(this.length+y.length),this.mulTo(y,c)},a.prototype.mulf=function(y){var c=new a(null);return c.words=new Array(this.length+y.length),Q(this,y,c)},a.prototype.imul=function(y){return this.clone().mulTo(y,this)},a.prototype.imuln=function(y){i(typeof y=="number"),i(y<67108864);for(var c=0,h=0;h<this.length;h++){var p=(this.words[h]|0)*y,m=(p&67108863)+(c&67108863);c>>=26,c+=p/67108864|0,c+=m>>>26,this.words[h]=m&67108863}return c!==0&&(this.words[h]=c,this.length++),this},a.prototype.muln=function(y){return this.clone().imuln(y)},a.prototype.sqr=function(){return this.mul(this)},a.prototype.isqr=function(){return this.imul(this.clone())},a.prototype.pow=function(y){var c=R(y);if(c.length===0)return new a(1);for(var h=this,p=0;p<c.length&&c[p]===0;p++,h=h.sqr());if(++p<c.length)for(var m=h.sqr();p<c.length;p++,m=m.sqr())c[p]!==0&&(h=h.mul(m));return h},a.prototype.iushln=function(y){i(typeof y=="number"&&y>=0);var c=y%26,h=(y-c)/26,p=67108863>>>26-c<<26-c,m;if(c!==0){var _=0;for(m=0;m<this.length;m++){var I=this.words[m]&p,S=(this.words[m]|0)-I<<c;this.words[m]=S|_,_=I>>>26-c}_&&(this.words[m]=_,this.length++)}if(h!==0){for(m=this.length-1;m>=0;m--)this.words[m+h]=this.words[m];for(m=0;m<h;m++)this.words[m]=0;this.length+=h}return this.strip()},a.prototype.ishln=function(y){return i(this.negative===0),this.iushln(y)},a.prototype.iushrn=function(y,c,h){i(typeof y=="number"&&y>=0);var p;c?p=(c-c%26)/26:p=0;var m=y%26,_=Math.min((y-m)/26,this.length),I=67108863^67108863>>>m<<m,S=h;if(p-=_,p=Math.max(0,p),S){for(var v=0;v<_;v++)S.words[v]=this.words[v];S.length=_}if(_!==0)if(this.length>_)for(this.length-=_,v=0;v<this.length;v++)this.words[v]=this.words[v+_];else this.words[0]=0,this.length=1;var b=0;for(v=this.length-1;v>=0&&(b!==0||v>=p);v--){var O=this.words[v]|0;this.words[v]=b<<26-m|O>>>m,b=O&I}return S&&b!==0&&(S.words[S.length++]=b),this.length===0&&(this.words[0]=0,this.length=1),this.strip()},a.prototype.ishrn=function(y,c,h){return i(this.negative===0),this.iushrn(y,c,h)},a.prototype.shln=function(y){return this.clone().ishln(y)},a.prototype.ushln=function(y){return this.clone().iushln(y)},a.prototype.shrn=function(y){return this.clone().ishrn(y)},a.prototype.ushrn=function(y){return this.clone().iushrn(y)},a.prototype.testn=function(y){i(typeof y=="number"&&y>=0);var c=y%26,h=(y-c)/26,p=1<<c;if(this.length<=h)return!1;var m=this.words[h];return!!(m&p)},a.prototype.imaskn=function(y){i(typeof y=="number"&&y>=0);var c=y%26,h=(y-c)/26;if(i(this.negative===0,"imaskn works only with positive numbers"),this.length<=h)return this;if(c!==0&&h++,this.length=Math.min(h,this.length),c!==0){var p=67108863^67108863>>>c<<c;this.words[this.length-1]&=p}return this.strip()},a.prototype.maskn=function(y){return this.clone().imaskn(y)},a.prototype.iaddn=function(y){return i(typeof y=="number"),i(y<67108864),y<0?this.isubn(-y):this.negative!==0?this.length===1&&(this.words[0]|0)<y?(this.words[0]=y-(this.words[0]|0),this.negative=0,this):(this.negative=0,this.isubn(y),this.negative=1,this):this._iaddn(y)},a.prototype._iaddn=function(y){this.words[0]+=y;for(var c=0;c<this.length&&this.words[c]>=67108864;c++)this.words[c]-=67108864,c===this.length-1?this.words[c+1]=1:this.words[c+1]++;return this.length=Math.max(this.length,c+1),this},a.prototype.isubn=function(y){if(i(typeof y=="number"),i(y<67108864),y<0)return this.iaddn(-y);if(this.negative!==0)return this.negative=0,this.iaddn(y),this.negative=1,this;if(this.words[0]-=y,this.length===1&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var c=0;c<this.length&&this.words[c]<0;c++)this.words[c]+=67108864,this.words[c+1]-=1;return this.strip()},a.prototype.addn=function(y){return this.clone().iaddn(y)},a.prototype.subn=function(y){return this.clone().isubn(y)},a.prototype.iabs=function(){return this.negative=0,this},a.prototype.abs=function(){return this.clone().iabs()},a.prototype._ishlnsubmul=function(y,c,h){var p=y.length+h,m;this._expand(p);var _,I=0;for(m=0;m<y.length;m++){_=(this.words[m+h]|0)+I;var S=(y.words[m]|0)*c;_-=S&67108863,I=(_>>26)-(S/67108864|0),this.words[m+h]=_&67108863}for(;m<this.length-h;m++)_=(this.words[m+h]|0)+I,I=_>>26,this.words[m+h]=_&67108863;if(I===0)return this.strip();for(i(I===-1),I=0,m=0;m<this.length;m++)_=-(this.words[m]|0)+I,I=_>>26,this.words[m]=_&67108863;return this.negative=1,this.strip()},a.prototype._wordDiv=function(y,c){var h=this.length-y.length,p=this.clone(),m=y,_=m.words[m.length-1]|0,I=this._countBits(_);h=26-I,h!==0&&(m=m.ushln(h),p.iushln(h),_=m.words[m.length-1]|0);var S=p.length-m.length,v;if(c!=="mod"){v=new a(null),v.length=S+1,v.words=new Array(v.length);for(var b=0;b<v.length;b++)v.words[b]=0}var O=p.clone()._ishlnsubmul(m,1,S);O.negative===0&&(p=O,v&&(v.words[S]=1));for(var W=S-1;W>=0;W--){var te=(p.words[m.length+W]|0)*67108864+(p.words[m.length+W-1]|0);for(te=Math.min(te/_|0,67108863),p._ishlnsubmul(m,te,W);p.negative!==0;)te--,p.negative=0,p._ishlnsubmul(m,1,W),p.isZero()||(p.negative^=1);v&&(v.words[W]=te)}return v&&v.strip(),p.strip(),c!=="div"&&h!==0&&p.iushrn(h),{div:v||null,mod:p}},a.prototype.divmod=function(y,c,h){if(i(!y.isZero()),this.isZero())return{div:new a(0),mod:new a(0)};var p,m,_;return this.negative!==0&&y.negative===0?(_=this.neg().divmod(y,c),c!=="mod"&&(p=_.div.neg()),c!=="div"&&(m=_.mod.neg(),h&&m.negative!==0&&m.iadd(y)),{div:p,mod:m}):this.negative===0&&y.negative!==0?(_=this.divmod(y.neg(),c),c!=="mod"&&(p=_.div.neg()),{div:p,mod:_.mod}):(this.negative&y.negative)!==0?(_=this.neg().divmod(y.neg(),c),c!=="div"&&(m=_.mod.neg(),h&&m.negative!==0&&m.isub(y)),{div:_.div,mod:m}):y.length>this.length||this.cmp(y)<0?{div:new a(0),mod:this}:y.length===1?c==="div"?{div:this.divn(y.words[0]),mod:null}:c==="mod"?{div:null,mod:new a(this.modn(y.words[0]))}:{div:this.divn(y.words[0]),mod:new a(this.modn(y.words[0]))}:this._wordDiv(y,c)},a.prototype.div=function(y){return this.divmod(y,"div",!1).div},a.prototype.mod=function(y){return this.divmod(y,"mod",!1).mod},a.prototype.umod=function(y){return this.divmod(y,"mod",!0).mod},a.prototype.divRound=function(y){var c=this.divmod(y);if(c.mod.isZero())return c.div;var h=c.div.negative!==0?c.mod.isub(y):c.mod,p=y.ushrn(1),m=y.andln(1),_=h.cmp(p);return _<0||m===1&&_===0?c.div:c.div.negative!==0?c.div.isubn(1):c.div.iaddn(1)},a.prototype.modn=function(y){i(y<=67108863);for(var c=(1<<26)%y,h=0,p=this.length-1;p>=0;p--)h=(c*h+(this.words[p]|0))%y;return h},a.prototype.idivn=function(y){i(y<=67108863);for(var c=0,h=this.length-1;h>=0;h--){var p=(this.words[h]|0)+c*67108864;this.words[h]=p/y|0,c=p%y}return this.strip()},a.prototype.divn=function(y){return this.clone().idivn(y)},a.prototype.egcd=function(y){i(y.negative===0),i(!y.isZero());var c=this,h=y.clone();c.negative!==0?c=c.umod(y):c=c.clone();for(var p=new a(1),m=new a(0),_=new a(0),I=new a(1),S=0;c.isEven()&&h.isEven();)c.iushrn(1),h.iushrn(1),++S;for(var v=h.clone(),b=c.clone();!c.isZero();){for(var O=0,W=1;(c.words[0]&W)===0&&O<26;++O,W<<=1);if(O>0)for(c.iushrn(O);O-- >0;)(p.isOdd()||m.isOdd())&&(p.iadd(v),m.isub(b)),p.iushrn(1),m.iushrn(1);for(var te=0,P=1;(h.words[0]&P)===0&&te<26;++te,P<<=1);if(te>0)for(h.iushrn(te);te-- >0;)(_.isOdd()||I.isOdd())&&(_.iadd(v),I.isub(b)),_.iushrn(1),I.iushrn(1);c.cmp(h)>=0?(c.isub(h),p.isub(_),m.isub(I)):(h.isub(c),_.isub(p),I.isub(m))}return{a:_,b:I,gcd:h.iushln(S)}},a.prototype._invmp=function(y){i(y.negative===0),i(!y.isZero());var c=this,h=y.clone();c.negative!==0?c=c.umod(y):c=c.clone();for(var p=new a(1),m=new a(0),_=h.clone();c.cmpn(1)>0&&h.cmpn(1)>0;){for(var I=0,S=1;(c.words[0]&S)===0&&I<26;++I,S<<=1);if(I>0)for(c.iushrn(I);I-- >0;)p.isOdd()&&p.iadd(_),p.iushrn(1);for(var v=0,b=1;(h.words[0]&b)===0&&v<26;++v,b<<=1);if(v>0)for(h.iushrn(v);v-- >0;)m.isOdd()&&m.iadd(_),m.iushrn(1);c.cmp(h)>=0?(c.isub(h),p.isub(m)):(h.isub(c),m.isub(p))}var O;return c.cmpn(1)===0?O=p:O=m,O.cmpn(0)<0&&O.iadd(y),O},a.prototype.gcd=function(y){if(this.isZero())return y.abs();if(y.isZero())return this.abs();var c=this.clone(),h=y.clone();c.negative=0,h.negative=0;for(var p=0;c.isEven()&&h.isEven();p++)c.iushrn(1),h.iushrn(1);do{for(;c.isEven();)c.iushrn(1);for(;h.isEven();)h.iushrn(1);var m=c.cmp(h);if(m<0){var _=c;c=h,h=_}else if(m===0||h.cmpn(1)===0)break;c.isub(h)}while(!0);return h.iushln(p)},a.prototype.invm=function(y){return this.egcd(y).a.umod(y)},a.prototype.isEven=function(){return(this.words[0]&1)===0},a.prototype.isOdd=function(){return(this.words[0]&1)===1},a.prototype.andln=function(y){return this.words[0]&y},a.prototype.bincn=function(y){i(typeof y=="number");var c=y%26,h=(y-c)/26,p=1<<c;if(this.length<=h)return this._expand(h+1),this.words[h]|=p,this;for(var m=p,_=h;m!==0&&_<this.length;_++){var I=this.words[_]|0;I+=m,m=I>>>26,I&=67108863,this.words[_]=I}return m!==0&&(this.words[_]=m,this.length++),this},a.prototype.isZero=function(){return this.length===1&&this.words[0]===0},a.prototype.cmpn=function(y){var c=y<0;if(this.negative!==0&&!c)return-1;if(this.negative===0&&c)return 1;this.strip();var h;if(this.length>1)h=1;else{c&&(y=-y),i(y<=67108863,"Number is too big");var p=this.words[0]|0;h=p===y?0:p<y?-1:1}return this.negative!==0?-h|0:h},a.prototype.cmp=function(y){if(this.negative!==0&&y.negative===0)return-1;if(this.negative===0&&y.negative!==0)return 1;var c=this.ucmp(y);return this.negative!==0?-c|0:c},a.prototype.ucmp=function(y){if(this.length>y.length)return 1;if(this.length<y.length)return-1;for(var c=0,h=this.length-1;h>=0;h--){var p=this.words[h]|0,m=y.words[h]|0;if(p!==m){p<m?c=-1:p>m&&(c=1);break}}return c},a.prototype.gtn=function(y){return this.cmpn(y)===1},a.prototype.gt=function(y){return this.cmp(y)===1},a.prototype.gten=function(y){return this.cmpn(y)>=0},a.prototype.gte=function(y){return this.cmp(y)>=0},a.prototype.ltn=function(y){return this.cmpn(y)===-1},a.prototype.lt=function(y){return this.cmp(y)===-1},a.prototype.lten=function(y){return this.cmpn(y)<=0},a.prototype.lte=function(y){return this.cmp(y)<=0},a.prototype.eqn=function(y){return this.cmpn(y)===0},a.prototype.eq=function(y){return this.cmp(y)===0},a.red=function(y){return new ne(y)},a.prototype.toRed=function(y){return i(!this.red,"Already a number in reduction context"),i(this.negative===0,"red works only with positives"),y.convertTo(this)._forceRed(y)},a.prototype.fromRed=function(){return i(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},a.prototype._forceRed=function(y){return this.red=y,this},a.prototype.forceRed=function(y){return i(!this.red,"Already a number in reduction context"),this._forceRed(y)},a.prototype.redAdd=function(y){return i(this.red,"redAdd works only with red numbers"),this.red.add(this,y)},a.prototype.redIAdd=function(y){return i(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,y)},a.prototype.redSub=function(y){return i(this.red,"redSub works only with red numbers"),this.red.sub(this,y)},a.prototype.redISub=function(y){return i(this.red,"redISub works only with red numbers"),this.red.isub(this,y)},a.prototype.redShl=function(y){return i(this.red,"redShl works only with red numbers"),this.red.shl(this,y)},a.prototype.redMul=function(y){return i(this.red,"redMul works only with red numbers"),this.red._verify2(this,y),this.red.mul(this,y)},a.prototype.redIMul=function(y){return i(this.red,"redMul works only with red numbers"),this.red._verify2(this,y),this.red.imul(this,y)},a.prototype.redSqr=function(){return i(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},a.prototype.redISqr=function(){return i(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},a.prototype.redSqrt=function(){return i(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},a.prototype.redInvm=function(){return i(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},a.prototype.redNeg=function(){return i(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},a.prototype.redPow=function(y){return i(this.red&&!y.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,y)};var V={k256:null,p224:null,p192:null,p25519:null};function D(z,y){this.name=z,this.p=new a(y,16),this.n=this.p.bitLength(),this.k=new a(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}D.prototype._tmp=function(){var y=new a(null);return y.words=new Array(Math.ceil(this.n/13)),y},D.prototype.ireduce=function(y){var c=y,h;do this.split(c,this.tmp),c=this.imulK(c),c=c.iadd(this.tmp),h=c.bitLength();while(h>this.n);var p=h<this.n?-1:c.ucmp(this.p);return p===0?(c.words[0]=0,c.length=1):p>0?c.isub(this.p):c.strip!==void 0?c.strip():c._strip(),c},D.prototype.split=function(y,c){y.iushrn(this.n,0,c)},D.prototype.imulK=function(y){return y.imul(this.k)};function B(){D.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}s(B,D),B.prototype.split=function(y,c){for(var h=4194303,p=Math.min(y.length,9),m=0;m<p;m++)c.words[m]=y.words[m];if(c.length=p,y.length<=9){y.words[0]=0,y.length=1;return}var _=y.words[9];for(c.words[c.length++]=_&h,m=10;m<y.length;m++){var I=y.words[m]|0;y.words[m-10]=(I&h)<<4|_>>>22,_=I}_>>>=22,y.words[m-10]=_,_===0&&y.length>10?y.length-=10:y.length-=9},B.prototype.imulK=function(y){y.words[y.length]=0,y.words[y.length+1]=0,y.length+=2;for(var c=0,h=0;h<y.length;h++){var p=y.words[h]|0;c+=p*977,y.words[h]=c&67108863,c=p*64+(c/67108864|0)}return y.words[y.length-1]===0&&(y.length--,y.words[y.length-1]===0&&y.length--),y};function H(){D.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}s(H,D);function E(){D.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}s(E,D);function $(){D.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}s($,D),$.prototype.imulK=function(y){for(var c=0,h=0;h<y.length;h++){var p=(y.words[h]|0)*19+c,m=p&67108863;p>>>=26,y.words[h]=m,c=p}return c!==0&&(y.words[y.length++]=c),y},a._prime=function(y){if(V[y])return V[y];var c;if(y==="k256")c=new B;else if(y==="p224")c=new H;else if(y==="p192")c=new E;else if(y==="p25519")c=new $;else throw new Error("Unknown prime "+y);return V[y]=c,c};function ne(z){if(typeof z=="string"){var y=a._prime(z);this.m=y.p,this.prime=y}else i(z.gtn(1),"modulus must be greater than 1"),this.m=z,this.prime=null}ne.prototype._verify1=function(y){i(y.negative===0,"red works only with positives"),i(y.red,"red works only with red numbers")},ne.prototype._verify2=function(y,c){i((y.negative|c.negative)===0,"red works only with positives"),i(y.red&&y.red===c.red,"red works only with red numbers")},ne.prototype.imod=function(y){return this.prime?this.prime.ireduce(y)._forceRed(this):y.umod(this.m)._forceRed(this)},ne.prototype.neg=function(y){return y.isZero()?y.clone():this.m.sub(y)._forceRed(this)},ne.prototype.add=function(y,c){this._verify2(y,c);var h=y.add(c);return h.cmp(this.m)>=0&&h.isub(this.m),h._forceRed(this)},ne.prototype.iadd=function(y,c){this._verify2(y,c);var h=y.iadd(c);return h.cmp(this.m)>=0&&h.isub(this.m),h},ne.prototype.sub=function(y,c){this._verify2(y,c);var h=y.sub(c);return h.cmpn(0)<0&&h.iadd(this.m),h._forceRed(this)},ne.prototype.isub=function(y,c){this._verify2(y,c);var h=y.isub(c);return h.cmpn(0)<0&&h.iadd(this.m),h},ne.prototype.shl=function(y,c){return this._verify1(y),this.imod(y.ushln(c))},ne.prototype.imul=function(y,c){return this._verify2(y,c),this.imod(y.imul(c))},ne.prototype.mul=function(y,c){return this._verify2(y,c),this.imod(y.mul(c))},ne.prototype.isqr=function(y){return this.imul(y,y.clone())},ne.prototype.sqr=function(y){return this.mul(y,y)},ne.prototype.sqrt=function(y){if(y.isZero())return y.clone();var c=this.m.andln(3);if(i(c%2===1),c===3){var h=this.m.add(new a(1)).iushrn(2);return this.pow(y,h)}for(var p=this.m.subn(1),m=0;!p.isZero()&&p.andln(1)===0;)m++,p.iushrn(1);i(!p.isZero());var _=new a(1).toRed(this),I=_.redNeg(),S=this.m.subn(1).iushrn(1),v=this.m.bitLength();for(v=new a(2*v*v).toRed(this);this.pow(v,S).cmp(I)!==0;)v.redIAdd(I);for(var b=this.pow(v,p),O=this.pow(y,p.addn(1).iushrn(1)),W=this.pow(y,p),te=m;W.cmp(_)!==0;){for(var P=W,ee=0;P.cmp(_)!==0;ee++)P=P.redSqr();i(ee<te);var k=this.pow(b,new a(1).iushln(te-ee-1));O=O.redMul(k),b=k.redSqr(),W=W.redMul(b),te=ee}return O},ne.prototype.invm=function(y){var c=y._invmp(this.m);return c.negative!==0?(c.negative=0,this.imod(c).redNeg()):this.imod(c)},ne.prototype.pow=function(y,c){if(c.isZero())return new a(1).toRed(this);if(c.cmpn(1)===0)return y.clone();var h=4,p=new Array(1<<h);p[0]=new a(1).toRed(this),p[1]=y;for(var m=2;m<p.length;m++)p[m]=this.mul(p[m-1],y);var _=p[0],I=0,S=0,v=c.bitLength()%26;for(v===0&&(v=26),m=c.length-1;m>=0;m--){for(var b=c.words[m],O=v-1;O>=0;O--){var W=b>>O&1;if(_!==p[0]&&(_=this.sqr(_)),W===0&&I===0){S=0;continue}I<<=1,I|=W,S++,!(S!==h&&(m!==0||O!==0))&&(_=this.mul(_,p[I]),S=0,I=0)}v=26}return _},ne.prototype.convertTo=function(y){var c=y.umod(this.m);return c===y?c.clone():c},ne.prototype.convertFrom=function(y){var c=y.clone();return c.red=null,c},a.mont=function(y){return new fe(y)};function fe(z){ne.call(this,z),this.shift=this.m.bitLength(),this.shift%26!==0&&(this.shift+=26-this.shift%26),this.r=new a(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}s(fe,ne),fe.prototype.convertTo=function(y){return this.imod(y.ushln(this.shift))},fe.prototype.convertFrom=function(y){var c=this.imod(y.mul(this.rinv));return c.red=null,c},fe.prototype.imul=function(y,c){if(y.isZero()||c.isZero())return y.words[0]=0,y.length=1,y;var h=y.imul(c),p=h.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),m=h.isub(p).iushrn(this.shift),_=m;return m.cmp(this.m)>=0?_=m.isub(this.m):m.cmpn(0)<0&&(_=m.iadd(this.m)),_._forceRed(this)},fe.prototype.mul=function(y,c){if(y.isZero()||c.isZero())return new a(0)._forceRed(this);var h=y.mul(c),p=h.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),m=h.isub(p).iushrn(this.shift),_=m;return m.cmp(this.m)>=0?_=m.isub(this.m):m.cmpn(0)<0&&(_=m.iadd(this.m)),_._forceRed(this)},fe.prototype.invm=function(y){var c=this.imod(y._invmp(this.m).mul(this.r2));return c._forceRed(this)}})(r,W5)}(Fc)),Fc.exports}var jh={},ep;function og(){return ep||(ep=1,function(r){var e=r;function t(a,f){if(Array.isArray(a))return a.slice();if(!a)return[];var u=[];if(typeof a!="string"){for(var d=0;d<a.length;d++)u[d]=a[d]|0;return u}if(f==="hex"){a=a.replace(/[^a-z0-9]+/ig,""),a.length%2!==0&&(a="0"+a);for(var d=0;d<a.length;d+=2)u.push(parseInt(a[d]+a[d+1],16))}else for(var d=0;d<a.length;d++){var l=a.charCodeAt(d),w=l>>8,x=l&255;w?u.push(w,x):u.push(x)}return u}e.toArray=t;function i(a){return a.length===1?"0"+a:a}e.zero2=i;function s(a){for(var f="",u=0;u<a.length;u++)f+=i(a[u].toString(16));return f}e.toHex=s,e.encode=function(f,u){return u==="hex"?s(f):f}}(jh)),jh}var tp;function Mi(){return tp||(tp=1,function(r){var e=r,t=Ln(),i=Ms(),s=og();e.assert=i,e.toArray=s.toArray,e.zero2=s.zero2,e.toHex=s.toHex,e.encode=s.encode;function a(w,x,C){var R=new Array(Math.max(w.bitLength(),C)+1),N;for(N=0;N<R.length;N+=1)R[N]=0;var T=1<<x+1,U=w.clone();for(N=0;N<R.length;N++){var Q,F=U.andln(T-1);U.isOdd()?(F>(T>>1)-1?Q=(T>>1)-F:Q=F,U.isubn(Q)):Q=0,R[N]=Q,U.iushrn(1)}return R}e.getNAF=a;function f(w,x){var C=[[],[]];w=w.clone(),x=x.clone();for(var R=0,N=0,T;w.cmpn(-R)>0||x.cmpn(-N)>0;){var U=w.andln(3)+R&3,Q=x.andln(3)+N&3;U===3&&(U=-1),Q===3&&(Q=-1);var F;(U&1)===0?F=0:(T=w.andln(7)+R&7,(T===3||T===5)&&Q===2?F=-U:F=U),C[0].push(F);var V;(Q&1)===0?V=0:(T=x.andln(7)+N&7,(T===3||T===5)&&U===2?V=-Q:V=Q),C[1].push(V),2*R===F+1&&(R=1-R),2*N===V+1&&(N=1-N),w.iushrn(1),x.iushrn(1)}return C}e.getJSF=f;function u(w,x,C){var R="_"+x;w.prototype[x]=function(){return this[R]!==void 0?this[R]:this[R]=C.call(this)}}e.cachedProperty=u;function d(w){return typeof w=="string"?e.toArray(w,"hex"):w}e.parseBytes=d;function l(w){return new t(w,"hex","le")}e.intFromLE=l}($h)),$h}var Ec={exports:{}},rp;function cg(){if(rp)return Ec.exports;rp=1;var r;Ec.exports=function(s){return r||(r=new e(null)),r.generate(s)};function e(i){this.rand=i}if(Ec.exports.Rand=e,e.prototype.generate=function(s){return this._rand(s)},e.prototype._rand=function(s){if(this.rand.getBytes)return this.rand.getBytes(s);for(var a=new Uint8Array(s),f=0;f<a.length;f++)a[f]=this.rand.getByte();return a},typeof self=="object")self.crypto&&self.crypto.getRandomValues?e.prototype._rand=function(s){var a=new Uint8Array(s);return self.crypto.getRandomValues(a),a}:self.msCrypto&&self.msCrypto.getRandomValues?e.prototype._rand=function(s){var a=new Uint8Array(s);return self.msCrypto.getRandomValues(a),a}:typeof window=="object"&&(e.prototype._rand=function(){throw new Error("Not implemented yet")});else try{var t=Zu;if(typeof t.randomBytes!="function")throw new Error("Not supported");e.prototype._rand=function(s){return t.randomBytes(s)}}catch{}return Ec.exports}var Hh={},Kh,ip;function af(){if(ip)return Kh;ip=1;var r=Ln(),e=Mi(),t=e.getNAF,i=e.getJSF,s=e.assert;function a(u,d){this.type=u,this.p=new r(d.p,16),this.red=d.prime?r.red(d.prime):r.mont(this.p),this.zero=new r(0).toRed(this.red),this.one=new r(1).toRed(this.red),this.two=new r(2).toRed(this.red),this.n=d.n&&new r(d.n,16),this.g=d.g&&this.pointFromJSON(d.g,d.gRed),this._wnafT1=new Array(4),this._wnafT2=new Array(4),this._wnafT3=new Array(4),this._wnafT4=new Array(4),this._bitLength=this.n?this.n.bitLength():0;var l=this.n&&this.p.div(this.n);!l||l.cmpn(100)>0?this.redN=null:(this._maxwellTrick=!0,this.redN=this.n.toRed(this.red))}Kh=a,a.prototype.point=function(){throw new Error("Not implemented")},a.prototype.validate=function(){throw new Error("Not implemented")},a.prototype._fixedNafMul=function(d,l){s(d.precomputed);var w=d._getDoubles(),x=t(l,1,this._bitLength),C=(1<<w.step+1)-(w.step%2===0?2:1);C/=3;var R=[],N,T;for(N=0;N<x.length;N+=w.step){T=0;for(var U=N+w.step-1;U>=N;U--)T=(T<<1)+x[U];R.push(T)}for(var Q=this.jpoint(null,null,null),F=this.jpoint(null,null,null),V=C;V>0;V--){for(N=0;N<R.length;N++)T=R[N],T===V?F=F.mixedAdd(w.points[N]):T===-V&&(F=F.mixedAdd(w.points[N].neg()));Q=Q.add(F)}return Q.toP()},a.prototype._wnafMul=function(d,l){var w=4,x=d._getNAFPoints(w);w=x.wnd;for(var C=x.points,R=t(l,w,this._bitLength),N=this.jpoint(null,null,null),T=R.length-1;T>=0;T--){for(var U=0;T>=0&&R[T]===0;T--)U++;if(T>=0&&U++,N=N.dblp(U),T<0)break;var Q=R[T];s(Q!==0),d.type==="affine"?Q>0?N=N.mixedAdd(C[Q-1>>1]):N=N.mixedAdd(C[-Q-1>>1].neg()):Q>0?N=N.add(C[Q-1>>1]):N=N.add(C[-Q-1>>1].neg())}return d.type==="affine"?N.toP():N},a.prototype._wnafMulAdd=function(d,l,w,x,C){var R=this._wnafT1,N=this._wnafT2,T=this._wnafT3,U=0,Q,F,V;for(Q=0;Q<x;Q++){V=l[Q];var D=V._getNAFPoints(d);R[Q]=D.wnd,N[Q]=D.points}for(Q=x-1;Q>=1;Q-=2){var B=Q-1,H=Q;if(R[B]!==1||R[H]!==1){T[B]=t(w[B],R[B],this._bitLength),T[H]=t(w[H],R[H],this._bitLength),U=Math.max(T[B].length,U),U=Math.max(T[H].length,U);continue}var E=[l[B],null,null,l[H]];l[B].y.cmp(l[H].y)===0?(E[1]=l[B].add(l[H]),E[2]=l[B].toJ().mixedAdd(l[H].neg())):l[B].y.cmp(l[H].y.redNeg())===0?(E[1]=l[B].toJ().mixedAdd(l[H]),E[2]=l[B].add(l[H].neg())):(E[1]=l[B].toJ().mixedAdd(l[H]),E[2]=l[B].toJ().mixedAdd(l[H].neg()));var $=[-3,-1,-5,-7,0,7,5,1,3],ne=i(w[B],w[H]);for(U=Math.max(ne[0].length,U),T[B]=new Array(U),T[H]=new Array(U),F=0;F<U;F++){var fe=ne[0][F]|0,z=ne[1][F]|0;T[B][F]=$[(fe+1)*3+(z+1)],T[H][F]=0,N[B]=E}}var y=this.jpoint(null,null,null),c=this._wnafT4;for(Q=U;Q>=0;Q--){for(var h=0;Q>=0;){var p=!0;for(F=0;F<x;F++)c[F]=T[F][Q]|0,c[F]!==0&&(p=!1);if(!p)break;h++,Q--}if(Q>=0&&h++,y=y.dblp(h),Q<0)break;for(F=0;F<x;F++){var m=c[F];m!==0&&(m>0?V=N[F][m-1>>1]:m<0&&(V=N[F][-m-1>>1].neg()),V.type==="affine"?y=y.mixedAdd(V):y=y.add(V))}}for(Q=0;Q<x;Q++)N[Q]=null;return C?y:y.toP()};function f(u,d){this.curve=u,this.type=d,this.precomputed=null}return a.BasePoint=f,f.prototype.eq=function(){throw new Error("Not implemented")},f.prototype.validate=function(){return this.curve.validate(this)},a.prototype.decodePoint=function(d,l){d=e.toArray(d,l);var w=this.p.byteLength();if((d[0]===4||d[0]===6||d[0]===7)&&d.length-1===2*w){d[0]===6?s(d[d.length-1]%2===0):d[0]===7&&s(d[d.length-1]%2===1);var x=this.point(d.slice(1,1+w),d.slice(1+w,1+2*w));return x}else if((d[0]===2||d[0]===3)&&d.length-1===w)return this.pointFromX(d.slice(1,1+w),d[0]===3);throw new Error("Unknown point format")},f.prototype.encodeCompressed=function(d){return this.encode(d,!0)},f.prototype._encode=function(d){var l=this.curve.p.byteLength(),w=this.getX().toArray("be",l);return d?[this.getY().isEven()?2:3].concat(w):[4].concat(w,this.getY().toArray("be",l))},f.prototype.encode=function(d,l){return e.encode(this._encode(l),d)},f.prototype.precompute=function(d){if(this.precomputed)return this;var l={doubles:null,naf:null,beta:null};return l.naf=this._getNAFPoints(8),l.doubles=this._getDoubles(4,d),l.beta=this._getBeta(),this.precomputed=l,this},f.prototype._hasDoubles=function(d){if(!this.precomputed)return!1;var l=this.precomputed.doubles;return l?l.points.length>=Math.ceil((d.bitLength()+1)/l.step):!1},f.prototype._getDoubles=function(d,l){if(this.precomputed&&this.precomputed.doubles)return this.precomputed.doubles;for(var w=[this],x=this,C=0;C<l;C+=d){for(var R=0;R<d;R++)x=x.dbl();w.push(x)}return{step:d,points:w}},f.prototype._getNAFPoints=function(d){if(this.precomputed&&this.precomputed.naf)return this.precomputed.naf;for(var l=[this],w=(1<<d)-1,x=w===1?null:this.dbl(),C=1;C<w;C++)l[C]=l[C-1].add(x);return{wnd:d,points:l}},f.prototype._getBeta=function(){return null},f.prototype.dblp=function(d){for(var l=this,w=0;w<d;w++)l=l.dbl();return l},Kh}var Gh,np;function X5(){if(np)return Gh;np=1;var r=Mi(),e=Ln(),t=nf(),i=af(),s=r.assert;function a(d){i.call(this,"short",d),this.a=new e(d.a,16).toRed(this.red),this.b=new e(d.b,16).toRed(this.red),this.tinv=this.two.redInvm(),this.zeroA=this.a.fromRed().cmpn(0)===0,this.threeA=this.a.fromRed().sub(this.p).cmpn(-3)===0,this.endo=this._getEndomorphism(d),this._endoWnafT1=new Array(4),this._endoWnafT2=new Array(4)}t(a,i),Gh=a,a.prototype._getEndomorphism=function(l){if(!(!this.zeroA||!this.g||!this.n||this.p.modn(3)!==1)){var w,x;if(l.beta)w=new e(l.beta,16).toRed(this.red);else{var C=this._getEndoRoots(this.p);w=C[0].cmp(C[1])<0?C[0]:C[1],w=w.toRed(this.red)}if(l.lambda)x=new e(l.lambda,16);else{var R=this._getEndoRoots(this.n);this.g.mul(R[0]).x.cmp(this.g.x.redMul(w))===0?x=R[0]:(x=R[1],s(this.g.mul(x).x.cmp(this.g.x.redMul(w))===0))}var N;return l.basis?N=l.basis.map(function(T){return{a:new e(T.a,16),b:new e(T.b,16)}}):N=this._getEndoBasis(x),{beta:w,lambda:x,basis:N}}},a.prototype._getEndoRoots=function(l){var w=l===this.p?this.red:e.mont(l),x=new e(2).toRed(w).redInvm(),C=x.redNeg(),R=new e(3).toRed(w).redNeg().redSqrt().redMul(x),N=C.redAdd(R).fromRed(),T=C.redSub(R).fromRed();return[N,T]},a.prototype._getEndoBasis=function(l){for(var w=this.n.ushrn(Math.floor(this.n.bitLength()/2)),x=l,C=this.n.clone(),R=new e(1),N=new e(0),T=new e(0),U=new e(1),Q,F,V,D,B,H,E,$=0,ne,fe;x.cmpn(0)!==0;){var z=C.div(x);ne=C.sub(z.mul(x)),fe=T.sub(z.mul(R));var y=U.sub(z.mul(N));if(!V&&ne.cmp(w)<0)Q=E.neg(),F=R,V=ne.neg(),D=fe;else if(V&&++$===2)break;E=ne,C=x,x=ne,T=R,R=fe,U=N,N=y}B=ne.neg(),H=fe;var c=V.sqr().add(D.sqr()),h=B.sqr().add(H.sqr());return h.cmp(c)>=0&&(B=Q,H=F),V.negative&&(V=V.neg(),D=D.neg()),B.negative&&(B=B.neg(),H=H.neg()),[{a:V,b:D},{a:B,b:H}]},a.prototype._endoSplit=function(l){var w=this.endo.basis,x=w[0],C=w[1],R=C.b.mul(l).divRound(this.n),N=x.b.neg().mul(l).divRound(this.n),T=R.mul(x.a),U=N.mul(C.a),Q=R.mul(x.b),F=N.mul(C.b),V=l.sub(T).sub(U),D=Q.add(F).neg();return{k1:V,k2:D}},a.prototype.pointFromX=function(l,w){l=new e(l,16),l.red||(l=l.toRed(this.red));var x=l.redSqr().redMul(l).redIAdd(l.redMul(this.a)).redIAdd(this.b),C=x.redSqrt();if(C.redSqr().redSub(x).cmp(this.zero)!==0)throw new Error("invalid point");var R=C.fromRed().isOdd();return(w&&!R||!w&&R)&&(C=C.redNeg()),this.point(l,C)},a.prototype.validate=function(l){if(l.inf)return!0;var w=l.x,x=l.y,C=this.a.redMul(w),R=w.redSqr().redMul(w).redIAdd(C).redIAdd(this.b);return x.redSqr().redISub(R).cmpn(0)===0},a.prototype._endoWnafMulAdd=function(l,w,x){for(var C=this._endoWnafT1,R=this._endoWnafT2,N=0;N<l.length;N++){var T=this._endoSplit(w[N]),U=l[N],Q=U._getBeta();T.k1.negative&&(T.k1.ineg(),U=U.neg(!0)),T.k2.negative&&(T.k2.ineg(),Q=Q.neg(!0)),C[N*2]=U,C[N*2+1]=Q,R[N*2]=T.k1,R[N*2+1]=T.k2}for(var F=this._wnafMulAdd(1,C,R,N*2,x),V=0;V<N*2;V++)C[V]=null,R[V]=null;return F};function f(d,l,w,x){i.BasePoint.call(this,d,"affine"),l===null&&w===null?(this.x=null,this.y=null,this.inf=!0):(this.x=new e(l,16),this.y=new e(w,16),x&&(this.x.forceRed(this.curve.red),this.y.forceRed(this.curve.red)),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.inf=!1)}t(f,i.BasePoint),a.prototype.point=function(l,w,x){return new f(this,l,w,x)},a.prototype.pointFromJSON=function(l,w){return f.fromJSON(this,l,w)},f.prototype._getBeta=function(){if(this.curve.endo){var l=this.precomputed;if(l&&l.beta)return l.beta;var w=this.curve.point(this.x.redMul(this.curve.endo.beta),this.y);if(l){var x=this.curve,C=function(R){return x.point(R.x.redMul(x.endo.beta),R.y)};l.beta=w,w.precomputed={beta:null,naf:l.naf&&{wnd:l.naf.wnd,points:l.naf.points.map(C)},doubles:l.doubles&&{step:l.doubles.step,points:l.doubles.points.map(C)}}}return w}},f.prototype.toJSON=function(){return this.precomputed?[this.x,this.y,this.precomputed&&{doubles:this.precomputed.doubles&&{step:this.precomputed.doubles.step,points:this.precomputed.doubles.points.slice(1)},naf:this.precomputed.naf&&{wnd:this.precomputed.naf.wnd,points:this.precomputed.naf.points.slice(1)}}]:[this.x,this.y]},f.fromJSON=function(l,w,x){typeof w=="string"&&(w=JSON.parse(w));var C=l.point(w[0],w[1],x);if(!w[2])return C;function R(T){return l.point(T[0],T[1],x)}var N=w[2];return C.precomputed={beta:null,doubles:N.doubles&&{step:N.doubles.step,points:[C].concat(N.doubles.points.map(R))},naf:N.naf&&{wnd:N.naf.wnd,points:[C].concat(N.naf.points.map(R))}},C},f.prototype.inspect=function(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" y: "+this.y.fromRed().toString(16,2)+">"},f.prototype.isInfinity=function(){return this.inf},f.prototype.add=function(l){if(this.inf)return l;if(l.inf)return this;if(this.eq(l))return this.dbl();if(this.neg().eq(l))return this.curve.point(null,null);if(this.x.cmp(l.x)===0)return this.curve.point(null,null);var w=this.y.redSub(l.y);w.cmpn(0)!==0&&(w=w.redMul(this.x.redSub(l.x).redInvm()));var x=w.redSqr().redISub(this.x).redISub(l.x),C=w.redMul(this.x.redSub(x)).redISub(this.y);return this.curve.point(x,C)},f.prototype.dbl=function(){if(this.inf)return this;var l=this.y.redAdd(this.y);if(l.cmpn(0)===0)return this.curve.point(null,null);var w=this.curve.a,x=this.x.redSqr(),C=l.redInvm(),R=x.redAdd(x).redIAdd(x).redIAdd(w).redMul(C),N=R.redSqr().redISub(this.x.redAdd(this.x)),T=R.redMul(this.x.redSub(N)).redISub(this.y);return this.curve.point(N,T)},f.prototype.getX=function(){return this.x.fromRed()},f.prototype.getY=function(){return this.y.fromRed()},f.prototype.mul=function(l){return l=new e(l,16),this.isInfinity()?this:this._hasDoubles(l)?this.curve._fixedNafMul(this,l):this.curve.endo?this.curve._endoWnafMulAdd([this],[l]):this.curve._wnafMul(this,l)},f.prototype.mulAdd=function(l,w,x){var C=[this,w],R=[l,x];return this.curve.endo?this.curve._endoWnafMulAdd(C,R):this.curve._wnafMulAdd(1,C,R,2)},f.prototype.jmulAdd=function(l,w,x){var C=[this,w],R=[l,x];return this.curve.endo?this.curve._endoWnafMulAdd(C,R,!0):this.curve._wnafMulAdd(1,C,R,2,!0)},f.prototype.eq=function(l){return this===l||this.inf===l.inf&&(this.inf||this.x.cmp(l.x)===0&&this.y.cmp(l.y)===0)},f.prototype.neg=function(l){if(this.inf)return this;var w=this.curve.point(this.x,this.y.redNeg());if(l&&this.precomputed){var x=this.precomputed,C=function(R){return R.neg()};w.precomputed={naf:x.naf&&{wnd:x.naf.wnd,points:x.naf.points.map(C)},doubles:x.doubles&&{step:x.doubles.step,points:x.doubles.points.map(C)}}}return w},f.prototype.toJ=function(){if(this.inf)return this.curve.jpoint(null,null,null);var l=this.curve.jpoint(this.x,this.y,this.curve.one);return l};function u(d,l,w,x){i.BasePoint.call(this,d,"jacobian"),l===null&&w===null&&x===null?(this.x=this.curve.one,this.y=this.curve.one,this.z=new e(0)):(this.x=new e(l,16),this.y=new e(w,16),this.z=new e(x,16)),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)),this.zOne=this.z===this.curve.one}return t(u,i.BasePoint),a.prototype.jpoint=function(l,w,x){return new u(this,l,w,x)},u.prototype.toP=function(){if(this.isInfinity())return this.curve.point(null,null);var l=this.z.redInvm(),w=l.redSqr(),x=this.x.redMul(w),C=this.y.redMul(w).redMul(l);return this.curve.point(x,C)},u.prototype.neg=function(){return this.curve.jpoint(this.x,this.y.redNeg(),this.z)},u.prototype.add=function(l){if(this.isInfinity())return l;if(l.isInfinity())return this;var w=l.z.redSqr(),x=this.z.redSqr(),C=this.x.redMul(w),R=l.x.redMul(x),N=this.y.redMul(w.redMul(l.z)),T=l.y.redMul(x.redMul(this.z)),U=C.redSub(R),Q=N.redSub(T);if(U.cmpn(0)===0)return Q.cmpn(0)!==0?this.curve.jpoint(null,null,null):this.dbl();var F=U.redSqr(),V=F.redMul(U),D=C.redMul(F),B=Q.redSqr().redIAdd(V).redISub(D).redISub(D),H=Q.redMul(D.redISub(B)).redISub(N.redMul(V)),E=this.z.redMul(l.z).redMul(U);return this.curve.jpoint(B,H,E)},u.prototype.mixedAdd=function(l){if(this.isInfinity())return l.toJ();if(l.isInfinity())return this;var w=this.z.redSqr(),x=this.x,C=l.x.redMul(w),R=this.y,N=l.y.redMul(w).redMul(this.z),T=x.redSub(C),U=R.redSub(N);if(T.cmpn(0)===0)return U.cmpn(0)!==0?this.curve.jpoint(null,null,null):this.dbl();var Q=T.redSqr(),F=Q.redMul(T),V=x.redMul(Q),D=U.redSqr().redIAdd(F).redISub(V).redISub(V),B=U.redMul(V.redISub(D)).redISub(R.redMul(F)),H=this.z.redMul(T);return this.curve.jpoint(D,B,H)},u.prototype.dblp=function(l){if(l===0)return this;if(this.isInfinity())return this;if(!l)return this.dbl();var w;if(this.curve.zeroA||this.curve.threeA){var x=this;for(w=0;w<l;w++)x=x.dbl();return x}var C=this.curve.a,R=this.curve.tinv,N=this.x,T=this.y,U=this.z,Q=U.redSqr().redSqr(),F=T.redAdd(T);for(w=0;w<l;w++){var V=N.redSqr(),D=F.redSqr(),B=D.redSqr(),H=V.redAdd(V).redIAdd(V).redIAdd(C.redMul(Q)),E=N.redMul(D),$=H.redSqr().redISub(E.redAdd(E)),ne=E.redISub($),fe=H.redMul(ne);fe=fe.redIAdd(fe).redISub(B);var z=F.redMul(U);w+1<l&&(Q=Q.redMul(B)),N=$,U=z,F=fe}return this.curve.jpoint(N,F.redMul(R),U)},u.prototype.dbl=function(){return this.isInfinity()?this:this.curve.zeroA?this._zeroDbl():this.curve.threeA?this._threeDbl():this._dbl()},u.prototype._zeroDbl=function(){var l,w,x;if(this.zOne){var C=this.x.redSqr(),R=this.y.redSqr(),N=R.redSqr(),T=this.x.redAdd(R).redSqr().redISub(C).redISub(N);T=T.redIAdd(T);var U=C.redAdd(C).redIAdd(C),Q=U.redSqr().redISub(T).redISub(T),F=N.redIAdd(N);F=F.redIAdd(F),F=F.redIAdd(F),l=Q,w=U.redMul(T.redISub(Q)).redISub(F),x=this.y.redAdd(this.y)}else{var V=this.x.redSqr(),D=this.y.redSqr(),B=D.redSqr(),H=this.x.redAdd(D).redSqr().redISub(V).redISub(B);H=H.redIAdd(H);var E=V.redAdd(V).redIAdd(V),$=E.redSqr(),ne=B.redIAdd(B);ne=ne.redIAdd(ne),ne=ne.redIAdd(ne),l=$.redISub(H).redISub(H),w=E.redMul(H.redISub(l)).redISub(ne),x=this.y.redMul(this.z),x=x.redIAdd(x)}return this.curve.jpoint(l,w,x)},u.prototype._threeDbl=function(){var l,w,x;if(this.zOne){var C=this.x.redSqr(),R=this.y.redSqr(),N=R.redSqr(),T=this.x.redAdd(R).redSqr().redISub(C).redISub(N);T=T.redIAdd(T);var U=C.redAdd(C).redIAdd(C).redIAdd(this.curve.a),Q=U.redSqr().redISub(T).redISub(T);l=Q;var F=N.redIAdd(N);F=F.redIAdd(F),F=F.redIAdd(F),w=U.redMul(T.redISub(Q)).redISub(F),x=this.y.redAdd(this.y)}else{var V=this.z.redSqr(),D=this.y.redSqr(),B=this.x.redMul(D),H=this.x.redSub(V).redMul(this.x.redAdd(V));H=H.redAdd(H).redIAdd(H);var E=B.redIAdd(B);E=E.redIAdd(E);var $=E.redAdd(E);l=H.redSqr().redISub($),x=this.y.redAdd(this.z).redSqr().redISub(D).redISub(V);var ne=D.redSqr();ne=ne.redIAdd(ne),ne=ne.redIAdd(ne),ne=ne.redIAdd(ne),w=H.redMul(E.redISub(l)).redISub(ne)}return this.curve.jpoint(l,w,x)},u.prototype._dbl=function(){var l=this.curve.a,w=this.x,x=this.y,C=this.z,R=C.redSqr().redSqr(),N=w.redSqr(),T=x.redSqr(),U=N.redAdd(N).redIAdd(N).redIAdd(l.redMul(R)),Q=w.redAdd(w);Q=Q.redIAdd(Q);var F=Q.redMul(T),V=U.redSqr().redISub(F.redAdd(F)),D=F.redISub(V),B=T.redSqr();B=B.redIAdd(B),B=B.redIAdd(B),B=B.redIAdd(B);var H=U.redMul(D).redISub(B),E=x.redAdd(x).redMul(C);return this.curve.jpoint(V,H,E)},u.prototype.trpl=function(){if(!this.curve.zeroA)return this.dbl().add(this);var l=this.x.redSqr(),w=this.y.redSqr(),x=this.z.redSqr(),C=w.redSqr(),R=l.redAdd(l).redIAdd(l),N=R.redSqr(),T=this.x.redAdd(w).redSqr().redISub(l).redISub(C);T=T.redIAdd(T),T=T.redAdd(T).redIAdd(T),T=T.redISub(N);var U=T.redSqr(),Q=C.redIAdd(C);Q=Q.redIAdd(Q),Q=Q.redIAdd(Q),Q=Q.redIAdd(Q);var F=R.redIAdd(T).redSqr().redISub(N).redISub(U).redISub(Q),V=w.redMul(F);V=V.redIAdd(V),V=V.redIAdd(V);var D=this.x.redMul(U).redISub(V);D=D.redIAdd(D),D=D.redIAdd(D);var B=this.y.redMul(F.redMul(Q.redISub(F)).redISub(T.redMul(U)));B=B.redIAdd(B),B=B.redIAdd(B),B=B.redIAdd(B);var H=this.z.redAdd(T).redSqr().redISub(x).redISub(U);return this.curve.jpoint(D,B,H)},u.prototype.mul=function(l,w){return l=new e(l,w),this.curve._wnafMul(this,l)},u.prototype.eq=function(l){if(l.type==="affine")return this.eq(l.toJ());if(this===l)return!0;var w=this.z.redSqr(),x=l.z.redSqr();if(this.x.redMul(x).redISub(l.x.redMul(w)).cmpn(0)!==0)return!1;var C=w.redMul(this.z),R=x.redMul(l.z);return this.y.redMul(R).redISub(l.y.redMul(C)).cmpn(0)===0},u.prototype.eqXToP=function(l){var w=this.z.redSqr(),x=l.toRed(this.curve.red).redMul(w);if(this.x.cmp(x)===0)return!0;for(var C=l.clone(),R=this.curve.redN.redMul(w);;){if(C.iadd(this.curve.n),C.cmp(this.curve.p)>=0)return!1;if(x.redIAdd(R),this.x.cmp(x)===0)return!0}},u.prototype.inspect=function(){return this.isInfinity()?"<EC JPoint Infinity>":"<EC JPoint x: "+this.x.toString(16,2)+" y: "+this.y.toString(16,2)+" z: "+this.z.toString(16,2)+">"},u.prototype.isInfinity=function(){return this.z.cmpn(0)===0},Gh}var Vh,sp;function Z5(){if(sp)return Vh;sp=1;var r=Ln(),e=nf(),t=af(),i=Mi();function s(f){t.call(this,"mont",f),this.a=new r(f.a,16).toRed(this.red),this.b=new r(f.b,16).toRed(this.red),this.i4=new r(4).toRed(this.red).redInvm(),this.two=new r(2).toRed(this.red),this.a24=this.i4.redMul(this.a.redAdd(this.two))}e(s,t),Vh=s,s.prototype.validate=function(u){var d=u.normalize().x,l=d.redSqr(),w=l.redMul(d).redAdd(l.redMul(this.a)).redAdd(d),x=w.redSqrt();return x.redSqr().cmp(w)===0};function a(f,u,d){t.BasePoint.call(this,f,"projective"),u===null&&d===null?(this.x=this.curve.one,this.z=this.curve.zero):(this.x=new r(u,16),this.z=new r(d,16),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)))}return e(a,t.BasePoint),s.prototype.decodePoint=function(u,d){return this.point(i.toArray(u,d),1)},s.prototype.point=function(u,d){return new a(this,u,d)},s.prototype.pointFromJSON=function(u){return a.fromJSON(this,u)},a.prototype.precompute=function(){},a.prototype._encode=function(){return this.getX().toArray("be",this.curve.p.byteLength())},a.fromJSON=function(u,d){return new a(u,d[0],d[1]||u.one)},a.prototype.inspect=function(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" z: "+this.z.fromRed().toString(16,2)+">"},a.prototype.isInfinity=function(){return this.z.cmpn(0)===0},a.prototype.dbl=function(){var u=this.x.redAdd(this.z),d=u.redSqr(),l=this.x.redSub(this.z),w=l.redSqr(),x=d.redSub(w),C=d.redMul(w),R=x.redMul(w.redAdd(this.curve.a24.redMul(x)));return this.curve.point(C,R)},a.prototype.add=function(){throw new Error("Not supported on Montgomery curve")},a.prototype.diffAdd=function(u,d){var l=this.x.redAdd(this.z),w=this.x.redSub(this.z),x=u.x.redAdd(u.z),C=u.x.redSub(u.z),R=C.redMul(l),N=x.redMul(w),T=d.z.redMul(R.redAdd(N).redSqr()),U=d.x.redMul(R.redISub(N).redSqr());return this.curve.point(T,U)},a.prototype.mul=function(u){for(var d=u.clone(),l=this,w=this.curve.point(null,null),x=this,C=[];d.cmpn(0)!==0;d.iushrn(1))C.push(d.andln(1));for(var R=C.length-1;R>=0;R--)C[R]===0?(l=l.diffAdd(w,x),w=w.dbl()):(w=l.diffAdd(w,x),l=l.dbl());return w},a.prototype.mulAdd=function(){throw new Error("Not supported on Montgomery curve")},a.prototype.jumlAdd=function(){throw new Error("Not supported on Montgomery curve")},a.prototype.eq=function(u){return this.getX().cmp(u.getX())===0},a.prototype.normalize=function(){return this.x=this.x.redMul(this.z.redInvm()),this.z=this.curve.one,this},a.prototype.getX=function(){return this.normalize(),this.x.fromRed()},Vh}var Jh,ap;function e4(){if(ap)return Jh;ap=1;var r=Mi(),e=Ln(),t=nf(),i=af(),s=r.assert;function a(u){this.twisted=(u.a|0)!==1,this.mOneA=this.twisted&&(u.a|0)===-1,this.extended=this.mOneA,i.call(this,"edwards",u),this.a=new e(u.a,16).umod(this.red.m),this.a=this.a.toRed(this.red),this.c=new e(u.c,16).toRed(this.red),this.c2=this.c.redSqr(),this.d=new e(u.d,16).toRed(this.red),this.dd=this.d.redAdd(this.d),s(!this.twisted||this.c.fromRed().cmpn(1)===0),this.oneC=(u.c|0)===1}t(a,i),Jh=a,a.prototype._mulA=function(d){return this.mOneA?d.redNeg():this.a.redMul(d)},a.prototype._mulC=function(d){return this.oneC?d:this.c.redMul(d)},a.prototype.jpoint=function(d,l,w,x){return this.point(d,l,w,x)},a.prototype.pointFromX=function(d,l){d=new e(d,16),d.red||(d=d.toRed(this.red));var w=d.redSqr(),x=this.c2.redSub(this.a.redMul(w)),C=this.one.redSub(this.c2.redMul(this.d).redMul(w)),R=x.redMul(C.redInvm()),N=R.redSqrt();if(N.redSqr().redSub(R).cmp(this.zero)!==0)throw new Error("invalid point");var T=N.fromRed().isOdd();return(l&&!T||!l&&T)&&(N=N.redNeg()),this.point(d,N)},a.prototype.pointFromY=function(d,l){d=new e(d,16),d.red||(d=d.toRed(this.red));var w=d.redSqr(),x=w.redSub(this.c2),C=w.redMul(this.d).redMul(this.c2).redSub(this.a),R=x.redMul(C.redInvm());if(R.cmp(this.zero)===0){if(l)throw new Error("invalid point");return this.point(this.zero,d)}var N=R.redSqrt();if(N.redSqr().redSub(R).cmp(this.zero)!==0)throw new Error("invalid point");return N.fromRed().isOdd()!==l&&(N=N.redNeg()),this.point(N,d)},a.prototype.validate=function(d){if(d.isInfinity())return!0;d.normalize();var l=d.x.redSqr(),w=d.y.redSqr(),x=l.redMul(this.a).redAdd(w),C=this.c2.redMul(this.one.redAdd(this.d.redMul(l).redMul(w)));return x.cmp(C)===0};function f(u,d,l,w,x){i.BasePoint.call(this,u,"projective"),d===null&&l===null&&w===null?(this.x=this.curve.zero,this.y=this.curve.one,this.z=this.curve.one,this.t=this.curve.zero,this.zOne=!0):(this.x=new e(d,16),this.y=new e(l,16),this.z=w?new e(w,16):this.curve.one,this.t=x&&new e(x,16),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)),this.t&&!this.t.red&&(this.t=this.t.toRed(this.curve.red)),this.zOne=this.z===this.curve.one,this.curve.extended&&!this.t&&(this.t=this.x.redMul(this.y),this.zOne||(this.t=this.t.redMul(this.z.redInvm()))))}return t(f,i.BasePoint),a.prototype.pointFromJSON=function(d){return f.fromJSON(this,d)},a.prototype.point=function(d,l,w,x){return new f(this,d,l,w,x)},f.fromJSON=function(d,l){return new f(d,l[0],l[1],l[2])},f.prototype.inspect=function(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" y: "+this.y.fromRed().toString(16,2)+" z: "+this.z.fromRed().toString(16,2)+">"},f.prototype.isInfinity=function(){return this.x.cmpn(0)===0&&(this.y.cmp(this.z)===0||this.zOne&&this.y.cmp(this.curve.c)===0)},f.prototype._extDbl=function(){var d=this.x.redSqr(),l=this.y.redSqr(),w=this.z.redSqr();w=w.redIAdd(w);var x=this.curve._mulA(d),C=this.x.redAdd(this.y).redSqr().redISub(d).redISub(l),R=x.redAdd(l),N=R.redSub(w),T=x.redSub(l),U=C.redMul(N),Q=R.redMul(T),F=C.redMul(T),V=N.redMul(R);return this.curve.point(U,Q,V,F)},f.prototype._projDbl=function(){var d=this.x.redAdd(this.y).redSqr(),l=this.x.redSqr(),w=this.y.redSqr(),x,C,R,N,T,U;if(this.curve.twisted){N=this.curve._mulA(l);var Q=N.redAdd(w);this.zOne?(x=d.redSub(l).redSub(w).redMul(Q.redSub(this.curve.two)),C=Q.redMul(N.redSub(w)),R=Q.redSqr().redSub(Q).redSub(Q)):(T=this.z.redSqr(),U=Q.redSub(T).redISub(T),x=d.redSub(l).redISub(w).redMul(U),C=Q.redMul(N.redSub(w)),R=Q.redMul(U))}else N=l.redAdd(w),T=this.curve._mulC(this.z).redSqr(),U=N.redSub(T).redSub(T),x=this.curve._mulC(d.redISub(N)).redMul(U),C=this.curve._mulC(N).redMul(l.redISub(w)),R=N.redMul(U);return this.curve.point(x,C,R)},f.prototype.dbl=function(){return this.isInfinity()?this:this.curve.extended?this._extDbl():this._projDbl()},f.prototype._extAdd=function(d){var l=this.y.redSub(this.x).redMul(d.y.redSub(d.x)),w=this.y.redAdd(this.x).redMul(d.y.redAdd(d.x)),x=this.t.redMul(this.curve.dd).redMul(d.t),C=this.z.redMul(d.z.redAdd(d.z)),R=w.redSub(l),N=C.redSub(x),T=C.redAdd(x),U=w.redAdd(l),Q=R.redMul(N),F=T.redMul(U),V=R.redMul(U),D=N.redMul(T);return this.curve.point(Q,F,D,V)},f.prototype._projAdd=function(d){var l=this.z.redMul(d.z),w=l.redSqr(),x=this.x.redMul(d.x),C=this.y.redMul(d.y),R=this.curve.d.redMul(x).redMul(C),N=w.redSub(R),T=w.redAdd(R),U=this.x.redAdd(this.y).redMul(d.x.redAdd(d.y)).redISub(x).redISub(C),Q=l.redMul(N).redMul(U),F,V;return this.curve.twisted?(F=l.redMul(T).redMul(C.redSub(this.curve._mulA(x))),V=N.redMul(T)):(F=l.redMul(T).redMul(C.redSub(x)),V=this.curve._mulC(N).redMul(T)),this.curve.point(Q,F,V)},f.prototype.add=function(d){return this.isInfinity()?d:d.isInfinity()?this:this.curve.extended?this._extAdd(d):this._projAdd(d)},f.prototype.mul=function(d){return this._hasDoubles(d)?this.curve._fixedNafMul(this,d):this.curve._wnafMul(this,d)},f.prototype.mulAdd=function(d,l,w){return this.curve._wnafMulAdd(1,[this,l],[d,w],2,!1)},f.prototype.jmulAdd=function(d,l,w){return this.curve._wnafMulAdd(1,[this,l],[d,w],2,!0)},f.prototype.normalize=function(){if(this.zOne)return this;var d=this.z.redInvm();return this.x=this.x.redMul(d),this.y=this.y.redMul(d),this.t&&(this.t=this.t.redMul(d)),this.z=this.curve.one,this.zOne=!0,this},f.prototype.neg=function(){return this.curve.point(this.x.redNeg(),this.y,this.z,this.t&&this.t.redNeg())},f.prototype.getX=function(){return this.normalize(),this.x.fromRed()},f.prototype.getY=function(){return this.normalize(),this.y.fromRed()},f.prototype.eq=function(d){return this===d||this.getX().cmp(d.getX())===0&&this.getY().cmp(d.getY())===0},f.prototype.eqXToP=function(d){var l=d.toRed(this.curve.red).redMul(this.z);if(this.x.cmp(l)===0)return!0;for(var w=d.clone(),x=this.curve.redN.redMul(this.z);;){if(w.iadd(this.curve.n),w.cmp(this.curve.p)>=0)return!1;if(l.redIAdd(x),this.x.cmp(l)===0)return!0}},f.prototype.toP=f.prototype.normalize,f.prototype.mixedAdd=f.prototype.add,Jh}var op;function fg(){return op||(op=1,function(r){var e=r;e.base=af(),e.short=X5(),e.mont=Z5(),e.edwards=e4()}(Hh)),Hh}var Qh={},Yh,cp;function t4(){return cp||(cp=1,Yh={doubles:{step:4,points:[["e60fce93b59e9ec53011aabc21c23e97b2a31369b87a5ae9c44ee89e2a6dec0a","f7e3507399e595929db99f34f57937101296891e44d23f0be1f32cce69616821"],["8282263212c609d9ea2a6e3e172de238d8c39cabd5ac1ca10646e23fd5f51508","11f8a8098557dfe45e8256e830b60ace62d613ac2f7b17bed31b6eaff6e26caf"],["175e159f728b865a72f99cc6c6fc846de0b93833fd2222ed73fce5b551e5b739","d3506e0d9e3c79eba4ef97a51ff71f5eacb5955add24345c6efa6ffee9fed695"],["363d90d447b00c9c99ceac05b6262ee053441c7e55552ffe526bad8f83ff4640","4e273adfc732221953b445397f3363145b9a89008199ecb62003c7f3bee9de9"],["8b4b5f165df3c2be8c6244b5b745638843e4a781a15bcd1b69f79a55dffdf80c","4aad0a6f68d308b4b3fbd7813ab0da04f9e336546162ee56b3eff0c65fd4fd36"],["723cbaa6e5db996d6bf771c00bd548c7b700dbffa6c0e77bcb6115925232fcda","96e867b5595cc498a921137488824d6e2660a0653779494801dc069d9eb39f5f"],["eebfa4d493bebf98ba5feec812c2d3b50947961237a919839a533eca0e7dd7fa","5d9a8ca3970ef0f269ee7edaf178089d9ae4cdc3a711f712ddfd4fdae1de8999"],["100f44da696e71672791d0a09b7bde459f1215a29b3c03bfefd7835b39a48db0","cdd9e13192a00b772ec8f3300c090666b7ff4a18ff5195ac0fbd5cd62bc65a09"],["e1031be262c7ed1b1dc9227a4a04c017a77f8d4464f3b3852c8acde6e534fd2d","9d7061928940405e6bb6a4176597535af292dd419e1ced79a44f18f29456a00d"],["feea6cae46d55b530ac2839f143bd7ec5cf8b266a41d6af52d5e688d9094696d","e57c6b6c97dce1bab06e4e12bf3ecd5c981c8957cc41442d3155debf18090088"],["da67a91d91049cdcb367be4be6ffca3cfeed657d808583de33fa978bc1ec6cb1","9bacaa35481642bc41f463f7ec9780e5dec7adc508f740a17e9ea8e27a68be1d"],["53904faa0b334cdda6e000935ef22151ec08d0f7bb11069f57545ccc1a37b7c0","5bc087d0bc80106d88c9eccac20d3c1c13999981e14434699dcb096b022771c8"],["8e7bcd0bd35983a7719cca7764ca906779b53a043a9b8bcaeff959f43ad86047","10b7770b2a3da4b3940310420ca9514579e88e2e47fd68b3ea10047e8460372a"],["385eed34c1cdff21e6d0818689b81bde71a7f4f18397e6690a841e1599c43862","283bebc3e8ea23f56701de19e9ebf4576b304eec2086dc8cc0458fe5542e5453"],["6f9d9b803ecf191637c73a4413dfa180fddf84a5947fbc9c606ed86c3fac3a7","7c80c68e603059ba69b8e2a30e45c4d47ea4dd2f5c281002d86890603a842160"],["3322d401243c4e2582a2147c104d6ecbf774d163db0f5e5313b7e0e742d0e6bd","56e70797e9664ef5bfb019bc4ddaf9b72805f63ea2873af624f3a2e96c28b2a0"],["85672c7d2de0b7da2bd1770d89665868741b3f9af7643397721d74d28134ab83","7c481b9b5b43b2eb6374049bfa62c2e5e77f17fcc5298f44c8e3094f790313a6"],["948bf809b1988a46b06c9f1919413b10f9226c60f668832ffd959af60c82a0a","53a562856dcb6646dc6b74c5d1c3418c6d4dff08c97cd2bed4cb7f88d8c8e589"],["6260ce7f461801c34f067ce0f02873a8f1b0e44dfc69752accecd819f38fd8e8","bc2da82b6fa5b571a7f09049776a1ef7ecd292238051c198c1a84e95b2b4ae17"],["e5037de0afc1d8d43d8348414bbf4103043ec8f575bfdc432953cc8d2037fa2d","4571534baa94d3b5f9f98d09fb990bddbd5f5b03ec481f10e0e5dc841d755bda"],["e06372b0f4a207adf5ea905e8f1771b4e7e8dbd1c6a6c5b725866a0ae4fce725","7a908974bce18cfe12a27bb2ad5a488cd7484a7787104870b27034f94eee31dd"],["213c7a715cd5d45358d0bbf9dc0ce02204b10bdde2a3f58540ad6908d0559754","4b6dad0b5ae462507013ad06245ba190bb4850f5f36a7eeddff2c27534b458f2"],["4e7c272a7af4b34e8dbb9352a5419a87e2838c70adc62cddf0cc3a3b08fbd53c","17749c766c9d0b18e16fd09f6def681b530b9614bff7dd33e0b3941817dcaae6"],["fea74e3dbe778b1b10f238ad61686aa5c76e3db2be43057632427e2840fb27b6","6e0568db9b0b13297cf674deccb6af93126b596b973f7b77701d3db7f23cb96f"],["76e64113f677cf0e10a2570d599968d31544e179b760432952c02a4417bdde39","c90ddf8dee4e95cf577066d70681f0d35e2a33d2b56d2032b4b1752d1901ac01"],["c738c56b03b2abe1e8281baa743f8f9a8f7cc643df26cbee3ab150242bcbb891","893fb578951ad2537f718f2eacbfbbbb82314eef7880cfe917e735d9699a84c3"],["d895626548b65b81e264c7637c972877d1d72e5f3a925014372e9f6588f6c14b","febfaa38f2bc7eae728ec60818c340eb03428d632bb067e179363ed75d7d991f"],["b8da94032a957518eb0f6433571e8761ceffc73693e84edd49150a564f676e03","2804dfa44805a1e4d7c99cc9762808b092cc584d95ff3b511488e4e74efdf6e7"],["e80fea14441fb33a7d8adab9475d7fab2019effb5156a792f1a11778e3c0df5d","eed1de7f638e00771e89768ca3ca94472d155e80af322ea9fcb4291b6ac9ec78"],["a301697bdfcd704313ba48e51d567543f2a182031efd6915ddc07bbcc4e16070","7370f91cfb67e4f5081809fa25d40f9b1735dbf7c0a11a130c0d1a041e177ea1"],["90ad85b389d6b936463f9d0512678de208cc330b11307fffab7ac63e3fb04ed4","e507a3620a38261affdcbd9427222b839aefabe1582894d991d4d48cb6ef150"],["8f68b9d2f63b5f339239c1ad981f162ee88c5678723ea3351b7b444c9ec4c0da","662a9f2dba063986de1d90c2b6be215dbbea2cfe95510bfdf23cbf79501fff82"],["e4f3fb0176af85d65ff99ff9198c36091f48e86503681e3e6686fd5053231e11","1e63633ad0ef4f1c1661a6d0ea02b7286cc7e74ec951d1c9822c38576feb73bc"],["8c00fa9b18ebf331eb961537a45a4266c7034f2f0d4e1d0716fb6eae20eae29e","efa47267fea521a1a9dc343a3736c974c2fadafa81e36c54e7d2a4c66702414b"],["e7a26ce69dd4829f3e10cec0a9e98ed3143d084f308b92c0997fddfc60cb3e41","2a758e300fa7984b471b006a1aafbb18d0a6b2c0420e83e20e8a9421cf2cfd51"],["b6459e0ee3662ec8d23540c223bcbdc571cbcb967d79424f3cf29eb3de6b80ef","67c876d06f3e06de1dadf16e5661db3c4b3ae6d48e35b2ff30bf0b61a71ba45"],["d68a80c8280bb840793234aa118f06231d6f1fc67e73c5a5deda0f5b496943e8","db8ba9fff4b586d00c4b1f9177b0e28b5b0e7b8f7845295a294c84266b133120"],["324aed7df65c804252dc0270907a30b09612aeb973449cea4095980fc28d3d5d","648a365774b61f2ff130c0c35aec1f4f19213b0c7e332843967224af96ab7c84"],["4df9c14919cde61f6d51dfdbe5fee5dceec4143ba8d1ca888e8bd373fd054c96","35ec51092d8728050974c23a1d85d4b5d506cdc288490192ebac06cad10d5d"],["9c3919a84a474870faed8a9c1cc66021523489054d7f0308cbfc99c8ac1f98cd","ddb84f0f4a4ddd57584f044bf260e641905326f76c64c8e6be7e5e03d4fc599d"],["6057170b1dd12fdf8de05f281d8e06bb91e1493a8b91d4cc5a21382120a959e5","9a1af0b26a6a4807add9a2daf71df262465152bc3ee24c65e899be932385a2a8"],["a576df8e23a08411421439a4518da31880cef0fba7d4df12b1a6973eecb94266","40a6bf20e76640b2c92b97afe58cd82c432e10a7f514d9f3ee8be11ae1b28ec8"],["7778a78c28dec3e30a05fe9629de8c38bb30d1f5cf9a3a208f763889be58ad71","34626d9ab5a5b22ff7098e12f2ff580087b38411ff24ac563b513fc1fd9f43ac"],["928955ee637a84463729fd30e7afd2ed5f96274e5ad7e5cb09eda9c06d903ac","c25621003d3f42a827b78a13093a95eeac3d26efa8a8d83fc5180e935bcd091f"],["85d0fef3ec6db109399064f3a0e3b2855645b4a907ad354527aae75163d82751","1f03648413a38c0be29d496e582cf5663e8751e96877331582c237a24eb1f962"],["ff2b0dce97eece97c1c9b6041798b85dfdfb6d8882da20308f5404824526087e","493d13fef524ba188af4c4dc54d07936c7b7ed6fb90e2ceb2c951e01f0c29907"],["827fbbe4b1e880ea9ed2b2e6301b212b57f1ee148cd6dd28780e5e2cf856e241","c60f9c923c727b0b71bef2c67d1d12687ff7a63186903166d605b68baec293ec"],["eaa649f21f51bdbae7be4ae34ce6e5217a58fdce7f47f9aa7f3b58fa2120e2b3","be3279ed5bbbb03ac69a80f89879aa5a01a6b965f13f7e59d47a5305ba5ad93d"],["e4a42d43c5cf169d9391df6decf42ee541b6d8f0c9a137401e23632dda34d24f","4d9f92e716d1c73526fc99ccfb8ad34ce886eedfa8d8e4f13a7f7131deba9414"],["1ec80fef360cbdd954160fadab352b6b92b53576a88fea4947173b9d4300bf19","aeefe93756b5340d2f3a4958a7abbf5e0146e77f6295a07b671cdc1cc107cefd"],["146a778c04670c2f91b00af4680dfa8bce3490717d58ba889ddb5928366642be","b318e0ec3354028add669827f9d4b2870aaa971d2f7e5ed1d0b297483d83efd0"],["fa50c0f61d22e5f07e3acebb1aa07b128d0012209a28b9776d76a8793180eef9","6b84c6922397eba9b72cd2872281a68a5e683293a57a213b38cd8d7d3f4f2811"],["da1d61d0ca721a11b1a5bf6b7d88e8421a288ab5d5bba5220e53d32b5f067ec2","8157f55a7c99306c79c0766161c91e2966a73899d279b48a655fba0f1ad836f1"],["a8e282ff0c9706907215ff98e8fd416615311de0446f1e062a73b0610d064e13","7f97355b8db81c09abfb7f3c5b2515888b679a3e50dd6bd6cef7c73111f4cc0c"],["174a53b9c9a285872d39e56e6913cab15d59b1fa512508c022f382de8319497c","ccc9dc37abfc9c1657b4155f2c47f9e6646b3a1d8cb9854383da13ac079afa73"],["959396981943785c3d3e57edf5018cdbe039e730e4918b3d884fdff09475b7ba","2e7e552888c331dd8ba0386a4b9cd6849c653f64c8709385e9b8abf87524f2fd"],["d2a63a50ae401e56d645a1153b109a8fcca0a43d561fba2dbb51340c9d82b151","e82d86fb6443fcb7565aee58b2948220a70f750af484ca52d4142174dcf89405"],["64587e2335471eb890ee7896d7cfdc866bacbdbd3839317b3436f9b45617e073","d99fcdd5bf6902e2ae96dd6447c299a185b90a39133aeab358299e5e9faf6589"],["8481bde0e4e4d885b3a546d3e549de042f0aa6cea250e7fd358d6c86dd45e458","38ee7b8cba5404dd84a25bf39cecb2ca900a79c42b262e556d64b1b59779057e"],["13464a57a78102aa62b6979ae817f4637ffcfed3c4b1ce30bcd6303f6caf666b","69be159004614580ef7e433453ccb0ca48f300a81d0942e13f495a907f6ecc27"],["bc4a9df5b713fe2e9aef430bcc1dc97a0cd9ccede2f28588cada3a0d2d83f366","d3a81ca6e785c06383937adf4b798caa6e8a9fbfa547b16d758d666581f33c1"],["8c28a97bf8298bc0d23d8c749452a32e694b65e30a9472a3954ab30fe5324caa","40a30463a3305193378fedf31f7cc0eb7ae784f0451cb9459e71dc73cbef9482"],["8ea9666139527a8c1dd94ce4f071fd23c8b350c5a4bb33748c4ba111faccae0","620efabbc8ee2782e24e7c0cfb95c5d735b783be9cf0f8e955af34a30e62b945"],["dd3625faef5ba06074669716bbd3788d89bdde815959968092f76cc4eb9a9787","7a188fa3520e30d461da2501045731ca941461982883395937f68d00c644a573"],["f710d79d9eb962297e4f6232b40e8f7feb2bc63814614d692c12de752408221e","ea98e67232d3b3295d3b535532115ccac8612c721851617526ae47a9c77bfc82"]]},naf:{wnd:7,points:[["f9308a019258c31049344f85f89d5229b531c845836f99b08601f113bce036f9","388f7b0f632de8140fe337e62a37f3566500a99934c2231b6cb9fd7584b8e672"],["2f8bde4d1a07209355b4a7250a5c5128e88b84bddc619ab7cba8d569b240efe4","d8ac222636e5e3d6d4dba9dda6c9c426f788271bab0d6840dca87d3aa6ac62d6"],["5cbdf0646e5db4eaa398f365f2ea7a0e3d419b7e0330e39ce92bddedcac4f9bc","6aebca40ba255960a3178d6d861a54dba813d0b813fde7b5a5082628087264da"],["acd484e2f0c7f65309ad178a9f559abde09796974c57e714c35f110dfc27ccbe","cc338921b0a7d9fd64380971763b61e9add888a4375f8e0f05cc262ac64f9c37"],["774ae7f858a9411e5ef4246b70c65aac5649980be5c17891bbec17895da008cb","d984a032eb6b5e190243dd56d7b7b365372db1e2dff9d6a8301d74c9c953c61b"],["f28773c2d975288bc7d1d205c3748651b075fbc6610e58cddeeddf8f19405aa8","ab0902e8d880a89758212eb65cdaf473a1a06da521fa91f29b5cb52db03ed81"],["d7924d4f7d43ea965a465ae3095ff41131e5946f3c85f79e44adbcf8e27e080e","581e2872a86c72a683842ec228cc6defea40af2bd896d3a5c504dc9ff6a26b58"],["defdea4cdb677750a420fee807eacf21eb9898ae79b9768766e4faa04a2d4a34","4211ab0694635168e997b0ead2a93daeced1f4a04a95c0f6cfb199f69e56eb77"],["2b4ea0a797a443d293ef5cff444f4979f06acfebd7e86d277475656138385b6c","85e89bc037945d93b343083b5a1c86131a01f60c50269763b570c854e5c09b7a"],["352bbf4a4cdd12564f93fa332ce333301d9ad40271f8107181340aef25be59d5","321eb4075348f534d59c18259dda3e1f4a1b3b2e71b1039c67bd3d8bcf81998c"],["2fa2104d6b38d11b0230010559879124e42ab8dfeff5ff29dc9cdadd4ecacc3f","2de1068295dd865b64569335bd5dd80181d70ecfc882648423ba76b532b7d67"],["9248279b09b4d68dab21a9b066edda83263c3d84e09572e269ca0cd7f5453714","73016f7bf234aade5d1aa71bdea2b1ff3fc0de2a887912ffe54a32ce97cb3402"],["daed4f2be3a8bf278e70132fb0beb7522f570e144bf615c07e996d443dee8729","a69dce4a7d6c98e8d4a1aca87ef8d7003f83c230f3afa726ab40e52290be1c55"],["c44d12c7065d812e8acf28d7cbb19f9011ecd9e9fdf281b0e6a3b5e87d22e7db","2119a460ce326cdc76c45926c982fdac0e106e861edf61c5a039063f0e0e6482"],["6a245bf6dc698504c89a20cfded60853152b695336c28063b61c65cbd269e6b4","e022cf42c2bd4a708b3f5126f16a24ad8b33ba48d0423b6efd5e6348100d8a82"],["1697ffa6fd9de627c077e3d2fe541084ce13300b0bec1146f95ae57f0d0bd6a5","b9c398f186806f5d27561506e4557433a2cf15009e498ae7adee9d63d01b2396"],["605bdb019981718b986d0f07e834cb0d9deb8360ffb7f61df982345ef27a7479","2972d2de4f8d20681a78d93ec96fe23c26bfae84fb14db43b01e1e9056b8c49"],["62d14dab4150bf497402fdc45a215e10dcb01c354959b10cfe31c7e9d87ff33d","80fc06bd8cc5b01098088a1950eed0db01aa132967ab472235f5642483b25eaf"],["80c60ad0040f27dade5b4b06c408e56b2c50e9f56b9b8b425e555c2f86308b6f","1c38303f1cc5c30f26e66bad7fe72f70a65eed4cbe7024eb1aa01f56430bd57a"],["7a9375ad6167ad54aa74c6348cc54d344cc5dc9487d847049d5eabb0fa03c8fb","d0e3fa9eca8726909559e0d79269046bdc59ea10c70ce2b02d499ec224dc7f7"],["d528ecd9b696b54c907a9ed045447a79bb408ec39b68df504bb51f459bc3ffc9","eecf41253136e5f99966f21881fd656ebc4345405c520dbc063465b521409933"],["49370a4b5f43412ea25f514e8ecdad05266115e4a7ecb1387231808f8b45963","758f3f41afd6ed428b3081b0512fd62a54c3f3afbb5b6764b653052a12949c9a"],["77f230936ee88cbbd73df930d64702ef881d811e0e1498e2f1c13eb1fc345d74","958ef42a7886b6400a08266e9ba1b37896c95330d97077cbbe8eb3c7671c60d6"],["f2dac991cc4ce4b9ea44887e5c7c0bce58c80074ab9d4dbaeb28531b7739f530","e0dedc9b3b2f8dad4da1f32dec2531df9eb5fbeb0598e4fd1a117dba703a3c37"],["463b3d9f662621fb1b4be8fbbe2520125a216cdfc9dae3debcba4850c690d45b","5ed430d78c296c3543114306dd8622d7c622e27c970a1de31cb377b01af7307e"],["f16f804244e46e2a09232d4aff3b59976b98fac14328a2d1a32496b49998f247","cedabd9b82203f7e13d206fcdf4e33d92a6c53c26e5cce26d6579962c4e31df6"],["caf754272dc84563b0352b7a14311af55d245315ace27c65369e15f7151d41d1","cb474660ef35f5f2a41b643fa5e460575f4fa9b7962232a5c32f908318a04476"],["2600ca4b282cb986f85d0f1709979d8b44a09c07cb86d7c124497bc86f082120","4119b88753c15bd6a693b03fcddbb45d5ac6be74ab5f0ef44b0be9475a7e4b40"],["7635ca72d7e8432c338ec53cd12220bc01c48685e24f7dc8c602a7746998e435","91b649609489d613d1d5e590f78e6d74ecfc061d57048bad9e76f302c5b9c61"],["754e3239f325570cdbbf4a87deee8a66b7f2b33479d468fbc1a50743bf56cc18","673fb86e5bda30fb3cd0ed304ea49a023ee33d0197a695d0c5d98093c536683"],["e3e6bd1071a1e96aff57859c82d570f0330800661d1c952f9fe2694691d9b9e8","59c9e0bba394e76f40c0aa58379a3cb6a5a2283993e90c4167002af4920e37f5"],["186b483d056a033826ae73d88f732985c4ccb1f32ba35f4b4cc47fdcf04aa6eb","3b952d32c67cf77e2e17446e204180ab21fb8090895138b4a4a797f86e80888b"],["df9d70a6b9876ce544c98561f4be4f725442e6d2b737d9c91a8321724ce0963f","55eb2dafd84d6ccd5f862b785dc39d4ab157222720ef9da217b8c45cf2ba2417"],["5edd5cc23c51e87a497ca815d5dce0f8ab52554f849ed8995de64c5f34ce7143","efae9c8dbc14130661e8cec030c89ad0c13c66c0d17a2905cdc706ab7399a868"],["290798c2b6476830da12fe02287e9e777aa3fba1c355b17a722d362f84614fba","e38da76dcd440621988d00bcf79af25d5b29c094db2a23146d003afd41943e7a"],["af3c423a95d9f5b3054754efa150ac39cd29552fe360257362dfdecef4053b45","f98a3fd831eb2b749a93b0e6f35cfb40c8cd5aa667a15581bc2feded498fd9c6"],["766dbb24d134e745cccaa28c99bf274906bb66b26dcf98df8d2fed50d884249a","744b1152eacbe5e38dcc887980da38b897584a65fa06cedd2c924f97cbac5996"],["59dbf46f8c94759ba21277c33784f41645f7b44f6c596a58ce92e666191abe3e","c534ad44175fbc300f4ea6ce648309a042ce739a7919798cd85e216c4a307f6e"],["f13ada95103c4537305e691e74e9a4a8dd647e711a95e73cb62dc6018cfd87b8","e13817b44ee14de663bf4bc808341f326949e21a6a75c2570778419bdaf5733d"],["7754b4fa0e8aced06d4167a2c59cca4cda1869c06ebadfb6488550015a88522c","30e93e864e669d82224b967c3020b8fa8d1e4e350b6cbcc537a48b57841163a2"],["948dcadf5990e048aa3874d46abef9d701858f95de8041d2a6828c99e2262519","e491a42537f6e597d5d28a3224b1bc25df9154efbd2ef1d2cbba2cae5347d57e"],["7962414450c76c1689c7b48f8202ec37fb224cf5ac0bfa1570328a8a3d7c77ab","100b610ec4ffb4760d5c1fc133ef6f6b12507a051f04ac5760afa5b29db83437"],["3514087834964b54b15b160644d915485a16977225b8847bb0dd085137ec47ca","ef0afbb2056205448e1652c48e8127fc6039e77c15c2378b7e7d15a0de293311"],["d3cc30ad6b483e4bc79ce2c9dd8bc54993e947eb8df787b442943d3f7b527eaf","8b378a22d827278d89c5e9be8f9508ae3c2ad46290358630afb34db04eede0a4"],["1624d84780732860ce1c78fcbfefe08b2b29823db913f6493975ba0ff4847610","68651cf9b6da903e0914448c6cd9d4ca896878f5282be4c8cc06e2a404078575"],["733ce80da955a8a26902c95633e62a985192474b5af207da6df7b4fd5fc61cd4","f5435a2bd2badf7d485a4d8b8db9fcce3e1ef8e0201e4578c54673bc1dc5ea1d"],["15d9441254945064cf1a1c33bbd3b49f8966c5092171e699ef258dfab81c045c","d56eb30b69463e7234f5137b73b84177434800bacebfc685fc37bbe9efe4070d"],["a1d0fcf2ec9de675b612136e5ce70d271c21417c9d2b8aaaac138599d0717940","edd77f50bcb5a3cab2e90737309667f2641462a54070f3d519212d39c197a629"],["e22fbe15c0af8ccc5780c0735f84dbe9a790badee8245c06c7ca37331cb36980","a855babad5cd60c88b430a69f53a1a7a38289154964799be43d06d77d31da06"],["311091dd9860e8e20ee13473c1155f5f69635e394704eaa74009452246cfa9b3","66db656f87d1f04fffd1f04788c06830871ec5a64feee685bd80f0b1286d8374"],["34c1fd04d301be89b31c0442d3e6ac24883928b45a9340781867d4232ec2dbdf","9414685e97b1b5954bd46f730174136d57f1ceeb487443dc5321857ba73abee"],["f219ea5d6b54701c1c14de5b557eb42a8d13f3abbcd08affcc2a5e6b049b8d63","4cb95957e83d40b0f73af4544cccf6b1f4b08d3c07b27fb8d8c2962a400766d1"],["d7b8740f74a8fbaab1f683db8f45de26543a5490bca627087236912469a0b448","fa77968128d9c92ee1010f337ad4717eff15db5ed3c049b3411e0315eaa4593b"],["32d31c222f8f6f0ef86f7c98d3a3335ead5bcd32abdd94289fe4d3091aa824bf","5f3032f5892156e39ccd3d7915b9e1da2e6dac9e6f26e961118d14b8462e1661"],["7461f371914ab32671045a155d9831ea8793d77cd59592c4340f86cbc18347b5","8ec0ba238b96bec0cbdddcae0aa442542eee1ff50c986ea6b39847b3cc092ff6"],["ee079adb1df1860074356a25aa38206a6d716b2c3e67453d287698bad7b2b2d6","8dc2412aafe3be5c4c5f37e0ecc5f9f6a446989af04c4e25ebaac479ec1c8c1e"],["16ec93e447ec83f0467b18302ee620f7e65de331874c9dc72bfd8616ba9da6b5","5e4631150e62fb40d0e8c2a7ca5804a39d58186a50e497139626778e25b0674d"],["eaa5f980c245f6f038978290afa70b6bd8855897f98b6aa485b96065d537bd99","f65f5d3e292c2e0819a528391c994624d784869d7e6ea67fb18041024edc07dc"],["78c9407544ac132692ee1910a02439958ae04877151342ea96c4b6b35a49f51","f3e0319169eb9b85d5404795539a5e68fa1fbd583c064d2462b675f194a3ddb4"],["494f4be219a1a77016dcd838431aea0001cdc8ae7a6fc688726578d9702857a5","42242a969283a5f339ba7f075e36ba2af925ce30d767ed6e55f4b031880d562c"],["a598a8030da6d86c6bc7f2f5144ea549d28211ea58faa70ebf4c1e665c1fe9b5","204b5d6f84822c307e4b4a7140737aec23fc63b65b35f86a10026dbd2d864e6b"],["c41916365abb2b5d09192f5f2dbeafec208f020f12570a184dbadc3e58595997","4f14351d0087efa49d245b328984989d5caf9450f34bfc0ed16e96b58fa9913"],["841d6063a586fa475a724604da03bc5b92a2e0d2e0a36acfe4c73a5514742881","73867f59c0659e81904f9a1c7543698e62562d6744c169ce7a36de01a8d6154"],["5e95bb399a6971d376026947f89bde2f282b33810928be4ded112ac4d70e20d5","39f23f366809085beebfc71181313775a99c9aed7d8ba38b161384c746012865"],["36e4641a53948fd476c39f8a99fd974e5ec07564b5315d8bf99471bca0ef2f66","d2424b1b1abe4eb8164227b085c9aa9456ea13493fd563e06fd51cf5694c78fc"],["336581ea7bfbbb290c191a2f507a41cf5643842170e914faeab27c2c579f726","ead12168595fe1be99252129b6e56b3391f7ab1410cd1e0ef3dcdcabd2fda224"],["8ab89816dadfd6b6a1f2634fcf00ec8403781025ed6890c4849742706bd43ede","6fdcef09f2f6d0a044e654aef624136f503d459c3e89845858a47a9129cdd24e"],["1e33f1a746c9c5778133344d9299fcaa20b0938e8acff2544bb40284b8c5fb94","60660257dd11b3aa9c8ed618d24edff2306d320f1d03010e33a7d2057f3b3b6"],["85b7c1dcb3cec1b7ee7f30ded79dd20a0ed1f4cc18cbcfcfa410361fd8f08f31","3d98a9cdd026dd43f39048f25a8847f4fcafad1895d7a633c6fed3c35e999511"],["29df9fbd8d9e46509275f4b125d6d45d7fbe9a3b878a7af872a2800661ac5f51","b4c4fe99c775a606e2d8862179139ffda61dc861c019e55cd2876eb2a27d84b"],["a0b1cae06b0a847a3fea6e671aaf8adfdfe58ca2f768105c8082b2e449fce252","ae434102edde0958ec4b19d917a6a28e6b72da1834aff0e650f049503a296cf2"],["4e8ceafb9b3e9a136dc7ff67e840295b499dfb3b2133e4ba113f2e4c0e121e5","cf2174118c8b6d7a4b48f6d534ce5c79422c086a63460502b827ce62a326683c"],["d24a44e047e19b6f5afb81c7ca2f69080a5076689a010919f42725c2b789a33b","6fb8d5591b466f8fc63db50f1c0f1c69013f996887b8244d2cdec417afea8fa3"],["ea01606a7a6c9cdd249fdfcfacb99584001edd28abbab77b5104e98e8e3b35d4","322af4908c7312b0cfbfe369f7a7b3cdb7d4494bc2823700cfd652188a3ea98d"],["af8addbf2b661c8a6c6328655eb96651252007d8c5ea31be4ad196de8ce2131f","6749e67c029b85f52a034eafd096836b2520818680e26ac8f3dfbcdb71749700"],["e3ae1974566ca06cc516d47e0fb165a674a3dabcfca15e722f0e3450f45889","2aeabe7e4531510116217f07bf4d07300de97e4874f81f533420a72eeb0bd6a4"],["591ee355313d99721cf6993ffed1e3e301993ff3ed258802075ea8ced397e246","b0ea558a113c30bea60fc4775460c7901ff0b053d25ca2bdeee98f1a4be5d196"],["11396d55fda54c49f19aa97318d8da61fa8584e47b084945077cf03255b52984","998c74a8cd45ac01289d5833a7beb4744ff536b01b257be4c5767bea93ea57a4"],["3c5d2a1ba39c5a1790000738c9e0c40b8dcdfd5468754b6405540157e017aa7a","b2284279995a34e2f9d4de7396fc18b80f9b8b9fdd270f6661f79ca4c81bd257"],["cc8704b8a60a0defa3a99a7299f2e9c3fbc395afb04ac078425ef8a1793cc030","bdd46039feed17881d1e0862db347f8cf395b74fc4bcdc4e940b74e3ac1f1b13"],["c533e4f7ea8555aacd9777ac5cad29b97dd4defccc53ee7ea204119b2889b197","6f0a256bc5efdf429a2fb6242f1a43a2d9b925bb4a4b3a26bb8e0f45eb596096"],["c14f8f2ccb27d6f109f6d08d03cc96a69ba8c34eec07bbcf566d48e33da6593","c359d6923bb398f7fd4473e16fe1c28475b740dd098075e6c0e8649113dc3a38"],["a6cbc3046bc6a450bac24789fa17115a4c9739ed75f8f21ce441f72e0b90e6ef","21ae7f4680e889bb130619e2c0f95a360ceb573c70603139862afd617fa9b9f"],["347d6d9a02c48927ebfb86c1359b1caf130a3c0267d11ce6344b39f99d43cc38","60ea7f61a353524d1c987f6ecec92f086d565ab687870cb12689ff1e31c74448"],["da6545d2181db8d983f7dcb375ef5866d47c67b1bf31c8cf855ef7437b72656a","49b96715ab6878a79e78f07ce5680c5d6673051b4935bd897fea824b77dc208a"],["c40747cc9d012cb1a13b8148309c6de7ec25d6945d657146b9d5994b8feb1111","5ca560753be2a12fc6de6caf2cb489565db936156b9514e1bb5e83037e0fa2d4"],["4e42c8ec82c99798ccf3a610be870e78338c7f713348bd34c8203ef4037f3502","7571d74ee5e0fb92a7a8b33a07783341a5492144cc54bcc40a94473693606437"],["3775ab7089bc6af823aba2e1af70b236d251cadb0c86743287522a1b3b0dedea","be52d107bcfa09d8bcb9736a828cfa7fac8db17bf7a76a2c42ad961409018cf7"],["cee31cbf7e34ec379d94fb814d3d775ad954595d1314ba8846959e3e82f74e26","8fd64a14c06b589c26b947ae2bcf6bfa0149ef0be14ed4d80f448a01c43b1c6d"],["b4f9eaea09b6917619f6ea6a4eb5464efddb58fd45b1ebefcdc1a01d08b47986","39e5c9925b5a54b07433a4f18c61726f8bb131c012ca542eb24a8ac07200682a"],["d4263dfc3d2df923a0179a48966d30ce84e2515afc3dccc1b77907792ebcc60e","62dfaf07a0f78feb30e30d6295853ce189e127760ad6cf7fae164e122a208d54"],["48457524820fa65a4f8d35eb6930857c0032acc0a4a2de422233eeda897612c4","25a748ab367979d98733c38a1fa1c2e7dc6cc07db2d60a9ae7a76aaa49bd0f77"],["dfeeef1881101f2cb11644f3a2afdfc2045e19919152923f367a1767c11cceda","ecfb7056cf1de042f9420bab396793c0c390bde74b4bbdff16a83ae09a9a7517"],["6d7ef6b17543f8373c573f44e1f389835d89bcbc6062ced36c82df83b8fae859","cd450ec335438986dfefa10c57fea9bcc521a0959b2d80bbf74b190dca712d10"],["e75605d59102a5a2684500d3b991f2e3f3c88b93225547035af25af66e04541f","f5c54754a8f71ee540b9b48728473e314f729ac5308b06938360990e2bfad125"],["eb98660f4c4dfaa06a2be453d5020bc99a0c2e60abe388457dd43fefb1ed620c","6cb9a8876d9cb8520609af3add26cd20a0a7cd8a9411131ce85f44100099223e"],["13e87b027d8514d35939f2e6892b19922154596941888336dc3563e3b8dba942","fef5a3c68059a6dec5d624114bf1e91aac2b9da568d6abeb2570d55646b8adf1"],["ee163026e9fd6fe017c38f06a5be6fc125424b371ce2708e7bf4491691e5764a","1acb250f255dd61c43d94ccc670d0f58f49ae3fa15b96623e5430da0ad6c62b2"],["b268f5ef9ad51e4d78de3a750c2dc89b1e626d43505867999932e5db33af3d80","5f310d4b3c99b9ebb19f77d41c1dee018cf0d34fd4191614003e945a1216e423"],["ff07f3118a9df035e9fad85eb6c7bfe42b02f01ca99ceea3bf7ffdba93c4750d","438136d603e858a3a5c440c38eccbaddc1d2942114e2eddd4740d098ced1f0d8"],["8d8b9855c7c052a34146fd20ffb658bea4b9f69e0d825ebec16e8c3ce2b526a1","cdb559eedc2d79f926baf44fb84ea4d44bcf50fee51d7ceb30e2e7f463036758"],["52db0b5384dfbf05bfa9d472d7ae26dfe4b851ceca91b1eba54263180da32b63","c3b997d050ee5d423ebaf66a6db9f57b3180c902875679de924b69d84a7b375"],["e62f9490d3d51da6395efd24e80919cc7d0f29c3f3fa48c6fff543becbd43352","6d89ad7ba4876b0b22c2ca280c682862f342c8591f1daf5170e07bfd9ccafa7d"],["7f30ea2476b399b4957509c88f77d0191afa2ff5cb7b14fd6d8e7d65aaab1193","ca5ef7d4b231c94c3b15389a5f6311e9daff7bb67b103e9880ef4bff637acaec"],["5098ff1e1d9f14fb46a210fada6c903fef0fb7b4a1dd1d9ac60a0361800b7a00","9731141d81fc8f8084d37c6e7542006b3ee1b40d60dfe5362a5b132fd17ddc0"],["32b78c7de9ee512a72895be6b9cbefa6e2f3c4ccce445c96b9f2c81e2778ad58","ee1849f513df71e32efc3896ee28260c73bb80547ae2275ba497237794c8753c"],["e2cb74fddc8e9fbcd076eef2a7c72b0ce37d50f08269dfc074b581550547a4f7","d3aa2ed71c9dd2247a62df062736eb0baddea9e36122d2be8641abcb005cc4a4"],["8438447566d4d7bedadc299496ab357426009a35f235cb141be0d99cd10ae3a8","c4e1020916980a4da5d01ac5e6ad330734ef0d7906631c4f2390426b2edd791f"],["4162d488b89402039b584c6fc6c308870587d9c46f660b878ab65c82c711d67e","67163e903236289f776f22c25fb8a3afc1732f2b84b4e95dbda47ae5a0852649"],["3fad3fa84caf0f34f0f89bfd2dcf54fc175d767aec3e50684f3ba4a4bf5f683d","cd1bc7cb6cc407bb2f0ca647c718a730cf71872e7d0d2a53fa20efcdfe61826"],["674f2600a3007a00568c1a7ce05d0816c1fb84bf1370798f1c69532faeb1a86b","299d21f9413f33b3edf43b257004580b70db57da0b182259e09eecc69e0d38a5"],["d32f4da54ade74abb81b815ad1fb3b263d82d6c692714bcff87d29bd5ee9f08f","f9429e738b8e53b968e99016c059707782e14f4535359d582fc416910b3eea87"],["30e4e670435385556e593657135845d36fbb6931f72b08cb1ed954f1e3ce3ff6","462f9bce619898638499350113bbc9b10a878d35da70740dc695a559eb88db7b"],["be2062003c51cc3004682904330e4dee7f3dcd10b01e580bf1971b04d4cad297","62188bc49d61e5428573d48a74e1c655b1c61090905682a0d5558ed72dccb9bc"],["93144423ace3451ed29e0fb9ac2af211cb6e84a601df5993c419859fff5df04a","7c10dfb164c3425f5c71a3f9d7992038f1065224f72bb9d1d902a6d13037b47c"],["b015f8044f5fcbdcf21ca26d6c34fb8197829205c7b7d2a7cb66418c157b112c","ab8c1e086d04e813744a655b2df8d5f83b3cdc6faa3088c1d3aea1454e3a1d5f"],["d5e9e1da649d97d89e4868117a465a3a4f8a18de57a140d36b3f2af341a21b52","4cb04437f391ed73111a13cc1d4dd0db1693465c2240480d8955e8592f27447a"],["d3ae41047dd7ca065dbf8ed77b992439983005cd72e16d6f996a5316d36966bb","bd1aeb21ad22ebb22a10f0303417c6d964f8cdd7df0aca614b10dc14d125ac46"],["463e2763d885f958fc66cdd22800f0a487197d0a82e377b49f80af87c897b065","bfefacdb0e5d0fd7df3a311a94de062b26b80c61fbc97508b79992671ef7ca7f"],["7985fdfd127c0567c6f53ec1bb63ec3158e597c40bfe747c83cddfc910641917","603c12daf3d9862ef2b25fe1de289aed24ed291e0ec6708703a5bd567f32ed03"],["74a1ad6b5f76e39db2dd249410eac7f99e74c59cb83d2d0ed5ff1543da7703e9","cc6157ef18c9c63cd6193d83631bbea0093e0968942e8c33d5737fd790e0db08"],["30682a50703375f602d416664ba19b7fc9bab42c72747463a71d0896b22f6da3","553e04f6b018b4fa6c8f39e7f311d3176290d0e0f19ca73f17714d9977a22ff8"],["9e2158f0d7c0d5f26c3791efefa79597654e7a2b2464f52b1ee6c1347769ef57","712fcdd1b9053f09003a3481fa7762e9ffd7c8ef35a38509e2fbf2629008373"],["176e26989a43c9cfeba4029c202538c28172e566e3c4fce7322857f3be327d66","ed8cc9d04b29eb877d270b4878dc43c19aefd31f4eee09ee7b47834c1fa4b1c3"],["75d46efea3771e6e68abb89a13ad747ecf1892393dfc4f1b7004788c50374da8","9852390a99507679fd0b86fd2b39a868d7efc22151346e1a3ca4726586a6bed8"],["809a20c67d64900ffb698c4c825f6d5f2310fb0451c869345b7319f645605721","9e994980d9917e22b76b061927fa04143d096ccc54963e6a5ebfa5f3f8e286c1"],["1b38903a43f7f114ed4500b4eac7083fdefece1cf29c63528d563446f972c180","4036edc931a60ae889353f77fd53de4a2708b26b6f5da72ad3394119daf408f9"]]}}),Yh}var fp;function i0(){return fp||(fp=1,function(r){var e=r,t=e0(),i=fg(),s=Mi(),a=s.assert;function f(l){l.type==="short"?this.curve=new i.short(l):l.type==="edwards"?this.curve=new i.edwards(l):this.curve=new i.mont(l),this.g=this.curve.g,this.n=this.curve.n,this.hash=l.hash,a(this.g.validate(),"Invalid curve"),a(this.g.mul(this.n).isInfinity(),"Invalid curve, G*N != O")}e.PresetCurve=f;function u(l,w){Object.defineProperty(e,l,{configurable:!0,enumerable:!0,get:function(){var x=new f(w);return Object.defineProperty(e,l,{configurable:!0,enumerable:!0,value:x}),x}})}u("p192",{type:"short",prime:"p192",p:"ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff",a:"ffffffff ffffffff ffffffff fffffffe ffffffff fffffffc",b:"64210519 e59c80e7 0fa7e9ab 72243049 feb8deec c146b9b1",n:"ffffffff ffffffff ffffffff 99def836 146bc9b1 b4d22831",hash:t.sha256,gRed:!1,g:["188da80e b03090f6 7cbf20eb 43a18800 f4ff0afd 82ff1012","07192b95 ffc8da78 631011ed 6b24cdd5 73f977a1 1e794811"]}),u("p224",{type:"short",prime:"p224",p:"ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001",a:"ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff fffffffe",b:"b4050a85 0c04b3ab f5413256 5044b0b7 d7bfd8ba 270b3943 2355ffb4",n:"ffffffff ffffffff ffffffff ffff16a2 e0b8f03e 13dd2945 5c5c2a3d",hash:t.sha256,gRed:!1,g:["b70e0cbd 6bb4bf7f 321390b9 4a03c1d3 56c21122 343280d6 115c1d21","bd376388 b5f723fb 4c22dfe6 cd4375a0 5a074764 44d58199 85007e34"]}),u("p256",{type:"short",prime:null,p:"ffffffff 00000001 00000000 00000000 00000000 ffffffff ffffffff ffffffff",a:"ffffffff 00000001 00000000 00000000 00000000 ffffffff ffffffff fffffffc",b:"5ac635d8 aa3a93e7 b3ebbd55 769886bc 651d06b0 cc53b0f6 3bce3c3e 27d2604b",n:"ffffffff 00000000 ffffffff ffffffff bce6faad a7179e84 f3b9cac2 fc632551",hash:t.sha256,gRed:!1,g:["6b17d1f2 e12c4247 f8bce6e5 63a440f2 77037d81 2deb33a0 f4a13945 d898c296","4fe342e2 fe1a7f9b 8ee7eb4a 7c0f9e16 2bce3357 6b315ece cbb64068 37bf51f5"]}),u("p384",{type:"short",prime:null,p:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe ffffffff 00000000 00000000 ffffffff",a:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe ffffffff 00000000 00000000 fffffffc",b:"b3312fa7 e23ee7e4 988e056b e3f82d19 181d9c6e fe814112 0314088f 5013875a c656398d 8a2ed19d 2a85c8ed d3ec2aef",n:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff c7634d81 f4372ddf 581a0db2 48b0a77a ecec196a ccc52973",hash:t.sha384,gRed:!1,g:["aa87ca22 be8b0537 8eb1c71e f320ad74 6e1d3b62 8ba79b98 59f741e0 82542a38 5502f25d bf55296c 3a545e38 72760ab7","3617de4a 96262c6f 5d9e98bf 9292dc29 f8f41dbd 289a147c e9da3113 b5f0b8c0 0a60b1ce 1d7e819d 7a431d7c 90ea0e5f"]}),u("p521",{type:"short",prime:null,p:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff",a:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffc",b:"00000051 953eb961 8e1c9a1f 929a21a0 b68540ee a2da725b 99b315f3 b8b48991 8ef109e1 56193951 ec7e937b 1652c0bd 3bb1bf07 3573df88 3d2c34f1 ef451fd4 6b503f00",n:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffa 51868783 bf2f966b 7fcc0148 f709a5d0 3bb5c9b8 899c47ae bb6fb71e 91386409",hash:t.sha512,gRed:!1,g:["000000c6 858e06b7 0404e9cd 9e3ecb66 2395b442 9c648139 053fb521 f828af60 6b4d3dba a14b5e77 efe75928 fe1dc127 a2ffa8de 3348b3c1 856a429b f97e7e31 c2e5bd66","00000118 39296a78 9a3bc004 5c8a5fb4 2c7d1bd9 98f54449 579b4468 17afbd17 273e662c 97ee7299 5ef42640 c550b901 3fad0761 353c7086 a272c240 88be9476 9fd16650"]}),u("curve25519",{type:"mont",prime:"p25519",p:"7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed",a:"76d06",b:"1",n:"1000000000000000 0000000000000000 14def9dea2f79cd6 5812631a5cf5d3ed",hash:t.sha256,gRed:!1,g:["9"]}),u("ed25519",{type:"edwards",prime:"p25519",p:"7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed",a:"-1",c:"1",d:"52036cee2b6ffe73 8cc740797779e898 00700a4d4141d8ab 75eb4dca135978a3",n:"1000000000000000 0000000000000000 14def9dea2f79cd6 5812631a5cf5d3ed",hash:t.sha256,gRed:!1,g:["216936d3cd6e53fec0a4e231fdd6dc5c692cc7609525a7b2c9562d608f25d51a","6666666666666666666666666666666666666666666666666666666666666658"]});var d;try{d=t4()}catch{d=void 0}u("secp256k1",{type:"short",prime:"k256",p:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f",a:"0",b:"7",n:"ffffffff ffffffff ffffffff fffffffe baaedce6 af48a03b bfd25e8c d0364141",h:"1",hash:t.sha256,beta:"7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee",lambda:"5363ad4cc05c30e0a5261c028812645a122e22ea20816678df02967c1b23bd72",basis:[{a:"3086d221a7d46bcde86c90e49284eb15",b:"-e4437ed6010e88286f547fa90abfe4c3"},{a:"114ca50f7a8e2f3f657c1108d9d44cfd8",b:"3086d221a7d46bcde86c90e49284eb15"}],gRed:!1,g:["79be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798","483ada7726a3c4655da4fbfc0e1108a8fd17b448a68554199c47d08ffb10d4b8",d]})}(Qh)),Qh}var Wh,hp;function r4(){if(hp)return Wh;hp=1;var r=e0(),e=og(),t=Ms();function i(s){if(!(this instanceof i))return new i(s);this.hash=s.hash,this.predResist=!!s.predResist,this.outLen=this.hash.outSize,this.minEntropy=s.minEntropy||this.hash.hmacStrength,this._reseed=null,this.reseedInterval=null,this.K=null,this.V=null;var a=e.toArray(s.entropy,s.entropyEnc||"hex"),f=e.toArray(s.nonce,s.nonceEnc||"hex"),u=e.toArray(s.pers,s.persEnc||"hex");t(a.length>=this.minEntropy/8,"Not enough entropy. Minimum is: "+this.minEntropy+" bits"),this._init(a,f,u)}return Wh=i,i.prototype._init=function(a,f,u){var d=a.concat(f).concat(u);this.K=new Array(this.outLen/8),this.V=new Array(this.outLen/8);for(var l=0;l<this.V.length;l++)this.K[l]=0,this.V[l]=1;this._update(d),this._reseed=1,this.reseedInterval=281474976710656},i.prototype._hmac=function(){return new r.hmac(this.hash,this.K)},i.prototype._update=function(a){var f=this._hmac().update(this.V).update([0]);a&&(f=f.update(a)),this.K=f.digest(),this.V=this._hmac().update(this.V).digest(),a&&(this.K=this._hmac().update(this.V).update([1]).update(a).digest(),this.V=this._hmac().update(this.V).digest())},i.prototype.reseed=function(a,f,u,d){typeof f!="string"&&(d=u,u=f,f=null),a=e.toArray(a,f),u=e.toArray(u,d),t(a.length>=this.minEntropy/8,"Not enough entropy. Minimum is: "+this.minEntropy+" bits"),this._update(a.concat(u||[])),this._reseed=1},i.prototype.generate=function(a,f,u,d){if(this._reseed>this.reseedInterval)throw new Error("Reseed is required");typeof f!="string"&&(d=u,u=f,f=null),u&&(u=e.toArray(u,d||"hex"),this._update(u));for(var l=[];l.length<a;)this.V=this._hmac().update(this.V).digest(),l=l.concat(this.V);var w=l.slice(0,a);return this._update(u),this._reseed++,e.encode(w,f)},Wh}var Xh,up;function i4(){if(up)return Xh;up=1;var r=Ln(),e=Mi(),t=e.assert;function i(s,a){this.ec=s,this.priv=null,this.pub=null,a.priv&&this._importPrivate(a.priv,a.privEnc),a.pub&&this._importPublic(a.pub,a.pubEnc)}return Xh=i,i.fromPublic=function(a,f,u){return f instanceof i?f:new i(a,{pub:f,pubEnc:u})},i.fromPrivate=function(a,f,u){return f instanceof i?f:new i(a,{priv:f,privEnc:u})},i.prototype.validate=function(){var a=this.getPublic();return a.isInfinity()?{result:!1,reason:"Invalid public key"}:a.validate()?a.mul(this.ec.curve.n).isInfinity()?{result:!0,reason:null}:{result:!1,reason:"Public key * N != O"}:{result:!1,reason:"Public key is not a point"}},i.prototype.getPublic=function(a,f){return typeof a=="string"&&(f=a,a=null),this.pub||(this.pub=this.ec.g.mul(this.priv)),f?this.pub.encode(f,a):this.pub},i.prototype.getPrivate=function(a){return a==="hex"?this.priv.toString(16,2):this.priv},i.prototype._importPrivate=function(a,f){this.priv=new r(a,f||16),this.priv=this.priv.umod(this.ec.curve.n)},i.prototype._importPublic=function(a,f){if(a.x||a.y){this.ec.curve.type==="mont"?t(a.x,"Need x coordinate"):(this.ec.curve.type==="short"||this.ec.curve.type==="edwards")&&t(a.x&&a.y,"Need both x and y coordinate"),this.pub=this.ec.curve.point(a.x,a.y);return}this.pub=this.ec.curve.decodePoint(a,f)},i.prototype.derive=function(a){return a.validate()||t(a.validate(),"public point not validated"),a.mul(this.priv).getX()},i.prototype.sign=function(a,f,u){return this.ec.sign(a,this,f,u)},i.prototype.verify=function(a,f,u){return this.ec.verify(a,f,this,void 0,u)},i.prototype.inspect=function(){return"<Key priv: "+(this.priv&&this.priv.toString(16,2))+" pub: "+(this.pub&&this.pub.inspect())+" >"},Xh}var Zh,lp;function n4(){if(lp)return Zh;lp=1;var r=Ln(),e=Mi(),t=e.assert;function i(d,l){if(d instanceof i)return d;this._importDER(d,l)||(t(d.r&&d.s,"Signature without r or s"),this.r=new r(d.r,16),this.s=new r(d.s,16),d.recoveryParam===void 0?this.recoveryParam=null:this.recoveryParam=d.recoveryParam)}Zh=i;function s(){this.place=0}function a(d,l){var w=d[l.place++];if(!(w&128))return w;var x=w&15;if(x===0||x>4||d[l.place]===0)return!1;for(var C=0,R=0,N=l.place;R<x;R++,N++)C<<=8,C|=d[N],C>>>=0;return C<=127?!1:(l.place=N,C)}function f(d){for(var l=0,w=d.length-1;!d[l]&&!(d[l+1]&128)&&l<w;)l++;return l===0?d:d.slice(l)}i.prototype._importDER=function(l,w){l=e.toArray(l,w);var x=new s;if(l[x.place++]!==48)return!1;var C=a(l,x);if(C===!1||C+x.place!==l.length||l[x.place++]!==2)return!1;var R=a(l,x);if(R===!1||(l[x.place]&128)!==0)return!1;var N=l.slice(x.place,R+x.place);if(x.place+=R,l[x.place++]!==2)return!1;var T=a(l,x);if(T===!1||l.length!==T+x.place||(l[x.place]&128)!==0)return!1;var U=l.slice(x.place,T+x.place);if(N[0]===0)if(N[1]&128)N=N.slice(1);else return!1;if(U[0]===0)if(U[1]&128)U=U.slice(1);else return!1;return this.r=new r(N),this.s=new r(U),this.recoveryParam=null,!0};function u(d,l){if(l<128){d.push(l);return}var w=1+(Math.log(l)/Math.LN2>>>3);for(d.push(w|128);--w;)d.push(l>>>(w<<3)&255);d.push(l)}return i.prototype.toDER=function(l){var w=this.r.toArray(),x=this.s.toArray();for(w[0]&128&&(w=[0].concat(w)),x[0]&128&&(x=[0].concat(x)),w=f(w),x=f(x);!x[0]&&!(x[1]&128);)x=x.slice(1);var C=[2];u(C,w.length),C=C.concat(w),C.push(2),u(C,x.length);var R=C.concat(x),N=[48];return u(N,R.length),N=N.concat(R),e.encode(N,l)},Zh}var eu,dp;function s4(){if(dp)return eu;dp=1;var r=Ln(),e=r4(),t=Mi(),i=i0(),s=cg(),a=t.assert,f=i4(),u=n4();function d(l){if(!(this instanceof d))return new d(l);typeof l=="string"&&(a(Object.prototype.hasOwnProperty.call(i,l),"Unknown curve "+l),l=i[l]),l instanceof i.PresetCurve&&(l={curve:l}),this.curve=l.curve.curve,this.n=this.curve.n,this.nh=this.n.ushrn(1),this.g=this.curve.g,this.g=l.curve.g,this.g.precompute(l.curve.n.bitLength()+1),this.hash=l.hash||l.curve.hash}return eu=d,d.prototype.keyPair=function(w){return new f(this,w)},d.prototype.keyFromPrivate=function(w,x){return f.fromPrivate(this,w,x)},d.prototype.keyFromPublic=function(w,x){return f.fromPublic(this,w,x)},d.prototype.genKeyPair=function(w){w||(w={});for(var x=new e({hash:this.hash,pers:w.pers,persEnc:w.persEnc||"utf8",entropy:w.entropy||s(this.hash.hmacStrength),entropyEnc:w.entropy&&w.entropyEnc||"utf8",nonce:this.n.toArray()}),C=this.n.byteLength(),R=this.n.sub(new r(2));;){var N=new r(x.generate(C));if(!(N.cmp(R)>0))return N.iaddn(1),this.keyFromPrivate(N)}},d.prototype._truncateToN=function(w,x,C){var R;if(r.isBN(w)||typeof w=="number")w=new r(w,16),R=w.byteLength();else if(typeof w=="object")R=w.length,w=new r(w,16);else{var N=w.toString();R=N.length+1>>>1,w=new r(N,16)}typeof C!="number"&&(C=R*8);var T=C-this.n.bitLength();return T>0&&(w=w.ushrn(T)),!x&&w.cmp(this.n)>=0?w.sub(this.n):w},d.prototype.sign=function(w,x,C,R){if(typeof C=="object"&&(R=C,C=null),R||(R={}),typeof w!="string"&&typeof w!="number"&&!r.isBN(w)){a(typeof w=="object"&&w&&typeof w.length=="number","Expected message to be an array-like, a hex string, or a BN instance"),a(w.length>>>0===w.length);for(var N=0;N<w.length;N++)a((w[N]&255)===w[N])}x=this.keyFromPrivate(x,C),w=this._truncateToN(w,!1,R.msgBitLength),a(!w.isNeg(),"Can not sign a negative message");var T=this.n.byteLength(),U=x.getPrivate().toArray("be",T),Q=w.toArray("be",T);a(new r(Q).eq(w),"Can not sign message");for(var F=new e({hash:this.hash,entropy:U,nonce:Q,pers:R.pers,persEnc:R.persEnc||"utf8"}),V=this.n.sub(new r(1)),D=0;;D++){var B=R.k?R.k(D):new r(F.generate(this.n.byteLength()));if(B=this._truncateToN(B,!0),!(B.cmpn(1)<=0||B.cmp(V)>=0)){var H=this.g.mul(B);if(!H.isInfinity()){var E=H.getX(),$=E.umod(this.n);if($.cmpn(0)!==0){var ne=B.invm(this.n).mul($.mul(x.getPrivate()).iadd(w));if(ne=ne.umod(this.n),ne.cmpn(0)!==0){var fe=(H.getY().isOdd()?1:0)|(E.cmp($)!==0?2:0);return R.canonical&&ne.cmp(this.nh)>0&&(ne=this.n.sub(ne),fe^=1),new u({r:$,s:ne,recoveryParam:fe})}}}}}},d.prototype.verify=function(w,x,C,R,N){N||(N={}),w=this._truncateToN(w,!1,N.msgBitLength),C=this.keyFromPublic(C,R),x=new u(x,"hex");var T=x.r,U=x.s;if(T.cmpn(1)<0||T.cmp(this.n)>=0||U.cmpn(1)<0||U.cmp(this.n)>=0)return!1;var Q=U.invm(this.n),F=Q.mul(w).umod(this.n),V=Q.mul(T).umod(this.n),D;return this.curve._maxwellTrick?(D=this.g.jmulAdd(F,C.getPublic(),V),D.isInfinity()?!1:D.eqXToP(T)):(D=this.g.mulAdd(F,C.getPublic(),V),D.isInfinity()?!1:D.getX().umod(this.n).cmp(T)===0)},d.prototype.recoverPubKey=function(l,w,x,C){a((3&x)===x,"The recovery param is more than two bits"),w=new u(w,C);var R=this.n,N=new r(l),T=w.r,U=w.s,Q=x&1,F=x>>1;if(T.cmp(this.curve.p.umod(this.curve.n))>=0&&F)throw new Error("Unable to find sencond key candinate");F?T=this.curve.pointFromX(T.add(this.curve.n),Q):T=this.curve.pointFromX(T,Q);var V=w.r.invm(R),D=R.sub(N).mul(V).umod(R),B=U.mul(V).umod(R);return this.g.mulAdd(D,T,B)},d.prototype.getKeyRecoveryParam=function(l,w,x,C){if(w=new u(w,C),w.recoveryParam!==null)return w.recoveryParam;for(var R=0;R<4;R++){var N;try{N=this.recoverPubKey(l,w,R)}catch{continue}if(N.eq(x))return R}throw new Error("Unable to find valid recovery factor")},eu}var tu,pp;function a4(){if(pp)return tu;pp=1;var r=Mi(),e=r.assert,t=r.parseBytes,i=r.cachedProperty;function s(a,f){this.eddsa=a,this._secret=t(f.secret),a.isPoint(f.pub)?this._pub=f.pub:this._pubBytes=t(f.pub)}return s.fromPublic=function(f,u){return u instanceof s?u:new s(f,{pub:u})},s.fromSecret=function(f,u){return u instanceof s?u:new s(f,{secret:u})},s.prototype.secret=function(){return this._secret},i(s,"pubBytes",function(){return this.eddsa.encodePoint(this.pub())}),i(s,"pub",function(){return this._pubBytes?this.eddsa.decodePoint(this._pubBytes):this.eddsa.g.mul(this.priv())}),i(s,"privBytes",function(){var f=this.eddsa,u=this.hash(),d=f.encodingLength-1,l=u.slice(0,f.encodingLength);return l[0]&=248,l[d]&=127,l[d]|=64,l}),i(s,"priv",function(){return this.eddsa.decodeInt(this.privBytes())}),i(s,"hash",function(){return this.eddsa.hash().update(this.secret()).digest()}),i(s,"messagePrefix",function(){return this.hash().slice(this.eddsa.encodingLength)}),s.prototype.sign=function(f){return e(this._secret,"KeyPair can only verify"),this.eddsa.sign(f,this)},s.prototype.verify=function(f,u){return this.eddsa.verify(f,u,this)},s.prototype.getSecret=function(f){return e(this._secret,"KeyPair is public only"),r.encode(this.secret(),f)},s.prototype.getPublic=function(f){return r.encode(this.pubBytes(),f)},tu=s,tu}var ru,gp;function o4(){if(gp)return ru;gp=1;var r=Ln(),e=Mi(),t=e.assert,i=e.cachedProperty,s=e.parseBytes;function a(f,u){this.eddsa=f,typeof u!="object"&&(u=s(u)),Array.isArray(u)&&(t(u.length===f.encodingLength*2,"Signature has invalid size"),u={R:u.slice(0,f.encodingLength),S:u.slice(f.encodingLength)}),t(u.R&&u.S,"Signature without R or S"),f.isPoint(u.R)&&(this._R=u.R),u.S instanceof r&&(this._S=u.S),this._Rencoded=Array.isArray(u.R)?u.R:u.Rencoded,this._Sencoded=Array.isArray(u.S)?u.S:u.Sencoded}return i(a,"S",function(){return this.eddsa.decodeInt(this.Sencoded())}),i(a,"R",function(){return this.eddsa.decodePoint(this.Rencoded())}),i(a,"Rencoded",function(){return this.eddsa.encodePoint(this.R())}),i(a,"Sencoded",function(){return this.eddsa.encodeInt(this.S())}),a.prototype.toBytes=function(){return this.Rencoded().concat(this.Sencoded())},a.prototype.toHex=function(){return e.encode(this.toBytes(),"hex").toUpperCase()},ru=a,ru}var iu,vp;function c4(){if(vp)return iu;vp=1;var r=e0(),e=i0(),t=Mi(),i=t.assert,s=t.parseBytes,a=a4(),f=o4();function u(d){if(i(d==="ed25519","only tested with ed25519 so far"),!(this instanceof u))return new u(d);d=e[d].curve,this.curve=d,this.g=d.g,this.g.precompute(d.n.bitLength()+1),this.pointClass=d.point().constructor,this.encodingLength=Math.ceil(d.n.bitLength()/8),this.hash=r.sha512}return iu=u,u.prototype.sign=function(l,w){l=s(l);var x=this.keyFromSecret(w),C=this.hashInt(x.messagePrefix(),l),R=this.g.mul(C),N=this.encodePoint(R),T=this.hashInt(N,x.pubBytes(),l).mul(x.priv()),U=C.add(T).umod(this.curve.n);return this.makeSignature({R,S:U,Rencoded:N})},u.prototype.verify=function(l,w,x){if(l=s(l),w=this.makeSignature(w),w.S().gte(w.eddsa.curve.n)||w.S().isNeg())return!1;var C=this.keyFromPublic(x),R=this.hashInt(w.Rencoded(),C.pubBytes(),l),N=this.g.mul(w.S()),T=w.R().add(C.pub().mul(R));return T.eq(N)},u.prototype.hashInt=function(){for(var l=this.hash(),w=0;w<arguments.length;w++)l.update(arguments[w]);return t.intFromLE(l.digest()).umod(this.curve.n)},u.prototype.keyFromPublic=function(l){return a.fromPublic(this,l)},u.prototype.keyFromSecret=function(l){return a.fromSecret(this,l)},u.prototype.makeSignature=function(l){return l instanceof f?l:new f(this,l)},u.prototype.encodePoint=function(l){var w=l.getY().toArray("le",this.encodingLength);return w[this.encodingLength-1]|=l.getX().isOdd()?128:0,w},u.prototype.decodePoint=function(l){l=t.parseBytes(l);var w=l.length-1,x=l.slice(0,w).concat(l[w]&-129),C=(l[w]&128)!==0,R=t.intFromLE(x);return this.curve.pointFromY(R,C)},u.prototype.encodeInt=function(l){return l.toArray("le",this.encodingLength)},u.prototype.decodeInt=function(l){return t.intFromLE(l)},u.prototype.isPoint=function(l){return l instanceof this.pointClass},iu}var bp;function f4(){return bp||(bp=1,function(r){var e=r;e.version=Y5.version,e.utils=Mi(),e.rand=cg(),e.curve=fg(),e.curves=i0(),e.ec=s4(),e.eddsa=c4()}(kh)),kh}var h4=f4(),nu={},su={},mp;function u4(){return mp||(mp=1,function(r){Object.defineProperty(r,"__esModule",{value:!0});var e=fo(),t=Vi();r.DIGEST_LENGTH=64,r.BLOCK_SIZE=128;var i=function(){function u(){this.digestLength=r.DIGEST_LENGTH,this.blockSize=r.BLOCK_SIZE,this._stateHi=new Int32Array(8),this._stateLo=new Int32Array(8),this._tempHi=new Int32Array(16),this._tempLo=new Int32Array(16),this._buffer=new Uint8Array(256),this._bufferLength=0,this._bytesHashed=0,this._finished=!1,this.reset()}return u.prototype._initState=function(){this._stateHi[0]=1779033703,this._stateHi[1]=3144134277,this._stateHi[2]=1013904242,this._stateHi[3]=2773480762,this._stateHi[4]=1359893119,this._stateHi[5]=2600822924,this._stateHi[6]=528734635,this._stateHi[7]=1541459225,this._stateLo[0]=4089235720,this._stateLo[1]=2227873595,this._stateLo[2]=4271175723,this._stateLo[3]=1595750129,this._stateLo[4]=2917565137,this._stateLo[5]=725511199,this._stateLo[6]=4215389547,this._stateLo[7]=327033209},u.prototype.reset=function(){return this._initState(),this._bufferLength=0,this._bytesHashed=0,this._finished=!1,this},u.prototype.clean=function(){t.wipe(this._buffer),t.wipe(this._tempHi),t.wipe(this._tempLo),this.reset()},u.prototype.update=function(d,l){if(l===void 0&&(l=d.length),this._finished)throw new Error("SHA512: can't update because hash was finished.");var w=0;if(this._bytesHashed+=l,this._bufferLength>0){for(;this._bufferLength<r.BLOCK_SIZE&&l>0;)this._buffer[this._bufferLength++]=d[w++],l--;this._bufferLength===this.blockSize&&(a(this._tempHi,this._tempLo,this._stateHi,this._stateLo,this._buffer,0,this.blockSize),this._bufferLength=0)}for(l>=this.blockSize&&(w=a(this._tempHi,this._tempLo,this._stateHi,this._stateLo,d,w,l),l%=this.blockSize);l>0;)this._buffer[this._bufferLength++]=d[w++],l--;return this},u.prototype.finish=function(d){if(!this._finished){var l=this._bytesHashed,w=this._bufferLength,x=l/536870912|0,C=l<<3,R=l%128<112?128:256;this._buffer[w]=128;for(var N=w+1;N<R-8;N++)this._buffer[N]=0;e.writeUint32BE(x,this._buffer,R-8),e.writeUint32BE(C,this._buffer,R-4),a(this._tempHi,this._tempLo,this._stateHi,this._stateLo,this._buffer,0,R),this._finished=!0}for(var N=0;N<this.digestLength/8;N++)e.writeUint32BE(this._stateHi[N],d,N*8),e.writeUint32BE(this._stateLo[N],d,N*8+4);return this},u.prototype.digest=function(){var d=new Uint8Array(this.digestLength);return this.finish(d),d},u.prototype.saveState=function(){if(this._finished)throw new Error("SHA256: cannot save finished state");return{stateHi:new Int32Array(this._stateHi),stateLo:new Int32Array(this._stateLo),buffer:this._bufferLength>0?new Uint8Array(this._buffer):void 0,bufferLength:this._bufferLength,bytesHashed:this._bytesHashed}},u.prototype.restoreState=function(d){return this._stateHi.set(d.stateHi),this._stateLo.set(d.stateLo),this._bufferLength=d.bufferLength,d.buffer&&this._buffer.set(d.buffer),this._bytesHashed=d.bytesHashed,this._finished=!1,this},u.prototype.cleanSavedState=function(d){t.wipe(d.stateHi),t.wipe(d.stateLo),d.buffer&&t.wipe(d.buffer),d.bufferLength=0,d.bytesHashed=0},u}();r.SHA512=i;var s=new Int32Array([1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591]);function a(u,d,l,w,x,C,R){for(var N=l[0],T=l[1],U=l[2],Q=l[3],F=l[4],V=l[5],D=l[6],B=l[7],H=w[0],E=w[1],$=w[2],ne=w[3],fe=w[4],z=w[5],y=w[6],c=w[7],h,p,m,_,I,S,v,b;R>=128;){for(var O=0;O<16;O++){var W=8*O+C;u[O]=e.readUint32BE(x,W),d[O]=e.readUint32BE(x,W+4)}for(var O=0;O<80;O++){var te=N,P=T,ee=U,k=Q,G=F,J=V,A=D,K=B,ae=H,oe=E,he=$,be=ne,we=fe,Me=z,Qe=y,Ce=c;if(h=B,p=c,I=p&65535,S=p>>>16,v=h&65535,b=h>>>16,h=(F>>>14|fe<<18)^(F>>>18|fe<<14)^(fe>>>9|F<<23),p=(fe>>>14|F<<18)^(fe>>>18|F<<14)^(F>>>9|fe<<23),I+=p&65535,S+=p>>>16,v+=h&65535,b+=h>>>16,h=F&V^~F&D,p=fe&z^~fe&y,I+=p&65535,S+=p>>>16,v+=h&65535,b+=h>>>16,h=s[O*2],p=s[O*2+1],I+=p&65535,S+=p>>>16,v+=h&65535,b+=h>>>16,h=u[O%16],p=d[O%16],I+=p&65535,S+=p>>>16,v+=h&65535,b+=h>>>16,S+=I>>>16,v+=S>>>16,b+=v>>>16,m=v&65535|b<<16,_=I&65535|S<<16,h=m,p=_,I=p&65535,S=p>>>16,v=h&65535,b=h>>>16,h=(N>>>28|H<<4)^(H>>>2|N<<30)^(H>>>7|N<<25),p=(H>>>28|N<<4)^(N>>>2|H<<30)^(N>>>7|H<<25),I+=p&65535,S+=p>>>16,v+=h&65535,b+=h>>>16,h=N&T^N&U^T&U,p=H&E^H&$^E&$,I+=p&65535,S+=p>>>16,v+=h&65535,b+=h>>>16,S+=I>>>16,v+=S>>>16,b+=v>>>16,K=v&65535|b<<16,Ce=I&65535|S<<16,h=k,p=be,I=p&65535,S=p>>>16,v=h&65535,b=h>>>16,h=m,p=_,I+=p&65535,S+=p>>>16,v+=h&65535,b+=h>>>16,S+=I>>>16,v+=S>>>16,b+=v>>>16,k=v&65535|b<<16,be=I&65535|S<<16,T=te,U=P,Q=ee,F=k,V=G,D=J,B=A,N=K,E=ae,$=oe,ne=he,fe=be,z=we,y=Me,c=Qe,H=Ce,O%16===15)for(var W=0;W<16;W++)h=u[W],p=d[W],I=p&65535,S=p>>>16,v=h&65535,b=h>>>16,h=u[(W+9)%16],p=d[(W+9)%16],I+=p&65535,S+=p>>>16,v+=h&65535,b+=h>>>16,m=u[(W+1)%16],_=d[(W+1)%16],h=(m>>>1|_<<31)^(m>>>8|_<<24)^m>>>7,p=(_>>>1|m<<31)^(_>>>8|m<<24)^(_>>>7|m<<25),I+=p&65535,S+=p>>>16,v+=h&65535,b+=h>>>16,m=u[(W+14)%16],_=d[(W+14)%16],h=(m>>>19|_<<13)^(_>>>29|m<<3)^m>>>6,p=(_>>>19|m<<13)^(m>>>29|_<<3)^(_>>>6|m<<26),I+=p&65535,S+=p>>>16,v+=h&65535,b+=h>>>16,S+=I>>>16,v+=S>>>16,b+=v>>>16,u[W]=v&65535|b<<16,d[W]=I&65535|S<<16}h=N,p=H,I=p&65535,S=p>>>16,v=h&65535,b=h>>>16,h=l[0],p=w[0],I+=p&65535,S+=p>>>16,v+=h&65535,b+=h>>>16,S+=I>>>16,v+=S>>>16,b+=v>>>16,l[0]=N=v&65535|b<<16,w[0]=H=I&65535|S<<16,h=T,p=E,I=p&65535,S=p>>>16,v=h&65535,b=h>>>16,h=l[1],p=w[1],I+=p&65535,S+=p>>>16,v+=h&65535,b+=h>>>16,S+=I>>>16,v+=S>>>16,b+=v>>>16,l[1]=T=v&65535|b<<16,w[1]=E=I&65535|S<<16,h=U,p=$,I=p&65535,S=p>>>16,v=h&65535,b=h>>>16,h=l[2],p=w[2],I+=p&65535,S+=p>>>16,v+=h&65535,b+=h>>>16,S+=I>>>16,v+=S>>>16,b+=v>>>16,l[2]=U=v&65535|b<<16,w[2]=$=I&65535|S<<16,h=Q,p=ne,I=p&65535,S=p>>>16,v=h&65535,b=h>>>16,h=l[3],p=w[3],I+=p&65535,S+=p>>>16,v+=h&65535,b+=h>>>16,S+=I>>>16,v+=S>>>16,b+=v>>>16,l[3]=Q=v&65535|b<<16,w[3]=ne=I&65535|S<<16,h=F,p=fe,I=p&65535,S=p>>>16,v=h&65535,b=h>>>16,h=l[4],p=w[4],I+=p&65535,S+=p>>>16,v+=h&65535,b+=h>>>16,S+=I>>>16,v+=S>>>16,b+=v>>>16,l[4]=F=v&65535|b<<16,w[4]=fe=I&65535|S<<16,h=V,p=z,I=p&65535,S=p>>>16,v=h&65535,b=h>>>16,h=l[5],p=w[5],I+=p&65535,S+=p>>>16,v+=h&65535,b+=h>>>16,S+=I>>>16,v+=S>>>16,b+=v>>>16,l[5]=V=v&65535|b<<16,w[5]=z=I&65535|S<<16,h=D,p=y,I=p&65535,S=p>>>16,v=h&65535,b=h>>>16,h=l[6],p=w[6],I+=p&65535,S+=p>>>16,v+=h&65535,b+=h>>>16,S+=I>>>16,v+=S>>>16,b+=v>>>16,l[6]=D=v&65535|b<<16,w[6]=y=I&65535|S<<16,h=B,p=c,I=p&65535,S=p>>>16,v=h&65535,b=h>>>16,h=l[7],p=w[7],I+=p&65535,S+=p>>>16,v+=h&65535,b+=h>>>16,S+=I>>>16,v+=S>>>16,b+=v>>>16,l[7]=B=v&65535|b<<16,w[7]=c=I&65535|S<<16,C+=128,R-=128}return C}function f(u){var d=new i;d.update(u);var l=d.digest();return d.clean(),l}r.hash=f}(su)),su}var yp;function l4(){return yp||(yp=1,function(r){Object.defineProperty(r,"__esModule",{value:!0}),r.convertSecretKeyToX25519=r.convertPublicKeyToX25519=r.verify=r.sign=r.extractPublicKeyFromSecretKey=r.generateKeyPair=r.generateKeyPairFromSeed=r.SEED_LENGTH=r.SECRET_KEY_LENGTH=r.PUBLIC_KEY_LENGTH=r.SIGNATURE_LENGTH=void 0;const e=r0(),t=u4(),i=Vi();r.SIGNATURE_LENGTH=64,r.PUBLIC_KEY_LENGTH=32,r.SECRET_KEY_LENGTH=64,r.SEED_LENGTH=32;function s(k){const G=new Float64Array(16);if(k)for(let J=0;J<k.length;J++)G[J]=k[J];return G}const a=new Uint8Array(32);a[0]=9;const f=s(),u=s([1]),d=s([30883,4953,19914,30187,55467,16705,2637,112,59544,30585,16505,36039,65139,11119,27886,20995]),l=s([61785,9906,39828,60374,45398,33411,5274,224,53552,61171,33010,6542,64743,22239,55772,9222]),w=s([54554,36645,11616,51542,42930,38181,51040,26924,56412,64982,57905,49316,21502,52590,14035,8553]),x=s([26200,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214]),C=s([41136,18958,6951,50414,58488,44335,6150,12099,55207,15867,153,11085,57099,20417,9344,11139]);function R(k,G){for(let J=0;J<16;J++)k[J]=G[J]|0}function N(k){let G=1;for(let J=0;J<16;J++){let A=k[J]+G+65535;G=Math.floor(A/65536),k[J]=A-G*65536}k[0]+=G-1+37*(G-1)}function T(k,G,J){const A=~(J-1);for(let K=0;K<16;K++){const ae=A&(k[K]^G[K]);k[K]^=ae,G[K]^=ae}}function U(k,G){const J=s(),A=s();for(let K=0;K<16;K++)A[K]=G[K];N(A),N(A),N(A);for(let K=0;K<2;K++){J[0]=A[0]-65517;for(let oe=1;oe<15;oe++)J[oe]=A[oe]-65535-(J[oe-1]>>16&1),J[oe-1]&=65535;J[15]=A[15]-32767-(J[14]>>16&1);const ae=J[15]>>16&1;J[14]&=65535,T(A,J,1-ae)}for(let K=0;K<16;K++)k[2*K]=A[K]&255,k[2*K+1]=A[K]>>8}function Q(k,G){let J=0;for(let A=0;A<32;A++)J|=k[A]^G[A];return(1&J-1>>>8)-1}function F(k,G){const J=new Uint8Array(32),A=new Uint8Array(32);return U(J,k),U(A,G),Q(J,A)}function V(k){const G=new Uint8Array(32);return U(G,k),G[0]&1}function D(k,G){for(let J=0;J<16;J++)k[J]=G[2*J]+(G[2*J+1]<<8);k[15]&=32767}function B(k,G,J){for(let A=0;A<16;A++)k[A]=G[A]+J[A]}function H(k,G,J){for(let A=0;A<16;A++)k[A]=G[A]-J[A]}function E(k,G,J){let A,K,ae=0,oe=0,he=0,be=0,we=0,Me=0,Qe=0,Ce=0,Te=0,Se=0,me=0,Ne=0,Oe=0,ve=0,qe=0,xe=0,ye=0,Le=0,Pe=0,_e=0,He=0,Ge=0,Ee=0,Ke=0,ut=0,Ve=0,wt=0,lt=0,Ye=0,xt=0,Mt=0,Fe=J[0],Xe=J[1],tt=J[2],De=J[3],et=J[4],Ze=J[5],ze=J[6],ft=J[7],rt=J[8],ke=J[9],it=J[10],st=J[11],Be=J[12],We=J[13],ht=J[14],$e=J[15];A=G[0],ae+=A*Fe,oe+=A*Xe,he+=A*tt,be+=A*De,we+=A*et,Me+=A*Ze,Qe+=A*ze,Ce+=A*ft,Te+=A*rt,Se+=A*ke,me+=A*it,Ne+=A*st,Oe+=A*Be,ve+=A*We,qe+=A*ht,xe+=A*$e,A=G[1],oe+=A*Fe,he+=A*Xe,be+=A*tt,we+=A*De,Me+=A*et,Qe+=A*Ze,Ce+=A*ze,Te+=A*ft,Se+=A*rt,me+=A*ke,Ne+=A*it,Oe+=A*st,ve+=A*Be,qe+=A*We,xe+=A*ht,ye+=A*$e,A=G[2],he+=A*Fe,be+=A*Xe,we+=A*tt,Me+=A*De,Qe+=A*et,Ce+=A*Ze,Te+=A*ze,Se+=A*ft,me+=A*rt,Ne+=A*ke,Oe+=A*it,ve+=A*st,qe+=A*Be,xe+=A*We,ye+=A*ht,Le+=A*$e,A=G[3],be+=A*Fe,we+=A*Xe,Me+=A*tt,Qe+=A*De,Ce+=A*et,Te+=A*Ze,Se+=A*ze,me+=A*ft,Ne+=A*rt,Oe+=A*ke,ve+=A*it,qe+=A*st,xe+=A*Be,ye+=A*We,Le+=A*ht,Pe+=A*$e,A=G[4],we+=A*Fe,Me+=A*Xe,Qe+=A*tt,Ce+=A*De,Te+=A*et,Se+=A*Ze,me+=A*ze,Ne+=A*ft,Oe+=A*rt,ve+=A*ke,qe+=A*it,xe+=A*st,ye+=A*Be,Le+=A*We,Pe+=A*ht,_e+=A*$e,A=G[5],Me+=A*Fe,Qe+=A*Xe,Ce+=A*tt,Te+=A*De,Se+=A*et,me+=A*Ze,Ne+=A*ze,Oe+=A*ft,ve+=A*rt,qe+=A*ke,xe+=A*it,ye+=A*st,Le+=A*Be,Pe+=A*We,_e+=A*ht,He+=A*$e,A=G[6],Qe+=A*Fe,Ce+=A*Xe,Te+=A*tt,Se+=A*De,me+=A*et,Ne+=A*Ze,Oe+=A*ze,ve+=A*ft,qe+=A*rt,xe+=A*ke,ye+=A*it,Le+=A*st,Pe+=A*Be,_e+=A*We,He+=A*ht,Ge+=A*$e,A=G[7],Ce+=A*Fe,Te+=A*Xe,Se+=A*tt,me+=A*De,Ne+=A*et,Oe+=A*Ze,ve+=A*ze,qe+=A*ft,xe+=A*rt,ye+=A*ke,Le+=A*it,Pe+=A*st,_e+=A*Be,He+=A*We,Ge+=A*ht,Ee+=A*$e,A=G[8],Te+=A*Fe,Se+=A*Xe,me+=A*tt,Ne+=A*De,Oe+=A*et,ve+=A*Ze,qe+=A*ze,xe+=A*ft,ye+=A*rt,Le+=A*ke,Pe+=A*it,_e+=A*st,He+=A*Be,Ge+=A*We,Ee+=A*ht,Ke+=A*$e,A=G[9],Se+=A*Fe,me+=A*Xe,Ne+=A*tt,Oe+=A*De,ve+=A*et,qe+=A*Ze,xe+=A*ze,ye+=A*ft,Le+=A*rt,Pe+=A*ke,_e+=A*it,He+=A*st,Ge+=A*Be,Ee+=A*We,Ke+=A*ht,ut+=A*$e,A=G[10],me+=A*Fe,Ne+=A*Xe,Oe+=A*tt,ve+=A*De,qe+=A*et,xe+=A*Ze,ye+=A*ze,Le+=A*ft,Pe+=A*rt,_e+=A*ke,He+=A*it,Ge+=A*st,Ee+=A*Be,Ke+=A*We,ut+=A*ht,Ve+=A*$e,A=G[11],Ne+=A*Fe,Oe+=A*Xe,ve+=A*tt,qe+=A*De,xe+=A*et,ye+=A*Ze,Le+=A*ze,Pe+=A*ft,_e+=A*rt,He+=A*ke,Ge+=A*it,Ee+=A*st,Ke+=A*Be,ut+=A*We,Ve+=A*ht,wt+=A*$e,A=G[12],Oe+=A*Fe,ve+=A*Xe,qe+=A*tt,xe+=A*De,ye+=A*et,Le+=A*Ze,Pe+=A*ze,_e+=A*ft,He+=A*rt,Ge+=A*ke,Ee+=A*it,Ke+=A*st,ut+=A*Be,Ve+=A*We,wt+=A*ht,lt+=A*$e,A=G[13],ve+=A*Fe,qe+=A*Xe,xe+=A*tt,ye+=A*De,Le+=A*et,Pe+=A*Ze,_e+=A*ze,He+=A*ft,Ge+=A*rt,Ee+=A*ke,Ke+=A*it,ut+=A*st,Ve+=A*Be,wt+=A*We,lt+=A*ht,Ye+=A*$e,A=G[14],qe+=A*Fe,xe+=A*Xe,ye+=A*tt,Le+=A*De,Pe+=A*et,_e+=A*Ze,He+=A*ze,Ge+=A*ft,Ee+=A*rt,Ke+=A*ke,ut+=A*it,Ve+=A*st,wt+=A*Be,lt+=A*We,Ye+=A*ht,xt+=A*$e,A=G[15],xe+=A*Fe,ye+=A*Xe,Le+=A*tt,Pe+=A*De,_e+=A*et,He+=A*Ze,Ge+=A*ze,Ee+=A*ft,Ke+=A*rt,ut+=A*ke,Ve+=A*it,wt+=A*st,lt+=A*Be,Ye+=A*We,xt+=A*ht,Mt+=A*$e,ae+=38*ye,oe+=38*Le,he+=38*Pe,be+=38*_e,we+=38*He,Me+=38*Ge,Qe+=38*Ee,Ce+=38*Ke,Te+=38*ut,Se+=38*Ve,me+=38*wt,Ne+=38*lt,Oe+=38*Ye,ve+=38*xt,qe+=38*Mt,K=1,A=ae+K+65535,K=Math.floor(A/65536),ae=A-K*65536,A=oe+K+65535,K=Math.floor(A/65536),oe=A-K*65536,A=he+K+65535,K=Math.floor(A/65536),he=A-K*65536,A=be+K+65535,K=Math.floor(A/65536),be=A-K*65536,A=we+K+65535,K=Math.floor(A/65536),we=A-K*65536,A=Me+K+65535,K=Math.floor(A/65536),Me=A-K*65536,A=Qe+K+65535,K=Math.floor(A/65536),Qe=A-K*65536,A=Ce+K+65535,K=Math.floor(A/65536),Ce=A-K*65536,A=Te+K+65535,K=Math.floor(A/65536),Te=A-K*65536,A=Se+K+65535,K=Math.floor(A/65536),Se=A-K*65536,A=me+K+65535,K=Math.floor(A/65536),me=A-K*65536,A=Ne+K+65535,K=Math.floor(A/65536),Ne=A-K*65536,A=Oe+K+65535,K=Math.floor(A/65536),Oe=A-K*65536,A=ve+K+65535,K=Math.floor(A/65536),ve=A-K*65536,A=qe+K+65535,K=Math.floor(A/65536),qe=A-K*65536,A=xe+K+65535,K=Math.floor(A/65536),xe=A-K*65536,ae+=K-1+37*(K-1),K=1,A=ae+K+65535,K=Math.floor(A/65536),ae=A-K*65536,A=oe+K+65535,K=Math.floor(A/65536),oe=A-K*65536,A=he+K+65535,K=Math.floor(A/65536),he=A-K*65536,A=be+K+65535,K=Math.floor(A/65536),be=A-K*65536,A=we+K+65535,K=Math.floor(A/65536),we=A-K*65536,A=Me+K+65535,K=Math.floor(A/65536),Me=A-K*65536,A=Qe+K+65535,K=Math.floor(A/65536),Qe=A-K*65536,A=Ce+K+65535,K=Math.floor(A/65536),Ce=A-K*65536,A=Te+K+65535,K=Math.floor(A/65536),Te=A-K*65536,A=Se+K+65535,K=Math.floor(A/65536),Se=A-K*65536,A=me+K+65535,K=Math.floor(A/65536),me=A-K*65536,A=Ne+K+65535,K=Math.floor(A/65536),Ne=A-K*65536,A=Oe+K+65535,K=Math.floor(A/65536),Oe=A-K*65536,A=ve+K+65535,K=Math.floor(A/65536),ve=A-K*65536,A=qe+K+65535,K=Math.floor(A/65536),qe=A-K*65536,A=xe+K+65535,K=Math.floor(A/65536),xe=A-K*65536,ae+=K-1+37*(K-1),k[0]=ae,k[1]=oe,k[2]=he,k[3]=be,k[4]=we,k[5]=Me,k[6]=Qe,k[7]=Ce,k[8]=Te,k[9]=Se,k[10]=me,k[11]=Ne,k[12]=Oe,k[13]=ve,k[14]=qe,k[15]=xe}function $(k,G){E(k,G,G)}function ne(k,G){const J=s();let A;for(A=0;A<16;A++)J[A]=G[A];for(A=253;A>=0;A--)$(J,J),A!==2&&A!==4&&E(J,J,G);for(A=0;A<16;A++)k[A]=J[A]}function fe(k,G){const J=s();let A;for(A=0;A<16;A++)J[A]=G[A];for(A=250;A>=0;A--)$(J,J),A!==1&&E(J,J,G);for(A=0;A<16;A++)k[A]=J[A]}function z(k,G){const J=s(),A=s(),K=s(),ae=s(),oe=s(),he=s(),be=s(),we=s(),Me=s();H(J,k[1],k[0]),H(Me,G[1],G[0]),E(J,J,Me),B(A,k[0],k[1]),B(Me,G[0],G[1]),E(A,A,Me),E(K,k[3],G[3]),E(K,K,l),E(ae,k[2],G[2]),B(ae,ae,ae),H(oe,A,J),H(he,ae,K),B(be,ae,K),B(we,A,J),E(k[0],oe,he),E(k[1],we,be),E(k[2],be,he),E(k[3],oe,we)}function y(k,G,J){for(let A=0;A<4;A++)T(k[A],G[A],J)}function c(k,G){const J=s(),A=s(),K=s();ne(K,G[2]),E(J,G[0],K),E(A,G[1],K),U(k,A),k[31]^=V(J)<<7}function h(k,G,J){R(k[0],f),R(k[1],u),R(k[2],u),R(k[3],f);for(let A=255;A>=0;--A){const K=J[A/8|0]>>(A&7)&1;y(k,G,K),z(G,k),z(k,k),y(k,G,K)}}function p(k,G){const J=[s(),s(),s(),s()];R(J[0],w),R(J[1],x),R(J[2],u),E(J[3],w,x),h(k,J,G)}function m(k){if(k.length!==r.SEED_LENGTH)throw new Error(`ed25519: seed must be ${r.SEED_LENGTH} bytes`);const G=(0,t.hash)(k);G[0]&=248,G[31]&=127,G[31]|=64;const J=new Uint8Array(32),A=[s(),s(),s(),s()];p(A,G),c(J,A);const K=new Uint8Array(64);return K.set(k),K.set(J,32),{publicKey:J,secretKey:K}}r.generateKeyPairFromSeed=m;function _(k){const G=(0,e.randomBytes)(32,k),J=m(G);return(0,i.wipe)(G),J}r.generateKeyPair=_;function I(k){if(k.length!==r.SECRET_KEY_LENGTH)throw new Error(`ed25519: secret key must be ${r.SECRET_KEY_LENGTH} bytes`);return new Uint8Array(k.subarray(32))}r.extractPublicKeyFromSecretKey=I;const S=new Float64Array([237,211,245,92,26,99,18,88,214,156,247,162,222,249,222,20,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,16]);function v(k,G){let J,A,K,ae;for(A=63;A>=32;--A){for(J=0,K=A-32,ae=A-12;K<ae;++K)G[K]+=J-16*G[A]*S[K-(A-32)],J=Math.floor((G[K]+128)/256),G[K]-=J*256;G[K]+=J,G[A]=0}for(J=0,K=0;K<32;K++)G[K]+=J-(G[31]>>4)*S[K],J=G[K]>>8,G[K]&=255;for(K=0;K<32;K++)G[K]-=J*S[K];for(A=0;A<32;A++)G[A+1]+=G[A]>>8,k[A]=G[A]&255}function b(k){const G=new Float64Array(64);for(let J=0;J<64;J++)G[J]=k[J];for(let J=0;J<64;J++)k[J]=0;v(k,G)}function O(k,G){const J=new Float64Array(64),A=[s(),s(),s(),s()],K=(0,t.hash)(k.subarray(0,32));K[0]&=248,K[31]&=127,K[31]|=64;const ae=new Uint8Array(64);ae.set(K.subarray(32),32);const oe=new t.SHA512;oe.update(ae.subarray(32)),oe.update(G);const he=oe.digest();oe.clean(),b(he),p(A,he),c(ae,A),oe.reset(),oe.update(ae.subarray(0,32)),oe.update(k.subarray(32)),oe.update(G);const be=oe.digest();b(be);for(let we=0;we<32;we++)J[we]=he[we];for(let we=0;we<32;we++)for(let Me=0;Me<32;Me++)J[we+Me]+=be[we]*K[Me];return v(ae.subarray(32),J),ae}r.sign=O;function W(k,G){const J=s(),A=s(),K=s(),ae=s(),oe=s(),he=s(),be=s();return R(k[2],u),D(k[1],G),$(K,k[1]),E(ae,K,d),H(K,K,k[2]),B(ae,k[2],ae),$(oe,ae),$(he,oe),E(be,he,oe),E(J,be,K),E(J,J,ae),fe(J,J),E(J,J,K),E(J,J,ae),E(J,J,ae),E(k[0],J,ae),$(A,k[0]),E(A,A,ae),F(A,K)&&E(k[0],k[0],C),$(A,k[0]),E(A,A,ae),F(A,K)?-1:(V(k[0])===G[31]>>7&&H(k[0],f,k[0]),E(k[3],k[0],k[1]),0)}function te(k,G,J){const A=new Uint8Array(32),K=[s(),s(),s(),s()],ae=[s(),s(),s(),s()];if(J.length!==r.SIGNATURE_LENGTH)throw new Error(`ed25519: signature must be ${r.SIGNATURE_LENGTH} bytes`);if(W(ae,k))return!1;const oe=new t.SHA512;oe.update(J.subarray(0,32)),oe.update(k),oe.update(G);const he=oe.digest();return b(he),h(K,ae,he),p(ae,J.subarray(32)),z(K,ae),c(A,K),!Q(J,A)}r.verify=te;function P(k){let G=[s(),s(),s(),s()];if(W(G,k))throw new Error("Ed25519: invalid public key");let J=s(),A=s(),K=G[1];B(J,u,K),H(A,u,K),ne(A,A),E(J,J,A);let ae=new Uint8Array(32);return U(ae,J),ae}r.convertPublicKeyToX25519=P;function ee(k){const G=(0,t.hash)(k.subarray(0,32));G[0]&=248,G[31]&=127,G[31]|=64;const J=new Uint8Array(G.subarray(0,32));return(0,i.wipe)(G),J}r.convertSecretKeyToX25519=ee}(nu)),nu}var hg=l4();const d4="EdDSA",p4="JWT",Kc=".",of="base64url",ug="utf8",lg="utf8",g4=":",v4="did",b4="key",wp="base58btc",m4="z",y4="K36",w4=32;function _p(r){return jc(yr(mr(r,of),ug))}function Gc(r){return yr(mr(Vu(r),ug),of)}function dg(r){const e=mr(y4,wp),t=m4+yr(Tc([e,r]),wp);return[v4,b4,t].join(g4)}function _4(r){return yr(r,of)}function A4(r){return mr(r,of)}function x4(r){return mr([Gc(r.header),Gc(r.payload)].join(Kc),lg)}function E4(r){return[Gc(r.header),Gc(r.payload),_4(r.signature)].join(Kc)}function Ou(r){const e=r.split(Kc),t=_p(e[0]),i=_p(e[1]),s=A4(e[2]),a=mr(e.slice(0,2).join(Kc),lg);return{header:t,payload:i,signature:s,data:a}}function Ap(r=ho.randomBytes(w4)){return hg.generateKeyPairFromSeed(r)}async function S4(r,e,t,i,s=Ie.fromMiliseconds(Date.now())){const a={alg:d4,typ:p4},f=dg(i.publicKey),u=s+t,d={iss:f,sub:r,aud:e,iat:s,exp:u},l=x4({header:a,payload:d}),w=hg.sign(i.secretKey,l);return E4({header:a,payload:d,signature:w})}var M4={};const I4=":";function Xa(r){const[e,t]=r.split(I4);return{namespace:e,reference:t}}function xp(r,e=[]){const t=[];return Object.keys(r).forEach(i=>{if(e.length&&!e.includes(i))return;const s=r[i];t.push(...s.accounts)}),t}function pg(r,e){return r.includes(":")?[r]:e.chains||[]}var P4=Object.defineProperty,Ep=Object.getOwnPropertySymbols,R4=Object.prototype.hasOwnProperty,C4=Object.prototype.propertyIsEnumerable,Sp=(r,e,t)=>e in r?P4(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t,Mp=(r,e)=>{for(var t in e||(e={}))R4.call(e,t)&&Sp(r,t,e[t]);if(Ep)for(var t of Ep(e))C4.call(e,t)&&Sp(r,t,e[t]);return r};const N4="ReactNative",ai={reactNative:"react-native",node:"node",browser:"browser",unknown:"unknown"},O4="js";function Vc(){return typeof process<"u"&&typeof process.versions<"u"&&typeof process.versions.node<"u"}function ca(){return!na.getDocument()&&!!na.getNavigator()&&navigator.product===N4}function uo(){return!Vc()&&!!na.getNavigator()&&!!na.getDocument()}function lo(){return ca()?ai.reactNative:Vc()?ai.node:uo()?ai.browser:ai.unknown}function q4(){var r;try{return ca()&&typeof global<"u"&&typeof(global==null?void 0:global.Application)<"u"?(r=global.Application)==null?void 0:r.applicationId:void 0}catch{return}}function T4(r,e){let t=Hc.parse(r);return t=Mp(Mp({},t),e),r=Hc.stringify(t),r}function gg(){return d5.getWindowMetadata()||{name:"",description:"",url:"",icons:[""]}}function F4(){if(lo()===ai.reactNative&&typeof global<"u"&&typeof(global==null?void 0:global.Platform)<"u"){const{OS:t,Version:i}=global.Platform;return[t,i].join("-")}const r=g5();if(r===null)return"unknown";const e=r.os?r.os.replace(" ","").toLowerCase():"unknown";return r.type==="browser"?[e,r.name,r.version].join("-"):[e,r.version].join("-")}function D4(){var r;const e=lo();return e===ai.browser?[e,((r=na.getLocation())==null?void 0:r.host)||"unknown"].join(":"):e}function vg(r,e,t){const i=F4(),s=D4();return[[r,e].join("-"),[O4,t].join("-"),i,s].join("/")}function B4({protocol:r,version:e,relayUrl:t,sdkVersion:i,auth:s,projectId:a,useOnCloseEvent:f,bundleId:u}){const d=t.split("?"),l=vg(r,e,i),w={auth:s,ua:l,projectId:a,useOnCloseEvent:f,origin:u||void 0},x=T4(d[1]||"",w);return d[0]+"?"+x}function As(r,e){return r.filter(t=>e.includes(t)).length===r.length}function bg(r){return Object.fromEntries(r.entries())}function mg(r){return new Map(Object.entries(r))}function ys(r=Ie.FIVE_MINUTES,e){const t=Ie.toMiliseconds(r||Ie.FIVE_MINUTES);let i,s,a;return{resolve:f=>{a&&i&&(clearTimeout(a),i(f))},reject:f=>{a&&s&&(clearTimeout(a),s(f))},done:()=>new Promise((f,u)=>{a=setTimeout(()=>{u(new Error(e))},t),i=f,s=u})}}function ta(r,e,t){return new Promise(async(i,s)=>{const a=setTimeout(()=>s(new Error(t)),e);try{const f=await r;i(f)}catch(f){s(f)}clearTimeout(a)})}function yg(r,e){if(typeof e=="string"&&e.startsWith(`${r}:`))return e;if(r.toLowerCase()==="topic"){if(typeof e!="string")throw new Error('Value must be "string" for expirer target type: topic');return`topic:${e}`}else if(r.toLowerCase()==="id"){if(typeof e!="number")throw new Error('Value must be "number" for expirer target type: id');return`id:${e}`}throw new Error(`Unknown expirer target type: ${r}`)}function L4(r){return yg("topic",r)}function U4(r){return yg("id",r)}function wg(r){const[e,t]=r.split(":"),i={id:void 0,topic:void 0};if(e==="topic"&&typeof t=="string")i.topic=t;else if(e==="id"&&Number.isInteger(Number(t)))i.id=Number(t);else throw new Error(`Invalid target, expected id:number or topic:string, got ${e}:${t}`);return i}function dr(r,e){return Ie.fromMiliseconds(Date.now()+Ie.toMiliseconds(r))}function Yn(r){return Date.now()>=Ie.toMiliseconds(r)}function St(r,e){return`${r}${e?`:${e}`:""}`}function Dc(r=[],e=[]){return[...new Set([...r,...e])]}async function z4({id:r,topic:e,wcDeepLink:t}){var i;try{if(!t)return;const s=typeof t=="string"?JSON.parse(t):t,a=s==null?void 0:s.href;if(typeof a!="string")return;const f=k4(a,r,e),u=lo();if(u===ai.browser){if(!((i=na.getDocument())!=null&&i.hasFocus())){console.warn("Document does not have focus, skipping deeplink.");return}f.startsWith("https://")||f.startsWith("http://")?window.open(f,"_blank","noreferrer noopener"):window.open(f,j4()?"_blank":"_self","noreferrer noopener")}else u===ai.reactNative&&typeof(global==null?void 0:global.Linking)<"u"&&await global.Linking.openURL(f)}catch(s){console.error(s)}}function k4(r,e,t){const i=`requestId=${e}&sessionTopic=${t}`;r.endsWith("/")&&(r=r.slice(0,-1));let s=`${r}`;if(r.startsWith("https://t.me")){const a=r.includes("?")?"&startapp=":"?startapp=";s=`${s}${a}${H4(i,!0)}`}else s=`${s}/wc?${i}`;return s}async function $4(r,e){let t="";try{if(uo()&&(t=localStorage.getItem(e),t))return t;t=await r.getItem(e)}catch(i){console.error(i)}return t}function Ip(r,e){if(!r.includes(e))return null;const t=r.split(/([&,?,=])/),i=t.indexOf(e);return t[i+2]}function Pp(){return typeof crypto<"u"&&crypto!=null&&crypto.randomUUID?crypto.randomUUID():"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/gu,r=>{const e=Math.random()*16|0;return(r==="x"?e:e&3|8).toString(16)})}function n0(){return typeof process<"u"&&M4.IS_VITEST==="true"}function j4(){return typeof window<"u"&&(!!window.TelegramWebviewProxy||!!window.Telegram||!!window.TelegramWebviewProxyProto)}function H4(r,e=!1){const t=Buffer.from(r).toString("base64");return e?t.replace(/[=]/g,""):t}function _g(r){return Buffer.from(r,"base64").toString("utf-8")}var Ag=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function K4(r){var e=r.default;if(typeof e=="function"){var t=function(){return e.apply(this,arguments)};t.prototype=e.prototype}else t={};return Object.defineProperty(t,"__esModule",{value:!0}),Object.keys(r).forEach(function(i){var s=Object.getOwnPropertyDescriptor(r,i);Object.defineProperty(t,i,s.get?s:{enumerable:!0,get:function(){return r[i]}})}),t}var xg={exports:{}};/**
* [js-sha3]{@link https://github.com/emn178/js-sha3}
*
* @version 0.8.0
* @author Chen, Yi-Cyuan [emn178@gmail.com]
* @copyright Chen, Yi-Cyuan 2015-2018
* @license MIT
*/(function(r){(function(){var e="input is invalid type",t="finalize already called",i=typeof window=="object",s=i?window:{};s.JS_SHA3_NO_WINDOW&&(i=!1);var a=!i&&typeof self=="object",f=!s.JS_SHA3_NO_NODE_JS&&typeof process=="object"&&process.versions&&process.versions.node;f?s=Ag:a&&(s=self);var u=!s.JS_SHA3_NO_COMMON_JS&&!0&&r.exports,d=!s.JS_SHA3_NO_ARRAY_BUFFER&&typeof ArrayBuffer<"u",l="0123456789abcdef".split(""),w=[31,7936,2031616,520093696],x=[4,1024,262144,67108864],C=[1,256,65536,16777216],R=[6,1536,393216,100663296],N=[0,8,16,24],T=[1,0,32898,0,32906,2147483648,2147516416,2147483648,32907,0,2147483649,0,2147516545,2147483648,32777,2147483648,138,0,136,0,2147516425,0,2147483658,0,2147516555,0,139,2147483648,32905,2147483648,32771,2147483648,32770,2147483648,128,2147483648,32778,0,2147483658,2147483648,2147516545,2147483648,32896,2147483648,2147483649,0,2147516424,2147483648],U=[224,256,384,512],Q=[128,256],F=["hex","buffer","arrayBuffer","array","digest"],V={128:168,256:136};(s.JS_SHA3_NO_NODE_JS||!Array.isArray)&&(Array.isArray=function(P){return Object.prototype.toString.call(P)==="[object Array]"}),d&&(s.JS_SHA3_NO_ARRAY_BUFFER_IS_VIEW||!ArrayBuffer.isView)&&(ArrayBuffer.isView=function(P){return typeof P=="object"&&P.buffer&&P.buffer.constructor===ArrayBuffer});for(var D=function(P,ee,k){return function(G){return new O(P,ee,P).update(G)[k]()}},B=function(P,ee,k){return function(G,J){return new O(P,ee,J).update(G)[k]()}},H=function(P,ee,k){return function(G,J,A,K){return h["cshake"+P].update(G,J,A,K)[k]()}},E=function(P,ee,k){return function(G,J,A,K){return h["kmac"+P].update(G,J,A,K)[k]()}},$=function(P,ee,k,G){for(var J=0;J<F.length;++J){var A=F[J];P[A]=ee(k,G,A)}return P},ne=function(P,ee){var k=D(P,ee,"hex");return k.create=function(){return new O(P,ee,P)},k.update=function(G){return k.create().update(G)},$(k,D,P,ee)},fe=function(P,ee){var k=B(P,ee,"hex");return k.create=function(G){return new O(P,ee,G)},k.update=function(G,J){return k.create(J).update(G)},$(k,B,P,ee)},z=function(P,ee){var k=V[P],G=H(P,ee,"hex");return G.create=function(J,A,K){return!A&&!K?h["shake"+P].create(J):new O(P,ee,J).bytepad([A,K],k)},G.update=function(J,A,K,ae){return G.create(A,K,ae).update(J)},$(G,H,P,ee)},y=function(P,ee){var k=V[P],G=E(P,ee,"hex");return G.create=function(J,A,K){return new W(P,ee,A).bytepad(["KMAC",K],k).bytepad([J],k)},G.update=function(J,A,K,ae){return G.create(J,K,ae).update(A)},$(G,E,P,ee)},c=[{name:"keccak",padding:C,bits:U,createMethod:ne},{name:"sha3",padding:R,bits:U,createMethod:ne},{name:"shake",padding:w,bits:Q,createMethod:fe},{name:"cshake",padding:x,bits:Q,createMethod:z},{name:"kmac",padding:x,bits:Q,createMethod:y}],h={},p=[],m=0;m<c.length;++m)for(var _=c[m],I=_.bits,S=0;S<I.length;++S){var v=_.name+"_"+I[S];if(p.push(v),h[v]=_.createMethod(I[S],_.padding),_.name!=="sha3"){var b=_.name+I[S];p.push(b),h[b]=h[v]}}function O(P,ee,k){this.blocks=[],this.s=[],this.padding=ee,this.outputBits=k,this.reset=!0,this.finalized=!1,this.block=0,this.start=0,this.blockCount=1600-(P<<1)>>5,this.byteCount=this.blockCount<<2,this.outputBlocks=k>>5,this.extraBytes=(k&31)>>3;for(var G=0;G<50;++G)this.s[G]=0}O.prototype.update=function(P){if(this.finalized)throw new Error(t);var ee,k=typeof P;if(k!=="string"){if(k==="object"){if(P===null)throw new Error(e);if(d&&P.constructor===ArrayBuffer)P=new Uint8Array(P);else if(!Array.isArray(P)&&(!d||!ArrayBuffer.isView(P)))throw new Error(e)}else throw new Error(e);ee=!0}for(var G=this.blocks,J=this.byteCount,A=P.length,K=this.blockCount,ae=0,oe=this.s,he,be;ae<A;){if(this.reset)for(this.reset=!1,G[0]=this.block,he=1;he<K+1;++he)G[he]=0;if(ee)for(he=this.start;ae<A&&he<J;++ae)G[he>>2]|=P[ae]<<N[he++&3];else for(he=this.start;ae<A&&he<J;++ae)be=P.charCodeAt(ae),be<128?G[he>>2]|=be<<N[he++&3]:be<2048?(G[he>>2]|=(192|be>>6)<<N[he++&3],G[he>>2]|=(128|be&63)<<N[he++&3]):be<55296||be>=57344?(G[he>>2]|=(224|be>>12)<<N[he++&3],G[he>>2]|=(128|be>>6&63)<<N[he++&3],G[he>>2]|=(128|be&63)<<N[he++&3]):(be=65536+((be&1023)<<10|P.charCodeAt(++ae)&1023),G[he>>2]|=(240|be>>18)<<N[he++&3],G[he>>2]|=(128|be>>12&63)<<N[he++&3],G[he>>2]|=(128|be>>6&63)<<N[he++&3],G[he>>2]|=(128|be&63)<<N[he++&3]);if(this.lastByteIndex=he,he>=J){for(this.start=he-J,this.block=G[K],he=0;he<K;++he)oe[he]^=G[he];te(oe),this.reset=!0}else this.start=he}return this},O.prototype.encode=function(P,ee){var k=P&255,G=1,J=[k];for(P=P>>8,k=P&255;k>0;)J.unshift(k),P=P>>8,k=P&255,++G;return ee?J.push(G):J.unshift(G),this.update(J),J.length},O.prototype.encodeString=function(P){var ee,k=typeof P;if(k!=="string"){if(k==="object"){if(P===null)throw new Error(e);if(d&&P.constructor===ArrayBuffer)P=new Uint8Array(P);else if(!Array.isArray(P)&&(!d||!ArrayBuffer.isView(P)))throw new Error(e)}else throw new Error(e);ee=!0}var G=0,J=P.length;if(ee)G=J;else for(var A=0;A<P.length;++A){var K=P.charCodeAt(A);K<128?G+=1:K<2048?G+=2:K<55296||K>=57344?G+=3:(K=65536+((K&1023)<<10|P.charCodeAt(++A)&1023),G+=4)}return G+=this.encode(G*8),this.update(P),G},O.prototype.bytepad=function(P,ee){for(var k=this.encode(ee),G=0;G<P.length;++G)k+=this.encodeString(P[G]);var J=ee-k%ee,A=[];return A.length=J,this.update(A),this},O.prototype.finalize=function(){if(!this.finalized){this.finalized=!0;var P=this.blocks,ee=this.lastByteIndex,k=this.blockCount,G=this.s;if(P[ee>>2]|=this.padding[ee&3],this.lastByteIndex===this.byteCount)for(P[0]=P[k],ee=1;ee<k+1;++ee)P[ee]=0;for(P[k-1]|=2147483648,ee=0;ee<k;++ee)G[ee]^=P[ee];te(G)}},O.prototype.toString=O.prototype.hex=function(){this.finalize();for(var P=this.blockCount,ee=this.s,k=this.outputBlocks,G=this.extraBytes,J=0,A=0,K="",ae;A<k;){for(J=0;J<P&&A<k;++J,++A)ae=ee[J],K+=l[ae>>4&15]+l[ae&15]+l[ae>>12&15]+l[ae>>8&15]+l[ae>>20&15]+l[ae>>16&15]+l[ae>>28&15]+l[ae>>24&15];A%P===0&&(te(ee),J=0)}return G&&(ae=ee[J],K+=l[ae>>4&15]+l[ae&15],G>1&&(K+=l[ae>>12&15]+l[ae>>8&15]),G>2&&(K+=l[ae>>20&15]+l[ae>>16&15])),K},O.prototype.arrayBuffer=function(){this.finalize();var P=this.blockCount,ee=this.s,k=this.outputBlocks,G=this.extraBytes,J=0,A=0,K=this.outputBits>>3,ae;G?ae=new ArrayBuffer(k+1<<2):ae=new ArrayBuffer(K);for(var oe=new Uint32Array(ae);A<k;){for(J=0;J<P&&A<k;++J,++A)oe[A]=ee[J];A%P===0&&te(ee)}return G&&(oe[J]=ee[J],ae=ae.slice(0,K)),ae},O.prototype.buffer=O.prototype.arrayBuffer,O.prototype.digest=O.prototype.array=function(){this.finalize();for(var P=this.blockCount,ee=this.s,k=this.outputBlocks,G=this.extraBytes,J=0,A=0,K=[],ae,oe;A<k;){for(J=0;J<P&&A<k;++J,++A)ae=A<<2,oe=ee[J],K[ae]=oe&255,K[ae+1]=oe>>8&255,K[ae+2]=oe>>16&255,K[ae+3]=oe>>24&255;A%P===0&&te(ee)}return G&&(ae=A<<2,oe=ee[J],K[ae]=oe&255,G>1&&(K[ae+1]=oe>>8&255),G>2&&(K[ae+2]=oe>>16&255)),K};function W(P,ee,k){O.call(this,P,ee,k)}W.prototype=new O,W.prototype.finalize=function(){return this.encode(this.outputBits,!0),O.prototype.finalize.call(this)};var te=function(P){var ee,k,G,J,A,K,ae,oe,he,be,we,Me,Qe,Ce,Te,Se,me,Ne,Oe,ve,qe,xe,ye,Le,Pe,_e,He,Ge,Ee,Ke,ut,Ve,wt,lt,Ye,xt,Mt,Fe,Xe,tt,De,et,Ze,ze,ft,rt,ke,it,st,Be,We,ht,$e,Ot,qt,at,bt,Er,Sr,Mr,Ir,Pr,Xt;for(G=0;G<48;G+=2)J=P[0]^P[10]^P[20]^P[30]^P[40],A=P[1]^P[11]^P[21]^P[31]^P[41],K=P[2]^P[12]^P[22]^P[32]^P[42],ae=P[3]^P[13]^P[23]^P[33]^P[43],oe=P[4]^P[14]^P[24]^P[34]^P[44],he=P[5]^P[15]^P[25]^P[35]^P[45],be=P[6]^P[16]^P[26]^P[36]^P[46],we=P[7]^P[17]^P[27]^P[37]^P[47],Me=P[8]^P[18]^P[28]^P[38]^P[48],Qe=P[9]^P[19]^P[29]^P[39]^P[49],ee=Me^(K<<1|ae>>>31),k=Qe^(ae<<1|K>>>31),P[0]^=ee,P[1]^=k,P[10]^=ee,P[11]^=k,P[20]^=ee,P[21]^=k,P[30]^=ee,P[31]^=k,P[40]^=ee,P[41]^=k,ee=J^(oe<<1|he>>>31),k=A^(he<<1|oe>>>31),P[2]^=ee,P[3]^=k,P[12]^=ee,P[13]^=k,P[22]^=ee,P[23]^=k,P[32]^=ee,P[33]^=k,P[42]^=ee,P[43]^=k,ee=K^(be<<1|we>>>31),k=ae^(we<<1|be>>>31),P[4]^=ee,P[5]^=k,P[14]^=ee,P[15]^=k,P[24]^=ee,P[25]^=k,P[34]^=ee,P[35]^=k,P[44]^=ee,P[45]^=k,ee=oe^(Me<<1|Qe>>>31),k=he^(Qe<<1|Me>>>31),P[6]^=ee,P[7]^=k,P[16]^=ee,P[17]^=k,P[26]^=ee,P[27]^=k,P[36]^=ee,P[37]^=k,P[46]^=ee,P[47]^=k,ee=be^(J<<1|A>>>31),k=we^(A<<1|J>>>31),P[8]^=ee,P[9]^=k,P[18]^=ee,P[19]^=k,P[28]^=ee,P[29]^=k,P[38]^=ee,P[39]^=k,P[48]^=ee,P[49]^=k,Ce=P[0],Te=P[1],rt=P[11]<<4|P[10]>>>28,ke=P[10]<<4|P[11]>>>28,Ge=P[20]<<3|P[21]>>>29,Ee=P[21]<<3|P[20]>>>29,Mr=P[31]<<9|P[30]>>>23,Ir=P[30]<<9|P[31]>>>23,et=P[40]<<18|P[41]>>>14,Ze=P[41]<<18|P[40]>>>14,lt=P[2]<<1|P[3]>>>31,Ye=P[3]<<1|P[2]>>>31,Se=P[13]<<12|P[12]>>>20,me=P[12]<<12|P[13]>>>20,it=P[22]<<10|P[23]>>>22,st=P[23]<<10|P[22]>>>22,Ke=P[33]<<13|P[32]>>>19,ut=P[32]<<13|P[33]>>>19,Pr=P[42]<<2|P[43]>>>30,Xt=P[43]<<2|P[42]>>>30,Ot=P[5]<<30|P[4]>>>2,qt=P[4]<<30|P[5]>>>2,xt=P[14]<<6|P[15]>>>26,Mt=P[15]<<6|P[14]>>>26,Ne=P[25]<<11|P[24]>>>21,Oe=P[24]<<11|P[25]>>>21,Be=P[34]<<15|P[35]>>>17,We=P[35]<<15|P[34]>>>17,Ve=P[45]<<29|P[44]>>>3,wt=P[44]<<29|P[45]>>>3,Le=P[6]<<28|P[7]>>>4,Pe=P[7]<<28|P[6]>>>4,at=P[17]<<23|P[16]>>>9,bt=P[16]<<23|P[17]>>>9,Fe=P[26]<<25|P[27]>>>7,Xe=P[27]<<25|P[26]>>>7,ve=P[36]<<21|P[37]>>>11,qe=P[37]<<21|P[36]>>>11,ht=P[47]<<24|P[46]>>>8,$e=P[46]<<24|P[47]>>>8,ze=P[8]<<27|P[9]>>>5,ft=P[9]<<27|P[8]>>>5,_e=P[18]<<20|P[19]>>>12,He=P[19]<<20|P[18]>>>12,Er=P[29]<<7|P[28]>>>25,Sr=P[28]<<7|P[29]>>>25,tt=P[38]<<8|P[39]>>>24,De=P[39]<<8|P[38]>>>24,xe=P[48]<<14|P[49]>>>18,ye=P[49]<<14|P[48]>>>18,P[0]=Ce^~Se&Ne,P[1]=Te^~me&Oe,P[10]=Le^~_e&Ge,P[11]=Pe^~He&Ee,P[20]=lt^~xt&Fe,P[21]=Ye^~Mt&Xe,P[30]=ze^~rt&it,P[31]=ft^~ke&st,P[40]=Ot^~at&Er,P[41]=qt^~bt&Sr,P[2]=Se^~Ne&ve,P[3]=me^~Oe&qe,P[12]=_e^~Ge&Ke,P[13]=He^~Ee&ut,P[22]=xt^~Fe&tt,P[23]=Mt^~Xe&De,P[32]=rt^~it&Be,P[33]=ke^~st&We,P[42]=at^~Er&Mr,P[43]=bt^~Sr&Ir,P[4]=Ne^~ve&xe,P[5]=Oe^~qe&ye,P[14]=Ge^~Ke&Ve,P[15]=Ee^~ut&wt,P[24]=Fe^~tt&et,P[25]=Xe^~De&Ze,P[34]=it^~Be&ht,P[35]=st^~We&$e,P[44]=Er^~Mr&Pr,P[45]=Sr^~Ir&Xt,P[6]=ve^~xe&Ce,P[7]=qe^~ye&Te,P[16]=Ke^~Ve&Le,P[17]=ut^~wt&Pe,P[26]=tt^~et&lt,P[27]=De^~Ze&Ye,P[36]=Be^~ht&ze,P[37]=We^~$e&ft,P[46]=Mr^~Pr&Ot,P[47]=Ir^~Xt&qt,P[8]=xe^~Ce&Se,P[9]=ye^~Te&me,P[18]=Ve^~Le&_e,P[19]=wt^~Pe&He,P[28]=et^~lt&xt,P[29]=Ze^~Ye&Mt,P[38]=ht^~ze&rt,P[39]=$e^~ft&ke,P[48]=Pr^~Ot&at,P[49]=Xt^~qt&bt,P[0]^=T[G],P[1]^=T[G+1]};if(u)r.exports=h;else for(m=0;m<p.length;++m)s[p[m]]=h[p[m]]})()})(xg);var G4=xg.exports;const V4="logger/5.7.0";let Rp=!1,Cp=!1;const Bc={debug:1,default:2,info:2,warning:3,error:4,off:5};let Np=Bc.default,au=null;function J4(){try{const r=[];if(["NFD","NFC","NFKD","NFKC"].forEach(e=>{try{if("test".normalize(e)!=="test")throw new Error("bad normalize")}catch{r.push(e)}}),r.length)throw new Error("missing "+r.join(", "));if("é".normalize("NFD")!=="é")throw new Error("broken implementation")}catch(r){return r.message}return null}const Op=J4();var qu;(function(r){r.DEBUG="DEBUG",r.INFO="INFO",r.WARNING="WARNING",r.ERROR="ERROR",r.OFF="OFF"})(qu||(qu={}));var $i;(function(r){r.UNKNOWN_ERROR="UNKNOWN_ERROR",r.NOT_IMPLEMENTED="NOT_IMPLEMENTED",r.UNSUPPORTED_OPERATION="UNSUPPORTED_OPERATION",r.NETWORK_ERROR="NETWORK_ERROR",r.SERVER_ERROR="SERVER_ERROR",r.TIMEOUT="TIMEOUT",r.BUFFER_OVERRUN="BUFFER_OVERRUN",r.NUMERIC_FAULT="NUMERIC_FAULT",r.MISSING_NEW="MISSING_NEW",r.INVALID_ARGUMENT="INVALID_ARGUMENT",r.MISSING_ARGUMENT="MISSING_ARGUMENT",r.UNEXPECTED_ARGUMENT="UNEXPECTED_ARGUMENT",r.CALL_EXCEPTION="CALL_EXCEPTION",r.INSUFFICIENT_FUNDS="INSUFFICIENT_FUNDS",r.NONCE_EXPIRED="NONCE_EXPIRED",r.REPLACEMENT_UNDERPRICED="REPLACEMENT_UNDERPRICED",r.UNPREDICTABLE_GAS_LIMIT="UNPREDICTABLE_GAS_LIMIT",r.TRANSACTION_REPLACED="TRANSACTION_REPLACED",r.ACTION_REJECTED="ACTION_REJECTED"})($i||($i={}));const qp="0123456789abcdef";let Ar=class lr{constructor(e){Object.defineProperty(this,"version",{enumerable:!0,value:e,writable:!1})}_log(e,t){const i=e.toLowerCase();Bc[i]==null&&this.throwArgumentError("invalid log level name","logLevel",e),!(Np>Bc[i])&&console.log.apply(console,t)}debug(...e){this._log(lr.levels.DEBUG,e)}info(...e){this._log(lr.levels.INFO,e)}warn(...e){this._log(lr.levels.WARNING,e)}makeError(e,t,i){if(Cp)return this.makeError("censored error",t,{});t||(t=lr.errors.UNKNOWN_ERROR),i||(i={});const s=[];Object.keys(i).forEach(d=>{const l=i[d];try{if(l instanceof Uint8Array){let w="";for(let x=0;x<l.length;x++)w+=qp[l[x]>>4],w+=qp[l[x]&15];s.push(d+"=Uint8Array(0x"+w+")")}else s.push(d+"="+JSON.stringify(l))}catch{s.push(d+"="+JSON.stringify(i[d].toString()))}}),s.push(`code=${t}`),s.push(`version=${this.version}`);const a=e;let f="";switch(t){case $i.NUMERIC_FAULT:{f="NUMERIC_FAULT";const d=e;switch(d){case"overflow":case"underflow":case"division-by-zero":f+="-"+d;break;case"negative-power":case"negative-width":f+="-unsupported";break;case"unbound-bitwise-result":f+="-unbound-result";break}break}case $i.CALL_EXCEPTION:case $i.INSUFFICIENT_FUNDS:case $i.MISSING_NEW:case $i.NONCE_EXPIRED:case $i.REPLACEMENT_UNDERPRICED:case $i.TRANSACTION_REPLACED:case $i.UNPREDICTABLE_GAS_LIMIT:f=t;break}f&&(e+=" [ See: https://links.ethers.org/v5-errors-"+f+" ]"),s.length&&(e+=" ("+s.join(", ")+")");const u=new Error(e);return u.reason=a,u.code=t,Object.keys(i).forEach(function(d){u[d]=i[d]}),u}throwError(e,t,i){throw this.makeError(e,t,i)}throwArgumentError(e,t,i){return this.throwError(e,lr.errors.INVALID_ARGUMENT,{argument:t,value:i})}assert(e,t,i,s){e||this.throwError(t,i,s)}assertArgument(e,t,i,s){e||this.throwArgumentError(t,i,s)}checkNormalize(e){Op&&this.throwError("platform missing String.prototype.normalize",lr.errors.UNSUPPORTED_OPERATION,{operation:"String.prototype.normalize",form:Op})}checkSafeUint53(e,t){typeof e=="number"&&(t==null&&(t="value not safe"),(e<0||e>=9007199254740991)&&this.throwError(t,lr.errors.NUMERIC_FAULT,{operation:"checkSafeInteger",fault:"out-of-safe-range",value:e}),e%1&&this.throwError(t,lr.errors.NUMERIC_FAULT,{operation:"checkSafeInteger",fault:"non-integer",value:e}))}checkArgumentCount(e,t,i){i?i=": "+i:i="",e<t&&this.throwError("missing argument"+i,lr.errors.MISSING_ARGUMENT,{count:e,expectedCount:t}),e>t&&this.throwError("too many arguments"+i,lr.errors.UNEXPECTED_ARGUMENT,{count:e,expectedCount:t})}checkNew(e,t){(e===Object||e==null)&&this.throwError("missing new",lr.errors.MISSING_NEW,{name:t.name})}checkAbstract(e,t){e===t?this.throwError("cannot instantiate abstract class "+JSON.stringify(t.name)+" directly; use a sub-class",lr.errors.UNSUPPORTED_OPERATION,{name:e.name,operation:"new"}):(e===Object||e==null)&&this.throwError("missing new",lr.errors.MISSING_NEW,{name:t.name})}static globalLogger(){return au||(au=new lr(V4)),au}static setCensorship(e,t){if(!e&&t&&this.globalLogger().throwError("cannot permanently disable censorship",lr.errors.UNSUPPORTED_OPERATION,{operation:"setCensorship"}),Rp){if(!e)return;this.globalLogger().throwError("error censorship permanent",lr.errors.UNSUPPORTED_OPERATION,{operation:"setCensorship"})}Cp=!!e,Rp=!!t}static setLogLevel(e){const t=Bc[e.toLowerCase()];if(t==null){lr.globalLogger().warn("invalid log level - "+e);return}Np=t}static from(e){return new lr(e)}};Ar.errors=$i,Ar.levels=qu;const Q4="bytes/5.7.0",sr=new Ar(Q4);function Eg(r){return!!r.toHexString}function ra(r){return r.slice||(r.slice=function(){const e=Array.prototype.slice.call(arguments);return ra(new Uint8Array(Array.prototype.slice.apply(r,e)))}),r}function Y4(r){return oi(r)&&!(r.length%2)||fa(r)}function Tp(r){return typeof r=="number"&&r==r&&r%1===0}function fa(r){if(r==null)return!1;if(r.constructor===Uint8Array)return!0;if(typeof r=="string"||!Tp(r.length)||r.length<0)return!1;for(let e=0;e<r.length;e++){const t=r[e];if(!Tp(t)||t<0||t>=256)return!1}return!0}function tr(r,e){if(e||(e={}),typeof r=="number"){sr.checkSafeUint53(r,"invalid arrayify value");const t=[];for(;r;)t.unshift(r&255),r=parseInt(String(r/256));return t.length===0&&t.push(0),ra(new Uint8Array(t))}if(e.allowMissingPrefix&&typeof r=="string"&&r.substring(0,2)!=="0x"&&(r="0x"+r),Eg(r)&&(r=r.toHexString()),oi(r)){let t=r.substring(2);t.length%2&&(e.hexPad==="left"?t="0"+t:e.hexPad==="right"?t+="0":sr.throwArgumentError("hex data is odd-length","value",r));const i=[];for(let s=0;s<t.length;s+=2)i.push(parseInt(t.substring(s,s+2),16));return ra(new Uint8Array(i))}return fa(r)?ra(new Uint8Array(r)):sr.throwArgumentError("invalid arrayify value","value",r)}function W4(r){const e=r.map(s=>tr(s)),t=e.reduce((s,a)=>s+a.length,0),i=new Uint8Array(t);return e.reduce((s,a)=>(i.set(a,s),s+a.length),0),ra(i)}function X4(r,e){r=tr(r),r.length>e&&sr.throwArgumentError("value out of range","value",arguments[0]);const t=new Uint8Array(e);return t.set(r,e-r.length),ra(t)}function oi(r,e){return!(typeof r!="string"||!r.match(/^0x[0-9A-Fa-f]*$/)||e&&r.length!==2+2*e)}const ou="0123456789abcdef";function Xr(r,e){if(e||(e={}),typeof r=="number"){sr.checkSafeUint53(r,"invalid hexlify value");let t="";for(;r;)t=ou[r&15]+t,r=Math.floor(r/16);return t.length?(t.length%2&&(t="0"+t),"0x"+t):"0x00"}if(typeof r=="bigint")return r=r.toString(16),r.length%2?"0x0"+r:"0x"+r;if(e.allowMissingPrefix&&typeof r=="string"&&r.substring(0,2)!=="0x"&&(r="0x"+r),Eg(r))return r.toHexString();if(oi(r))return r.length%2&&(e.hexPad==="left"?r="0x0"+r.substring(2):e.hexPad==="right"?r+="0":sr.throwArgumentError("hex data is odd-length","value",r)),r.toLowerCase();if(fa(r)){let t="0x";for(let i=0;i<r.length;i++){let s=r[i];t+=ou[(s&240)>>4]+ou[s&15]}return t}return sr.throwArgumentError("invalid hexlify value","value",r)}function Z4(r){if(typeof r!="string")r=Xr(r);else if(!oi(r)||r.length%2)return null;return(r.length-2)/2}function Fp(r,e,t){return typeof r!="string"?r=Xr(r):(!oi(r)||r.length%2)&&sr.throwArgumentError("invalid hexData","value",r),e=2+2*e,t!=null?"0x"+r.substring(e,2+2*t):"0x"+r.substring(e)}function hn(r,e){for(typeof r!="string"?r=Xr(r):oi(r)||sr.throwArgumentError("invalid hex string","value",r),r.length>2*e+2&&sr.throwArgumentError("value out of range","value",arguments[1]);r.length<2*e+2;)r="0x0"+r.substring(2);return r}function Sg(r){const e={r:"0x",s:"0x",_vs:"0x",recoveryParam:0,v:0,yParityAndS:"0x",compact:"0x"};if(Y4(r)){let t=tr(r);t.length===64?(e.v=27+(t[32]>>7),t[32]&=127,e.r=Xr(t.slice(0,32)),e.s=Xr(t.slice(32,64))):t.length===65?(e.r=Xr(t.slice(0,32)),e.s=Xr(t.slice(32,64)),e.v=t[64]):sr.throwArgumentError("invalid signature string","signature",r),e.v<27&&(e.v===0||e.v===1?e.v+=27:sr.throwArgumentError("signature invalid v byte","signature",r)),e.recoveryParam=1-e.v%2,e.recoveryParam&&(t[32]|=128),e._vs=Xr(t.slice(32,64))}else{if(e.r=r.r,e.s=r.s,e.v=r.v,e.recoveryParam=r.recoveryParam,e._vs=r._vs,e._vs!=null){const s=X4(tr(e._vs),32);e._vs=Xr(s);const a=s[0]>=128?1:0;e.recoveryParam==null?e.recoveryParam=a:e.recoveryParam!==a&&sr.throwArgumentError("signature recoveryParam mismatch _vs","signature",r),s[0]&=127;const f=Xr(s);e.s==null?e.s=f:e.s!==f&&sr.throwArgumentError("signature v mismatch _vs","signature",r)}if(e.recoveryParam==null)e.v==null?sr.throwArgumentError("signature missing v and recoveryParam","signature",r):e.v===0||e.v===1?e.recoveryParam=e.v:e.recoveryParam=1-e.v%2;else if(e.v==null)e.v=27+e.recoveryParam;else{const s=e.v===0||e.v===1?e.v:1-e.v%2;e.recoveryParam!==s&&sr.throwArgumentError("signature recoveryParam mismatch v","signature",r)}e.r==null||!oi(e.r)?sr.throwArgumentError("signature missing or invalid r","signature",r):e.r=hn(e.r,32),e.s==null||!oi(e.s)?sr.throwArgumentError("signature missing or invalid s","signature",r):e.s=hn(e.s,32);const t=tr(e.s);t[0]>=128&&sr.throwArgumentError("signature s out of range","signature",r),e.recoveryParam&&(t[0]|=128);const i=Xr(t);e._vs&&(oi(e._vs)||sr.throwArgumentError("signature invalid _vs","signature",r),e._vs=hn(e._vs,32)),e._vs==null?e._vs=i:e._vs!==i&&sr.throwArgumentError("signature _vs mismatch v and s","signature",r)}return e.yParityAndS=e._vs,e.compact=e.r+e.yParityAndS.substring(2),e}function s0(r){return"0x"+G4.keccak_256(tr(r))}var Mg={exports:{}},e8={},t8=Object.freeze({__proto__:null,default:e8}),r8=K4(t8);(function(r){(function(e,t){function i(c,h){if(!c)throw new Error(h||"Assertion failed")}function s(c,h){c.super_=h;var p=function(){};p.prototype=h.prototype,c.prototype=new p,c.prototype.constructor=c}function a(c,h,p){if(a.isBN(c))return c;this.negative=0,this.words=null,this.length=0,this.red=null,c!==null&&((h==="le"||h==="be")&&(p=h,h=10),this._init(c||0,h||10,p||"be"))}typeof e=="object"?e.exports=a:t.BN=a,a.BN=a,a.wordSize=26;var f;try{typeof window<"u"&&typeof window.Buffer<"u"?f=window.Buffer:f=r8.Buffer}catch{}a.isBN=function(c){return c instanceof a?!0:c!==null&&typeof c=="object"&&c.constructor.wordSize===a.wordSize&&Array.isArray(c.words)},a.max=function(c,h){return c.cmp(h)>0?c:h},a.min=function(c,h){return c.cmp(h)<0?c:h},a.prototype._init=function(c,h,p){if(typeof c=="number")return this._initNumber(c,h,p);if(typeof c=="object")return this._initArray(c,h,p);h==="hex"&&(h=16),i(h===(h|0)&&h>=2&&h<=36),c=c.toString().replace(/\s+/g,"");var m=0;c[0]==="-"&&(m++,this.negative=1),m<c.length&&(h===16?this._parseHex(c,m,p):(this._parseBase(c,h,m),p==="le"&&this._initArray(this.toArray(),h,p)))},a.prototype._initNumber=function(c,h,p){c<0&&(this.negative=1,c=-c),c<67108864?(this.words=[c&67108863],this.length=1):c<4503599627370496?(this.words=[c&67108863,c/67108864&67108863],this.length=2):(i(c<9007199254740992),this.words=[c&67108863,c/67108864&67108863,1],this.length=3),p==="le"&&this._initArray(this.toArray(),h,p)},a.prototype._initArray=function(c,h,p){if(i(typeof c.length=="number"),c.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(c.length/3),this.words=new Array(this.length);for(var m=0;m<this.length;m++)this.words[m]=0;var _,I,S=0;if(p==="be")for(m=c.length-1,_=0;m>=0;m-=3)I=c[m]|c[m-1]<<8|c[m-2]<<16,this.words[_]|=I<<S&67108863,this.words[_+1]=I>>>26-S&67108863,S+=24,S>=26&&(S-=26,_++);else if(p==="le")for(m=0,_=0;m<c.length;m+=3)I=c[m]|c[m+1]<<8|c[m+2]<<16,this.words[_]|=I<<S&67108863,this.words[_+1]=I>>>26-S&67108863,S+=24,S>=26&&(S-=26,_++);return this._strip()};function u(c,h){var p=c.charCodeAt(h);if(p>=48&&p<=57)return p-48;if(p>=65&&p<=70)return p-55;if(p>=97&&p<=102)return p-87;i(!1,"Invalid character in "+c)}function d(c,h,p){var m=u(c,p);return p-1>=h&&(m|=u(c,p-1)<<4),m}a.prototype._parseHex=function(c,h,p){this.length=Math.ceil((c.length-h)/6),this.words=new Array(this.length);for(var m=0;m<this.length;m++)this.words[m]=0;var _=0,I=0,S;if(p==="be")for(m=c.length-1;m>=h;m-=2)S=d(c,h,m)<<_,this.words[I]|=S&67108863,_>=18?(_-=18,I+=1,this.words[I]|=S>>>26):_+=8;else{var v=c.length-h;for(m=v%2===0?h+1:h;m<c.length;m+=2)S=d(c,h,m)<<_,this.words[I]|=S&67108863,_>=18?(_-=18,I+=1,this.words[I]|=S>>>26):_+=8}this._strip()};function l(c,h,p,m){for(var _=0,I=0,S=Math.min(c.length,p),v=h;v<S;v++){var b=c.charCodeAt(v)-48;_*=m,b>=49?I=b-49+10:b>=17?I=b-17+10:I=b,i(b>=0&&I<m,"Invalid character"),_+=I}return _}a.prototype._parseBase=function(c,h,p){this.words=[0],this.length=1;for(var m=0,_=1;_<=67108863;_*=h)m++;m--,_=_/h|0;for(var I=c.length-p,S=I%m,v=Math.min(I,I-S)+p,b=0,O=p;O<v;O+=m)b=l(c,O,O+m,h),this.imuln(_),this.words[0]+b<67108864?this.words[0]+=b:this._iaddn(b);if(S!==0){var W=1;for(b=l(c,O,c.length,h),O=0;O<S;O++)W*=h;this.imuln(W),this.words[0]+b<67108864?this.words[0]+=b:this._iaddn(b)}this._strip()},a.prototype.copy=function(c){c.words=new Array(this.length);for(var h=0;h<this.length;h++)c.words[h]=this.words[h];c.length=this.length,c.negative=this.negative,c.red=this.red};function w(c,h){c.words=h.words,c.length=h.length,c.negative=h.negative,c.red=h.red}if(a.prototype._move=function(c){w(c,this)},a.prototype.clone=function(){var c=new a(null);return this.copy(c),c},a.prototype._expand=function(c){for(;this.length<c;)this.words[this.length++]=0;return this},a.prototype._strip=function(){for(;this.length>1&&this.words[this.length-1]===0;)this.length--;return this._normSign()},a.prototype._normSign=function(){return this.length===1&&this.words[0]===0&&(this.negative=0),this},typeof Symbol<"u"&&typeof Symbol.for=="function")try{a.prototype[Symbol.for("nodejs.util.inspect.custom")]=x}catch{a.prototype.inspect=x}else a.prototype.inspect=x;function x(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"}var C=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],R=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],N=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];a.prototype.toString=function(c,h){c=c||10,h=h|0||1;var p;if(c===16||c==="hex"){p="";for(var m=0,_=0,I=0;I<this.length;I++){var S=this.words[I],v=((S<<m|_)&16777215).toString(16);_=S>>>24-m&16777215,m+=2,m>=26&&(m-=26,I--),_!==0||I!==this.length-1?p=C[6-v.length]+v+p:p=v+p}for(_!==0&&(p=_.toString(16)+p);p.length%h!==0;)p="0"+p;return this.negative!==0&&(p="-"+p),p}if(c===(c|0)&&c>=2&&c<=36){var b=R[c],O=N[c];p="";var W=this.clone();for(W.negative=0;!W.isZero();){var te=W.modrn(O).toString(c);W=W.idivn(O),W.isZero()?p=te+p:p=C[b-te.length]+te+p}for(this.isZero()&&(p="0"+p);p.length%h!==0;)p="0"+p;return this.negative!==0&&(p="-"+p),p}i(!1,"Base should be between 2 and 36")},a.prototype.toNumber=function(){var c=this.words[0];return this.length===2?c+=this.words[1]*67108864:this.length===3&&this.words[2]===1?c+=4503599627370496+this.words[1]*67108864:this.length>2&&i(!1,"Number can only safely store up to 53 bits"),this.negative!==0?-c:c},a.prototype.toJSON=function(){return this.toString(16,2)},f&&(a.prototype.toBuffer=function(c,h){return this.toArrayLike(f,c,h)}),a.prototype.toArray=function(c,h){return this.toArrayLike(Array,c,h)};var T=function(c,h){return c.allocUnsafe?c.allocUnsafe(h):new c(h)};a.prototype.toArrayLike=function(c,h,p){this._strip();var m=this.byteLength(),_=p||Math.max(1,m);i(m<=_,"byte array longer than desired length"),i(_>0,"Requested array length <= 0");var I=T(c,_),S=h==="le"?"LE":"BE";return this["_toArrayLike"+S](I,m),I},a.prototype._toArrayLikeLE=function(c,h){for(var p=0,m=0,_=0,I=0;_<this.length;_++){var S=this.words[_]<<I|m;c[p++]=S&255,p<c.length&&(c[p++]=S>>8&255),p<c.length&&(c[p++]=S>>16&255),I===6?(p<c.length&&(c[p++]=S>>24&255),m=0,I=0):(m=S>>>24,I+=2)}if(p<c.length)for(c[p++]=m;p<c.length;)c[p++]=0},a.prototype._toArrayLikeBE=function(c,h){for(var p=c.length-1,m=0,_=0,I=0;_<this.length;_++){var S=this.words[_]<<I|m;c[p--]=S&255,p>=0&&(c[p--]=S>>8&255),p>=0&&(c[p--]=S>>16&255),I===6?(p>=0&&(c[p--]=S>>24&255),m=0,I=0):(m=S>>>24,I+=2)}if(p>=0)for(c[p--]=m;p>=0;)c[p--]=0},Math.clz32?a.prototype._countBits=function(c){return 32-Math.clz32(c)}:a.prototype._countBits=function(c){var h=c,p=0;return h>=4096&&(p+=13,h>>>=13),h>=64&&(p+=7,h>>>=7),h>=8&&(p+=4,h>>>=4),h>=2&&(p+=2,h>>>=2),p+h},a.prototype._zeroBits=function(c){if(c===0)return 26;var h=c,p=0;return h&8191||(p+=13,h>>>=13),h&127||(p+=7,h>>>=7),h&15||(p+=4,h>>>=4),h&3||(p+=2,h>>>=2),h&1||p++,p},a.prototype.bitLength=function(){var c=this.words[this.length-1],h=this._countBits(c);return(this.length-1)*26+h};function U(c){for(var h=new Array(c.bitLength()),p=0;p<h.length;p++){var m=p/26|0,_=p%26;h[p]=c.words[m]>>>_&1}return h}a.prototype.zeroBits=function(){if(this.isZero())return 0;for(var c=0,h=0;h<this.length;h++){var p=this._zeroBits(this.words[h]);if(c+=p,p!==26)break}return c},a.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},a.prototype.toTwos=function(c){return this.negative!==0?this.abs().inotn(c).iaddn(1):this.clone()},a.prototype.fromTwos=function(c){return this.testn(c-1)?this.notn(c).iaddn(1).ineg():this.clone()},a.prototype.isNeg=function(){return this.negative!==0},a.prototype.neg=function(){return this.clone().ineg()},a.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},a.prototype.iuor=function(c){for(;this.length<c.length;)this.words[this.length++]=0;for(var h=0;h<c.length;h++)this.words[h]=this.words[h]|c.words[h];return this._strip()},a.prototype.ior=function(c){return i((this.negative|c.negative)===0),this.iuor(c)},a.prototype.or=function(c){return this.length>c.length?this.clone().ior(c):c.clone().ior(this)},a.prototype.uor=function(c){return this.length>c.length?this.clone().iuor(c):c.clone().iuor(this)},a.prototype.iuand=function(c){var h;this.length>c.length?h=c:h=this;for(var p=0;p<h.length;p++)this.words[p]=this.words[p]&c.words[p];return this.length=h.length,this._strip()},a.prototype.iand=function(c){return i((this.negative|c.negative)===0),this.iuand(c)},a.prototype.and=function(c){return this.length>c.length?this.clone().iand(c):c.clone().iand(this)},a.prototype.uand=function(c){return this.length>c.length?this.clone().iuand(c):c.clone().iuand(this)},a.prototype.iuxor=function(c){var h,p;this.length>c.length?(h=this,p=c):(h=c,p=this);for(var m=0;m<p.length;m++)this.words[m]=h.words[m]^p.words[m];if(this!==h)for(;m<h.length;m++)this.words[m]=h.words[m];return this.length=h.length,this._strip()},a.prototype.ixor=function(c){return i((this.negative|c.negative)===0),this.iuxor(c)},a.prototype.xor=function(c){return this.length>c.length?this.clone().ixor(c):c.clone().ixor(this)},a.prototype.uxor=function(c){return this.length>c.length?this.clone().iuxor(c):c.clone().iuxor(this)},a.prototype.inotn=function(c){i(typeof c=="number"&&c>=0);var h=Math.ceil(c/26)|0,p=c%26;this._expand(h),p>0&&h--;for(var m=0;m<h;m++)this.words[m]=~this.words[m]&67108863;return p>0&&(this.words[m]=~this.words[m]&67108863>>26-p),this._strip()},a.prototype.notn=function(c){return this.clone().inotn(c)},a.prototype.setn=function(c,h){i(typeof c=="number"&&c>=0);var p=c/26|0,m=c%26;return this._expand(p+1),h?this.words[p]=this.words[p]|1<<m:this.words[p]=this.words[p]&~(1<<m),this._strip()},a.prototype.iadd=function(c){var h;if(this.negative!==0&&c.negative===0)return this.negative=0,h=this.isub(c),this.negative^=1,this._normSign();if(this.negative===0&&c.negative!==0)return c.negative=0,h=this.isub(c),c.negative=1,h._normSign();var p,m;this.length>c.length?(p=this,m=c):(p=c,m=this);for(var _=0,I=0;I<m.length;I++)h=(p.words[I]|0)+(m.words[I]|0)+_,this.words[I]=h&67108863,_=h>>>26;for(;_!==0&&I<p.length;I++)h=(p.words[I]|0)+_,this.words[I]=h&67108863,_=h>>>26;if(this.length=p.length,_!==0)this.words[this.length]=_,this.length++;else if(p!==this)for(;I<p.length;I++)this.words[I]=p.words[I];return this},a.prototype.add=function(c){var h;return c.negative!==0&&this.negative===0?(c.negative=0,h=this.sub(c),c.negative^=1,h):c.negative===0&&this.negative!==0?(this.negative=0,h=c.sub(this),this.negative=1,h):this.length>c.length?this.clone().iadd(c):c.clone().iadd(this)},a.prototype.isub=function(c){if(c.negative!==0){c.negative=0;var h=this.iadd(c);return c.negative=1,h._normSign()}else if(this.negative!==0)return this.negative=0,this.iadd(c),this.negative=1,this._normSign();var p=this.cmp(c);if(p===0)return this.negative=0,this.length=1,this.words[0]=0,this;var m,_;p>0?(m=this,_=c):(m=c,_=this);for(var I=0,S=0;S<_.length;S++)h=(m.words[S]|0)-(_.words[S]|0)+I,I=h>>26,this.words[S]=h&67108863;for(;I!==0&&S<m.length;S++)h=(m.words[S]|0)+I,I=h>>26,this.words[S]=h&67108863;if(I===0&&S<m.length&&m!==this)for(;S<m.length;S++)this.words[S]=m.words[S];return this.length=Math.max(this.length,S),m!==this&&(this.negative=1),this._strip()},a.prototype.sub=function(c){return this.clone().isub(c)};function Q(c,h,p){p.negative=h.negative^c.negative;var m=c.length+h.length|0;p.length=m,m=m-1|0;var _=c.words[0]|0,I=h.words[0]|0,S=_*I,v=S&67108863,b=S/67108864|0;p.words[0]=v;for(var O=1;O<m;O++){for(var W=b>>>26,te=b&67108863,P=Math.min(O,h.length-1),ee=Math.max(0,O-c.length+1);ee<=P;ee++){var k=O-ee|0;_=c.words[k]|0,I=h.words[ee]|0,S=_*I+te,W+=S/67108864|0,te=S&67108863}p.words[O]=te|0,b=W|0}return b!==0?p.words[O]=b|0:p.length--,p._strip()}var F=function(c,h,p){var m=c.words,_=h.words,I=p.words,S=0,v,b,O,W=m[0]|0,te=W&8191,P=W>>>13,ee=m[1]|0,k=ee&8191,G=ee>>>13,J=m[2]|0,A=J&8191,K=J>>>13,ae=m[3]|0,oe=ae&8191,he=ae>>>13,be=m[4]|0,we=be&8191,Me=be>>>13,Qe=m[5]|0,Ce=Qe&8191,Te=Qe>>>13,Se=m[6]|0,me=Se&8191,Ne=Se>>>13,Oe=m[7]|0,ve=Oe&8191,qe=Oe>>>13,xe=m[8]|0,ye=xe&8191,Le=xe>>>13,Pe=m[9]|0,_e=Pe&8191,He=Pe>>>13,Ge=_[0]|0,Ee=Ge&8191,Ke=Ge>>>13,ut=_[1]|0,Ve=ut&8191,wt=ut>>>13,lt=_[2]|0,Ye=lt&8191,xt=lt>>>13,Mt=_[3]|0,Fe=Mt&8191,Xe=Mt>>>13,tt=_[4]|0,De=tt&8191,et=tt>>>13,Ze=_[5]|0,ze=Ze&8191,ft=Ze>>>13,rt=_[6]|0,ke=rt&8191,it=rt>>>13,st=_[7]|0,Be=st&8191,We=st>>>13,ht=_[8]|0,$e=ht&8191,Ot=ht>>>13,qt=_[9]|0,at=qt&8191,bt=qt>>>13;p.negative=c.negative^h.negative,p.length=19,v=Math.imul(te,Ee),b=Math.imul(te,Ke),b=b+Math.imul(P,Ee)|0,O=Math.imul(P,Ke);var Er=(S+v|0)+((b&8191)<<13)|0;S=(O+(b>>>13)|0)+(Er>>>26)|0,Er&=67108863,v=Math.imul(k,Ee),b=Math.imul(k,Ke),b=b+Math.imul(G,Ee)|0,O=Math.imul(G,Ke),v=v+Math.imul(te,Ve)|0,b=b+Math.imul(te,wt)|0,b=b+Math.imul(P,Ve)|0,O=O+Math.imul(P,wt)|0;var Sr=(S+v|0)+((b&8191)<<13)|0;S=(O+(b>>>13)|0)+(Sr>>>26)|0,Sr&=67108863,v=Math.imul(A,Ee),b=Math.imul(A,Ke),b=b+Math.imul(K,Ee)|0,O=Math.imul(K,Ke),v=v+Math.imul(k,Ve)|0,b=b+Math.imul(k,wt)|0,b=b+Math.imul(G,Ve)|0,O=O+Math.imul(G,wt)|0,v=v+Math.imul(te,Ye)|0,b=b+Math.imul(te,xt)|0,b=b+Math.imul(P,Ye)|0,O=O+Math.imul(P,xt)|0;var Mr=(S+v|0)+((b&8191)<<13)|0;S=(O+(b>>>13)|0)+(Mr>>>26)|0,Mr&=67108863,v=Math.imul(oe,Ee),b=Math.imul(oe,Ke),b=b+Math.imul(he,Ee)|0,O=Math.imul(he,Ke),v=v+Math.imul(A,Ve)|0,b=b+Math.imul(A,wt)|0,b=b+Math.imul(K,Ve)|0,O=O+Math.imul(K,wt)|0,v=v+Math.imul(k,Ye)|0,b=b+Math.imul(k,xt)|0,b=b+Math.imul(G,Ye)|0,O=O+Math.imul(G,xt)|0,v=v+Math.imul(te,Fe)|0,b=b+Math.imul(te,Xe)|0,b=b+Math.imul(P,Fe)|0,O=O+Math.imul(P,Xe)|0;var Ir=(S+v|0)+((b&8191)<<13)|0;S=(O+(b>>>13)|0)+(Ir>>>26)|0,Ir&=67108863,v=Math.imul(we,Ee),b=Math.imul(we,Ke),b=b+Math.imul(Me,Ee)|0,O=Math.imul(Me,Ke),v=v+Math.imul(oe,Ve)|0,b=b+Math.imul(oe,wt)|0,b=b+Math.imul(he,Ve)|0,O=O+Math.imul(he,wt)|0,v=v+Math.imul(A,Ye)|0,b=b+Math.imul(A,xt)|0,b=b+Math.imul(K,Ye)|0,O=O+Math.imul(K,xt)|0,v=v+Math.imul(k,Fe)|0,b=b+Math.imul(k,Xe)|0,b=b+Math.imul(G,Fe)|0,O=O+Math.imul(G,Xe)|0,v=v+Math.imul(te,De)|0,b=b+Math.imul(te,et)|0,b=b+Math.imul(P,De)|0,O=O+Math.imul(P,et)|0;var Pr=(S+v|0)+((b&8191)<<13)|0;S=(O+(b>>>13)|0)+(Pr>>>26)|0,Pr&=67108863,v=Math.imul(Ce,Ee),b=Math.imul(Ce,Ke),b=b+Math.imul(Te,Ee)|0,O=Math.imul(Te,Ke),v=v+Math.imul(we,Ve)|0,b=b+Math.imul(we,wt)|0,b=b+Math.imul(Me,Ve)|0,O=O+Math.imul(Me,wt)|0,v=v+Math.imul(oe,Ye)|0,b=b+Math.imul(oe,xt)|0,b=b+Math.imul(he,Ye)|0,O=O+Math.imul(he,xt)|0,v=v+Math.imul(A,Fe)|0,b=b+Math.imul(A,Xe)|0,b=b+Math.imul(K,Fe)|0,O=O+Math.imul(K,Xe)|0,v=v+Math.imul(k,De)|0,b=b+Math.imul(k,et)|0,b=b+Math.imul(G,De)|0,O=O+Math.imul(G,et)|0,v=v+Math.imul(te,ze)|0,b=b+Math.imul(te,ft)|0,b=b+Math.imul(P,ze)|0,O=O+Math.imul(P,ft)|0;var Xt=(S+v|0)+((b&8191)<<13)|0;S=(O+(b>>>13)|0)+(Xt>>>26)|0,Xt&=67108863,v=Math.imul(me,Ee),b=Math.imul(me,Ke),b=b+Math.imul(Ne,Ee)|0,O=Math.imul(Ne,Ke),v=v+Math.imul(Ce,Ve)|0,b=b+Math.imul(Ce,wt)|0,b=b+Math.imul(Te,Ve)|0,O=O+Math.imul(Te,wt)|0,v=v+Math.imul(we,Ye)|0,b=b+Math.imul(we,xt)|0,b=b+Math.imul(Me,Ye)|0,O=O+Math.imul(Me,xt)|0,v=v+Math.imul(oe,Fe)|0,b=b+Math.imul(oe,Xe)|0,b=b+Math.imul(he,Fe)|0,O=O+Math.imul(he,Xe)|0,v=v+Math.imul(A,De)|0,b=b+Math.imul(A,et)|0,b=b+Math.imul(K,De)|0,O=O+Math.imul(K,et)|0,v=v+Math.imul(k,ze)|0,b=b+Math.imul(k,ft)|0,b=b+Math.imul(G,ze)|0,O=O+Math.imul(G,ft)|0,v=v+Math.imul(te,ke)|0,b=b+Math.imul(te,it)|0,b=b+Math.imul(P,ke)|0,O=O+Math.imul(P,it)|0;var $r=(S+v|0)+((b&8191)<<13)|0;S=(O+(b>>>13)|0)+($r>>>26)|0,$r&=67108863,v=Math.imul(ve,Ee),b=Math.imul(ve,Ke),b=b+Math.imul(qe,Ee)|0,O=Math.imul(qe,Ke),v=v+Math.imul(me,Ve)|0,b=b+Math.imul(me,wt)|0,b=b+Math.imul(Ne,Ve)|0,O=O+Math.imul(Ne,wt)|0,v=v+Math.imul(Ce,Ye)|0,b=b+Math.imul(Ce,xt)|0,b=b+Math.imul(Te,Ye)|0,O=O+Math.imul(Te,xt)|0,v=v+Math.imul(we,Fe)|0,b=b+Math.imul(we,Xe)|0,b=b+Math.imul(Me,Fe)|0,O=O+Math.imul(Me,Xe)|0,v=v+Math.imul(oe,De)|0,b=b+Math.imul(oe,et)|0,b=b+Math.imul(he,De)|0,O=O+Math.imul(he,et)|0,v=v+Math.imul(A,ze)|0,b=b+Math.imul(A,ft)|0,b=b+Math.imul(K,ze)|0,O=O+Math.imul(K,ft)|0,v=v+Math.imul(k,ke)|0,b=b+Math.imul(k,it)|0,b=b+Math.imul(G,ke)|0,O=O+Math.imul(G,it)|0,v=v+Math.imul(te,Be)|0,b=b+Math.imul(te,We)|0,b=b+Math.imul(P,Be)|0,O=O+Math.imul(P,We)|0;var Ii=(S+v|0)+((b&8191)<<13)|0;S=(O+(b>>>13)|0)+(Ii>>>26)|0,Ii&=67108863,v=Math.imul(ye,Ee),b=Math.imul(ye,Ke),b=b+Math.imul(Le,Ee)|0,O=Math.imul(Le,Ke),v=v+Math.imul(ve,Ve)|0,b=b+Math.imul(ve,wt)|0,b=b+Math.imul(qe,Ve)|0,O=O+Math.imul(qe,wt)|0,v=v+Math.imul(me,Ye)|0,b=b+Math.imul(me,xt)|0,b=b+Math.imul(Ne,Ye)|0,O=O+Math.imul(Ne,xt)|0,v=v+Math.imul(Ce,Fe)|0,b=b+Math.imul(Ce,Xe)|0,b=b+Math.imul(Te,Fe)|0,O=O+Math.imul(Te,Xe)|0,v=v+Math.imul(we,De)|0,b=b+Math.imul(we,et)|0,b=b+Math.imul(Me,De)|0,O=O+Math.imul(Me,et)|0,v=v+Math.imul(oe,ze)|0,b=b+Math.imul(oe,ft)|0,b=b+Math.imul(he,ze)|0,O=O+Math.imul(he,ft)|0,v=v+Math.imul(A,ke)|0,b=b+Math.imul(A,it)|0,b=b+Math.imul(K,ke)|0,O=O+Math.imul(K,it)|0,v=v+Math.imul(k,Be)|0,b=b+Math.imul(k,We)|0,b=b+Math.imul(G,Be)|0,O=O+Math.imul(G,We)|0,v=v+Math.imul(te,$e)|0,b=b+Math.imul(te,Ot)|0,b=b+Math.imul(P,$e)|0,O=O+Math.imul(P,Ot)|0;var jr=(S+v|0)+((b&8191)<<13)|0;S=(O+(b>>>13)|0)+(jr>>>26)|0,jr&=67108863,v=Math.imul(_e,Ee),b=Math.imul(_e,Ke),b=b+Math.imul(He,Ee)|0,O=Math.imul(He,Ke),v=v+Math.imul(ye,Ve)|0,b=b+Math.imul(ye,wt)|0,b=b+Math.imul(Le,Ve)|0,O=O+Math.imul(Le,wt)|0,v=v+Math.imul(ve,Ye)|0,b=b+Math.imul(ve,xt)|0,b=b+Math.imul(qe,Ye)|0,O=O+Math.imul(qe,xt)|0,v=v+Math.imul(me,Fe)|0,b=b+Math.imul(me,Xe)|0,b=b+Math.imul(Ne,Fe)|0,O=O+Math.imul(Ne,Xe)|0,v=v+Math.imul(Ce,De)|0,b=b+Math.imul(Ce,et)|0,b=b+Math.imul(Te,De)|0,O=O+Math.imul(Te,et)|0,v=v+Math.imul(we,ze)|0,b=b+Math.imul(we,ft)|0,b=b+Math.imul(Me,ze)|0,O=O+Math.imul(Me,ft)|0,v=v+Math.imul(oe,ke)|0,b=b+Math.imul(oe,it)|0,b=b+Math.imul(he,ke)|0,O=O+Math.imul(he,it)|0,v=v+Math.imul(A,Be)|0,b=b+Math.imul(A,We)|0,b=b+Math.imul(K,Be)|0,O=O+Math.imul(K,We)|0,v=v+Math.imul(k,$e)|0,b=b+Math.imul(k,Ot)|0,b=b+Math.imul(G,$e)|0,O=O+Math.imul(G,Ot)|0,v=v+Math.imul(te,at)|0,b=b+Math.imul(te,bt)|0,b=b+Math.imul(P,at)|0,O=O+Math.imul(P,bt)|0;var Pi=(S+v|0)+((b&8191)<<13)|0;S=(O+(b>>>13)|0)+(Pi>>>26)|0,Pi&=67108863,v=Math.imul(_e,Ve),b=Math.imul(_e,wt),b=b+Math.imul(He,Ve)|0,O=Math.imul(He,wt),v=v+Math.imul(ye,Ye)|0,b=b+Math.imul(ye,xt)|0,b=b+Math.imul(Le,Ye)|0,O=O+Math.imul(Le,xt)|0,v=v+Math.imul(ve,Fe)|0,b=b+Math.imul(ve,Xe)|0,b=b+Math.imul(qe,Fe)|0,O=O+Math.imul(qe,Xe)|0,v=v+Math.imul(me,De)|0,b=b+Math.imul(me,et)|0,b=b+Math.imul(Ne,De)|0,O=O+Math.imul(Ne,et)|0,v=v+Math.imul(Ce,ze)|0,b=b+Math.imul(Ce,ft)|0,b=b+Math.imul(Te,ze)|0,O=O+Math.imul(Te,ft)|0,v=v+Math.imul(we,ke)|0,b=b+Math.imul(we,it)|0,b=b+Math.imul(Me,ke)|0,O=O+Math.imul(Me,it)|0,v=v+Math.imul(oe,Be)|0,b=b+Math.imul(oe,We)|0,b=b+Math.imul(he,Be)|0,O=O+Math.imul(he,We)|0,v=v+Math.imul(A,$e)|0,b=b+Math.imul(A,Ot)|0,b=b+Math.imul(K,$e)|0,O=O+Math.imul(K,Ot)|0,v=v+Math.imul(k,at)|0,b=b+Math.imul(k,bt)|0,b=b+Math.imul(G,at)|0,O=O+Math.imul(G,bt)|0;var Ri=(S+v|0)+((b&8191)<<13)|0;S=(O+(b>>>13)|0)+(Ri>>>26)|0,Ri&=67108863,v=Math.imul(_e,Ye),b=Math.imul(_e,xt),b=b+Math.imul(He,Ye)|0,O=Math.imul(He,xt),v=v+Math.imul(ye,Fe)|0,b=b+Math.imul(ye,Xe)|0,b=b+Math.imul(Le,Fe)|0,O=O+Math.imul(Le,Xe)|0,v=v+Math.imul(ve,De)|0,b=b+Math.imul(ve,et)|0,b=b+Math.imul(qe,De)|0,O=O+Math.imul(qe,et)|0,v=v+Math.imul(me,ze)|0,b=b+Math.imul(me,ft)|0,b=b+Math.imul(Ne,ze)|0,O=O+Math.imul(Ne,ft)|0,v=v+Math.imul(Ce,ke)|0,b=b+Math.imul(Ce,it)|0,b=b+Math.imul(Te,ke)|0,O=O+Math.imul(Te,it)|0,v=v+Math.imul(we,Be)|0,b=b+Math.imul(we,We)|0,b=b+Math.imul(Me,Be)|0,O=O+Math.imul(Me,We)|0,v=v+Math.imul(oe,$e)|0,b=b+Math.imul(oe,Ot)|0,b=b+Math.imul(he,$e)|0,O=O+Math.imul(he,Ot)|0,v=v+Math.imul(A,at)|0,b=b+Math.imul(A,bt)|0,b=b+Math.imul(K,at)|0,O=O+Math.imul(K,bt)|0;var Hr=(S+v|0)+((b&8191)<<13)|0;S=(O+(b>>>13)|0)+(Hr>>>26)|0,Hr&=67108863,v=Math.imul(_e,Fe),b=Math.imul(_e,Xe),b=b+Math.imul(He,Fe)|0,O=Math.imul(He,Xe),v=v+Math.imul(ye,De)|0,b=b+Math.imul(ye,et)|0,b=b+Math.imul(Le,De)|0,O=O+Math.imul(Le,et)|0,v=v+Math.imul(ve,ze)|0,b=b+Math.imul(ve,ft)|0,b=b+Math.imul(qe,ze)|0,O=O+Math.imul(qe,ft)|0,v=v+Math.imul(me,ke)|0,b=b+Math.imul(me,it)|0,b=b+Math.imul(Ne,ke)|0,O=O+Math.imul(Ne,it)|0,v=v+Math.imul(Ce,Be)|0,b=b+Math.imul(Ce,We)|0,b=b+Math.imul(Te,Be)|0,O=O+Math.imul(Te,We)|0,v=v+Math.imul(we,$e)|0,b=b+Math.imul(we,Ot)|0,b=b+Math.imul(Me,$e)|0,O=O+Math.imul(Me,Ot)|0,v=v+Math.imul(oe,at)|0,b=b+Math.imul(oe,bt)|0,b=b+Math.imul(he,at)|0,O=O+Math.imul(he,bt)|0;var hi=(S+v|0)+((b&8191)<<13)|0;S=(O+(b>>>13)|0)+(hi>>>26)|0,hi&=67108863,v=Math.imul(_e,De),b=Math.imul(_e,et),b=b+Math.imul(He,De)|0,O=Math.imul(He,et),v=v+Math.imul(ye,ze)|0,b=b+Math.imul(ye,ft)|0,b=b+Math.imul(Le,ze)|0,O=O+Math.imul(Le,ft)|0,v=v+Math.imul(ve,ke)|0,b=b+Math.imul(ve,it)|0,b=b+Math.imul(qe,ke)|0,O=O+Math.imul(qe,it)|0,v=v+Math.imul(me,Be)|0,b=b+Math.imul(me,We)|0,b=b+Math.imul(Ne,Be)|0,O=O+Math.imul(Ne,We)|0,v=v+Math.imul(Ce,$e)|0,b=b+Math.imul(Ce,Ot)|0,b=b+Math.imul(Te,$e)|0,O=O+Math.imul(Te,Ot)|0,v=v+Math.imul(we,at)|0,b=b+Math.imul(we,bt)|0,b=b+Math.imul(Me,at)|0,O=O+Math.imul(Me,bt)|0;var ui=(S+v|0)+((b&8191)<<13)|0;S=(O+(b>>>13)|0)+(ui>>>26)|0,ui&=67108863,v=Math.imul(_e,ze),b=Math.imul(_e,ft),b=b+Math.imul(He,ze)|0,O=Math.imul(He,ft),v=v+Math.imul(ye,ke)|0,b=b+Math.imul(ye,it)|0,b=b+Math.imul(Le,ke)|0,O=O+Math.imul(Le,it)|0,v=v+Math.imul(ve,Be)|0,b=b+Math.imul(ve,We)|0,b=b+Math.imul(qe,Be)|0,O=O+Math.imul(qe,We)|0,v=v+Math.imul(me,$e)|0,b=b+Math.imul(me,Ot)|0,b=b+Math.imul(Ne,$e)|0,O=O+Math.imul(Ne,Ot)|0,v=v+Math.imul(Ce,at)|0,b=b+Math.imul(Ce,bt)|0,b=b+Math.imul(Te,at)|0,O=O+Math.imul(Te,bt)|0;var fr=(S+v|0)+((b&8191)<<13)|0;S=(O+(b>>>13)|0)+(fr>>>26)|0,fr&=67108863,v=Math.imul(_e,ke),b=Math.imul(_e,it),b=b+Math.imul(He,ke)|0,O=Math.imul(He,it),v=v+Math.imul(ye,Be)|0,b=b+Math.imul(ye,We)|0,b=b+Math.imul(Le,Be)|0,O=O+Math.imul(Le,We)|0,v=v+Math.imul(ve,$e)|0,b=b+Math.imul(ve,Ot)|0,b=b+Math.imul(qe,$e)|0,O=O+Math.imul(qe,Ot)|0,v=v+Math.imul(me,at)|0,b=b+Math.imul(me,bt)|0,b=b+Math.imul(Ne,at)|0,O=O+Math.imul(Ne,bt)|0;var Ci=(S+v|0)+((b&8191)<<13)|0;S=(O+(b>>>13)|0)+(Ci>>>26)|0,Ci&=67108863,v=Math.imul(_e,Be),b=Math.imul(_e,We),b=b+Math.imul(He,Be)|0,O=Math.imul(He,We),v=v+Math.imul(ye,$e)|0,b=b+Math.imul(ye,Ot)|0,b=b+Math.imul(Le,$e)|0,O=O+Math.imul(Le,Ot)|0,v=v+Math.imul(ve,at)|0,b=b+Math.imul(ve,bt)|0,b=b+Math.imul(qe,at)|0,O=O+Math.imul(qe,bt)|0;var Ni=(S+v|0)+((b&8191)<<13)|0;S=(O+(b>>>13)|0)+(Ni>>>26)|0,Ni&=67108863,v=Math.imul(_e,$e),b=Math.imul(_e,Ot),b=b+Math.imul(He,$e)|0,O=Math.imul(He,Ot),v=v+Math.imul(ye,at)|0,b=b+Math.imul(ye,bt)|0,b=b+Math.imul(Le,at)|0,O=O+Math.imul(Le,bt)|0;var Oi=(S+v|0)+((b&8191)<<13)|0;S=(O+(b>>>13)|0)+(Oi>>>26)|0,Oi&=67108863,v=Math.imul(_e,at),b=Math.imul(_e,bt),b=b+Math.imul(He,at)|0,O=Math.imul(He,bt);var ts=(S+v|0)+((b&8191)<<13)|0;return S=(O+(b>>>13)|0)+(ts>>>26)|0,ts&=67108863,I[0]=Er,I[1]=Sr,I[2]=Mr,I[3]=Ir,I[4]=Pr,I[5]=Xt,I[6]=$r,I[7]=Ii,I[8]=jr,I[9]=Pi,I[10]=Ri,I[11]=Hr,I[12]=hi,I[13]=ui,I[14]=fr,I[15]=Ci,I[16]=Ni,I[17]=Oi,I[18]=ts,S!==0&&(I[19]=S,p.length++),p};Math.imul||(F=Q);function V(c,h,p){p.negative=h.negative^c.negative,p.length=c.length+h.length;for(var m=0,_=0,I=0;I<p.length-1;I++){var S=_;_=0;for(var v=m&67108863,b=Math.min(I,h.length-1),O=Math.max(0,I-c.length+1);O<=b;O++){var W=I-O,te=c.words[W]|0,P=h.words[O]|0,ee=te*P,k=ee&67108863;S=S+(ee/67108864|0)|0,k=k+v|0,v=k&67108863,S=S+(k>>>26)|0,_+=S>>>26,S&=67108863}p.words[I]=v,m=S,S=_}return m!==0?p.words[I]=m:p.length--,p._strip()}function D(c,h,p){return V(c,h,p)}a.prototype.mulTo=function(c,h){var p,m=this.length+c.length;return this.length===10&&c.length===10?p=F(this,c,h):m<63?p=Q(this,c,h):m<1024?p=V(this,c,h):p=D(this,c,h),p},a.prototype.mul=function(c){var h=new a(null);return h.words=new Array(this.length+c.length),this.mulTo(c,h)},a.prototype.mulf=function(c){var h=new a(null);return h.words=new Array(this.length+c.length),D(this,c,h)},a.prototype.imul=function(c){return this.clone().mulTo(c,this)},a.prototype.imuln=function(c){var h=c<0;h&&(c=-c),i(typeof c=="number"),i(c<67108864);for(var p=0,m=0;m<this.length;m++){var _=(this.words[m]|0)*c,I=(_&67108863)+(p&67108863);p>>=26,p+=_/67108864|0,p+=I>>>26,this.words[m]=I&67108863}return p!==0&&(this.words[m]=p,this.length++),h?this.ineg():this},a.prototype.muln=function(c){return this.clone().imuln(c)},a.prototype.sqr=function(){return this.mul(this)},a.prototype.isqr=function(){return this.imul(this.clone())},a.prototype.pow=function(c){var h=U(c);if(h.length===0)return new a(1);for(var p=this,m=0;m<h.length&&h[m]===0;m++,p=p.sqr());if(++m<h.length)for(var _=p.sqr();m<h.length;m++,_=_.sqr())h[m]!==0&&(p=p.mul(_));return p},a.prototype.iushln=function(c){i(typeof c=="number"&&c>=0);var h=c%26,p=(c-h)/26,m=67108863>>>26-h<<26-h,_;if(h!==0){var I=0;for(_=0;_<this.length;_++){var S=this.words[_]&m,v=(this.words[_]|0)-S<<h;this.words[_]=v|I,I=S>>>26-h}I&&(this.words[_]=I,this.length++)}if(p!==0){for(_=this.length-1;_>=0;_--)this.words[_+p]=this.words[_];for(_=0;_<p;_++)this.words[_]=0;this.length+=p}return this._strip()},a.prototype.ishln=function(c){return i(this.negative===0),this.iushln(c)},a.prototype.iushrn=function(c,h,p){i(typeof c=="number"&&c>=0);var m;h?m=(h-h%26)/26:m=0;var _=c%26,I=Math.min((c-_)/26,this.length),S=67108863^67108863>>>_<<_,v=p;if(m-=I,m=Math.max(0,m),v){for(var b=0;b<I;b++)v.words[b]=this.words[b];v.length=I}if(I!==0)if(this.length>I)for(this.length-=I,b=0;b<this.length;b++)this.words[b]=this.words[b+I];else this.words[0]=0,this.length=1;var O=0;for(b=this.length-1;b>=0&&(O!==0||b>=m);b--){var W=this.words[b]|0;this.words[b]=O<<26-_|W>>>_,O=W&S}return v&&O!==0&&(v.words[v.length++]=O),this.length===0&&(this.words[0]=0,this.length=1),this._strip()},a.prototype.ishrn=function(c,h,p){return i(this.negative===0),this.iushrn(c,h,p)},a.prototype.shln=function(c){return this.clone().ishln(c)},a.prototype.ushln=function(c){return this.clone().iushln(c)},a.prototype.shrn=function(c){return this.clone().ishrn(c)},a.prototype.ushrn=function(c){return this.clone().iushrn(c)},a.prototype.testn=function(c){i(typeof c=="number"&&c>=0);var h=c%26,p=(c-h)/26,m=1<<h;if(this.length<=p)return!1;var _=this.words[p];return!!(_&m)},a.prototype.imaskn=function(c){i(typeof c=="number"&&c>=0);var h=c%26,p=(c-h)/26;if(i(this.negative===0,"imaskn works only with positive numbers"),this.length<=p)return this;if(h!==0&&p++,this.length=Math.min(p,this.length),h!==0){var m=67108863^67108863>>>h<<h;this.words[this.length-1]&=m}return this._strip()},a.prototype.maskn=function(c){return this.clone().imaskn(c)},a.prototype.iaddn=function(c){return i(typeof c=="number"),i(c<67108864),c<0?this.isubn(-c):this.negative!==0?this.length===1&&(this.words[0]|0)<=c?(this.words[0]=c-(this.words[0]|0),this.negative=0,this):(this.negative=0,this.isubn(c),this.negative=1,this):this._iaddn(c)},a.prototype._iaddn=function(c){this.words[0]+=c;for(var h=0;h<this.length&&this.words[h]>=67108864;h++)this.words[h]-=67108864,h===this.length-1?this.words[h+1]=1:this.words[h+1]++;return this.length=Math.max(this.length,h+1),this},a.prototype.isubn=function(c){if(i(typeof c=="number"),i(c<67108864),c<0)return this.iaddn(-c);if(this.negative!==0)return this.negative=0,this.iaddn(c),this.negative=1,this;if(this.words[0]-=c,this.length===1&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var h=0;h<this.length&&this.words[h]<0;h++)this.words[h]+=67108864,this.words[h+1]-=1;return this._strip()},a.prototype.addn=function(c){return this.clone().iaddn(c)},a.prototype.subn=function(c){return this.clone().isubn(c)},a.prototype.iabs=function(){return this.negative=0,this},a.prototype.abs=function(){return this.clone().iabs()},a.prototype._ishlnsubmul=function(c,h,p){var m=c.length+p,_;this._expand(m);var I,S=0;for(_=0;_<c.length;_++){I=(this.words[_+p]|0)+S;var v=(c.words[_]|0)*h;I-=v&67108863,S=(I>>26)-(v/67108864|0),this.words[_+p]=I&67108863}for(;_<this.length-p;_++)I=(this.words[_+p]|0)+S,S=I>>26,this.words[_+p]=I&67108863;if(S===0)return this._strip();for(i(S===-1),S=0,_=0;_<this.length;_++)I=-(this.words[_]|0)+S,S=I>>26,this.words[_]=I&67108863;return this.negative=1,this._strip()},a.prototype._wordDiv=function(c,h){var p=this.length-c.length,m=this.clone(),_=c,I=_.words[_.length-1]|0,S=this._countBits(I);p=26-S,p!==0&&(_=_.ushln(p),m.iushln(p),I=_.words[_.length-1]|0);var v=m.length-_.length,b;if(h!=="mod"){b=new a(null),b.length=v+1,b.words=new Array(b.length);for(var O=0;O<b.length;O++)b.words[O]=0}var W=m.clone()._ishlnsubmul(_,1,v);W.negative===0&&(m=W,b&&(b.words[v]=1));for(var te=v-1;te>=0;te--){var P=(m.words[_.length+te]|0)*67108864+(m.words[_.length+te-1]|0);for(P=Math.min(P/I|0,67108863),m._ishlnsubmul(_,P,te);m.negative!==0;)P--,m.negative=0,m._ishlnsubmul(_,1,te),m.isZero()||(m.negative^=1);b&&(b.words[te]=P)}return b&&b._strip(),m._strip(),h!=="div"&&p!==0&&m.iushrn(p),{div:b||null,mod:m}},a.prototype.divmod=function(c,h,p){if(i(!c.isZero()),this.isZero())return{div:new a(0),mod:new a(0)};var m,_,I;return this.negative!==0&&c.negative===0?(I=this.neg().divmod(c,h),h!=="mod"&&(m=I.div.neg()),h!=="div"&&(_=I.mod.neg(),p&&_.negative!==0&&_.iadd(c)),{div:m,mod:_}):this.negative===0&&c.negative!==0?(I=this.divmod(c.neg(),h),h!=="mod"&&(m=I.div.neg()),{div:m,mod:I.mod}):this.negative&c.negative?(I=this.neg().divmod(c.neg(),h),h!=="div"&&(_=I.mod.neg(),p&&_.negative!==0&&_.isub(c)),{div:I.div,mod:_}):c.length>this.length||this.cmp(c)<0?{div:new a(0),mod:this}:c.length===1?h==="div"?{div:this.divn(c.words[0]),mod:null}:h==="mod"?{div:null,mod:new a(this.modrn(c.words[0]))}:{div:this.divn(c.words[0]),mod:new a(this.modrn(c.words[0]))}:this._wordDiv(c,h)},a.prototype.div=function(c){return this.divmod(c,"div",!1).div},a.prototype.mod=function(c){return this.divmod(c,"mod",!1).mod},a.prototype.umod=function(c){return this.divmod(c,"mod",!0).mod},a.prototype.divRound=function(c){var h=this.divmod(c);if(h.mod.isZero())return h.div;var p=h.div.negative!==0?h.mod.isub(c):h.mod,m=c.ushrn(1),_=c.andln(1),I=p.cmp(m);return I<0||_===1&&I===0?h.div:h.div.negative!==0?h.div.isubn(1):h.div.iaddn(1)},a.prototype.modrn=function(c){var h=c<0;h&&(c=-c),i(c<=67108863);for(var p=(1<<26)%c,m=0,_=this.length-1;_>=0;_--)m=(p*m+(this.words[_]|0))%c;return h?-m:m},a.prototype.modn=function(c){return this.modrn(c)},a.prototype.idivn=function(c){var h=c<0;h&&(c=-c),i(c<=67108863);for(var p=0,m=this.length-1;m>=0;m--){var _=(this.words[m]|0)+p*67108864;this.words[m]=_/c|0,p=_%c}return this._strip(),h?this.ineg():this},a.prototype.divn=function(c){return this.clone().idivn(c)},a.prototype.egcd=function(c){i(c.negative===0),i(!c.isZero());var h=this,p=c.clone();h.negative!==0?h=h.umod(c):h=h.clone();for(var m=new a(1),_=new a(0),I=new a(0),S=new a(1),v=0;h.isEven()&&p.isEven();)h.iushrn(1),p.iushrn(1),++v;for(var b=p.clone(),O=h.clone();!h.isZero();){for(var W=0,te=1;!(h.words[0]&te)&&W<26;++W,te<<=1);if(W>0)for(h.iushrn(W);W-- >0;)(m.isOdd()||_.isOdd())&&(m.iadd(b),_.isub(O)),m.iushrn(1),_.iushrn(1);for(var P=0,ee=1;!(p.words[0]&ee)&&P<26;++P,ee<<=1);if(P>0)for(p.iushrn(P);P-- >0;)(I.isOdd()||S.isOdd())&&(I.iadd(b),S.isub(O)),I.iushrn(1),S.iushrn(1);h.cmp(p)>=0?(h.isub(p),m.isub(I),_.isub(S)):(p.isub(h),I.isub(m),S.isub(_))}return{a:I,b:S,gcd:p.iushln(v)}},a.prototype._invmp=function(c){i(c.negative===0),i(!c.isZero());var h=this,p=c.clone();h.negative!==0?h=h.umod(c):h=h.clone();for(var m=new a(1),_=new a(0),I=p.clone();h.cmpn(1)>0&&p.cmpn(1)>0;){for(var S=0,v=1;!(h.words[0]&v)&&S<26;++S,v<<=1);if(S>0)for(h.iushrn(S);S-- >0;)m.isOdd()&&m.iadd(I),m.iushrn(1);for(var b=0,O=1;!(p.words[0]&O)&&b<26;++b,O<<=1);if(b>0)for(p.iushrn(b);b-- >0;)_.isOdd()&&_.iadd(I),_.iushrn(1);h.cmp(p)>=0?(h.isub(p),m.isub(_)):(p.isub(h),_.isub(m))}var W;return h.cmpn(1)===0?W=m:W=_,W.cmpn(0)<0&&W.iadd(c),W},a.prototype.gcd=function(c){if(this.isZero())return c.abs();if(c.isZero())return this.abs();var h=this.clone(),p=c.clone();h.negative=0,p.negative=0;for(var m=0;h.isEven()&&p.isEven();m++)h.iushrn(1),p.iushrn(1);do{for(;h.isEven();)h.iushrn(1);for(;p.isEven();)p.iushrn(1);var _=h.cmp(p);if(_<0){var I=h;h=p,p=I}else if(_===0||p.cmpn(1)===0)break;h.isub(p)}while(!0);return p.iushln(m)},a.prototype.invm=function(c){return this.egcd(c).a.umod(c)},a.prototype.isEven=function(){return(this.words[0]&1)===0},a.prototype.isOdd=function(){return(this.words[0]&1)===1},a.prototype.andln=function(c){return this.words[0]&c},a.prototype.bincn=function(c){i(typeof c=="number");var h=c%26,p=(c-h)/26,m=1<<h;if(this.length<=p)return this._expand(p+1),this.words[p]|=m,this;for(var _=m,I=p;_!==0&&I<this.length;I++){var S=this.words[I]|0;S+=_,_=S>>>26,S&=67108863,this.words[I]=S}return _!==0&&(this.words[I]=_,this.length++),this},a.prototype.isZero=function(){return this.length===1&&this.words[0]===0},a.prototype.cmpn=function(c){var h=c<0;if(this.negative!==0&&!h)return-1;if(this.negative===0&&h)return 1;this._strip();var p;if(this.length>1)p=1;else{h&&(c=-c),i(c<=67108863,"Number is too big");var m=this.words[0]|0;p=m===c?0:m<c?-1:1}return this.negative!==0?-p|0:p},a.prototype.cmp=function(c){if(this.negative!==0&&c.negative===0)return-1;if(this.negative===0&&c.negative!==0)return 1;var h=this.ucmp(c);return this.negative!==0?-h|0:h},a.prototype.ucmp=function(c){if(this.length>c.length)return 1;if(this.length<c.length)return-1;for(var h=0,p=this.length-1;p>=0;p--){var m=this.words[p]|0,_=c.words[p]|0;if(m!==_){m<_?h=-1:m>_&&(h=1);break}}return h},a.prototype.gtn=function(c){return this.cmpn(c)===1},a.prototype.gt=function(c){return this.cmp(c)===1},a.prototype.gten=function(c){return this.cmpn(c)>=0},a.prototype.gte=function(c){return this.cmp(c)>=0},a.prototype.ltn=function(c){return this.cmpn(c)===-1},a.prototype.lt=function(c){return this.cmp(c)===-1},a.prototype.lten=function(c){return this.cmpn(c)<=0},a.prototype.lte=function(c){return this.cmp(c)<=0},a.prototype.eqn=function(c){return this.cmpn(c)===0},a.prototype.eq=function(c){return this.cmp(c)===0},a.red=function(c){return new z(c)},a.prototype.toRed=function(c){return i(!this.red,"Already a number in reduction context"),i(this.negative===0,"red works only with positives"),c.convertTo(this)._forceRed(c)},a.prototype.fromRed=function(){return i(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},a.prototype._forceRed=function(c){return this.red=c,this},a.prototype.forceRed=function(c){return i(!this.red,"Already a number in reduction context"),this._forceRed(c)},a.prototype.redAdd=function(c){return i(this.red,"redAdd works only with red numbers"),this.red.add(this,c)},a.prototype.redIAdd=function(c){return i(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,c)},a.prototype.redSub=function(c){return i(this.red,"redSub works only with red numbers"),this.red.sub(this,c)},a.prototype.redISub=function(c){return i(this.red,"redISub works only with red numbers"),this.red.isub(this,c)},a.prototype.redShl=function(c){return i(this.red,"redShl works only with red numbers"),this.red.shl(this,c)},a.prototype.redMul=function(c){return i(this.red,"redMul works only with red numbers"),this.red._verify2(this,c),this.red.mul(this,c)},a.prototype.redIMul=function(c){return i(this.red,"redMul works only with red numbers"),this.red._verify2(this,c),this.red.imul(this,c)},a.prototype.redSqr=function(){return i(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},a.prototype.redISqr=function(){return i(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},a.prototype.redSqrt=function(){return i(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},a.prototype.redInvm=function(){return i(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},a.prototype.redNeg=function(){return i(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},a.prototype.redPow=function(c){return i(this.red&&!c.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,c)};var B={k256:null,p224:null,p192:null,p25519:null};function H(c,h){this.name=c,this.p=new a(h,16),this.n=this.p.bitLength(),this.k=new a(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}H.prototype._tmp=function(){var c=new a(null);return c.words=new Array(Math.ceil(this.n/13)),c},H.prototype.ireduce=function(c){var h=c,p;do this.split(h,this.tmp),h=this.imulK(h),h=h.iadd(this.tmp),p=h.bitLength();while(p>this.n);var m=p<this.n?-1:h.ucmp(this.p);return m===0?(h.words[0]=0,h.length=1):m>0?h.isub(this.p):h.strip!==void 0?h.strip():h._strip(),h},H.prototype.split=function(c,h){c.iushrn(this.n,0,h)},H.prototype.imulK=function(c){return c.imul(this.k)};function E(){H.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}s(E,H),E.prototype.split=function(c,h){for(var p=4194303,m=Math.min(c.length,9),_=0;_<m;_++)h.words[_]=c.words[_];if(h.length=m,c.length<=9){c.words[0]=0,c.length=1;return}var I=c.words[9];for(h.words[h.length++]=I&p,_=10;_<c.length;_++){var S=c.words[_]|0;c.words[_-10]=(S&p)<<4|I>>>22,I=S}I>>>=22,c.words[_-10]=I,I===0&&c.length>10?c.length-=10:c.length-=9},E.prototype.imulK=function(c){c.words[c.length]=0,c.words[c.length+1]=0,c.length+=2;for(var h=0,p=0;p<c.length;p++){var m=c.words[p]|0;h+=m*977,c.words[p]=h&67108863,h=m*64+(h/67108864|0)}return c.words[c.length-1]===0&&(c.length--,c.words[c.length-1]===0&&c.length--),c};function $(){H.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}s($,H);function ne(){H.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}s(ne,H);function fe(){H.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}s(fe,H),fe.prototype.imulK=function(c){for(var h=0,p=0;p<c.length;p++){var m=(c.words[p]|0)*19+h,_=m&67108863;m>>>=26,c.words[p]=_,h=m}return h!==0&&(c.words[c.length++]=h),c},a._prime=function(c){if(B[c])return B[c];var h;if(c==="k256")h=new E;else if(c==="p224")h=new $;else if(c==="p192")h=new ne;else if(c==="p25519")h=new fe;else throw new Error("Unknown prime "+c);return B[c]=h,h};function z(c){if(typeof c=="string"){var h=a._prime(c);this.m=h.p,this.prime=h}else i(c.gtn(1),"modulus must be greater than 1"),this.m=c,this.prime=null}z.prototype._verify1=function(c){i(c.negative===0,"red works only with positives"),i(c.red,"red works only with red numbers")},z.prototype._verify2=function(c,h){i((c.negative|h.negative)===0,"red works only with positives"),i(c.red&&c.red===h.red,"red works only with red numbers")},z.prototype.imod=function(c){return this.prime?this.prime.ireduce(c)._forceRed(this):(w(c,c.umod(this.m)._forceRed(this)),c)},z.prototype.neg=function(c){return c.isZero()?c.clone():this.m.sub(c)._forceRed(this)},z.prototype.add=function(c,h){this._verify2(c,h);var p=c.add(h);return p.cmp(this.m)>=0&&p.isub(this.m),p._forceRed(this)},z.prototype.iadd=function(c,h){this._verify2(c,h);var p=c.iadd(h);return p.cmp(this.m)>=0&&p.isub(this.m),p},z.prototype.sub=function(c,h){this._verify2(c,h);var p=c.sub(h);return p.cmpn(0)<0&&p.iadd(this.m),p._forceRed(this)},z.prototype.isub=function(c,h){this._verify2(c,h);var p=c.isub(h);return p.cmpn(0)<0&&p.iadd(this.m),p},z.prototype.shl=function(c,h){return this._verify1(c),this.imod(c.ushln(h))},z.prototype.imul=function(c,h){return this._verify2(c,h),this.imod(c.imul(h))},z.prototype.mul=function(c,h){return this._verify2(c,h),this.imod(c.mul(h))},z.prototype.isqr=function(c){return this.imul(c,c.clone())},z.prototype.sqr=function(c){return this.mul(c,c)},z.prototype.sqrt=function(c){if(c.isZero())return c.clone();var h=this.m.andln(3);if(i(h%2===1),h===3){var p=this.m.add(new a(1)).iushrn(2);return this.pow(c,p)}for(var m=this.m.subn(1),_=0;!m.isZero()&&m.andln(1)===0;)_++,m.iushrn(1);i(!m.isZero());var I=new a(1).toRed(this),S=I.redNeg(),v=this.m.subn(1).iushrn(1),b=this.m.bitLength();for(b=new a(2*b*b).toRed(this);this.pow(b,v).cmp(S)!==0;)b.redIAdd(S);for(var O=this.pow(b,m),W=this.pow(c,m.addn(1).iushrn(1)),te=this.pow(c,m),P=_;te.cmp(I)!==0;){for(var ee=te,k=0;ee.cmp(I)!==0;k++)ee=ee.redSqr();i(k<P);var G=this.pow(O,new a(1).iushln(P-k-1));W=W.redMul(G),O=G.redSqr(),te=te.redMul(O),P=k}return W},z.prototype.invm=function(c){var h=c._invmp(this.m);return h.negative!==0?(h.negative=0,this.imod(h).redNeg()):this.imod(h)},z.prototype.pow=function(c,h){if(h.isZero())return new a(1).toRed(this);if(h.cmpn(1)===0)return c.clone();var p=4,m=new Array(1<<p);m[0]=new a(1).toRed(this),m[1]=c;for(var _=2;_<m.length;_++)m[_]=this.mul(m[_-1],c);var I=m[0],S=0,v=0,b=h.bitLength()%26;for(b===0&&(b=26),_=h.length-1;_>=0;_--){for(var O=h.words[_],W=b-1;W>=0;W--){var te=O>>W&1;if(I!==m[0]&&(I=this.sqr(I)),te===0&&S===0){v=0;continue}S<<=1,S|=te,v++,!(v!==p&&(_!==0||W!==0))&&(I=this.mul(I,m[S]),v=0,S=0)}b=26}return I},z.prototype.convertTo=function(c){var h=c.umod(this.m);return h===c?h.clone():h},z.prototype.convertFrom=function(c){var h=c.clone();return h.red=null,h},a.mont=function(c){return new y(c)};function y(c){z.call(this,c),this.shift=this.m.bitLength(),this.shift%26!==0&&(this.shift+=26-this.shift%26),this.r=new a(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}s(y,z),y.prototype.convertTo=function(c){return this.imod(c.ushln(this.shift))},y.prototype.convertFrom=function(c){var h=this.imod(c.mul(this.rinv));return h.red=null,h},y.prototype.imul=function(c,h){if(c.isZero()||h.isZero())return c.words[0]=0,c.length=1,c;var p=c.imul(h),m=p.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),_=p.isub(m).iushrn(this.shift),I=_;return _.cmp(this.m)>=0?I=_.isub(this.m):_.cmpn(0)<0&&(I=_.iadd(this.m)),I._forceRed(this)},y.prototype.mul=function(c,h){if(c.isZero()||h.isZero())return new a(0)._forceRed(this);var p=c.mul(h),m=p.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),_=p.isub(m).iushrn(this.shift),I=_;return _.cmp(this.m)>=0?I=_.isub(this.m):_.cmpn(0)<0&&(I=_.iadd(this.m)),I._forceRed(this)},y.prototype.invm=function(c){var h=this.imod(c._invmp(this.m).mul(this.r2));return h._forceRed(this)}})(r,Ag)})(Mg);var vt=Mg.exports;const Ig="bignumber/5.7.0";var Jc=vt.BN;const On=new Ar(Ig),cu={},i8=9007199254740991;function n8(r){return r!=null&&(Gt.isBigNumber(r)||typeof r=="number"&&r%1===0||typeof r=="string"&&!!r.match(/^-?[0-9]+$/)||oi(r)||typeof r=="bigint"||fa(r))}let Dp=!1;class Gt{constructor(e,t){e!==cu&&On.throwError("cannot call constructor directly; use BigNumber.from",Ar.errors.UNSUPPORTED_OPERATION,{operation:"new (BigNumber)"}),this._hex=t,this._isBigNumber=!0,Object.freeze(this)}fromTwos(e){return Yr(Pt(this).fromTwos(e))}toTwos(e){return Yr(Pt(this).toTwos(e))}abs(){return this._hex[0]==="-"?Gt.from(this._hex.substring(1)):this}add(e){return Yr(Pt(this).add(Pt(e)))}sub(e){return Yr(Pt(this).sub(Pt(e)))}div(e){return Gt.from(e).isZero()&&wi("division-by-zero","div"),Yr(Pt(this).div(Pt(e)))}mul(e){return Yr(Pt(this).mul(Pt(e)))}mod(e){const t=Pt(e);return t.isNeg()&&wi("division-by-zero","mod"),Yr(Pt(this).umod(t))}pow(e){const t=Pt(e);return t.isNeg()&&wi("negative-power","pow"),Yr(Pt(this).pow(t))}and(e){const t=Pt(e);return(this.isNegative()||t.isNeg())&&wi("unbound-bitwise-result","and"),Yr(Pt(this).and(t))}or(e){const t=Pt(e);return(this.isNegative()||t.isNeg())&&wi("unbound-bitwise-result","or"),Yr(Pt(this).or(t))}xor(e){const t=Pt(e);return(this.isNegative()||t.isNeg())&&wi("unbound-bitwise-result","xor"),Yr(Pt(this).xor(t))}mask(e){return(this.isNegative()||e<0)&&wi("negative-width","mask"),Yr(Pt(this).maskn(e))}shl(e){return(this.isNegative()||e<0)&&wi("negative-width","shl"),Yr(Pt(this).shln(e))}shr(e){return(this.isNegative()||e<0)&&wi("negative-width","shr"),Yr(Pt(this).shrn(e))}eq(e){return Pt(this).eq(Pt(e))}lt(e){return Pt(this).lt(Pt(e))}lte(e){return Pt(this).lte(Pt(e))}gt(e){return Pt(this).gt(Pt(e))}gte(e){return Pt(this).gte(Pt(e))}isNegative(){return this._hex[0]==="-"}isZero(){return Pt(this).isZero()}toNumber(){try{return Pt(this).toNumber()}catch{wi("overflow","toNumber",this.toString())}return null}toBigInt(){try{return BigInt(this.toString())}catch{}return On.throwError("this platform does not support BigInt",Ar.errors.UNSUPPORTED_OPERATION,{value:this.toString()})}toString(){return arguments.length>0&&(arguments[0]===10?Dp||(Dp=!0,On.warn("BigNumber.toString does not accept any parameters; base-10 is assumed")):arguments[0]===16?On.throwError("BigNumber.toString does not accept any parameters; use bigNumber.toHexString()",Ar.errors.UNEXPECTED_ARGUMENT,{}):On.throwError("BigNumber.toString does not accept parameters",Ar.errors.UNEXPECTED_ARGUMENT,{})),Pt(this).toString(10)}toHexString(){return this._hex}toJSON(e){return{type:"BigNumber",hex:this.toHexString()}}static from(e){if(e instanceof Gt)return e;if(typeof e=="string")return e.match(/^-?0x[0-9a-f]+$/i)?new Gt(cu,io(e)):e.match(/^-?[0-9]+$/)?new Gt(cu,io(new Jc(e))):On.throwArgumentError("invalid BigNumber string","value",e);if(typeof e=="number")return e%1&&wi("underflow","BigNumber.from",e),(e>=i8||e<=-9007199254740991)&&wi("overflow","BigNumber.from",e),Gt.from(String(e));const t=e;if(typeof t=="bigint")return Gt.from(t.toString());if(fa(t))return Gt.from(Xr(t));if(t)if(t.toHexString){const i=t.toHexString();if(typeof i=="string")return Gt.from(i)}else{let i=t._hex;if(i==null&&t.type==="BigNumber"&&(i=t.hex),typeof i=="string"&&(oi(i)||i[0]==="-"&&oi(i.substring(1))))return Gt.from(i)}return On.throwArgumentError("invalid BigNumber value","value",e)}static isBigNumber(e){return!!(e&&e._isBigNumber)}}function io(r){if(typeof r!="string")return io(r.toString(16));if(r[0]==="-")return r=r.substring(1),r[0]==="-"&&On.throwArgumentError("invalid hex","value",r),r=io(r),r==="0x00"?r:"-"+r;if(r.substring(0,2)!=="0x"&&(r="0x"+r),r==="0x")return"0x00";for(r.length%2&&(r="0x0"+r.substring(2));r.length>4&&r.substring(0,4)==="0x00";)r="0x"+r.substring(4);return r}function Yr(r){return Gt.from(io(r))}function Pt(r){const e=Gt.from(r).toHexString();return e[0]==="-"?new Jc("-"+e.substring(3),16):new Jc(e.substring(2),16)}function wi(r,e,t){const i={fault:r,operation:e};return t!=null&&(i.value=t),On.throwError(r,Ar.errors.NUMERIC_FAULT,i)}function s8(r){return new Jc(r,36).toString(16)}const Lr=new Ar(Ig),Za={},Pg=Gt.from(0),Rg=Gt.from(-1);function Cg(r,e,t,i){const s={fault:e,operation:t};return i!==void 0&&(s.value=i),Lr.throwError(r,Ar.errors.NUMERIC_FAULT,s)}let eo="0";for(;eo.length<256;)eo+=eo;function a0(r){if(typeof r!="number")try{r=Gt.from(r).toNumber()}catch{}return typeof r=="number"&&r>=0&&r<=256&&!(r%1)?"1"+eo.substring(0,r):Lr.throwArgumentError("invalid decimal size","decimals",r)}function fu(r,e){e==null&&(e=0);const t=a0(e);r=Gt.from(r);const i=r.lt(Pg);i&&(r=r.mul(Rg));let s=r.mod(t).toString();for(;s.length<t.length-1;)s="0"+s;s=s.match(/^([0-9]*[1-9]|0)(0*)/)[1];const a=r.div(t).toString();return t.length===1?r=a:r=a+"."+s,i&&(r="-"+r),r}function Rn(r,e){e==null&&(e=0);const t=a0(e);(typeof r!="string"||!r.match(/^-?[0-9.]+$/))&&Lr.throwArgumentError("invalid decimal value","value",r);const i=r.substring(0,1)==="-";i&&(r=r.substring(1)),r==="."&&Lr.throwArgumentError("missing value","value",r);const s=r.split(".");s.length>2&&Lr.throwArgumentError("too many decimal points","value",r);let a=s[0],f=s[1];for(a||(a="0"),f||(f="0");f[f.length-1]==="0";)f=f.substring(0,f.length-1);for(f.length>t.length-1&&Cg("fractional component exceeds decimals","underflow","parseFixed"),f===""&&(f="0");f.length<t.length-1;)f+="0";const u=Gt.from(a),d=Gt.from(f);let l=u.mul(t).add(d);return i&&(l=l.mul(Rg)),l}let hu=class Tu{constructor(e,t,i,s){e!==Za&&Lr.throwError("cannot use FixedFormat constructor; use FixedFormat.from",Ar.errors.UNSUPPORTED_OPERATION,{operation:"new FixedFormat"}),this.signed=t,this.width=i,this.decimals=s,this.name=(t?"":"u")+"fixed"+String(i)+"x"+String(s),this._multiplier=a0(s),Object.freeze(this)}static from(e){if(e instanceof Tu)return e;typeof e=="number"&&(e=`fixed128x${e}`);let t=!0,i=128,s=18;if(typeof e=="string"){if(e!=="fixed")if(e==="ufixed")t=!1;else{const a=e.match(/^(u?)fixed([0-9]+)x([0-9]+)$/);a||Lr.throwArgumentError("invalid fixed format","format",e),t=a[1]!=="u",i=parseInt(a[2]),s=parseInt(a[3])}}else if(e){const a=(f,u,d)=>e[f]==null?d:(typeof e[f]!==u&&Lr.throwArgumentError("invalid fixed format ("+f+" not "+u+")","format."+f,e[f]),e[f]);t=a("signed","boolean",t),i=a("width","number",i),s=a("decimals","number",s)}return i%8&&Lr.throwArgumentError("invalid fixed format width (not byte aligned)","format.width",i),s>80&&Lr.throwArgumentError("invalid fixed format (decimals too large)","format.decimals",s),new Tu(Za,t,i,s)}},Ng=class Dr{constructor(e,t,i,s){e!==Za&&Lr.throwError("cannot use FixedNumber constructor; use FixedNumber.from",Ar.errors.UNSUPPORTED_OPERATION,{operation:"new FixedFormat"}),this.format=s,this._hex=t,this._value=i,this._isFixedNumber=!0,Object.freeze(this)}_checkFormat(e){this.format.name!==e.format.name&&Lr.throwArgumentError("incompatible format; use fixedNumber.toFormat","other",e)}addUnsafe(e){this._checkFormat(e);const t=Rn(this._value,this.format.decimals),i=Rn(e._value,e.format.decimals);return Dr.fromValue(t.add(i),this.format.decimals,this.format)}subUnsafe(e){this._checkFormat(e);const t=Rn(this._value,this.format.decimals),i=Rn(e._value,e.format.decimals);return Dr.fromValue(t.sub(i),this.format.decimals,this.format)}mulUnsafe(e){this._checkFormat(e);const t=Rn(this._value,this.format.decimals),i=Rn(e._value,e.format.decimals);return Dr.fromValue(t.mul(i).div(this.format._multiplier),this.format.decimals,this.format)}divUnsafe(e){this._checkFormat(e);const t=Rn(this._value,this.format.decimals),i=Rn(e._value,e.format.decimals);return Dr.fromValue(t.mul(this.format._multiplier).div(i),this.format.decimals,this.format)}floor(){const e=this.toString().split(".");e.length===1&&e.push("0");let t=Dr.from(e[0],this.format);const i=!e[1].match(/^(0*)$/);return this.isNegative()&&i&&(t=t.subUnsafe(Bp.toFormat(t.format))),t}ceiling(){const e=this.toString().split(".");e.length===1&&e.push("0");let t=Dr.from(e[0],this.format);const i=!e[1].match(/^(0*)$/);return!this.isNegative()&&i&&(t=t.addUnsafe(Bp.toFormat(t.format))),t}round(e){e==null&&(e=0);const t=this.toString().split(".");if(t.length===1&&t.push("0"),(e<0||e>80||e%1)&&Lr.throwArgumentError("invalid decimal count","decimals",e),t[1].length<=e)return this;const i=Dr.from("1"+eo.substring(0,e),this.format),s=a8.toFormat(this.format);return this.mulUnsafe(i).addUnsafe(s).floor().divUnsafe(i)}isZero(){return this._value==="0.0"||this._value==="0"}isNegative(){return this._value[0]==="-"}toString(){return this._value}toHexString(e){if(e==null)return this._hex;e%8&&Lr.throwArgumentError("invalid byte width","width",e);const t=Gt.from(this._hex).fromTwos(this.format.width).toTwos(e).toHexString();return hn(t,e/8)}toUnsafeFloat(){return parseFloat(this.toString())}toFormat(e){return Dr.fromString(this._value,e)}static fromValue(e,t,i){return i==null&&t!=null&&!n8(t)&&(i=t,t=null),t==null&&(t=0),i==null&&(i="fixed"),Dr.fromString(fu(e,t),hu.from(i))}static fromString(e,t){t==null&&(t="fixed");const i=hu.from(t),s=Rn(e,i.decimals);!i.signed&&s.lt(Pg)&&Cg("unsigned value cannot be negative","overflow","value",e);let a=null;i.signed?a=s.toTwos(i.width).toHexString():(a=s.toHexString(),a=hn(a,i.width/8));const f=fu(s,i.decimals);return new Dr(Za,a,f,i)}static fromBytes(e,t){t==null&&(t="fixed");const i=hu.from(t);if(tr(e).length>i.width/8)throw new Error("overflow");let s=Gt.from(e);i.signed&&(s=s.fromTwos(i.width));const a=s.toTwos((i.signed?0:1)+i.width).toHexString(),f=fu(s,i.decimals);return new Dr(Za,a,f,i)}static from(e,t){if(typeof e=="string")return Dr.fromString(e,t);if(fa(e))return Dr.fromBytes(e,t);try{return Dr.fromValue(e,0,t)}catch(i){if(i.code!==Ar.errors.INVALID_ARGUMENT)throw i}return Lr.throwArgumentError("invalid FixedNumber value","value",e)}static isFixedNumber(e){return!!(e&&e._isFixedNumber)}};const Bp=Ng.from(1),a8=Ng.from("0.5"),o8="strings/5.7.0",c8=new Ar(o8);var Qc;(function(r){r.current="",r.NFC="NFC",r.NFD="NFD",r.NFKC="NFKC",r.NFKD="NFKD"})(Qc||(Qc={}));var Lp;(function(r){r.UNEXPECTED_CONTINUE="unexpected continuation byte",r.BAD_PREFIX="bad codepoint prefix",r.OVERRUN="string overrun",r.MISSING_CONTINUE="missing continuation byte",r.OUT_OF_RANGE="out of UTF-8 range",r.UTF16_SURROGATE="UTF-16 surrogate",r.OVERLONG="overlong representation"})(Lp||(Lp={}));function uu(r,e=Qc.current){e!=Qc.current&&(c8.checkNormalize(),r=r.normalize(e));let t=[];for(let i=0;i<r.length;i++){const s=r.charCodeAt(i);if(s<128)t.push(s);else if(s<2048)t.push(s>>6|192),t.push(s&63|128);else if((s&64512)==55296){i++;const a=r.charCodeAt(i);if(i>=r.length||(a&64512)!==56320)throw new Error("invalid utf-8 string");const f=65536+((s&1023)<<10)+(a&1023);t.push(f>>18|240),t.push(f>>12&63|128),t.push(f>>6&63|128),t.push(f&63|128)}else t.push(s>>12|224),t.push(s>>6&63|128),t.push(s&63|128)}return tr(t)}function f8(r){if(r.length%4!==0)throw new Error("bad data");let e=[];for(let t=0;t<r.length;t+=4)e.push(parseInt(r.substring(t,t+4),16));return e}function lu(r,e){e||(e=function(s){return[parseInt(s,16)]});let t=0,i={};return r.split(",").forEach(s=>{let a=s.split(":");t+=parseInt(a[0],16),i[t]=e(a[1])}),i}function Up(r){let e=0;return r.split(",").map(t=>{let i=t.split("-");i.length===1?i[1]="0":i[1]===""&&(i[1]="1");let s=e+parseInt(i[0],16);return e=parseInt(i[1],16),{l:s,h:e}})}Up("221,13-1b,5f-,40-10,51-f,11-3,3-3,2-2,2-4,8,2,15,2d,28-8,88,48,27-,3-5,11-20,27-,8,28,3-5,12,18,b-a,1c-4,6-16,2-d,2-2,2,1b-4,17-9,8f-,10,f,1f-2,1c-34,33-14e,4,36-,13-,6-2,1a-f,4,9-,3-,17,8,2-2,5-,2,8-,3-,4-8,2-3,3,6-,16-6,2-,7-3,3-,17,8,3,3,3-,2,6-3,3-,4-a,5,2-6,10-b,4,8,2,4,17,8,3,6-,b,4,4-,2-e,2-4,b-10,4,9-,3-,17,8,3-,5-,9-2,3-,4-7,3-3,3,4-3,c-10,3,7-2,4,5-2,3,2,3-2,3-2,4-2,9,4-3,6-2,4,5-8,2-e,d-d,4,9,4,18,b,6-3,8,4,5-6,3-8,3-3,b-11,3,9,4,18,b,6-3,8,4,5-6,3-6,2,3-3,b-11,3,9,4,18,11-3,7-,4,5-8,2-7,3-3,b-11,3,13-2,19,a,2-,8-2,2-3,7,2,9-11,4-b,3b-3,1e-24,3,2-,3,2-,2-5,5,8,4,2,2-,3,e,4-,6,2,7-,b-,3-21,49,23-5,1c-3,9,25,10-,2-2f,23,6,3,8-2,5-5,1b-45,27-9,2a-,2-3,5b-4,45-4,53-5,8,40,2,5-,8,2,5-,28,2,5-,20,2,5-,8,2,5-,8,8,18,20,2,5-,8,28,14-5,1d-22,56-b,277-8,1e-2,52-e,e,8-a,18-8,15-b,e,4,3-b,5e-2,b-15,10,b-5,59-7,2b-555,9d-3,5b-5,17-,7-,27-,7-,9,2,2,2,20-,36,10,f-,7,14-,4,a,54-3,2-6,6-5,9-,1c-10,13-1d,1c-14,3c-,10-6,32-b,240-30,28-18,c-14,a0,115-,3,66-,b-76,5,5-,1d,24,2,5-2,2,8-,35-2,19,f-10,1d-3,311-37f,1b,5a-b,d7-19,d-3,41,57-,68-4,29-3,5f,29-37,2e-2,25-c,2c-2,4e-3,30,78-3,64-,20,19b7-49,51a7-59,48e-2,38-738,2ba5-5b,222f-,3c-94,8-b,6-4,1b,6,2,3,3,6d-20,16e-f,41-,37-7,2e-2,11-f,5-b,18-,b,14,5-3,6,88-,2,bf-2,7-,7-,7-,4-2,8,8-9,8-2ff,20,5-b,1c-b4,27-,27-cbb1,f7-9,28-2,b5-221,56,48,3-,2-,3-,5,d,2,5,3,42,5-,9,8,1d,5,6,2-2,8,153-3,123-3,33-27fd,a6da-5128,21f-5df,3-fffd,3-fffd,3-fffd,3-fffd,3-fffd,3-fffd,3-fffd,3-fffd,3-fffd,3-fffd,3-fffd,3,2-1d,61-ff7d"),"ad,34f,1806,180b,180c,180d,200b,200c,200d,2060,feff".split(",").map(r=>parseInt(r,16)),lu("b5:3bc,c3:ff,7:73,2:253,5:254,3:256,1:257,5:259,1:25b,3:260,1:263,2:269,1:268,5:26f,1:272,2:275,7:280,3:283,5:288,3:28a,1:28b,5:292,3f:195,1:1bf,29:19e,125:3b9,8b:3b2,1:3b8,1:3c5,3:3c6,1:3c0,1a:3ba,1:3c1,1:3c3,2:3b8,1:3b5,1bc9:3b9,1c:1f76,1:1f77,f:1f7a,1:1f7b,d:1f78,1:1f79,1:1f7c,1:1f7d,107:63,5:25b,4:68,1:68,1:68,3:69,1:69,1:6c,3:6e,4:70,1:71,1:72,1:72,1:72,7:7a,2:3c9,2:7a,2:6b,1:e5,1:62,1:63,3:65,1:66,2:6d,b:3b3,1:3c0,6:64,1b574:3b8,1a:3c3,20:3b8,1a:3c3,20:3b8,1a:3c3,20:3b8,1a:3c3,20:3b8,1a:3c3"),lu("179:1,2:1,2:1,5:1,2:1,a:4f,a:1,8:1,2:1,2:1,3:1,5:1,3:1,4:1,2:1,3:1,4:1,8:2,1:1,2:2,1:1,2:2,27:2,195:26,2:25,1:25,1:25,2:40,2:3f,1:3f,33:1,11:-6,1:-9,1ac7:-3a,6d:-8,1:-8,1:-8,1:-8,1:-8,1:-8,1:-8,1:-8,9:-8,1:-8,1:-8,1:-8,1:-8,1:-8,b:-8,1:-8,1:-8,1:-8,1:-8,1:-8,1:-8,1:-8,9:-8,1:-8,1:-8,1:-8,1:-8,1:-8,1:-8,1:-8,9:-8,1:-8,1:-8,1:-8,1:-8,1:-8,c:-8,2:-8,2:-8,2:-8,9:-8,1:-8,1:-8,1:-8,1:-8,1:-8,1:-8,1:-8,49:-8,1:-8,1:-4a,1:-4a,d:-56,1:-56,1:-56,1:-56,d:-8,1:-8,f:-8,1:-8,3:-7"),lu("df:00730073,51:00690307,19:02BC006E,a7:006A030C,18a:002003B9,16:03B903080301,20:03C503080301,1d7:05650582,190f:00680331,1:00740308,1:0077030A,1:0079030A,1:006102BE,b6:03C50313,2:03C503130300,2:03C503130301,2:03C503130342,2a:1F0003B9,1:1F0103B9,1:1F0203B9,1:1F0303B9,1:1F0403B9,1:1F0503B9,1:1F0603B9,1:1F0703B9,1:1F0003B9,1:1F0103B9,1:1F0203B9,1:1F0303B9,1:1F0403B9,1:1F0503B9,1:1F0603B9,1:1F0703B9,1:1F2003B9,1:1F2103B9,1:1F2203B9,1:1F2303B9,1:1F2403B9,1:1F2503B9,1:1F2603B9,1:1F2703B9,1:1F2003B9,1:1F2103B9,1:1F2203B9,1:1F2303B9,1:1F2403B9,1:1F2503B9,1:1F2603B9,1:1F2703B9,1:1F6003B9,1:1F6103B9,1:1F6203B9,1:1F6303B9,1:1F6403B9,1:1F6503B9,1:1F6603B9,1:1F6703B9,1:1F6003B9,1:1F6103B9,1:1F6203B9,1:1F6303B9,1:1F6403B9,1:1F6503B9,1:1F6603B9,1:1F6703B9,3:1F7003B9,1:03B103B9,1:03AC03B9,2:03B10342,1:03B1034203B9,5:03B103B9,6:1F7403B9,1:03B703B9,1:03AE03B9,2:03B70342,1:03B7034203B9,5:03B703B9,6:03B903080300,1:03B903080301,3:03B90342,1:03B903080342,b:03C503080300,1:03C503080301,1:03C10313,2:03C50342,1:03C503080342,b:1F7C03B9,1:03C903B9,1:03CE03B9,2:03C90342,1:03C9034203B9,5:03C903B9,ac:00720073,5b:00B00063,6:00B00066,d:006E006F,a:0073006D,1:00740065006C,1:0074006D,124f:006800700061,2:00610075,2:006F0076,b:00700061,1:006E0061,1:03BC0061,1:006D0061,1:006B0061,1:006B0062,1:006D0062,1:00670062,3:00700066,1:006E0066,1:03BC0066,4:0068007A,1:006B0068007A,1:006D0068007A,1:00670068007A,1:00740068007A,15:00700061,1:006B00700061,1:006D00700061,1:006700700061,8:00700076,1:006E0076,1:03BC0076,1:006D0076,1:006B0076,1:006D0076,1:00700077,1:006E0077,1:03BC0077,1:006D0077,1:006B0077,1:006D0077,1:006B03C9,1:006D03C9,2:00620071,3:00632215006B0067,1:0063006F002E,1:00640062,1:00670079,2:00680070,2:006B006B,1:006B006D,9:00700068,2:00700070006D,1:00700072,2:00730076,1:00770062,c723:00660066,1:00660069,1:0066006C,1:006600660069,1:00660066006C,1:00730074,1:00730074,d:05740576,1:05740565,1:0574056B,1:057E0576,1:0574056D",f8),Up("80-20,2a0-,39c,32,f71,18e,7f2-f,19-7,30-4,7-5,f81-b,5,a800-20ff,4d1-1f,110,fa-6,d174-7,2e84-,ffff-,ffff-,ffff-,ffff-,ffff-,ffff-,ffff-,ffff-,ffff-,ffff-,ffff-,ffff-,2,1f-5f,ff7f-20001");function h8(r){r=atob(r);const e=[];for(let t=0;t<r.length;t++)e.push(r.charCodeAt(t));return tr(e)}function Og(r,e){e==null&&(e=1);const t=[],i=t.forEach,s=function(a,f){i.call(a,function(u){f>0&&Array.isArray(u)?s(u,f-1):t.push(u)})};return s(r,e),t}function u8(r){const e={};for(let t=0;t<r.length;t++){const i=r[t];e[i[0]]=i[1]}return e}function l8(r){let e=0;function t(){return r[e++]<<8|r[e++]}let i=t(),s=1,a=[0,1];for(let B=1;B<i;B++)a.push(s+=t());let f=t(),u=e;e+=f;let d=0,l=0;function w(){return d==0&&(l=l<<8|r[e++],d=8),l>>--d&1}const x=31,C=Math.pow(2,x),R=C>>>1,N=R>>1,T=C-1;let U=0;for(let B=0;B<x;B++)U=U<<1|w();let Q=[],F=0,V=C;for(;;){let B=Math.floor(((U-F+1)*s-1)/V),H=0,E=i;for(;E-H>1;){let fe=H+E>>>1;B<a[fe]?E=fe:H=fe}if(H==0)break;Q.push(H);let $=F+Math.floor(V*a[H]/s),ne=F+Math.floor(V*a[H+1]/s)-1;for(;!(($^ne)&R);)U=U<<1&T|w(),$=$<<1&T,ne=ne<<1&T|1;for(;$&~ne&N;)U=U&R|U<<1&T>>>1|w(),$=$<<1^R,ne=(ne^R)<<1|R|1;F=$,V=1+ne-$}let D=i-4;return Q.map(B=>{switch(B-D){case 3:return D+65792+(r[u++]<<16|r[u++]<<8|r[u++]);case 2:return D+256+(r[u++]<<8|r[u++]);case 1:return D+r[u++];default:return B-1}})}function d8(r){let e=0;return()=>r[e++]}function p8(r){return d8(l8(r))}function g8(r){return r&1?~r>>1:r>>1}function v8(r,e){let t=Array(r);for(let i=0;i<r;i++)t[i]=1+e();return t}function zp(r,e){let t=Array(r);for(let i=0,s=-1;i<r;i++)t[i]=s+=1+e();return t}function b8(r,e){let t=Array(r);for(let i=0,s=0;i<r;i++)t[i]=s+=g8(e());return t}function Yc(r,e){let t=zp(r(),r),i=r(),s=zp(i,r),a=v8(i,r);for(let f=0;f<i;f++)for(let u=0;u<a[f];u++)t.push(s[f]+u);return e?t.map(f=>e[f]):t}function m8(r){let e=[];for(;;){let t=r();if(t==0)break;e.push(w8(t,r))}for(;;){let t=r()-1;if(t<0)break;e.push(_8(t,r))}return u8(Og(e))}function y8(r){let e=[];for(;;){let t=r();if(t==0)break;e.push(t)}return e}function qg(r,e,t){let i=Array(r).fill(void 0).map(()=>[]);for(let s=0;s<e;s++)b8(r,t).forEach((a,f)=>i[f].push(a));return i}function w8(r,e){let t=1+e(),i=e(),s=y8(e),a=qg(s.length,1+r,e);return Og(a.map((f,u)=>{const d=f[0],l=f.slice(1);return Array(s[u]).fill(void 0).map((w,x)=>{let C=x*i;return[d+x*t,l.map(R=>R+C)]})}))}function _8(r,e){let t=1+e();return qg(t,1+r,e).map(i=>[i[0],i.slice(1)])}function A8(r){let e=Yc(r).sort((i,s)=>i-s);return t();function t(){let i=[];for(;;){let l=Yc(r,e);if(l.length==0)break;i.push({set:new Set(l),node:t()})}i.sort((l,w)=>w.set.size-l.set.size);let s=r(),a=s%3;s=s/3|0;let f=!!(s&1);s>>=1;let u=s==1,d=s==2;return{branches:i,valid:a,fe0f:f,save:u,check:d}}}function x8(){return p8(h8("AEQF2AO2DEsA2wIrAGsBRABxAN8AZwCcAEwAqgA0AGwAUgByADcATAAVAFYAIQAyACEAKAAYAFgAGwAjABQAMAAmADIAFAAfABQAKwATACoADgAbAA8AHQAYABoAGQAxADgALAAoADwAEwA9ABMAGgARAA4ADwAWABMAFgAIAA8AHgQXBYMA5BHJAS8JtAYoAe4AExozi0UAH21tAaMnBT8CrnIyhrMDhRgDygIBUAEHcoFHUPe8AXBjAewCjgDQR8IICIcEcQLwATXCDgzvHwBmBoHNAqsBdBcUAykgDhAMShskMgo8AY8jqAQfAUAfHw8BDw87MioGlCIPBwZCa4ELatMAAMspJVgsDl8AIhckSg8XAHdvTwBcIQEiDT4OPhUqbyECAEoAS34Aej8Ybx83JgT/Xw8gHxZ/7w8RICxPHA9vBw+Pfw8PHwAPFv+fAsAvCc8vEr8ivwD/EQ8Bol8OEBa/A78hrwAPCU8vESNvvwWfHwNfAVoDHr+ZAAED34YaAdJPAK7PLwSEgDLHAGo1Pz8Pvx9fUwMrpb8O/58VTzAPIBoXIyQJNF8hpwIVAT8YGAUADDNBaX3RAMomJCg9EhUeA29MABsZBTMNJipjOhc19gcIDR8bBwQHEggCWi6DIgLuAQYA+BAFCha3A5XiAEsqM7UFFgFLhAMjFTMYE1Klnw74nRVBG/ASCm0BYRN/BrsU3VoWy+S0vV8LQx+vN8gF2AC2AK5EAWwApgYDKmAAroQ0NDQ0AT+OCg7wAAIHRAbpNgVcBV0APTA5BfbPFgMLzcYL/QqqA82eBALKCjQCjqYCht0/k2+OAsXQAoP3ASTKDgDw6ACKAUYCMpIKJpRaAE4A5womABzZvs0REEKiACIQAd5QdAECAj4Ywg/wGqY2AVgAYADYvAoCGAEubA0gvAY2ALAAbpbvqpyEAGAEpgQAJgAG7gAgAEACmghUFwCqAMpAINQIwC4DthRAAPcycKgApoIdABwBfCisABoATwBqASIAvhnSBP8aH/ECeAKXAq40NjgDBTwFYQU6AXs3oABgAD4XNgmcCY1eCl5tIFZeUqGgyoNHABgAEQAaABNwWQAmABMATPMa3T34ADldyprmM1M2XociUQgLzvwAXT3xABgAEQAaABNwIGFAnADD8AAgAD4BBJWzaCcIAIEBFMAWwKoAAdq9BWAF5wLQpALEtQAKUSGkahR4GnJM+gsAwCgeFAiUAECQ0BQuL8AAIAAAADKeIheclvFqQAAETr4iAMxIARMgAMIoHhQIAn0E0pDQFC4HhznoAAAAIAI2C0/4lvFqQAAETgBJJwYCAy4ABgYAFAA8MBKYEH4eRhTkAjYeFcgACAYAeABsOqyQ5gRwDayqugEgaIIAtgoACgDmEABmBAWGme5OBJJA2m4cDeoAmITWAXwrMgOgAGwBCh6CBXYF1Tzg1wKAAFdiuABRAFwAXQBsAG8AdgBrAHYAbwCEAHEwfxQBVE5TEQADVFhTBwBDANILAqcCzgLTApQCrQL6vAAMAL8APLhNBKkE6glGKTAU4Dr4N2EYEwBCkABKk8rHAbYBmwIoAiU4Ajf/Aq4CowCAANIChzgaNBsCsTgeODcFXrgClQKdAqQBiQGYAqsCsjTsNHsfNPA0ixsAWTWiOAMFPDQSNCk2BDZHNow2TTZUNhk28Jk9VzI3QkEoAoICoQKwAqcAQAAxBV4FXbS9BW47YkIXP1ciUqs05DS/FwABUwJW11e6nHuYZmSh/RAYA8oMKvZ8KASoUAJYWAJ6ILAsAZSoqjpgA0ocBIhmDgDWAAawRDQoAAcuAj5iAHABZiR2AIgiHgCaAU68ACxuHAG0ygM8MiZIAlgBdF4GagJqAPZOHAMuBgoATkYAsABiAHgAMLoGDPj0HpKEBAAOJgAuALggTAHWAeAMEDbd20Uege0ADwAWADkAQgA9OHd+2MUQZBBhBgNNDkxxPxUQArEPqwvqERoM1irQ090ANK4H8ANYB/ADWANYB/AH8ANYB/ADWANYA1gDWBwP8B/YxRBkD00EcgWTBZAE2wiIJk4RhgctCNdUEnQjHEwDSgEBIypJITuYMxAlR0wRTQgIATZHbKx9PQNMMbBU+pCnA9AyVDlxBgMedhKlAC8PeCE1uk6DekxxpQpQT7NX9wBFBgASqwAS5gBJDSgAUCwGPQBI4zTYABNGAE2bAE3KAExdGABKaAbgAFBXAFCOAFBJABI2SWdObALDOq0//QomCZhvwHdTBkIQHCemEPgMNAG2ATwN7kvZBPIGPATKH34ZGg/OlZ0Ipi3eDO4m5C6igFsj9iqEBe5L9TzeC05RaQ9aC2YJ5DpkgU8DIgEOIowK3g06CG4Q9ArKbA3mEUYHOgPWSZsApgcCCxIdNhW2JhFirQsKOXgG/Br3C5AmsBMqev0F1BoiBk4BKhsAANAu6IWxWjJcHU9gBgQLJiPIFKlQIQ0mQLh4SRocBxYlqgKSQ3FKiFE3HpQh9zw+DWcuFFF9B/Y8BhlQC4I8n0asRQ8R0z6OPUkiSkwtBDaALDAnjAnQD4YMunxzAVoJIgmyDHITMhEYN8YIOgcaLpclJxYIIkaWYJsE+KAD9BPSAwwFQAlCBxQDthwuEy8VKgUOgSXYAvQ21i60ApBWgQEYBcwPJh/gEFFH4Q7qCJwCZgOEJewALhUiABginAhEZABgj9lTBi7MCMhqbSN1A2gU6GIRdAeSDlgHqBw0FcAc4nDJXgyGCSiksAlcAXYJmgFgBOQICjVcjKEgQmdUi1kYnCBiQUBd/QIyDGYVoES+h3kCjA9sEhwBNgF0BzoNAgJ4Ee4RbBCWCOyGBTW2M/k6JgRQIYQgEgooA1BszwsoJvoM+WoBpBJjAw00PnfvZ6xgtyUX/gcaMsZBYSHyC5NPzgydGsIYQ1QvGeUHwAP0GvQn60FYBgADpAQUOk4z7wS+C2oIjAlAAEoOpBgH2BhrCnKM0QEyjAG4mgNYkoQCcJAGOAcMAGgMiAV65gAeAqgIpAAGANADWAA6Aq4HngAaAIZCAT4DKDABIuYCkAOUCDLMAZYwAfQqBBzEDBYA+DhuSwLDsgKAa2ajBd5ZAo8CSjYBTiYEBk9IUgOwcuIA3ABMBhTgSAEWrEvMG+REAeBwLADIAPwABjYHBkIBzgH0bgC4AWALMgmjtLYBTuoqAIQAFmwB2AKKAN4ANgCA8gFUAE4FWvoF1AJQSgESMhksWGIBvAMgATQBDgB6BsyOpsoIIARuB9QCEBwV4gLvLwe2AgMi4BPOQsYCvd9WADIXUu5eZwqoCqdeaAC0YTQHMnM9UQAPH6k+yAdy/BZIiQImSwBQ5gBQQzSaNTFWSTYBpwGqKQK38AFtqwBI/wK37gK3rQK3sAK6280C0gK33AK3zxAAUEIAUD9SklKDArekArw5AEQAzAHCO147WTteO1k7XjtZO147WTteO1kDmChYI03AVU0oJqkKbV9GYewMpw3VRMk6ShPcYFJgMxPJLbgUwhXPJVcZPhq9JwYl5VUKDwUt1GYxCC00dhe9AEApaYNCY4ceMQpMHOhTklT5LRwAskujM7ANrRsWREEFSHXuYisWDwojAmSCAmJDXE6wXDchAqH4AmiZAmYKAp+FOBwMAmY8AmYnBG8EgAN/FAN+kzkHOXgYOYM6JCQCbB4CMjc4CwJtyAJtr/CLADRoRiwBaADfAOIASwYHmQyOAP8MwwAOtgJ3MAJ2o0ACeUxEAni7Hl3cRa9G9AJ8QAJ6yQJ9CgJ88UgBSH5kJQAsFklZSlwWGErNAtECAtDNSygDiFADh+dExpEzAvKiXQQDA69Lz0wuJgTQTU1NsAKLQAKK2cIcCB5EaAa4Ao44Ao5dQZiCAo7aAo5deVG1UzYLUtVUhgKT/AKTDQDqAB1VH1WwVdEHLBwplocy4nhnRTw6ApegAu+zWCKpAFomApaQApZ9nQCqWa1aCoJOADwClrYClk9cRVzSApnMApllXMtdCBoCnJw5wzqeApwXAp+cAp65iwAeEDIrEAKd8gKekwC2PmE1YfACntQCoG8BqgKeoCACnk+mY8lkKCYsAiewAiZ/AqD8AqBN2AKmMAKlzwKoAAB+AqfzaH1osgAESmodatICrOQCrK8CrWgCrQMCVx4CVd0CseLYAx9PbJgCsr4OArLpGGzhbWRtSWADJc4Ctl08QG6RAylGArhfArlIFgK5K3hwN3DiAr0aAy2zAzISAr6JcgMDM3ICvhtzI3NQAsPMAsMFc4N0TDZGdOEDPKgDPJsDPcACxX0CxkgCxhGKAshqUgLIRQLJUALJLwJkngLd03h6YniveSZL0QMYpGcDAmH1GfSVJXsMXpNevBICz2wCz20wTFTT9BSgAMeuAs90ASrrA04TfkwGAtwoAtuLAtJQA1JdA1NgAQIDVY2AikABzBfuYUZ2AILPg44C2sgC2d+EEYRKpz0DhqYAMANkD4ZyWvoAVgLfZgLeuXR4AuIw7RUB8zEoAfScAfLTiALr9ALpcXoAAur6AurlAPpIAboC7ooC652Wq5cEAu5AA4XhmHpw4XGiAvMEAGoDjheZlAL3FAORbwOSiAL3mQL52gL4Z5odmqy8OJsfA52EAv77ARwAOp8dn7QDBY4DpmsDptoA0sYDBmuhiaIGCgMMSgFgASACtgNGAJwEgLpoBgC8BGzAEowcggCEDC6kdjoAJAM0C5IKRoABZCgiAIzw3AYBLACkfng9ogigkgNmWAN6AEQCvrkEVqTGAwCsBRbAA+4iQkMCHR072jI2PTbUNsk2RjY5NvA23TZKNiU3EDcZN5I+RTxDRTBCJkK5VBYKFhZfwQCWygU3AJBRHpu+OytgNxa61A40GMsYjsn7BVwFXQVcBV0FaAVdBVwFXQVcBV0FXAVdBVwFXUsaCNyKAK4AAQUHBwKU7oICoW1e7jAEzgPxA+YDwgCkBFDAwADABKzAAOxFLhitA1UFTDeyPkM+bj51QkRCuwTQWWQ8X+0AWBYzsACNA8xwzAGm7EZ/QisoCTAbLDs6fnLfb8H2GccsbgFw13M1HAVkBW/Jxsm9CNRO8E8FDD0FBQw9FkcClOYCoMFegpDfADgcMiA2AJQACB8AsigKAIzIEAJKeBIApY5yPZQIAKQiHb4fvj5BKSRPQrZCOz0oXyxgOywfKAnGbgMClQaCAkILXgdeCD9IIGUgQj5fPoY+dT52Ao5CM0dAX9BTVG9SDzFwWTQAbxBzJF/lOEIQQglCCkKJIAls5AcClQICoKPMODEFxhi6KSAbiyfIRrMjtCgdWCAkPlFBIitCsEJRzAbMAV/OEyQzDg0OAQQEJ36i328/Mk9AybDJsQlq3tDRApUKAkFzXf1d/j9uALYP6hCoFgCTGD8kPsFKQiobrm0+zj0KSD8kPnVCRBwMDyJRTHFgMTJa5rwXQiQ2YfI/JD7BMEJEHGINTw4TOFlIRzwJO0icMQpyPyQ+wzJCRBv6DVgnKB01NgUKj2bwYzMqCoBkznBgEF+zYDIocwRIX+NgHj4HICNfh2C4CwdwFWpTG/lgUhYGAwRfv2Ts8mAaXzVgml/XYIJfuWC4HI1gUF9pYJZgMR6ilQHMAOwLAlDRefC0in4AXAEJA6PjCwc0IamOANMMCAECRQDFNRTZBgd+CwQlRA+r6+gLBDEFBnwUBXgKATIArwAGRAAHA3cDdAN2A3kDdwN9A3oDdQN7A30DfAN4A3oDfQAYEAAlAtYASwMAUAFsAHcKAHcAmgB3AHUAdQB2AHVu8UgAygDAAHcAdQB1AHYAdQALCgB3AAsAmgB3AAsCOwB3AAtu8UgAygDAAHgKAJoAdwB3AHUAdQB2AHUAeAB1AHUAdgB1bvFIAMoAwAALCgCaAHcACwB3AAsCOwB3AAtu8UgAygDAAH4ACwGgALcBpwC6AahdAu0COwLtbvFIAMoAwAALCgCaAu0ACwLtAAsCOwLtAAtu8UgAygDAA24ACwNvAAu0VsQAAzsAABCkjUIpAAsAUIusOggWcgMeBxVsGwL67U/2HlzmWOEeOgALASvuAAseAfpKUpnpGgYJDCIZM6YyARUE9ThqAD5iXQgnAJYJPnOzw0ZAEZxEKsIAkA4DhAHnTAIDxxUDK0lxCQlPYgIvIQVYJQBVqE1GakUAKGYiDToSBA1EtAYAXQJYAIF8GgMHRyAAIAjOe9YncekRAA0KACUrjwE7Ayc6AAYWAqaiKG4McEcqANoN3+Mg9TwCBhIkuCny+JwUQ29L008JluRxu3K+oAdqiHOqFH0AG5SUIfUJ5SxCGfxdipRzqTmT4V5Zb+r1Uo4Vm+NqSSEl2mNvR2JhIa8SpYO6ntdwFXHCWTCK8f2+Hxo7uiG3drDycAuKIMP5bhi06ACnqArH1rz4Rqg//lm6SgJGEVbF9xJHISaR6HxqxSnkw6shDnelHKNEfGUXSJRJ1GcsmtJw25xrZMDK9gXSm1/YMkdX4/6NKYOdtk/NQ3/NnDASjTc3fPjIjW/5sVfVObX2oTDWkr1dF9f3kxBsD3/3aQO8hPfRz+e0uEiJqt1161griu7gz8hDDwtpy+F+BWtefnKHZPAxcZoWbnznhJpy0e842j36bcNzGnIEusgGX0a8ZxsnjcSsPDZ09yZ36fCQbriHeQ72JRMILNl6ePPf2HWoVwgWAm1fb3V2sAY0+B6rAXqSwPBgseVmoqsBTSrm91+XasMYYySI8eeRxH3ZvHkMz3BQ5aJ3iUVbYPNM3/7emRtjlsMgv/9VyTsyt/mK+8fgWeT6SoFaclXqn42dAIsvAarF5vNNWHzKSkKQ/8Hfk5ZWK7r9yliOsooyBjRhfkHP4Q2DkWXQi6FG/9r/IwbmkV5T7JSopHKn1pJwm9tb5Ot0oyN1Z2mPpKXHTxx2nlK08fKk1hEYA8WgVVWL5lgx0iTv+KdojJeU23ZDjmiubXOxVXJKKi2Wjuh2HLZOFLiSC7Tls5SMh4f+Pj6xUSrNjFqLGehRNB8lC0QSLNmkJJx/wSG3MnjE9T1CkPwJI0wH2lfzwETIiVqUxg0dfu5q39Gt+hwdcxkhhNvQ4TyrBceof3Mhs/IxFci1HmHr4FMZgXEEczPiGCx0HRwzAqDq2j9AVm1kwN0mRVLWLylgtoPNapF5cY4Y1wJh/e0BBwZj44YgZrDNqvD/9Hv7GFYdUQeDJuQ3EWI4HaKqavU1XjC/n41kT4L79kqGq0kLhdTZvgP3TA3fS0ozVz+5piZsoOtIvBUFoMKbNcmBL6YxxaUAusHB38XrS8dQMnQwJfUUkpRoGr5AUeWicvBTzyK9g77+yCkf5PAysL7r/JjcZgrbvRpMW9iyaxZvKO6ceZN2EwIxKwVFPuvFuiEPGCoagbMo+SpydLrXqBzNCDGFCrO/rkcwa2xhokQZ5CdZ0AsU3JfSqJ6n5I14YA+P/uAgfhPU84Tlw7cEFfp7AEE8ey4sP12PTt4Cods1GRgDOB5xvyiR5m+Bx8O5nBCNctU8BevfV5A08x6RHd5jcwPTMDSZJOedIZ1cGQ704lxbAzqZOP05ZxaOghzSdvFBHYqomATARyAADK4elP8Ly3IrUZKfWh23Xy20uBUmLS4Pfagu9+oyVa2iPgqRP3F2CTUsvJ7+RYnN8fFZbU/HVvxvcFFDKkiTqV5UBZ3Gz54JAKByi9hkKMZJvuGgcSYXFmw08UyoQyVdfTD1/dMkCHXcTGAKeROgArsvmRrQTLUOXioOHGK2QkjHuoYFgXciZoTJd6Fs5q1QX1G+p/e26hYsEf7QZD1nnIyl/SFkNtYYmmBhpBrxl9WbY0YpHWRuw2Ll/tj9mD8P4snVzJl4F9J+1arVeTb9E5r2ILH04qStjxQNwn3m4YNqxmaNbLAqW2TN6LidwuJRqS+NXbtqxoeDXpxeGWmxzSkWxjkyCkX4NQRme6q5SAcC+M7+9ETfA/EwrzQajKakCwYyeunP6ZFlxU2oMEn1Pz31zeStW74G406ZJFCl1wAXIoUKkWotYEpOuXB1uVNxJ63dpJEqfxBeptwIHNrPz8BllZoIcBoXwgfJ+8VAUnVPvRvexnw0Ma/WiGYuJO5y8QTvEYBigFmhUxY5RqzE8OcywN/8m4UYrlaniJO75XQ6KSo9+tWHlu+hMi0UVdiKQp7NelnoZUzNaIyBPVeOwK6GNp+FfHuPOoyhaWuNvTYFkvxscMQWDh+zeFCFkgwbXftiV23ywJ4+uwRqmg9k3KzwIQpzppt8DBBOMbrqwQM5Gb05sEwdKzMiAqOloaA/lr0KA+1pr0/+HiWoiIjHA/wir2nIuS3PeU/ji3O6ZwoxcR1SZ9FhtLC5S0FIzFhbBWcGVP/KpxOPSiUoAdWUpqKH++6Scz507iCcxYI6rdMBICPJZea7OcmeFw5mObJSiqpjg2UoWNIs+cFhyDSt6geV5qgi3FunmwwDoGSMgerFOZGX1m0dMCYo5XOruxO063dwENK9DbnVM9wYFREzh4vyU1WYYJ/LRRp6oxgjqP/X5a8/4Af6p6NWkQferzBmXme0zY/4nwMJm/wd1tIqSwGz+E3xPEAOoZlJit3XddD7/BT1pllzOx+8bmQtANQ/S6fZexc6qi3W+Q2xcmXTUhuS5mpHQRvcxZUN0S5+PL9lXWUAaRZhEH8hTdAcuNMMCuVNKTEGtSUKNi3O6KhSaTzck8csZ2vWRZ+d7mW8c4IKwXIYd25S/zIftPkwPzufjEvOHWVD1m+FjpDVUTV0DGDuHj6QnaEwLu/dEgdLQOg9E1Sro9XHJ8ykLAwtPu+pxqKDuFexqON1sKQm7rwbE1E68UCfA/erovrTCG+DBSNg0l4goDQvZN6uNlbyLpcZAwj2UclycvLpIZMgv4yRlpb3YuMftozorbcGVHt/VeDV3+Fdf1TP0iuaCsPi2G4XeGhsyF1ubVDxkoJhmniQ0/jSg/eYML9KLfnCFgISWkp91eauR3IQvED0nAPXK+6hPCYs+n3+hCZbiskmVMG2da+0EsZPonUeIY8EbfusQXjsK/eFDaosbPjEfQS0RKG7yj5GG69M7MeO1HmiUYocgygJHL6M1qzUDDwUSmr99V7Sdr2F3JjQAJY+F0yH33Iv3+C9M38eML7gTgmNu/r2bUMiPvpYbZ6v1/IaESirBHNa7mPKn4dEmYg7v/+HQgPN1G79jBQ1+soydfDC2r+h2Bl/KIc5KjMK7OH6nb1jLsNf0EHVe2KBiE51ox636uyG6Lho0t3J34L5QY/ilE3mikaF4HKXG1mG1rCevT1Vv6GavltxoQe/bMrpZvRggnBxSEPEeEzkEdOxTnPXHVjUYdw8JYvjB/o7Eegc3Ma+NUxLLnsK0kJlinPmUHzHGtrk5+CAbVzFOBqpyy3QVUnzTDfC/0XD94/okH+OB+i7g9lolhWIjSnfIb+Eq43ZXOWmwvjyV/qqD+t0e+7mTEM74qP/Ozt8nmC7mRpyu63OB4KnUzFc074SqoyPUAgM+/TJGFo6T44EHnQU4X4z6qannVqgw/U7zCpwcmXV1AubIrvOmkKHazJAR55ePjp5tLBsN8vAqs3NAHdcEHOR2xQ0lsNAFzSUuxFQCFYvXLZJdOj9p4fNq6p0HBGUik2YzaI4xySy91KzhQ0+q1hjxvImRwPRf76tChlRkhRCi74NXZ9qUNeIwP+s5p+3m5nwPdNOHgSLD79n7O9m1n1uDHiMntq4nkYwV5OZ1ENbXxFd4PgrlvavZsyUO4MqYlqqn1O8W/I1dEZq5dXhrbETLaZIbC2Kj/Aa/QM+fqUOHdf0tXAQ1huZ3cmWECWSXy/43j35+Mvq9xws7JKseriZ1pEWKc8qlzNrGPUGcVgOa9cPJYIJsGnJTAUsEcDOEVULO5x0rXBijc1lgXEzQQKhROf8zIV82w8eswc78YX11KYLWQRcgHNJElBxfXr72lS2RBSl07qTKorO2uUDZr3sFhYsvnhLZn0A94KRzJ/7DEGIAhW5ZWFpL8gEwu1aLA9MuWZzNwl8Oze9Y+bX+v9gywRVnoB5I/8kXTXU3141yRLYrIOOz6SOnyHNy4SieqzkBXharjfjqq1q6tklaEbA8Qfm2DaIPs7OTq/nvJBjKfO2H9bH2cCMh1+5gspfycu8f/cuuRmtDjyqZ7uCIMyjdV3a+p3fqmXsRx4C8lujezIFHnQiVTXLXuI1XrwN3+siYYj2HHTvESUx8DlOTXpak9qFRK+L3mgJ1WsD7F4cu1aJoFoYQnu+wGDMOjJM3kiBQWHCcvhJ/HRdxodOQp45YZaOTA22Nb4XKCVxqkbwMYFhzYQYIAnCW8FW14uf98jhUG2zrKhQQ0q0CEq0t5nXyvUyvR8DvD69LU+g3i+HFWQMQ8PqZuHD+sNKAV0+M6EJC0szq7rEr7B5bQ8BcNHzvDMc9eqB5ZCQdTf80Obn4uzjwpYU7SISdtV0QGa9D3Wrh2BDQtpBKxaNFV+/Cy2P/Sv+8s7Ud0Fd74X4+o/TNztWgETUapy+majNQ68Lq3ee0ZO48VEbTZYiH1Co4OlfWef82RWeyUXo7woM03PyapGfikTnQinoNq5z5veLpeMV3HCAMTaZmA1oGLAn7XS3XYsz+XK7VMQsc4XKrmDXOLU/pSXVNUq8dIqTba///3x6LiLS6xs1xuCAYSfcQ3+rQgmu7uvf3THKt5Ooo97TqcbRqxx7EASizaQCBQllG/rYxVapMLgtLbZS64w1MDBMXX+PQpBKNwqUKOf2DDRDUXQf9EhOS0Qj4nTmlA8dzSLz/G1d+Ud8MTy/6ghhdiLpeerGY/UlDOfiuqFsMUU5/UYlP+BAmgRLuNpvrUaLlVkrqDievNVEAwF+4CoM1MZTmjxjJMsKJq+u8Zd7tNCUFy6LiyYXRJQ4VyvEQFFaCGKsxIwQkk7EzZ6LTJq2hUuPhvAW+gQnSG6J+MszC+7QCRHcnqDdyNRJ6T9xyS87A6MDutbzKGvGktpbXqtzWtXb9HsfK2cBMomjN9a4y+TaJLnXxAeX/HWzmf4cR4vALt/P4w4qgKY04ml4ZdLOinFYS6cup3G/1ie4+t1eOnpBNlqGqs75ilzkT4+DsZQxNvaSKJ//6zIbbk/M7LOhFmRc/1R+kBtz7JFGdZm/COotIdvQoXpTqP/1uqEUmCb/QWoGLMwO5ANcHzxdY48IGP5+J+zKOTBFZ4Pid+GTM+Wq12MV/H86xEJptBa6T+p3kgpwLedManBHC2GgNrFpoN2xnrMz9WFWX/8/ygSBkavq2Uv7FdCsLEYLu9LLIvAU0bNRDtzYl+/vXmjpIvuJFYjmI0im6QEYqnIeMsNjXG4vIutIGHijeAG/9EDBozKV5cldkHbLxHh25vT+ZEzbhXlqvpzKJwcEgfNwLAKFeo0/pvEE10XDB+EXRTXtSzJozQKFFAJhMxYkVaCW+E9AL7tMeU8acxidHqzb6lX4691UsDpy/LLRmT+epgW56+5Cw8tB4kMUv6s9lh3eRKbyGs+H/4mQMaYzPTf2OOdokEn+zzgvoD3FqNKk8QqGAXVsqcGdXrT62fSPkR2vROFi68A6se86UxRUk4cajfPyCC4G5wDhD+zNq4jodQ4u4n/m37Lr36n4LIAAsVr02dFi9AiwA81MYs2rm4eDlDNmdMRvEKRHfBwW5DdMNp0jPFZMeARqF/wL4XBfd+EMLBfMzpH5GH6NaW+1vrvMdg+VxDzatk3MXgO3ro3P/DpcC6+Mo4MySJhKJhSR01SGGGp5hPWmrrUgrv3lDnP+HhcI3nt3YqBoVAVTBAQT5iuhTg8nvPtd8ZeYj6w1x6RqGUBrSku7+N1+BaasZvjTk64RoIDlL8brpEcJx3OmY7jLoZsswdtmhfC/G21llXhITOwmvRDDeTTPbyASOa16cF5/A1fZAidJpqju3wYAy9avPR1ya6eNp9K8XYrrtuxlqi+bDKwlfrYdR0RRiKRVTLOH85+ZY7XSmzRpfZBJjaTa81VDcJHpZnZnSQLASGYW9l51ZV/h7eVzTi3Hv6hUsgc/51AqJRTkpbFVLXXszoBL8nBX0u/0jBLT8nH+fJePbrwURT58OY+UieRjd1vs04w0VG5VN2U6MoGZkQzKN/ptz0Q366dxoTGmj7i1NQGHi9GgnquXFYdrCfZBmeb7s0T6yrdlZH5cZuwHFyIJ/kAtGsTg0xH5taAAq44BAk1CPk9KVVbqQzrCUiFdF/6gtlPQ8bHHc1G1W92MXGZ5HEHftyLYs8mbD/9xYRUWkHmlM0zC2ilJlnNgV4bfALpQghxOUoZL7VTqtCHIaQSXm+YUMnpkXybnV+A6xlm2CVy8fn0Xlm2XRa0+zzOa21JWWmixfiPMSCZ7qA4rS93VN3pkpF1s5TonQjisHf7iU9ZGvUPOAKZcR1pbeVf/Ul7OhepGCaId9wOtqo7pJ7yLcBZ0pFkOF28y4zEI/kcUNmutBHaQpBdNM8vjCS6HZRokkeo88TBAjGyG7SR+6vUgTcyK9Imalj0kuxz0wmK+byQU11AiJFk/ya5dNduRClcnU64yGu/ieWSeOos1t3ep+RPIWQ2pyTYVbZltTbsb7NiwSi3AV+8KLWk7LxCnfZUetEM8ThnsSoGH38/nyAwFguJp8FjvlHtcWZuU4hPva0rHfr0UhOOJ/F6vS62FW7KzkmRll2HEc7oUq4fyi5T70Vl7YVIfsPHUCdHesf9Lk7WNVWO75JDkYbMI8TOW8JKVtLY9d6UJRITO8oKo0xS+o99Yy04iniGHAaGj88kEWgwv0OrHdY/nr76DOGNS59hXCGXzTKUvDl9iKpLSWYN1lxIeyywdNpTkhay74w2jFT6NS8qkjo5CxA1yfSYwp6AJIZNKIeEK5PJAW7ORgWgwp0VgzYpqovMrWxbu+DGZ6Lhie1RAqpzm8VUzKJOH3mCzWuTOLsN3VT/dv2eeYe9UjbR8YTBsLz7q60VN1sU51k+um1f8JxD5pPhbhSC8rRaB454tmh6YUWrJI3+GWY0qeWioj/tbkYITOkJaeuGt4JrJvHA+l0Gu7kY7XOaa05alMnRWVCXqFgLIwSY4uF59Ue5SU4QKuc/HamDxbr0x6csCetXGoP7Qn1Bk/J9DsynO/UD6iZ1Hyrz+jit0hDCwi/E9OjgKTbB3ZQKQ/0ZOvevfNHG0NK4Aj3Cp7NpRk07RT1i/S0EL93Ag8GRgKI9CfpajKyK6+Jj/PI1KO5/85VAwz2AwzP8FTBb075IxCXv6T9RVvWT2tUaqxDS92zrGUbWzUYk9mSs82pECH+fkqsDt93VW++4YsR/dHCYcQSYTO/KaBMDj9LSD/J/+z20Kq8XvZUAIHtm9hRPP3ItbuAu2Hm5lkPs92pd7kCxgRs0xOVBnZ13ccdA0aunrwv9SdqElJRC3g+oCu+nXyCgmXUs9yMjTMAIHfxZV+aPKcZeUBWt057Xo85Ks1Ir5gzEHCWqZEhrLZMuF11ziGtFQUds/EESajhagzcKsxamcSZxGth4UII+adPhQkUnx2WyN+4YWR+r3f8MnkyGFuR4zjzxJS8WsQYR5PTyRaD9ixa6Mh741nBHbzfjXHskGDq179xaRNrCIB1z1xRfWfjqw2pHc1zk9xlPpL8sQWAIuETZZhbnmL54rceXVNRvUiKrrqIkeogsl0XXb17ylNb0f4GA9Wd44vffEG8FSZGHEL2fbaTGRcSiCeA8PmA/f6Hz8HCS76fXUHwgwkzSwlI71ekZ7Fapmlk/KC+Hs8hUcw3N2LN5LhkVYyizYFl/uPeVP5lsoJHhhfWvvSWruCUW1ZcJOeuTbrDgywJ/qG07gZJplnTvLcYdNaH0KMYOYMGX+rB4NGPFmQsNaIwlWrfCezxre8zXBrsMT+edVLbLqN1BqB76JH4BvZTqUIMfGwPGEn+EnmTV86fPBaYbFL3DFEhjB45CewkXEAtJxk4/Ms2pPXnaRqdky0HOYdcUcE2zcXq4vaIvW2/v0nHFJH2XXe22ueDmq/18XGtELSq85j9X8q0tcNSSKJIX8FTuJF/Pf8j5PhqG2u+osvsLxYrvvfeVJL+4tkcXcr9JV7v0ERmj/X6fM3NC4j6dS1+9Umr2oPavqiAydTZPLMNRGY23LO9zAVDly7jD+70G5TPPLdhRIl4WxcYjLnM+SNcJ26FOrkrISUtPObIz5Zb3AG612krnpy15RMW+1cQjlnWFI6538qky9axd2oJmHIHP08KyP0ubGO+TQNOYuv2uh17yCIvR8VcStw7o1g0NM60sk+8Tq7YfIBJrtp53GkvzXH7OA0p8/n/u1satf/VJhtR1l8Wa6Gmaug7haSpaCaYQax6ta0mkutlb+eAOSG1aobM81D9A4iS1RRlzBBoVX6tU1S6WE2N9ORY6DfeLRC4l9Rvr5h95XDWB2mR1d4WFudpsgVYwiTwT31ljskD8ZyDOlm5DkGh9N/UB/0AI5Xvb8ZBmai2hQ4BWMqFwYnzxwB26YHSOv9WgY3JXnvoN+2R4rqGVh/LLDMtpFP+SpMGJNWvbIl5SOodbCczW2RKleksPoUeGEzrjtKHVdtZA+kfqO+rVx/iclCqwoopepvJpSTDjT+b9GWylGRF8EDbGlw6eUzmJM95Ovoz+kwLX3c2fTjFeYEsE7vUZm3mqdGJuKh2w9/QGSaqRHs99aScGOdDqkFcACoqdbBoQqqjamhH6Q9ng39JCg3lrGJwd50Qk9ovnqBTr8MME7Ps2wiVfygUmPoUBJJfJWX5Nda0nuncbFkA=="))}const Sc=x8();new Set(Yc(Sc)),new Set(Yc(Sc)),m8(Sc),A8(Sc);const E8=new Uint8Array(32);E8.fill(0);const S8=`Ethereum Signed Message:
`;function Tg(r){return typeof r=="string"&&(r=uu(r)),s0(W4([uu(S8),uu(String(r.length)),r]))}const M8="address/5.7.0",Ja=new Ar(M8);function kp(r){oi(r,20)||Ja.throwArgumentError("invalid address","address",r),r=r.toLowerCase();const e=r.substring(2).split(""),t=new Uint8Array(40);for(let s=0;s<40;s++)t[s]=e[s].charCodeAt(0);const i=tr(s0(t));for(let s=0;s<40;s+=2)i[s>>1]>>4>=8&&(e[s]=e[s].toUpperCase()),(i[s>>1]&15)>=8&&(e[s+1]=e[s+1].toUpperCase());return"0x"+e.join("")}const I8=9007199254740991;function P8(r){return Math.log10?Math.log10(r):Math.log(r)/Math.LN10}const o0={};for(let r=0;r<10;r++)o0[String(r)]=String(r);for(let r=0;r<26;r++)o0[String.fromCharCode(65+r)]=String(10+r);const $p=Math.floor(P8(I8));function R8(r){r=r.toUpperCase(),r=r.substring(4)+r.substring(0,2)+"00";let e=r.split("").map(i=>o0[i]).join("");for(;e.length>=$p;){let i=e.substring(0,$p);e=parseInt(i,10)%97+e.substring(i.length)}let t=String(98-parseInt(e,10)%97);for(;t.length<2;)t="0"+t;return t}function C8(r){let e=null;if(typeof r!="string"&&Ja.throwArgumentError("invalid address","address",r),r.match(/^(0x)?[0-9a-fA-F]{40}$/))r.substring(0,2)!=="0x"&&(r="0x"+r),e=kp(r),r.match(/([A-F].*[a-f])|([a-f].*[A-F])/)&&e!==r&&Ja.throwArgumentError("bad address checksum","address",r);else if(r.match(/^XE[0-9]{2}[0-9A-Za-z]{30,31}$/)){for(r.substring(2,4)!==R8(r)&&Ja.throwArgumentError("bad icap checksum","address",r),e=s8(r.substring(4));e.length<40;)e="0"+e;e=kp("0x"+e)}else Ja.throwArgumentError("invalid address","address",r);return e}function La(r,e,t){Object.defineProperty(r,e,{enumerable:!0,value:t,writable:!1})}const N8=new Uint8Array(32);N8.fill(0),Gt.from(-1);const O8=Gt.from(0),q8=Gt.from(1);Gt.from("0xffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff"),hn(q8.toHexString(),32),hn(O8.toHexString(),32);var sn={},Rt={},po=Fg;function Fg(r,e){if(!r)throw new Error(e||"Assertion failed")}Fg.equal=function(r,e,t){if(r!=e)throw new Error(t||"Assertion failed: "+r+" != "+e)};var Fu={exports:{}};typeof Object.create=="function"?Fu.exports=function(r,e){e&&(r.super_=e,r.prototype=Object.create(e.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}))}:Fu.exports=function(r,e){if(e){r.super_=e;var t=function(){};t.prototype=e.prototype,r.prototype=new t,r.prototype.constructor=r}};var T8=po,F8=Fu.exports;Rt.inherits=F8;function D8(r,e){return(r.charCodeAt(e)&64512)!==55296||e<0||e+1>=r.length?!1:(r.charCodeAt(e+1)&64512)===56320}function B8(r,e){if(Array.isArray(r))return r.slice();if(!r)return[];var t=[];if(typeof r=="string")if(e){if(e==="hex")for(r=r.replace(/[^a-z0-9]+/ig,""),r.length%2!==0&&(r="0"+r),s=0;s<r.length;s+=2)t.push(parseInt(r[s]+r[s+1],16))}else for(var i=0,s=0;s<r.length;s++){var a=r.charCodeAt(s);a<128?t[i++]=a:a<2048?(t[i++]=a>>6|192,t[i++]=a&63|128):D8(r,s)?(a=65536+((a&1023)<<10)+(r.charCodeAt(++s)&1023),t[i++]=a>>18|240,t[i++]=a>>12&63|128,t[i++]=a>>6&63|128,t[i++]=a&63|128):(t[i++]=a>>12|224,t[i++]=a>>6&63|128,t[i++]=a&63|128)}else for(s=0;s<r.length;s++)t[s]=r[s]|0;return t}Rt.toArray=B8;function L8(r){for(var e="",t=0;t<r.length;t++)e+=Bg(r[t].toString(16));return e}Rt.toHex=L8;function Dg(r){var e=r>>>24|r>>>8&65280|r<<8&16711680|(r&255)<<24;return e>>>0}Rt.htonl=Dg;function U8(r,e){for(var t="",i=0;i<r.length;i++){var s=r[i];e==="little"&&(s=Dg(s)),t+=Lg(s.toString(16))}return t}Rt.toHex32=U8;function Bg(r){return r.length===1?"0"+r:r}Rt.zero2=Bg;function Lg(r){return r.length===7?"0"+r:r.length===6?"00"+r:r.length===5?"000"+r:r.length===4?"0000"+r:r.length===3?"00000"+r:r.length===2?"000000"+r:r.length===1?"0000000"+r:r}Rt.zero8=Lg;function z8(r,e,t,i){var s=t-e;T8(s%4===0);for(var a=new Array(s/4),f=0,u=e;f<a.length;f++,u+=4){var d;i==="big"?d=r[u]<<24|r[u+1]<<16|r[u+2]<<8|r[u+3]:d=r[u+3]<<24|r[u+2]<<16|r[u+1]<<8|r[u],a[f]=d>>>0}return a}Rt.join32=z8;function k8(r,e){for(var t=new Array(r.length*4),i=0,s=0;i<r.length;i++,s+=4){var a=r[i];e==="big"?(t[s]=a>>>24,t[s+1]=a>>>16&255,t[s+2]=a>>>8&255,t[s+3]=a&255):(t[s+3]=a>>>24,t[s+2]=a>>>16&255,t[s+1]=a>>>8&255,t[s]=a&255)}return t}Rt.split32=k8;function $8(r,e){return r>>>e|r<<32-e}Rt.rotr32=$8;function j8(r,e){return r<<e|r>>>32-e}Rt.rotl32=j8;function H8(r,e){return r+e>>>0}Rt.sum32=H8;function K8(r,e,t){return r+e+t>>>0}Rt.sum32_3=K8;function G8(r,e,t,i){return r+e+t+i>>>0}Rt.sum32_4=G8;function V8(r,e,t,i,s){return r+e+t+i+s>>>0}Rt.sum32_5=V8;function J8(r,e,t,i){var s=r[e],a=r[e+1],f=i+a>>>0,u=(f<i?1:0)+t+s;r[e]=u>>>0,r[e+1]=f}Rt.sum64=J8;function Q8(r,e,t,i){var s=e+i>>>0,a=(s<e?1:0)+r+t;return a>>>0}Rt.sum64_hi=Q8;function Y8(r,e,t,i){var s=e+i;return s>>>0}Rt.sum64_lo=Y8;function W8(r,e,t,i,s,a,f,u){var d=0,l=e;l=l+i>>>0,d+=l<e?1:0,l=l+a>>>0,d+=l<a?1:0,l=l+u>>>0,d+=l<u?1:0;var w=r+t+s+f+d;return w>>>0}Rt.sum64_4_hi=W8;function X8(r,e,t,i,s,a,f,u){var d=e+i+a+u;return d>>>0}Rt.sum64_4_lo=X8;function Z8(r,e,t,i,s,a,f,u,d,l){var w=0,x=e;x=x+i>>>0,w+=x<e?1:0,x=x+a>>>0,w+=x<a?1:0,x=x+u>>>0,w+=x<u?1:0,x=x+l>>>0,w+=x<l?1:0;var C=r+t+s+f+d+w;return C>>>0}Rt.sum64_5_hi=Z8;function ew(r,e,t,i,s,a,f,u,d,l){var w=e+i+a+u+l;return w>>>0}Rt.sum64_5_lo=ew;function tw(r,e,t){var i=e<<32-t|r>>>t;return i>>>0}Rt.rotr64_hi=tw;function rw(r,e,t){var i=r<<32-t|e>>>t;return i>>>0}Rt.rotr64_lo=rw;function iw(r,e,t){return r>>>t}Rt.shr64_hi=iw;function nw(r,e,t){var i=r<<32-t|e>>>t;return i>>>0}Rt.shr64_lo=nw;var ha={},jp=Rt,sw=po;function Mc(){this.pending=null,this.pendingTotal=0,this.blockSize=this.constructor.blockSize,this.outSize=this.constructor.outSize,this.hmacStrength=this.constructor.hmacStrength,this.padLength=this.constructor.padLength/8,this.endian="big",this._delta8=this.blockSize/8,this._delta32=this.blockSize/32}ha.BlockHash=Mc,Mc.prototype.update=function(r,e){if(r=jp.toArray(r,e),this.pending?this.pending=this.pending.concat(r):this.pending=r,this.pendingTotal+=r.length,this.pending.length>=this._delta8){r=this.pending;var t=r.length%this._delta8;this.pending=r.slice(r.length-t,r.length),this.pending.length===0&&(this.pending=null),r=jp.join32(r,0,r.length-t,this.endian);for(var i=0;i<r.length;i+=this._delta32)this._update(r,i,i+this._delta32)}return this},Mc.prototype.digest=function(r){return this.update(this._pad()),sw(this.pending===null),this._digest(r)},Mc.prototype._pad=function(){var r=this.pendingTotal,e=this._delta8,t=e-(r+this.padLength)%e,i=new Array(t+this.padLength);i[0]=128;for(var s=1;s<t;s++)i[s]=0;if(r<<=3,this.endian==="big"){for(var a=8;a<this.padLength;a++)i[s++]=0;i[s++]=0,i[s++]=0,i[s++]=0,i[s++]=0,i[s++]=r>>>24&255,i[s++]=r>>>16&255,i[s++]=r>>>8&255,i[s++]=r&255}else for(i[s++]=r&255,i[s++]=r>>>8&255,i[s++]=r>>>16&255,i[s++]=r>>>24&255,i[s++]=0,i[s++]=0,i[s++]=0,i[s++]=0,a=8;a<this.padLength;a++)i[s++]=0;return i};var Ws={},mn={},aw=Rt,un=aw.rotr32;function ow(r,e,t,i){if(r===0)return Ug(e,t,i);if(r===1||r===3)return kg(e,t,i);if(r===2)return zg(e,t,i)}mn.ft_1=ow;function Ug(r,e,t){return r&e^~r&t}mn.ch32=Ug;function zg(r,e,t){return r&e^r&t^e&t}mn.maj32=zg;function kg(r,e,t){return r^e^t}mn.p32=kg;function cw(r){return un(r,2)^un(r,13)^un(r,22)}mn.s0_256=cw;function fw(r){return un(r,6)^un(r,11)^un(r,25)}mn.s1_256=fw;function hw(r){return un(r,7)^un(r,18)^r>>>3}mn.g0_256=hw;function uw(r){return un(r,17)^un(r,19)^r>>>10}mn.g1_256=uw;var sa=Rt,lw=ha,dw=mn,du=sa.rotl32,Ua=sa.sum32,pw=sa.sum32_5,gw=dw.ft_1,$g=lw.BlockHash,vw=[1518500249,1859775393,2400959708,3395469782];function cn(){if(!(this instanceof cn))return new cn;$g.call(this),this.h=[1732584193,4023233417,2562383102,271733878,3285377520],this.W=new Array(80)}sa.inherits(cn,$g);var bw=cn;cn.blockSize=512,cn.outSize=160,cn.hmacStrength=80,cn.padLength=64,cn.prototype._update=function(r,e){for(var t=this.W,i=0;i<16;i++)t[i]=r[e+i];for(;i<t.length;i++)t[i]=du(t[i-3]^t[i-8]^t[i-14]^t[i-16],1);var s=this.h[0],a=this.h[1],f=this.h[2],u=this.h[3],d=this.h[4];for(i=0;i<t.length;i++){var l=~~(i/20),w=pw(du(s,5),gw(l,a,f,u),d,t[i],vw[l]);d=u,u=f,f=du(a,30),a=s,s=w}this.h[0]=Ua(this.h[0],s),this.h[1]=Ua(this.h[1],a),this.h[2]=Ua(this.h[2],f),this.h[3]=Ua(this.h[3],u),this.h[4]=Ua(this.h[4],d)},cn.prototype._digest=function(r){return r==="hex"?sa.toHex32(this.h,"big"):sa.split32(this.h,"big")};var aa=Rt,mw=ha,ua=mn,yw=po,Li=aa.sum32,ww=aa.sum32_4,_w=aa.sum32_5,Aw=ua.ch32,xw=ua.maj32,Ew=ua.s0_256,Sw=ua.s1_256,Mw=ua.g0_256,Iw=ua.g1_256,jg=mw.BlockHash,Pw=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298];function fn(){if(!(this instanceof fn))return new fn;jg.call(this),this.h=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225],this.k=Pw,this.W=new Array(64)}aa.inherits(fn,jg);var Hg=fn;fn.blockSize=512,fn.outSize=256,fn.hmacStrength=192,fn.padLength=64,fn.prototype._update=function(r,e){for(var t=this.W,i=0;i<16;i++)t[i]=r[e+i];for(;i<t.length;i++)t[i]=ww(Iw(t[i-2]),t[i-7],Mw(t[i-15]),t[i-16]);var s=this.h[0],a=this.h[1],f=this.h[2],u=this.h[3],d=this.h[4],l=this.h[5],w=this.h[6],x=this.h[7];for(yw(this.k.length===t.length),i=0;i<t.length;i++){var C=_w(x,Sw(d),Aw(d,l,w),this.k[i],t[i]),R=Li(Ew(s),xw(s,a,f));x=w,w=l,l=d,d=Li(u,C),u=f,f=a,a=s,s=Li(C,R)}this.h[0]=Li(this.h[0],s),this.h[1]=Li(this.h[1],a),this.h[2]=Li(this.h[2],f),this.h[3]=Li(this.h[3],u),this.h[4]=Li(this.h[4],d),this.h[5]=Li(this.h[5],l),this.h[6]=Li(this.h[6],w),this.h[7]=Li(this.h[7],x)},fn.prototype._digest=function(r){return r==="hex"?aa.toHex32(this.h,"big"):aa.split32(this.h,"big")};var Du=Rt,Kg=Hg;function Tn(){if(!(this instanceof Tn))return new Tn;Kg.call(this),this.h=[3238371032,914150663,812702999,4144912697,4290775857,1750603025,1694076839,3204075428]}Du.inherits(Tn,Kg);var Rw=Tn;Tn.blockSize=512,Tn.outSize=224,Tn.hmacStrength=192,Tn.padLength=64,Tn.prototype._digest=function(r){return r==="hex"?Du.toHex32(this.h.slice(0,7),"big"):Du.split32(this.h.slice(0,7),"big")};var Zr=Rt,Cw=ha,Nw=po,ln=Zr.rotr64_hi,dn=Zr.rotr64_lo,Gg=Zr.shr64_hi,Vg=Zr.shr64_lo,Qn=Zr.sum64,pu=Zr.sum64_hi,gu=Zr.sum64_lo,Ow=Zr.sum64_4_hi,qw=Zr.sum64_4_lo,Tw=Zr.sum64_5_hi,Fw=Zr.sum64_5_lo,Jg=Cw.BlockHash,Dw=[1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591];function ji(){if(!(this instanceof ji))return new ji;Jg.call(this),this.h=[1779033703,4089235720,3144134277,2227873595,1013904242,4271175723,2773480762,1595750129,1359893119,2917565137,2600822924,725511199,528734635,4215389547,1541459225,327033209],this.k=Dw,this.W=new Array(160)}Zr.inherits(ji,Jg);var Qg=ji;ji.blockSize=1024,ji.outSize=512,ji.hmacStrength=192,ji.padLength=128,ji.prototype._prepareBlock=function(r,e){for(var t=this.W,i=0;i<32;i++)t[i]=r[e+i];for(;i<t.length;i+=2){var s=Vw(t[i-4],t[i-3]),a=Jw(t[i-4],t[i-3]),f=t[i-14],u=t[i-13],d=Kw(t[i-30],t[i-29]),l=Gw(t[i-30],t[i-29]),w=t[i-32],x=t[i-31];t[i]=Ow(s,a,f,u,d,l,w,x),t[i+1]=qw(s,a,f,u,d,l,w,x)}},ji.prototype._update=function(r,e){this._prepareBlock(r,e);var t=this.W,i=this.h[0],s=this.h[1],a=this.h[2],f=this.h[3],u=this.h[4],d=this.h[5],l=this.h[6],w=this.h[7],x=this.h[8],C=this.h[9],R=this.h[10],N=this.h[11],T=this.h[12],U=this.h[13],Q=this.h[14],F=this.h[15];Nw(this.k.length===t.length);for(var V=0;V<t.length;V+=2){var D=Q,B=F,H=jw(x,C),E=Hw(x,C),$=Bw(x,C,R,N,T),ne=Lw(x,C,R,N,T,U),fe=this.k[V],z=this.k[V+1],y=t[V],c=t[V+1],h=Tw(D,B,H,E,$,ne,fe,z,y,c),p=Fw(D,B,H,E,$,ne,fe,z,y,c);D=kw(i,s),B=$w(i,s),H=Uw(i,s,a,f,u),E=zw(i,s,a,f,u,d);var m=pu(D,B,H,E),_=gu(D,B,H,E);Q=T,F=U,T=R,U=N,R=x,N=C,x=pu(l,w,h,p),C=gu(w,w,h,p),l=u,w=d,u=a,d=f,a=i,f=s,i=pu(h,p,m,_),s=gu(h,p,m,_)}Qn(this.h,0,i,s),Qn(this.h,2,a,f),Qn(this.h,4,u,d),Qn(this.h,6,l,w),Qn(this.h,8,x,C),Qn(this.h,10,R,N),Qn(this.h,12,T,U),Qn(this.h,14,Q,F)},ji.prototype._digest=function(r){return r==="hex"?Zr.toHex32(this.h,"big"):Zr.split32(this.h,"big")};function Bw(r,e,t,i,s){var a=r&t^~r&s;return a<0&&(a+=4294967296),a}function Lw(r,e,t,i,s,a){var f=e&i^~e&a;return f<0&&(f+=4294967296),f}function Uw(r,e,t,i,s){var a=r&t^r&s^t&s;return a<0&&(a+=4294967296),a}function zw(r,e,t,i,s,a){var f=e&i^e&a^i&a;return f<0&&(f+=4294967296),f}function kw(r,e){var t=ln(r,e,28),i=ln(e,r,2),s=ln(e,r,7),a=t^i^s;return a<0&&(a+=4294967296),a}function $w(r,e){var t=dn(r,e,28),i=dn(e,r,2),s=dn(e,r,7),a=t^i^s;return a<0&&(a+=4294967296),a}function jw(r,e){var t=ln(r,e,14),i=ln(r,e,18),s=ln(e,r,9),a=t^i^s;return a<0&&(a+=4294967296),a}function Hw(r,e){var t=dn(r,e,14),i=dn(r,e,18),s=dn(e,r,9),a=t^i^s;return a<0&&(a+=4294967296),a}function Kw(r,e){var t=ln(r,e,1),i=ln(r,e,8),s=Gg(r,e,7),a=t^i^s;return a<0&&(a+=4294967296),a}function Gw(r,e){var t=dn(r,e,1),i=dn(r,e,8),s=Vg(r,e,7),a=t^i^s;return a<0&&(a+=4294967296),a}function Vw(r,e){var t=ln(r,e,19),i=ln(e,r,29),s=Gg(r,e,6),a=t^i^s;return a<0&&(a+=4294967296),a}function Jw(r,e){var t=dn(r,e,19),i=dn(e,r,29),s=Vg(r,e,6),a=t^i^s;return a<0&&(a+=4294967296),a}var Bu=Rt,Yg=Qg;function Fn(){if(!(this instanceof Fn))return new Fn;Yg.call(this),this.h=[3418070365,3238371032,1654270250,914150663,2438529370,812702999,355462360,4144912697,1731405415,4290775857,2394180231,1750603025,3675008525,1694076839,1203062813,3204075428]}Bu.inherits(Fn,Yg);var Qw=Fn;Fn.blockSize=1024,Fn.outSize=384,Fn.hmacStrength=192,Fn.padLength=128,Fn.prototype._digest=function(r){return r==="hex"?Bu.toHex32(this.h.slice(0,12),"big"):Bu.split32(this.h.slice(0,12),"big")},Ws.sha1=bw,Ws.sha224=Rw,Ws.sha256=Hg,Ws.sha384=Qw,Ws.sha512=Qg;var Wg={},xs=Rt,Yw=ha,Ic=xs.rotl32,Hp=xs.sum32,za=xs.sum32_3,Kp=xs.sum32_4,Xg=Yw.BlockHash;function an(){if(!(this instanceof an))return new an;Xg.call(this),this.h=[1732584193,4023233417,2562383102,271733878,3285377520],this.endian="little"}xs.inherits(an,Xg),Wg.ripemd160=an,an.blockSize=512,an.outSize=160,an.hmacStrength=192,an.padLength=64,an.prototype._update=function(r,e){for(var t=this.h[0],i=this.h[1],s=this.h[2],a=this.h[3],f=this.h[4],u=t,d=i,l=s,w=a,x=f,C=0;C<80;C++){var R=Hp(Ic(Kp(t,Gp(C,i,s,a),r[Zw[C]+e],Ww(C)),t7[C]),f);t=f,f=a,a=Ic(s,10),s=i,i=R,R=Hp(Ic(Kp(u,Gp(79-C,d,l,w),r[e7[C]+e],Xw(C)),r7[C]),x),u=x,x=w,w=Ic(l,10),l=d,d=R}R=za(this.h[1],s,w),this.h[1]=za(this.h[2],a,x),this.h[2]=za(this.h[3],f,u),this.h[3]=za(this.h[4],t,d),this.h[4]=za(this.h[0],i,l),this.h[0]=R},an.prototype._digest=function(r){return r==="hex"?xs.toHex32(this.h,"little"):xs.split32(this.h,"little")};function Gp(r,e,t,i){return r<=15?e^t^i:r<=31?e&t|~e&i:r<=47?(e|~t)^i:r<=63?e&i|t&~i:e^(t|~i)}function Ww(r){return r<=15?0:r<=31?1518500249:r<=47?1859775393:r<=63?2400959708:2840853838}function Xw(r){return r<=15?1352829926:r<=31?1548603684:r<=47?1836072691:r<=63?2053994217:0}var Zw=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13],e7=[5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11],t7=[11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6],r7=[8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11],i7=Rt,n7=po;function ia(r,e,t){if(!(this instanceof ia))return new ia(r,e,t);this.Hash=r,this.blockSize=r.blockSize/8,this.outSize=r.outSize/8,this.inner=null,this.outer=null,this._init(i7.toArray(e,t))}var s7=ia;ia.prototype._init=function(r){r.length>this.blockSize&&(r=new this.Hash().update(r).digest()),n7(r.length<=this.blockSize);for(var e=r.length;e<this.blockSize;e++)r.push(0);for(e=0;e<r.length;e++)r[e]^=54;for(this.inner=new this.Hash().update(r),e=0;e<r.length;e++)r[e]^=106;this.outer=new this.Hash().update(r)},ia.prototype.update=function(r,e){return this.inner.update(r,e),this},ia.prototype.digest=function(r){return this.outer.update(this.inner.digest()),this.outer.digest(r)},function(r){var e=r;e.utils=Rt,e.common=ha,e.sha=Ws,e.ripemd=Wg,e.hmac=s7,e.sha1=e.sha.sha1,e.sha256=e.sha.sha256,e.sha224=e.sha.sha224,e.sha384=e.sha.sha384,e.sha512=e.sha.sha512,e.ripemd160=e.ripemd.ripemd160}(sn);function la(r,e,t){return t={path:e,exports:{},require:function(i,s){return a7(i,s??t.path)}},r(t,t.exports),t.exports}function a7(){throw new Error("Dynamic requires are not currently supported by @rollup/plugin-commonjs")}var c0=Zg;function Zg(r,e){if(!r)throw new Error(e||"Assertion failed")}Zg.equal=function(r,e,t){if(r!=e)throw new Error(t||"Assertion failed: "+r+" != "+e)};var Hi=la(function(r,e){var t=e;function i(f,u){if(Array.isArray(f))return f.slice();if(!f)return[];var d=[];if(typeof f!="string"){for(var l=0;l<f.length;l++)d[l]=f[l]|0;return d}if(u==="hex"){f=f.replace(/[^a-z0-9]+/ig,""),f.length%2!==0&&(f="0"+f);for(var l=0;l<f.length;l+=2)d.push(parseInt(f[l]+f[l+1],16))}else for(var l=0;l<f.length;l++){var w=f.charCodeAt(l),x=w>>8,C=w&255;x?d.push(x,C):d.push(C)}return d}t.toArray=i;function s(f){return f.length===1?"0"+f:f}t.zero2=s;function a(f){for(var u="",d=0;d<f.length;d++)u+=s(f[d].toString(16));return u}t.toHex=a,t.encode=function(f,u){return u==="hex"?a(f):f}}),ci=la(function(r,e){var t=e;t.assert=c0,t.toArray=Hi.toArray,t.zero2=Hi.zero2,t.toHex=Hi.toHex,t.encode=Hi.encode;function i(d,l,w){var x=new Array(Math.max(d.bitLength(),w)+1);x.fill(0);for(var C=1<<l+1,R=d.clone(),N=0;N<x.length;N++){var T,U=R.andln(C-1);R.isOdd()?(U>(C>>1)-1?T=(C>>1)-U:T=U,R.isubn(T)):T=0,x[N]=T,R.iushrn(1)}return x}t.getNAF=i;function s(d,l){var w=[[],[]];d=d.clone(),l=l.clone();for(var x=0,C=0,R;d.cmpn(-x)>0||l.cmpn(-C)>0;){var N=d.andln(3)+x&3,T=l.andln(3)+C&3;N===3&&(N=-1),T===3&&(T=-1);var U;N&1?(R=d.andln(7)+x&7,(R===3||R===5)&&T===2?U=-N:U=N):U=0,w[0].push(U);var Q;T&1?(R=l.andln(7)+C&7,(R===3||R===5)&&N===2?Q=-T:Q=T):Q=0,w[1].push(Q),2*x===U+1&&(x=1-x),2*C===Q+1&&(C=1-C),d.iushrn(1),l.iushrn(1)}return w}t.getJSF=s;function a(d,l,w){var x="_"+l;d.prototype[l]=function(){return this[x]!==void 0?this[x]:this[x]=w.call(this)}}t.cachedProperty=a;function f(d){return typeof d=="string"?t.toArray(d,"hex"):d}t.parseBytes=f;function u(d){return new vt(d,"hex","le")}t.intFromLE=u}),Pc=ci.getNAF,o7=ci.getJSF,Wc=ci.assert;function Xn(r,e){this.type=r,this.p=new vt(e.p,16),this.red=e.prime?vt.red(e.prime):vt.mont(this.p),this.zero=new vt(0).toRed(this.red),this.one=new vt(1).toRed(this.red),this.two=new vt(2).toRed(this.red),this.n=e.n&&new vt(e.n,16),this.g=e.g&&this.pointFromJSON(e.g,e.gRed),this._wnafT1=new Array(4),this._wnafT2=new Array(4),this._wnafT3=new Array(4),this._wnafT4=new Array(4),this._bitLength=this.n?this.n.bitLength():0;var t=this.n&&this.p.div(this.n);!t||t.cmpn(100)>0?this.redN=null:(this._maxwellTrick=!0,this.redN=this.n.toRed(this.red))}var Is=Xn;Xn.prototype.point=function(){throw new Error("Not implemented")},Xn.prototype.validate=function(){throw new Error("Not implemented")},Xn.prototype._fixedNafMul=function(r,e){Wc(r.precomputed);var t=r._getDoubles(),i=Pc(e,1,this._bitLength),s=(1<<t.step+1)-(t.step%2===0?2:1);s/=3;var a=[],f,u;for(f=0;f<i.length;f+=t.step){u=0;for(var d=f+t.step-1;d>=f;d--)u=(u<<1)+i[d];a.push(u)}for(var l=this.jpoint(null,null,null),w=this.jpoint(null,null,null),x=s;x>0;x--){for(f=0;f<a.length;f++)u=a[f],u===x?w=w.mixedAdd(t.points[f]):u===-x&&(w=w.mixedAdd(t.points[f].neg()));l=l.add(w)}return l.toP()},Xn.prototype._wnafMul=function(r,e){var t=4,i=r._getNAFPoints(t);t=i.wnd;for(var s=i.points,a=Pc(e,t,this._bitLength),f=this.jpoint(null,null,null),u=a.length-1;u>=0;u--){for(var d=0;u>=0&&a[u]===0;u--)d++;if(u>=0&&d++,f=f.dblp(d),u<0)break;var l=a[u];Wc(l!==0),r.type==="affine"?l>0?f=f.mixedAdd(s[l-1>>1]):f=f.mixedAdd(s[-l-1>>1].neg()):l>0?f=f.add(s[l-1>>1]):f=f.add(s[-l-1>>1].neg())}return r.type==="affine"?f.toP():f},Xn.prototype._wnafMulAdd=function(r,e,t,i,s){var a=this._wnafT1,f=this._wnafT2,u=this._wnafT3,d=0,l,w,x;for(l=0;l<i;l++){x=e[l];var C=x._getNAFPoints(r);a[l]=C.wnd,f[l]=C.points}for(l=i-1;l>=1;l-=2){var R=l-1,N=l;if(a[R]!==1||a[N]!==1){u[R]=Pc(t[R],a[R],this._bitLength),u[N]=Pc(t[N],a[N],this._bitLength),d=Math.max(u[R].length,d),d=Math.max(u[N].length,d);continue}var T=[e[R],null,null,e[N]];e[R].y.cmp(e[N].y)===0?(T[1]=e[R].add(e[N]),T[2]=e[R].toJ().mixedAdd(e[N].neg())):e[R].y.cmp(e[N].y.redNeg())===0?(T[1]=e[R].toJ().mixedAdd(e[N]),T[2]=e[R].add(e[N].neg())):(T[1]=e[R].toJ().mixedAdd(e[N]),T[2]=e[R].toJ().mixedAdd(e[N].neg()));var U=[-3,-1,-5,-7,0,7,5,1,3],Q=o7(t[R],t[N]);for(d=Math.max(Q[0].length,d),u[R]=new Array(d),u[N]=new Array(d),w=0;w<d;w++){var F=Q[0][w]|0,V=Q[1][w]|0;u[R][w]=U[(F+1)*3+(V+1)],u[N][w]=0,f[R]=T}}var D=this.jpoint(null,null,null),B=this._wnafT4;for(l=d;l>=0;l--){for(var H=0;l>=0;){var E=!0;for(w=0;w<i;w++)B[w]=u[w][l]|0,B[w]!==0&&(E=!1);if(!E)break;H++,l--}if(l>=0&&H++,D=D.dblp(H),l<0)break;for(w=0;w<i;w++){var $=B[w];$!==0&&($>0?x=f[w][$-1>>1]:$<0&&(x=f[w][-$-1>>1].neg()),x.type==="affine"?D=D.mixedAdd(x):D=D.add(x))}}for(l=0;l<i;l++)f[l]=null;return s?D:D.toP()};function _i(r,e){this.curve=r,this.type=e,this.precomputed=null}Xn.BasePoint=_i,_i.prototype.eq=function(){throw new Error("Not implemented")},_i.prototype.validate=function(){return this.curve.validate(this)},Xn.prototype.decodePoint=function(r,e){r=ci.toArray(r,e);var t=this.p.byteLength();if((r[0]===4||r[0]===6||r[0]===7)&&r.length-1===2*t){r[0]===6?Wc(r[r.length-1]%2===0):r[0]===7&&Wc(r[r.length-1]%2===1);var i=this.point(r.slice(1,1+t),r.slice(1+t,1+2*t));return i}else if((r[0]===2||r[0]===3)&&r.length-1===t)return this.pointFromX(r.slice(1,1+t),r[0]===3);throw new Error("Unknown point format")},_i.prototype.encodeCompressed=function(r){return this.encode(r,!0)},_i.prototype._encode=function(r){var e=this.curve.p.byteLength(),t=this.getX().toArray("be",e);return r?[this.getY().isEven()?2:3].concat(t):[4].concat(t,this.getY().toArray("be",e))},_i.prototype.encode=function(r,e){return ci.encode(this._encode(e),r)},_i.prototype.precompute=function(r){if(this.precomputed)return this;var e={doubles:null,naf:null,beta:null};return e.naf=this._getNAFPoints(8),e.doubles=this._getDoubles(4,r),e.beta=this._getBeta(),this.precomputed=e,this},_i.prototype._hasDoubles=function(r){if(!this.precomputed)return!1;var e=this.precomputed.doubles;return e?e.points.length>=Math.ceil((r.bitLength()+1)/e.step):!1},_i.prototype._getDoubles=function(r,e){if(this.precomputed&&this.precomputed.doubles)return this.precomputed.doubles;for(var t=[this],i=this,s=0;s<e;s+=r){for(var a=0;a<r;a++)i=i.dbl();t.push(i)}return{step:r,points:t}},_i.prototype._getNAFPoints=function(r){if(this.precomputed&&this.precomputed.naf)return this.precomputed.naf;for(var e=[this],t=(1<<r)-1,i=t===1?null:this.dbl(),s=1;s<t;s++)e[s]=e[s-1].add(i);return{wnd:r,points:e}},_i.prototype._getBeta=function(){return null},_i.prototype.dblp=function(r){for(var e=this,t=0;t<r;t++)e=e.dbl();return e};var f0=la(function(r){typeof Object.create=="function"?r.exports=function(e,t){t&&(e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}))}:r.exports=function(e,t){if(t){e.super_=t;var i=function(){};i.prototype=t.prototype,e.prototype=new i,e.prototype.constructor=e}}}),c7=ci.assert;function Si(r){Is.call(this,"short",r),this.a=new vt(r.a,16).toRed(this.red),this.b=new vt(r.b,16).toRed(this.red),this.tinv=this.two.redInvm(),this.zeroA=this.a.fromRed().cmpn(0)===0,this.threeA=this.a.fromRed().sub(this.p).cmpn(-3)===0,this.endo=this._getEndomorphism(r),this._endoWnafT1=new Array(4),this._endoWnafT2=new Array(4)}f0(Si,Is);var f7=Si;Si.prototype._getEndomorphism=function(r){if(!(!this.zeroA||!this.g||!this.n||this.p.modn(3)!==1)){var e,t;if(r.beta)e=new vt(r.beta,16).toRed(this.red);else{var i=this._getEndoRoots(this.p);e=i[0].cmp(i[1])<0?i[0]:i[1],e=e.toRed(this.red)}if(r.lambda)t=new vt(r.lambda,16);else{var s=this._getEndoRoots(this.n);this.g.mul(s[0]).x.cmp(this.g.x.redMul(e))===0?t=s[0]:(t=s[1],c7(this.g.mul(t).x.cmp(this.g.x.redMul(e))===0))}var a;return r.basis?a=r.basis.map(function(f){return{a:new vt(f.a,16),b:new vt(f.b,16)}}):a=this._getEndoBasis(t),{beta:e,lambda:t,basis:a}}},Si.prototype._getEndoRoots=function(r){var e=r===this.p?this.red:vt.mont(r),t=new vt(2).toRed(e).redInvm(),i=t.redNeg(),s=new vt(3).toRed(e).redNeg().redSqrt().redMul(t),a=i.redAdd(s).fromRed(),f=i.redSub(s).fromRed();return[a,f]},Si.prototype._getEndoBasis=function(r){for(var e=this.n.ushrn(Math.floor(this.n.bitLength()/2)),t=r,i=this.n.clone(),s=new vt(1),a=new vt(0),f=new vt(0),u=new vt(1),d,l,w,x,C,R,N,T=0,U,Q;t.cmpn(0)!==0;){var F=i.div(t);U=i.sub(F.mul(t)),Q=f.sub(F.mul(s));var V=u.sub(F.mul(a));if(!w&&U.cmp(e)<0)d=N.neg(),l=s,w=U.neg(),x=Q;else if(w&&++T===2)break;N=U,i=t,t=U,f=s,s=Q,u=a,a=V}C=U.neg(),R=Q;var D=w.sqr().add(x.sqr()),B=C.sqr().add(R.sqr());return B.cmp(D)>=0&&(C=d,R=l),w.negative&&(w=w.neg(),x=x.neg()),C.negative&&(C=C.neg(),R=R.neg()),[{a:w,b:x},{a:C,b:R}]},Si.prototype._endoSplit=function(r){var e=this.endo.basis,t=e[0],i=e[1],s=i.b.mul(r).divRound(this.n),a=t.b.neg().mul(r).divRound(this.n),f=s.mul(t.a),u=a.mul(i.a),d=s.mul(t.b),l=a.mul(i.b),w=r.sub(f).sub(u),x=d.add(l).neg();return{k1:w,k2:x}},Si.prototype.pointFromX=function(r,e){r=new vt(r,16),r.red||(r=r.toRed(this.red));var t=r.redSqr().redMul(r).redIAdd(r.redMul(this.a)).redIAdd(this.b),i=t.redSqrt();if(i.redSqr().redSub(t).cmp(this.zero)!==0)throw new Error("invalid point");var s=i.fromRed().isOdd();return(e&&!s||!e&&s)&&(i=i.redNeg()),this.point(r,i)},Si.prototype.validate=function(r){if(r.inf)return!0;var e=r.x,t=r.y,i=this.a.redMul(e),s=e.redSqr().redMul(e).redIAdd(i).redIAdd(this.b);return t.redSqr().redISub(s).cmpn(0)===0},Si.prototype._endoWnafMulAdd=function(r,e,t){for(var i=this._endoWnafT1,s=this._endoWnafT2,a=0;a<r.length;a++){var f=this._endoSplit(e[a]),u=r[a],d=u._getBeta();f.k1.negative&&(f.k1.ineg(),u=u.neg(!0)),f.k2.negative&&(f.k2.ineg(),d=d.neg(!0)),i[a*2]=u,i[a*2+1]=d,s[a*2]=f.k1,s[a*2+1]=f.k2}for(var l=this._wnafMulAdd(1,i,s,a*2,t),w=0;w<a*2;w++)i[w]=null,s[w]=null;return l};function vr(r,e,t,i){Is.BasePoint.call(this,r,"affine"),e===null&&t===null?(this.x=null,this.y=null,this.inf=!0):(this.x=new vt(e,16),this.y=new vt(t,16),i&&(this.x.forceRed(this.curve.red),this.y.forceRed(this.curve.red)),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.inf=!1)}f0(vr,Is.BasePoint),Si.prototype.point=function(r,e,t){return new vr(this,r,e,t)},Si.prototype.pointFromJSON=function(r,e){return vr.fromJSON(this,r,e)},vr.prototype._getBeta=function(){if(this.curve.endo){var r=this.precomputed;if(r&&r.beta)return r.beta;var e=this.curve.point(this.x.redMul(this.curve.endo.beta),this.y);if(r){var t=this.curve,i=function(s){return t.point(s.x.redMul(t.endo.beta),s.y)};r.beta=e,e.precomputed={beta:null,naf:r.naf&&{wnd:r.naf.wnd,points:r.naf.points.map(i)},doubles:r.doubles&&{step:r.doubles.step,points:r.doubles.points.map(i)}}}return e}},vr.prototype.toJSON=function(){return this.precomputed?[this.x,this.y,this.precomputed&&{doubles:this.precomputed.doubles&&{step:this.precomputed.doubles.step,points:this.precomputed.doubles.points.slice(1)},naf:this.precomputed.naf&&{wnd:this.precomputed.naf.wnd,points:this.precomputed.naf.points.slice(1)}}]:[this.x,this.y]},vr.fromJSON=function(r,e,t){typeof e=="string"&&(e=JSON.parse(e));var i=r.point(e[0],e[1],t);if(!e[2])return i;function s(f){return r.point(f[0],f[1],t)}var a=e[2];return i.precomputed={beta:null,doubles:a.doubles&&{step:a.doubles.step,points:[i].concat(a.doubles.points.map(s))},naf:a.naf&&{wnd:a.naf.wnd,points:[i].concat(a.naf.points.map(s))}},i},vr.prototype.inspect=function(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" y: "+this.y.fromRed().toString(16,2)+">"},vr.prototype.isInfinity=function(){return this.inf},vr.prototype.add=function(r){if(this.inf)return r;if(r.inf)return this;if(this.eq(r))return this.dbl();if(this.neg().eq(r))return this.curve.point(null,null);if(this.x.cmp(r.x)===0)return this.curve.point(null,null);var e=this.y.redSub(r.y);e.cmpn(0)!==0&&(e=e.redMul(this.x.redSub(r.x).redInvm()));var t=e.redSqr().redISub(this.x).redISub(r.x),i=e.redMul(this.x.redSub(t)).redISub(this.y);return this.curve.point(t,i)},vr.prototype.dbl=function(){if(this.inf)return this;var r=this.y.redAdd(this.y);if(r.cmpn(0)===0)return this.curve.point(null,null);var e=this.curve.a,t=this.x.redSqr(),i=r.redInvm(),s=t.redAdd(t).redIAdd(t).redIAdd(e).redMul(i),a=s.redSqr().redISub(this.x.redAdd(this.x)),f=s.redMul(this.x.redSub(a)).redISub(this.y);return this.curve.point(a,f)},vr.prototype.getX=function(){return this.x.fromRed()},vr.prototype.getY=function(){return this.y.fromRed()},vr.prototype.mul=function(r){return r=new vt(r,16),this.isInfinity()?this:this._hasDoubles(r)?this.curve._fixedNafMul(this,r):this.curve.endo?this.curve._endoWnafMulAdd([this],[r]):this.curve._wnafMul(this,r)},vr.prototype.mulAdd=function(r,e,t){var i=[this,e],s=[r,t];return this.curve.endo?this.curve._endoWnafMulAdd(i,s):this.curve._wnafMulAdd(1,i,s,2)},vr.prototype.jmulAdd=function(r,e,t){var i=[this,e],s=[r,t];return this.curve.endo?this.curve._endoWnafMulAdd(i,s,!0):this.curve._wnafMulAdd(1,i,s,2,!0)},vr.prototype.eq=function(r){return this===r||this.inf===r.inf&&(this.inf||this.x.cmp(r.x)===0&&this.y.cmp(r.y)===0)},vr.prototype.neg=function(r){if(this.inf)return this;var e=this.curve.point(this.x,this.y.redNeg());if(r&&this.precomputed){var t=this.precomputed,i=function(s){return s.neg()};e.precomputed={naf:t.naf&&{wnd:t.naf.wnd,points:t.naf.points.map(i)},doubles:t.doubles&&{step:t.doubles.step,points:t.doubles.points.map(i)}}}return e},vr.prototype.toJ=function(){if(this.inf)return this.curve.jpoint(null,null,null);var r=this.curve.jpoint(this.x,this.y,this.curve.one);return r};function _r(r,e,t,i){Is.BasePoint.call(this,r,"jacobian"),e===null&&t===null&&i===null?(this.x=this.curve.one,this.y=this.curve.one,this.z=new vt(0)):(this.x=new vt(e,16),this.y=new vt(t,16),this.z=new vt(i,16)),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)),this.zOne=this.z===this.curve.one}f0(_r,Is.BasePoint),Si.prototype.jpoint=function(r,e,t){return new _r(this,r,e,t)},_r.prototype.toP=function(){if(this.isInfinity())return this.curve.point(null,null);var r=this.z.redInvm(),e=r.redSqr(),t=this.x.redMul(e),i=this.y.redMul(e).redMul(r);return this.curve.point(t,i)},_r.prototype.neg=function(){return this.curve.jpoint(this.x,this.y.redNeg(),this.z)},_r.prototype.add=function(r){if(this.isInfinity())return r;if(r.isInfinity())return this;var e=r.z.redSqr(),t=this.z.redSqr(),i=this.x.redMul(e),s=r.x.redMul(t),a=this.y.redMul(e.redMul(r.z)),f=r.y.redMul(t.redMul(this.z)),u=i.redSub(s),d=a.redSub(f);if(u.cmpn(0)===0)return d.cmpn(0)!==0?this.curve.jpoint(null,null,null):this.dbl();var l=u.redSqr(),w=l.redMul(u),x=i.redMul(l),C=d.redSqr().redIAdd(w).redISub(x).redISub(x),R=d.redMul(x.redISub(C)).redISub(a.redMul(w)),N=this.z.redMul(r.z).redMul(u);return this.curve.jpoint(C,R,N)},_r.prototype.mixedAdd=function(r){if(this.isInfinity())return r.toJ();if(r.isInfinity())return this;var e=this.z.redSqr(),t=this.x,i=r.x.redMul(e),s=this.y,a=r.y.redMul(e).redMul(this.z),f=t.redSub(i),u=s.redSub(a);if(f.cmpn(0)===0)return u.cmpn(0)!==0?this.curve.jpoint(null,null,null):this.dbl();var d=f.redSqr(),l=d.redMul(f),w=t.redMul(d),x=u.redSqr().redIAdd(l).redISub(w).redISub(w),C=u.redMul(w.redISub(x)).redISub(s.redMul(l)),R=this.z.redMul(f);return this.curve.jpoint(x,C,R)},_r.prototype.dblp=function(r){if(r===0)return this;if(this.isInfinity())return this;if(!r)return this.dbl();var e;if(this.curve.zeroA||this.curve.threeA){var t=this;for(e=0;e<r;e++)t=t.dbl();return t}var i=this.curve.a,s=this.curve.tinv,a=this.x,f=this.y,u=this.z,d=u.redSqr().redSqr(),l=f.redAdd(f);for(e=0;e<r;e++){var w=a.redSqr(),x=l.redSqr(),C=x.redSqr(),R=w.redAdd(w).redIAdd(w).redIAdd(i.redMul(d)),N=a.redMul(x),T=R.redSqr().redISub(N.redAdd(N)),U=N.redISub(T),Q=R.redMul(U);Q=Q.redIAdd(Q).redISub(C);var F=l.redMul(u);e+1<r&&(d=d.redMul(C)),a=T,u=F,l=Q}return this.curve.jpoint(a,l.redMul(s),u)},_r.prototype.dbl=function(){return this.isInfinity()?this:this.curve.zeroA?this._zeroDbl():this.curve.threeA?this._threeDbl():this._dbl()},_r.prototype._zeroDbl=function(){var r,e,t;if(this.zOne){var i=this.x.redSqr(),s=this.y.redSqr(),a=s.redSqr(),f=this.x.redAdd(s).redSqr().redISub(i).redISub(a);f=f.redIAdd(f);var u=i.redAdd(i).redIAdd(i),d=u.redSqr().redISub(f).redISub(f),l=a.redIAdd(a);l=l.redIAdd(l),l=l.redIAdd(l),r=d,e=u.redMul(f.redISub(d)).redISub(l),t=this.y.redAdd(this.y)}else{var w=this.x.redSqr(),x=this.y.redSqr(),C=x.redSqr(),R=this.x.redAdd(x).redSqr().redISub(w).redISub(C);R=R.redIAdd(R);var N=w.redAdd(w).redIAdd(w),T=N.redSqr(),U=C.redIAdd(C);U=U.redIAdd(U),U=U.redIAdd(U),r=T.redISub(R).redISub(R),e=N.redMul(R.redISub(r)).redISub(U),t=this.y.redMul(this.z),t=t.redIAdd(t)}return this.curve.jpoint(r,e,t)},_r.prototype._threeDbl=function(){var r,e,t;if(this.zOne){var i=this.x.redSqr(),s=this.y.redSqr(),a=s.redSqr(),f=this.x.redAdd(s).redSqr().redISub(i).redISub(a);f=f.redIAdd(f);var u=i.redAdd(i).redIAdd(i).redIAdd(this.curve.a),d=u.redSqr().redISub(f).redISub(f);r=d;var l=a.redIAdd(a);l=l.redIAdd(l),l=l.redIAdd(l),e=u.redMul(f.redISub(d)).redISub(l),t=this.y.redAdd(this.y)}else{var w=this.z.redSqr(),x=this.y.redSqr(),C=this.x.redMul(x),R=this.x.redSub(w).redMul(this.x.redAdd(w));R=R.redAdd(R).redIAdd(R);var N=C.redIAdd(C);N=N.redIAdd(N);var T=N.redAdd(N);r=R.redSqr().redISub(T),t=this.y.redAdd(this.z).redSqr().redISub(x).redISub(w);var U=x.redSqr();U=U.redIAdd(U),U=U.redIAdd(U),U=U.redIAdd(U),e=R.redMul(N.redISub(r)).redISub(U)}return this.curve.jpoint(r,e,t)},_r.prototype._dbl=function(){var r=this.curve.a,e=this.x,t=this.y,i=this.z,s=i.redSqr().redSqr(),a=e.redSqr(),f=t.redSqr(),u=a.redAdd(a).redIAdd(a).redIAdd(r.redMul(s)),d=e.redAdd(e);d=d.redIAdd(d);var l=d.redMul(f),w=u.redSqr().redISub(l.redAdd(l)),x=l.redISub(w),C=f.redSqr();C=C.redIAdd(C),C=C.redIAdd(C),C=C.redIAdd(C);var R=u.redMul(x).redISub(C),N=t.redAdd(t).redMul(i);return this.curve.jpoint(w,R,N)},_r.prototype.trpl=function(){if(!this.curve.zeroA)return this.dbl().add(this);var r=this.x.redSqr(),e=this.y.redSqr(),t=this.z.redSqr(),i=e.redSqr(),s=r.redAdd(r).redIAdd(r),a=s.redSqr(),f=this.x.redAdd(e).redSqr().redISub(r).redISub(i);f=f.redIAdd(f),f=f.redAdd(f).redIAdd(f),f=f.redISub(a);var u=f.redSqr(),d=i.redIAdd(i);d=d.redIAdd(d),d=d.redIAdd(d),d=d.redIAdd(d);var l=s.redIAdd(f).redSqr().redISub(a).redISub(u).redISub(d),w=e.redMul(l);w=w.redIAdd(w),w=w.redIAdd(w);var x=this.x.redMul(u).redISub(w);x=x.redIAdd(x),x=x.redIAdd(x);var C=this.y.redMul(l.redMul(d.redISub(l)).redISub(f.redMul(u)));C=C.redIAdd(C),C=C.redIAdd(C),C=C.redIAdd(C);var R=this.z.redAdd(f).redSqr().redISub(t).redISub(u);return this.curve.jpoint(x,C,R)},_r.prototype.mul=function(r,e){return r=new vt(r,e),this.curve._wnafMul(this,r)},_r.prototype.eq=function(r){if(r.type==="affine")return this.eq(r.toJ());if(this===r)return!0;var e=this.z.redSqr(),t=r.z.redSqr();if(this.x.redMul(t).redISub(r.x.redMul(e)).cmpn(0)!==0)return!1;var i=e.redMul(this.z),s=t.redMul(r.z);return this.y.redMul(s).redISub(r.y.redMul(i)).cmpn(0)===0},_r.prototype.eqXToP=function(r){var e=this.z.redSqr(),t=r.toRed(this.curve.red).redMul(e);if(this.x.cmp(t)===0)return!0;for(var i=r.clone(),s=this.curve.redN.redMul(e);;){if(i.iadd(this.curve.n),i.cmp(this.curve.p)>=0)return!1;if(t.redIAdd(s),this.x.cmp(t)===0)return!0}},_r.prototype.inspect=function(){return this.isInfinity()?"<EC JPoint Infinity>":"<EC JPoint x: "+this.x.toString(16,2)+" y: "+this.y.toString(16,2)+" z: "+this.z.toString(16,2)+">"},_r.prototype.isInfinity=function(){return this.z.cmpn(0)===0};var Lc=la(function(r,e){var t=e;t.base=Is,t.short=f7,t.mont=null,t.edwards=null}),Uc=la(function(r,e){var t=e,i=ci.assert;function s(u){u.type==="short"?this.curve=new Lc.short(u):u.type==="edwards"?this.curve=new Lc.edwards(u):this.curve=new Lc.mont(u),this.g=this.curve.g,this.n=this.curve.n,this.hash=u.hash,i(this.g.validate(),"Invalid curve"),i(this.g.mul(this.n).isInfinity(),"Invalid curve, G*N != O")}t.PresetCurve=s;function a(u,d){Object.defineProperty(t,u,{configurable:!0,enumerable:!0,get:function(){var l=new s(d);return Object.defineProperty(t,u,{configurable:!0,enumerable:!0,value:l}),l}})}a("p192",{type:"short",prime:"p192",p:"ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff",a:"ffffffff ffffffff ffffffff fffffffe ffffffff fffffffc",b:"64210519 e59c80e7 0fa7e9ab 72243049 feb8deec c146b9b1",n:"ffffffff ffffffff ffffffff 99def836 146bc9b1 b4d22831",hash:sn.sha256,gRed:!1,g:["188da80e b03090f6 7cbf20eb 43a18800 f4ff0afd 82ff1012","07192b95 ffc8da78 631011ed 6b24cdd5 73f977a1 1e794811"]}),a("p224",{type:"short",prime:"p224",p:"ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001",a:"ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff fffffffe",b:"b4050a85 0c04b3ab f5413256 5044b0b7 d7bfd8ba 270b3943 2355ffb4",n:"ffffffff ffffffff ffffffff ffff16a2 e0b8f03e 13dd2945 5c5c2a3d",hash:sn.sha256,gRed:!1,g:["b70e0cbd 6bb4bf7f 321390b9 4a03c1d3 56c21122 343280d6 115c1d21","bd376388 b5f723fb 4c22dfe6 cd4375a0 5a074764 44d58199 85007e34"]}),a("p256",{type:"short",prime:null,p:"ffffffff 00000001 00000000 00000000 00000000 ffffffff ffffffff ffffffff",a:"ffffffff 00000001 00000000 00000000 00000000 ffffffff ffffffff fffffffc",b:"5ac635d8 aa3a93e7 b3ebbd55 769886bc 651d06b0 cc53b0f6 3bce3c3e 27d2604b",n:"ffffffff 00000000 ffffffff ffffffff bce6faad a7179e84 f3b9cac2 fc632551",hash:sn.sha256,gRed:!1,g:["6b17d1f2 e12c4247 f8bce6e5 63a440f2 77037d81 2deb33a0 f4a13945 d898c296","4fe342e2 fe1a7f9b 8ee7eb4a 7c0f9e16 2bce3357 6b315ece cbb64068 37bf51f5"]}),a("p384",{type:"short",prime:null,p:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe ffffffff 00000000 00000000 ffffffff",a:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe ffffffff 00000000 00000000 fffffffc",b:"b3312fa7 e23ee7e4 988e056b e3f82d19 181d9c6e fe814112 0314088f 5013875a c656398d 8a2ed19d 2a85c8ed d3ec2aef",n:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff c7634d81 f4372ddf 581a0db2 48b0a77a ecec196a ccc52973",hash:sn.sha384,gRed:!1,g:["aa87ca22 be8b0537 8eb1c71e f320ad74 6e1d3b62 8ba79b98 59f741e0 82542a38 5502f25d bf55296c 3a545e38 72760ab7","3617de4a 96262c6f 5d9e98bf 9292dc29 f8f41dbd 289a147c e9da3113 b5f0b8c0 0a60b1ce 1d7e819d 7a431d7c 90ea0e5f"]}),a("p521",{type:"short",prime:null,p:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff",a:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffc",b:"00000051 953eb961 8e1c9a1f 929a21a0 b68540ee a2da725b 99b315f3 b8b48991 8ef109e1 56193951 ec7e937b 1652c0bd 3bb1bf07 3573df88 3d2c34f1 ef451fd4 6b503f00",n:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffa 51868783 bf2f966b 7fcc0148 f709a5d0 3bb5c9b8 899c47ae bb6fb71e 91386409",hash:sn.sha512,gRed:!1,g:["000000c6 858e06b7 0404e9cd 9e3ecb66 2395b442 9c648139 053fb521 f828af60 6b4d3dba a14b5e77 efe75928 fe1dc127 a2ffa8de 3348b3c1 856a429b f97e7e31 c2e5bd66","00000118 39296a78 9a3bc004 5c8a5fb4 2c7d1bd9 98f54449 579b4468 17afbd17 273e662c 97ee7299 5ef42640 c550b901 3fad0761 353c7086 a272c240 88be9476 9fd16650"]}),a("curve25519",{type:"mont",prime:"p25519",p:"7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed",a:"76d06",b:"1",n:"1000000000000000 0000000000000000 14def9dea2f79cd6 5812631a5cf5d3ed",hash:sn.sha256,gRed:!1,g:["9"]}),a("ed25519",{type:"edwards",prime:"p25519",p:"7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed",a:"-1",c:"1",d:"52036cee2b6ffe73 8cc740797779e898 00700a4d4141d8ab 75eb4dca135978a3",n:"1000000000000000 0000000000000000 14def9dea2f79cd6 5812631a5cf5d3ed",hash:sn.sha256,gRed:!1,g:["216936d3cd6e53fec0a4e231fdd6dc5c692cc7609525a7b2c9562d608f25d51a","6666666666666666666666666666666666666666666666666666666666666658"]});var f;try{f=null.crash()}catch{f=void 0}a("secp256k1",{type:"short",prime:"k256",p:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f",a:"0",b:"7",n:"ffffffff ffffffff ffffffff fffffffe baaedce6 af48a03b bfd25e8c d0364141",h:"1",hash:sn.sha256,beta:"7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee",lambda:"5363ad4cc05c30e0a5261c028812645a122e22ea20816678df02967c1b23bd72",basis:[{a:"3086d221a7d46bcde86c90e49284eb15",b:"-e4437ed6010e88286f547fa90abfe4c3"},{a:"114ca50f7a8e2f3f657c1108d9d44cfd8",b:"3086d221a7d46bcde86c90e49284eb15"}],gRed:!1,g:["79be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798","483ada7726a3c4655da4fbfc0e1108a8fd17b448a68554199c47d08ffb10d4b8",f]})});function Zn(r){if(!(this instanceof Zn))return new Zn(r);this.hash=r.hash,this.predResist=!!r.predResist,this.outLen=this.hash.outSize,this.minEntropy=r.minEntropy||this.hash.hmacStrength,this._reseed=null,this.reseedInterval=null,this.K=null,this.V=null;var e=Hi.toArray(r.entropy,r.entropyEnc||"hex"),t=Hi.toArray(r.nonce,r.nonceEnc||"hex"),i=Hi.toArray(r.pers,r.persEnc||"hex");c0(e.length>=this.minEntropy/8,"Not enough entropy. Minimum is: "+this.minEntropy+" bits"),this._init(e,t,i)}var Vp=Zn;Zn.prototype._init=function(r,e,t){var i=r.concat(e).concat(t);this.K=new Array(this.outLen/8),this.V=new Array(this.outLen/8);for(var s=0;s<this.V.length;s++)this.K[s]=0,this.V[s]=1;this._update(i),this._reseed=1,this.reseedInterval=281474976710656},Zn.prototype._hmac=function(){return new sn.hmac(this.hash,this.K)},Zn.prototype._update=function(r){var e=this._hmac().update(this.V).update([0]);r&&(e=e.update(r)),this.K=e.digest(),this.V=this._hmac().update(this.V).digest(),r&&(this.K=this._hmac().update(this.V).update([1]).update(r).digest(),this.V=this._hmac().update(this.V).digest())},Zn.prototype.reseed=function(r,e,t,i){typeof e!="string"&&(i=t,t=e,e=null),r=Hi.toArray(r,e),t=Hi.toArray(t,i),c0(r.length>=this.minEntropy/8,"Not enough entropy. Minimum is: "+this.minEntropy+" bits"),this._update(r.concat(t||[])),this._reseed=1},Zn.prototype.generate=function(r,e,t,i){if(this._reseed>this.reseedInterval)throw new Error("Reseed is required");typeof e!="string"&&(i=t,t=e,e=null),t&&(t=Hi.toArray(t,i||"hex"),this._update(t));for(var s=[];s.length<r;)this.V=this._hmac().update(this.V).digest(),s=s.concat(this.V);var a=s.slice(0,r);return this._update(t),this._reseed++,Hi.encode(a,e)};var vu=ci.assert;function Nr(r,e){this.ec=r,this.priv=null,this.pub=null,e.priv&&this._importPrivate(e.priv,e.privEnc),e.pub&&this._importPublic(e.pub,e.pubEnc)}var bu=Nr;Nr.fromPublic=function(r,e,t){return e instanceof Nr?e:new Nr(r,{pub:e,pubEnc:t})},Nr.fromPrivate=function(r,e,t){return e instanceof Nr?e:new Nr(r,{priv:e,privEnc:t})},Nr.prototype.validate=function(){var r=this.getPublic();return r.isInfinity()?{result:!1,reason:"Invalid public key"}:r.validate()?r.mul(this.ec.curve.n).isInfinity()?{result:!0,reason:null}:{result:!1,reason:"Public key * N != O"}:{result:!1,reason:"Public key is not a point"}},Nr.prototype.getPublic=function(r,e){return typeof r=="string"&&(e=r,r=null),this.pub||(this.pub=this.ec.g.mul(this.priv)),e?this.pub.encode(e,r):this.pub},Nr.prototype.getPrivate=function(r){return r==="hex"?this.priv.toString(16,2):this.priv},Nr.prototype._importPrivate=function(r,e){this.priv=new vt(r,e||16),this.priv=this.priv.umod(this.ec.curve.n)},Nr.prototype._importPublic=function(r,e){if(r.x||r.y){this.ec.curve.type==="mont"?vu(r.x,"Need x coordinate"):(this.ec.curve.type==="short"||this.ec.curve.type==="edwards")&&vu(r.x&&r.y,"Need both x and y coordinate"),this.pub=this.ec.curve.point(r.x,r.y);return}this.pub=this.ec.curve.decodePoint(r,e)},Nr.prototype.derive=function(r){return r.validate()||vu(r.validate(),"public point not validated"),r.mul(this.priv).getX()},Nr.prototype.sign=function(r,e,t){return this.ec.sign(r,this,e,t)},Nr.prototype.verify=function(r,e){return this.ec.verify(r,e,this)},Nr.prototype.inspect=function(){return"<Key priv: "+(this.priv&&this.priv.toString(16,2))+" pub: "+(this.pub&&this.pub.inspect())+" >"};var h7=ci.assert;function cf(r,e){if(r instanceof cf)return r;this._importDER(r,e)||(h7(r.r&&r.s,"Signature without r or s"),this.r=new vt(r.r,16),this.s=new vt(r.s,16),r.recoveryParam===void 0?this.recoveryParam=null:this.recoveryParam=r.recoveryParam)}var Rc=cf;function u7(){this.place=0}function mu(r,e){var t=r[e.place++];if(!(t&128))return t;var i=t&15;if(i===0||i>4)return!1;for(var s=0,a=0,f=e.place;a<i;a++,f++)s<<=8,s|=r[f],s>>>=0;return s<=127?!1:(e.place=f,s)}function Jp(r){for(var e=0,t=r.length-1;!r[e]&&!(r[e+1]&128)&&e<t;)e++;return e===0?r:r.slice(e)}cf.prototype._importDER=function(r,e){r=ci.toArray(r,e);var t=new u7;if(r[t.place++]!==48)return!1;var i=mu(r,t);if(i===!1||i+t.place!==r.length||r[t.place++]!==2)return!1;var s=mu(r,t);if(s===!1)return!1;var a=r.slice(t.place,s+t.place);if(t.place+=s,r[t.place++]!==2)return!1;var f=mu(r,t);if(f===!1||r.length!==f+t.place)return!1;var u=r.slice(t.place,f+t.place);if(a[0]===0)if(a[1]&128)a=a.slice(1);else return!1;if(u[0]===0)if(u[1]&128)u=u.slice(1);else return!1;return this.r=new vt(a),this.s=new vt(u),this.recoveryParam=null,!0};function yu(r,e){if(e<128){r.push(e);return}var t=1+(Math.log(e)/Math.LN2>>>3);for(r.push(t|128);--t;)r.push(e>>>(t<<3)&255);r.push(e)}cf.prototype.toDER=function(r){var e=this.r.toArray(),t=this.s.toArray();for(e[0]&128&&(e=[0].concat(e)),t[0]&128&&(t=[0].concat(t)),e=Jp(e),t=Jp(t);!t[0]&&!(t[1]&128);)t=t.slice(1);var i=[2];yu(i,e.length),i=i.concat(e),i.push(2),yu(i,t.length);var s=i.concat(t),a=[48];return yu(a,s.length),a=a.concat(s),ci.encode(a,r)};var l7=function(){throw new Error("unsupported")},ev=ci.assert;function Ei(r){if(!(this instanceof Ei))return new Ei(r);typeof r=="string"&&(ev(Object.prototype.hasOwnProperty.call(Uc,r),"Unknown curve "+r),r=Uc[r]),r instanceof Uc.PresetCurve&&(r={curve:r}),this.curve=r.curve.curve,this.n=this.curve.n,this.nh=this.n.ushrn(1),this.g=this.curve.g,this.g=r.curve.g,this.g.precompute(r.curve.n.bitLength()+1),this.hash=r.hash||r.curve.hash}var d7=Ei;Ei.prototype.keyPair=function(r){return new bu(this,r)},Ei.prototype.keyFromPrivate=function(r,e){return bu.fromPrivate(this,r,e)},Ei.prototype.keyFromPublic=function(r,e){return bu.fromPublic(this,r,e)},Ei.prototype.genKeyPair=function(r){r||(r={});for(var e=new Vp({hash:this.hash,pers:r.pers,persEnc:r.persEnc||"utf8",entropy:r.entropy||l7(this.hash.hmacStrength),entropyEnc:r.entropy&&r.entropyEnc||"utf8",nonce:this.n.toArray()}),t=this.n.byteLength(),i=this.n.sub(new vt(2));;){var s=new vt(e.generate(t));if(!(s.cmp(i)>0))return s.iaddn(1),this.keyFromPrivate(s)}},Ei.prototype._truncateToN=function(r,e){var t=r.byteLength()*8-this.n.bitLength();return t>0&&(r=r.ushrn(t)),!e&&r.cmp(this.n)>=0?r.sub(this.n):r},Ei.prototype.sign=function(r,e,t,i){typeof t=="object"&&(i=t,t=null),i||(i={}),e=this.keyFromPrivate(e,t),r=this._truncateToN(new vt(r,16));for(var s=this.n.byteLength(),a=e.getPrivate().toArray("be",s),f=r.toArray("be",s),u=new Vp({hash:this.hash,entropy:a,nonce:f,pers:i.pers,persEnc:i.persEnc||"utf8"}),d=this.n.sub(new vt(1)),l=0;;l++){var w=i.k?i.k(l):new vt(u.generate(this.n.byteLength()));if(w=this._truncateToN(w,!0),!(w.cmpn(1)<=0||w.cmp(d)>=0)){var x=this.g.mul(w);if(!x.isInfinity()){var C=x.getX(),R=C.umod(this.n);if(R.cmpn(0)!==0){var N=w.invm(this.n).mul(R.mul(e.getPrivate()).iadd(r));if(N=N.umod(this.n),N.cmpn(0)!==0){var T=(x.getY().isOdd()?1:0)|(C.cmp(R)!==0?2:0);return i.canonical&&N.cmp(this.nh)>0&&(N=this.n.sub(N),T^=1),new Rc({r:R,s:N,recoveryParam:T})}}}}}},Ei.prototype.verify=function(r,e,t,i){r=this._truncateToN(new vt(r,16)),t=this.keyFromPublic(t,i),e=new Rc(e,"hex");var s=e.r,a=e.s;if(s.cmpn(1)<0||s.cmp(this.n)>=0||a.cmpn(1)<0||a.cmp(this.n)>=0)return!1;var f=a.invm(this.n),u=f.mul(r).umod(this.n),d=f.mul(s).umod(this.n),l;return this.curve._maxwellTrick?(l=this.g.jmulAdd(u,t.getPublic(),d),l.isInfinity()?!1:l.eqXToP(s)):(l=this.g.mulAdd(u,t.getPublic(),d),l.isInfinity()?!1:l.getX().umod(this.n).cmp(s)===0)},Ei.prototype.recoverPubKey=function(r,e,t,i){ev((3&t)===t,"The recovery param is more than two bits"),e=new Rc(e,i);var s=this.n,a=new vt(r),f=e.r,u=e.s,d=t&1,l=t>>1;if(f.cmp(this.curve.p.umod(this.curve.n))>=0&&l)throw new Error("Unable to find sencond key candinate");l?f=this.curve.pointFromX(f.add(this.curve.n),d):f=this.curve.pointFromX(f,d);var w=e.r.invm(s),x=s.sub(a).mul(w).umod(s),C=u.mul(w).umod(s);return this.g.mulAdd(x,f,C)},Ei.prototype.getKeyRecoveryParam=function(r,e,t,i){if(e=new Rc(e,i),e.recoveryParam!==null)return e.recoveryParam;for(var s=0;s<4;s++){var a;try{a=this.recoverPubKey(r,e,s)}catch{continue}if(a.eq(t))return s}throw new Error("Unable to find valid recovery factor")};var p7=la(function(r,e){var t=e;t.version="6.5.4",t.utils=ci,t.rand=function(){throw new Error("unsupported")},t.curve=Lc,t.curves=Uc,t.ec=d7,t.eddsa=null}),g7=p7.ec;const v7="signing-key/5.7.0",Lu=new Ar(v7);let wu=null;function Wn(){return wu||(wu=new g7("secp256k1")),wu}class b7{constructor(e){La(this,"curve","secp256k1"),La(this,"privateKey",Xr(e)),Z4(this.privateKey)!==32&&Lu.throwArgumentError("invalid private key","privateKey","[[ REDACTED ]]");const t=Wn().keyFromPrivate(tr(this.privateKey));La(this,"publicKey","0x"+t.getPublic(!1,"hex")),La(this,"compressedPublicKey","0x"+t.getPublic(!0,"hex")),La(this,"_isSigningKey",!0)}_addPoint(e){const t=Wn().keyFromPublic(tr(this.publicKey)),i=Wn().keyFromPublic(tr(e));return"0x"+t.pub.add(i.pub).encodeCompressed("hex")}signDigest(e){const t=Wn().keyFromPrivate(tr(this.privateKey)),i=tr(e);i.length!==32&&Lu.throwArgumentError("bad digest length","digest",e);const s=t.sign(i,{canonical:!0});return Sg({recoveryParam:s.recoveryParam,r:hn("0x"+s.r.toString(16),32),s:hn("0x"+s.s.toString(16),32)})}computeSharedSecret(e){const t=Wn().keyFromPrivate(tr(this.privateKey)),i=Wn().keyFromPublic(tr(tv(e)));return hn("0x"+t.derive(i.getPublic()).toString(16),32)}static isSigningKey(e){return!!(e&&e._isSigningKey)}}function m7(r,e){const t=Sg(e),i={r:tr(t.r),s:tr(t.s)};return"0x"+Wn().recoverPubKey(tr(r),i,t.recoveryParam).encode("hex",!1)}function tv(r,e){const t=tr(r);return t.length===32?new b7(t).publicKey:t.length===33?"0x"+Wn().keyFromPublic(t).getPublic(!1,"hex"):t.length===65?Xr(t):Lu.throwArgumentError("invalid public or private key","key","[REDACTED]")}var Qp;(function(r){r[r.legacy=0]="legacy",r[r.eip2930=1]="eip2930",r[r.eip1559=2]="eip1559"})(Qp||(Qp={}));function y7(r){const e=tv(r);return C8(Fp(s0(Fp(e,1)),12))}function w7(r,e){return y7(m7(tr(r),e))}const _7="https://rpc.walletconnect.org/v1";async function A7(r,e,t,i,s,a){switch(t.t){case"eip191":return x7(r,e,t.s);case"eip1271":return await E7(r,e,t.s,i,s,a);default:throw new Error(`verifySignature failed: Attempted to verify CacaoSignature with unknown type: ${t.t}`)}}function x7(r,e,t){return w7(Tg(e),t).toLowerCase()===r.toLowerCase()}async function E7(r,e,t,i,s,a){try{const f="0x1626ba7e",u="0000000000000000000000000000000000000000000000000000000000000040",d="0000000000000000000000000000000000000000000000000000000000000041",l=t.substring(2),w=Tg(e).substring(2),x=f+w+u+d+l,C=await fetch(`${a||_7}/?chainId=${i}&projectId=${s}`,{method:"POST",body:JSON.stringify({id:S7(),jsonrpc:"2.0",method:"eth_call",params:[{to:r,data:x},"latest"]})}),{result:R}=await C.json();return R?R.slice(0,f.length).toLowerCase()===f.toLowerCase():!1}catch(f){return console.error("isValidEip1271Signature: ",f),!1}}function S7(){return Date.now()+Math.floor(Math.random()*1e3)}var M7=Object.defineProperty,I7=Object.defineProperties,P7=Object.getOwnPropertyDescriptors,Yp=Object.getOwnPropertySymbols,R7=Object.prototype.hasOwnProperty,C7=Object.prototype.propertyIsEnumerable,Wp=(r,e,t)=>e in r?M7(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t,N7=(r,e)=>{for(var t in e||(e={}))R7.call(e,t)&&Wp(r,t,e[t]);if(Yp)for(var t of Yp(e))C7.call(e,t)&&Wp(r,t,e[t]);return r},O7=(r,e)=>I7(r,P7(e));const q7="did:pkh:",h0=r=>r==null?void 0:r.split(":"),rv=r=>{const e=r&&h0(r);if(e)return r.includes(q7)?e[3]:e[1]},Xp=r=>{const e=r&&h0(r);if(e)return e[2]+":"+e[3]},Xc=r=>{const e=r&&h0(r);if(e)return e.pop()};async function Zp(r){const{cacao:e,projectId:t}=r,{s:i,p:s}=e,a=iv(s,s.iss),f=Xc(s.iss);return await A7(f,a,i,rv(s.iss),t)}const iv=(r,e)=>{const t=`${r.domain} wants you to sign in with your Ethereum account:`,i=Xc(e);if(!r.aud&&!r.uri)throw new Error("Either `aud` or `uri` is required to construct the message");let s=r.statement||void 0;const a=`URI: ${r.aud||r.uri}`,f=`Version: ${r.version}`,u=`Chain ID: ${rv(e)}`,d=`Nonce: ${r.nonce}`,l=`Issued At: ${r.iat}`,w=r.exp?`Expiration Time: ${r.exp}`:void 0,x=r.nbf?`Not Before: ${r.nbf}`:void 0,C=r.requestId?`Request ID: ${r.requestId}`:void 0,R=r.resources?`Resources:${r.resources.map(T=>`
- ${T}`).join("")}`:void 0,N=zc(r.resources);if(N){const T=no(N);s=$7(s,T)}return[t,i,"",s,"",a,f,u,d,l,w,x,C,R].filter(T=>T!=null).join(`
`)};function T7(r){return Buffer.from(JSON.stringify(r)).toString("base64")}function F7(r){return JSON.parse(Buffer.from(r,"base64").toString("utf-8"))}function Es(r){if(!r)throw new Error("No recap provided, value is undefined");if(!r.att)throw new Error("No `att` property found");const e=Object.keys(r.att);if(!(e!=null&&e.length))throw new Error("No resources found in `att` property");e.forEach(t=>{const i=r.att[t];if(Array.isArray(i))throw new Error(`Resource must be an object: ${t}`);if(typeof i!="object")throw new Error(`Resource must be an object: ${t}`);if(!Object.keys(i).length)throw new Error(`Resource object is empty: ${t}`);Object.keys(i).forEach(s=>{const a=i[s];if(!Array.isArray(a))throw new Error(`Ability limits ${s} must be an array of objects, found: ${a}`);if(!a.length)throw new Error(`Value of ${s} is empty array, must be an array with objects`);a.forEach(f=>{if(typeof f!="object")throw new Error(`Ability limits (${s}) must be an array of objects, found: ${f}`)})})})}function D7(r,e,t,i={}){return t==null||t.sort((s,a)=>s.localeCompare(a)),{att:{[r]:B7(e,t,i)}}}function B7(r,e,t={}){e=e==null?void 0:e.sort((s,a)=>s.localeCompare(a));const i=e.map(s=>({[`${r}/${s}`]:[t]}));return Object.assign({},...i)}function nv(r){return Es(r),`urn:recap:${T7(r).replace(/=/g,"")}`}function no(r){const e=F7(r.replace("urn:recap:",""));return Es(e),e}function L7(r,e,t){const i=D7(r,e,t);return nv(i)}function U7(r){return r&&r.includes("urn:recap:")}function z7(r,e){const t=no(r),i=no(e),s=k7(t,i);return nv(s)}function k7(r,e){Es(r),Es(e);const t=Object.keys(r.att).concat(Object.keys(e.att)).sort((s,a)=>s.localeCompare(a)),i={att:{}};return t.forEach(s=>{var a,f;Object.keys(((a=r.att)==null?void 0:a[s])||{}).concat(Object.keys(((f=e.att)==null?void 0:f[s])||{})).sort((u,d)=>u.localeCompare(d)).forEach(u=>{var d,l;i.att[s]=O7(N7({},i.att[s]),{[u]:((d=r.att[s])==null?void 0:d[u])||((l=e.att[s])==null?void 0:l[u])})})}),i}function $7(r="",e){Es(e);const t="I further authorize the stated URI to perform the following actions on my behalf: ";if(r.includes(t))return r;const i=[];let s=0;Object.keys(e.att).forEach(u=>{const d=Object.keys(e.att[u]).map(x=>({ability:x.split("/")[0],action:x.split("/")[1]}));d.sort((x,C)=>x.action.localeCompare(C.action));const l={};d.forEach(x=>{l[x.ability]||(l[x.ability]=[]),l[x.ability].push(x.action)});const w=Object.keys(l).map(x=>(s++,`(${s}) '${x}': '${l[x].join("', '")}' for '${u}'.`));i.push(w.join(", ").replace(".,","."))});const a=i.join(" "),f=`${t}${a}`;return`${r?r+" ":""}${f}`}function e1(r){var e;const t=no(r);Es(t);const i=(e=t.att)==null?void 0:e.eip155;return i?Object.keys(i).map(s=>s.split("/")[1]):[]}function t1(r){const e=no(r);Es(e);const t=[];return Object.values(e.att).forEach(i=>{Object.values(i).forEach(s=>{var a;(a=s==null?void 0:s[0])!=null&&a.chains&&t.push(s[0].chains)})}),[...new Set(t.flat())]}function zc(r){if(!r)return;const e=r==null?void 0:r[r.length-1];return U7(e)?e:void 0}const sv="base10",zr="base16",es="base64pad",ka="base64url",go="utf8",av=0,Dn=1,vo=2,j7=0,r1=1,to=12,u0=32;function H7(){const r=ag.generateKeyPair();return{privateKey:yr(r.secretKey,zr),publicKey:yr(r.publicKey,zr)}}function Uu(){const r=ho.randomBytes(u0);return yr(r,zr)}function K7(r,e){const t=ag.sharedKey(mr(r,zr),mr(e,zr),!0),i=new $5.HKDF(sf.SHA256,t).expand(u0);return yr(i,zr)}function kc(r){const e=sf.hash(mr(r,zr));return yr(e,zr)}function qn(r){const e=sf.hash(mr(r,go));return yr(e,zr)}function ov(r){return mr(`${r}`,sv)}function Ss(r){return Number(yr(r,sv))}function G7(r){const e=ov(typeof r.type<"u"?r.type:av);if(Ss(e)===Dn&&typeof r.senderPublicKey>"u")throw new Error("Missing sender public key for type 1 envelope");const t=typeof r.senderPublicKey<"u"?mr(r.senderPublicKey,zr):void 0,i=typeof r.iv<"u"?mr(r.iv,zr):ho.randomBytes(to),s=new sg.ChaCha20Poly1305(mr(r.symKey,zr)).seal(i,mr(r.message,go));return cv({type:e,sealed:s,iv:i,senderPublicKey:t,encoding:r.encoding})}function V7(r,e){const t=ov(vo),i=ho.randomBytes(to),s=mr(r,go);return cv({type:t,sealed:s,iv:i,encoding:e})}function J7(r){const e=new sg.ChaCha20Poly1305(mr(r.symKey,zr)),{sealed:t,iv:i}=so({encoded:r.encoded,encoding:r==null?void 0:r.encoding}),s=e.open(i,t);if(s===null)throw new Error("Failed to decrypt");return yr(s,go)}function Q7(r,e){const{sealed:t}=so({encoded:r,encoding:e});return yr(t,go)}function cv(r){const{encoding:e=es}=r;if(Ss(r.type)===vo)return yr(Tc([r.type,r.sealed]),e);if(Ss(r.type)===Dn){if(typeof r.senderPublicKey>"u")throw new Error("Missing sender public key for type 1 envelope");return yr(Tc([r.type,r.senderPublicKey,r.iv,r.sealed]),e)}return yr(Tc([r.type,r.iv,r.sealed]),e)}function so(r){const{encoded:e,encoding:t=es}=r,i=mr(e,t),s=i.slice(j7,r1),a=r1;if(Ss(s)===Dn){const l=a+u0,w=l+to,x=i.slice(a,l),C=i.slice(l,w),R=i.slice(w);return{type:s,sealed:R,iv:C,senderPublicKey:x}}if(Ss(s)===vo){const l=i.slice(a),w=ho.randomBytes(to);return{type:s,sealed:l,iv:w}}const f=a+to,u=i.slice(a,f),d=i.slice(f);return{type:s,sealed:d,iv:u}}function Y7(r,e){const t=so({encoded:r,encoding:e==null?void 0:e.encoding});return fv({type:Ss(t.type),senderPublicKey:typeof t.senderPublicKey<"u"?yr(t.senderPublicKey,zr):void 0,receiverPublicKey:e==null?void 0:e.receiverPublicKey})}function fv(r){const e=(r==null?void 0:r.type)||av;if(e===Dn){if(typeof(r==null?void 0:r.senderPublicKey)>"u")throw new Error("missing sender public key");if(typeof(r==null?void 0:r.receiverPublicKey)>"u")throw new Error("missing receiver public key")}return{type:e,senderPublicKey:r==null?void 0:r.senderPublicKey,receiverPublicKey:r==null?void 0:r.receiverPublicKey}}function i1(r){return r.type===Dn&&typeof r.senderPublicKey=="string"&&typeof r.receiverPublicKey=="string"}function n1(r){return r.type===vo}function W7(r){return new h4.ec("p256").keyFromPublic({x:Buffer.from(r.x,"base64").toString("hex"),y:Buffer.from(r.y,"base64").toString("hex")},"hex")}function X7(r){let e=r.replace(/-/g,"+").replace(/_/g,"/");const t=e.length%4;return t>0&&(e+="=".repeat(4-t)),e}function Z7(r){return Buffer.from(X7(r),"base64")}function e9(r,e){const[t,i,s]=r.split("."),a=Z7(s);if(a.length!==64)throw new Error("Invalid signature length");const f=a.slice(0,32).toString("hex"),u=a.slice(32,64).toString("hex"),d=`${t}.${i}`,l=new sf.SHA256().update(Buffer.from(d)).digest(),w=W7(e),x=Buffer.from(l).toString("hex");if(!w.verify(x,{r:f,s:u}))throw new Error("Invalid signature");return Ou(r).payload}const t9="irn";function zu(r){return(r==null?void 0:r.relay)||{protocol:t9}}function Qa(r){const e=p5[r];if(typeof e>"u")throw new Error(`Relay Protocol not supported: ${r}`);return e}var r9=Object.defineProperty,i9=Object.defineProperties,n9=Object.getOwnPropertyDescriptors,s1=Object.getOwnPropertySymbols,s9=Object.prototype.hasOwnProperty,a9=Object.prototype.propertyIsEnumerable,a1=(r,e,t)=>e in r?r9(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t,o1=(r,e)=>{for(var t in e||(e={}))s9.call(e,t)&&a1(r,t,e[t]);if(s1)for(var t of s1(e))a9.call(e,t)&&a1(r,t,e[t]);return r},o9=(r,e)=>i9(r,n9(e));function c9(r,e="-"){const t={},i="relay"+e;return Object.keys(r).forEach(s=>{if(s.startsWith(i)){const a=s.replace(i,""),f=r[s];t[a]=f}}),t}function c1(r){if(!r.includes("wc:")){const d=_g(r);d!=null&&d.includes("wc:")&&(r=d)}r=r.includes("wc://")?r.replace("wc://",""):r,r=r.includes("wc:")?r.replace("wc:",""):r;const e=r.indexOf(":"),t=r.indexOf("?")!==-1?r.indexOf("?"):void 0,i=r.substring(0,e),s=r.substring(e+1,t).split("@"),a=typeof t<"u"?r.substring(t):"",f=Hc.parse(a),u=typeof f.methods=="string"?f.methods.split(","):void 0;return{protocol:i,topic:f9(s[0]),version:parseInt(s[1],10),symKey:f.symKey,relay:c9(f),methods:u,expiryTimestamp:f.expiryTimestamp?parseInt(f.expiryTimestamp,10):void 0}}function f9(r){return r.startsWith("//")?r.substring(2):r}function h9(r,e="-"){const t="relay",i={};return Object.keys(r).forEach(s=>{const a=t+e+s;r[s]&&(i[a]=r[s])}),i}function f1(r){return`${r.protocol}:${r.topic}@${r.version}?`+Hc.stringify(o1(o9(o1({symKey:r.symKey},h9(r.relay)),{expiryTimestamp:r.expiryTimestamp}),r.methods?{methods:r.methods.join(",")}:{}))}function Cc(r,e,t){return`${r}?wc_ev=${t}&topic=${e}`}function da(r){const e=[];return r.forEach(t=>{const[i,s]=t.split(":");e.push(`${i}:${s}`)}),e}function u9(r){const e=[];return Object.values(r).forEach(t=>{e.push(...da(t.accounts))}),e}function l9(r,e){const t=[];return Object.values(r).forEach(i=>{da(i.accounts).includes(e)&&t.push(...i.methods)}),t}function d9(r,e){const t=[];return Object.values(r).forEach(i=>{da(i.accounts).includes(e)&&t.push(...i.events)}),t}function l0(r){return r.includes(":")}function Ya(r){return l0(r)?r.split(":")[0]:r}function p9(r){const e={};return r==null||r.forEach(t=>{const[i,s]=t.split(":");e[i]||(e[i]={accounts:[],chains:[],events:[]}),e[i].accounts.push(t),e[i].chains.push(`${i}:${s}`)}),e}function h1(r,e){e=e.map(i=>i.replace("did:pkh:",""));const t=p9(e);for(const[i,s]of Object.entries(t))s.methods?s.methods=Dc(s.methods,r):s.methods=r,s.events=["chainChanged","accountsChanged"];return t}const g9={INVALID_METHOD:{message:"Invalid method.",code:1001},INVALID_EVENT:{message:"Invalid event.",code:1002},INVALID_UPDATE_REQUEST:{message:"Invalid update request.",code:1003},INVALID_EXTEND_REQUEST:{message:"Invalid extend request.",code:1004},INVALID_SESSION_SETTLE_REQUEST:{message:"Invalid session settle request.",code:1005},UNAUTHORIZED_METHOD:{message:"Unauthorized method.",code:3001},UNAUTHORIZED_EVENT:{message:"Unauthorized event.",code:3002},UNAUTHORIZED_UPDATE_REQUEST:{message:"Unauthorized update request.",code:3003},UNAUTHORIZED_EXTEND_REQUEST:{message:"Unauthorized extend request.",code:3004},USER_REJECTED:{message:"User rejected.",code:5e3},USER_REJECTED_CHAINS:{message:"User rejected chains.",code:5001},USER_REJECTED_METHODS:{message:"User rejected methods.",code:5002},USER_REJECTED_EVENTS:{message:"User rejected events.",code:5003},UNSUPPORTED_CHAINS:{message:"Unsupported chains.",code:5100},UNSUPPORTED_METHODS:{message:"Unsupported methods.",code:5101},UNSUPPORTED_EVENTS:{message:"Unsupported events.",code:5102},UNSUPPORTED_ACCOUNTS:{message:"Unsupported accounts.",code:5103},UNSUPPORTED_NAMESPACE_KEY:{message:"Unsupported namespace key.",code:5104},USER_DISCONNECTED:{message:"User disconnected.",code:6e3},SESSION_SETTLEMENT_FAILED:{message:"Session settlement failed.",code:7e3},WC_METHOD_UNSUPPORTED:{message:"Unsupported wc_ method.",code:10001}},v9={NOT_INITIALIZED:{message:"Not initialized.",code:1},NO_MATCHING_KEY:{message:"No matching key.",code:2},RESTORE_WILL_OVERRIDE:{message:"Restore will override.",code:3},RESUBSCRIBED:{message:"Resubscribed.",code:4},MISSING_OR_INVALID:{message:"Missing or invalid.",code:5},EXPIRED:{message:"Expired.",code:6},UNKNOWN_TYPE:{message:"Unknown type.",code:7},MISMATCHED_TOPIC:{message:"Mismatched topic.",code:8},NON_CONFORMING_NAMESPACES:{message:"Non conforming namespaces.",code:9}};function Ae(r,e){const{message:t,code:i}=v9[r];return{message:e?`${t} ${e}`:t,code:i}}function Lt(r,e){const{message:t,code:i}=g9[r];return{message:e?`${t} ${e}`:t,code:i}}function pn(r,e){return!!Array.isArray(r)}function ao(r){return Object.getPrototypeOf(r)===Object.prototype&&Object.keys(r).length}function Ur(r){return typeof r>"u"}function ar(r,e){return e&&Ur(r)?!0:typeof r=="string"&&!!r.trim().length}function d0(r,e){return e&&Ur(r)?!0:typeof r=="number"&&!isNaN(r)}function b9(r,e){const{requiredNamespaces:t}=e,i=Object.keys(r.namespaces),s=Object.keys(t);let a=!0;return As(s,i)?(i.forEach(f=>{const{accounts:u,methods:d,events:l}=r.namespaces[f],w=da(u),x=t[f];(!As(pg(f,x),w)||!As(x.methods,d)||!As(x.events,l))&&(a=!1)}),a):!1}function Zc(r){return ar(r,!1)&&r.includes(":")?r.split(":").length===2:!1}function m9(r){if(ar(r,!1)&&r.includes(":")){const e=r.split(":");if(e.length===3){const t=e[0]+":"+e[1];return!!e[2]&&Zc(t)}}return!1}function y9(r){function e(t){try{return typeof new URL(t)<"u"}catch{return!1}}try{if(ar(r,!1)){if(e(r))return!0;const t=_g(r);return e(t)}}catch{}return!1}function w9(r){var e;return(e=r==null?void 0:r.proposer)==null?void 0:e.publicKey}function _9(r){return r==null?void 0:r.topic}function A9(r,e){let t=null;return ar(r==null?void 0:r.publicKey,!1)||(t=Ae("MISSING_OR_INVALID",`${e} controller public key should be a string`)),t}function u1(r){let e=!0;return pn(r)?r.length&&(e=r.every(t=>ar(t,!1))):e=!1,e}function x9(r,e,t){let i=null;return pn(e)&&e.length?e.forEach(s=>{i||Zc(s)||(i=Lt("UNSUPPORTED_CHAINS",`${t}, chain ${s} should be a string and conform to "namespace:chainId" format`))}):Zc(r)||(i=Lt("UNSUPPORTED_CHAINS",`${t}, chains must be defined as "namespace:chainId" e.g. "eip155:1": {...} in the namespace key OR as an array of CAIP-2 chainIds e.g. eip155: { chains: ["eip155:1", "eip155:5"] }`)),i}function E9(r,e,t){let i=null;return Object.entries(r).forEach(([s,a])=>{if(i)return;const f=x9(s,pg(s,a),`${e} ${t}`);f&&(i=f)}),i}function S9(r,e){let t=null;return pn(r)?r.forEach(i=>{t||m9(i)||(t=Lt("UNSUPPORTED_ACCOUNTS",`${e}, account ${i} should be a string and conform to "namespace:chainId:address" format`))}):t=Lt("UNSUPPORTED_ACCOUNTS",`${e}, accounts should be an array of strings conforming to "namespace:chainId:address" format`),t}function M9(r,e){let t=null;return Object.values(r).forEach(i=>{if(t)return;const s=S9(i==null?void 0:i.accounts,`${e} namespace`);s&&(t=s)}),t}function I9(r,e){let t=null;return u1(r==null?void 0:r.methods)?u1(r==null?void 0:r.events)||(t=Lt("UNSUPPORTED_EVENTS",`${e}, events should be an array of strings or empty array for no events`)):t=Lt("UNSUPPORTED_METHODS",`${e}, methods should be an array of strings or empty array for no methods`),t}function hv(r,e){let t=null;return Object.values(r).forEach(i=>{if(t)return;const s=I9(i,`${e}, namespace`);s&&(t=s)}),t}function P9(r,e,t){let i=null;if(r&&ao(r)){const s=hv(r,e);s&&(i=s);const a=E9(r,e,t);a&&(i=a)}else i=Ae("MISSING_OR_INVALID",`${e}, ${t} should be an object with data`);return i}function _u(r,e){let t=null;if(r&&ao(r)){const i=hv(r,e);i&&(t=i);const s=M9(r,e);s&&(t=s)}else t=Ae("MISSING_OR_INVALID",`${e}, namespaces should be an object with data`);return t}function uv(r){return ar(r.protocol,!0)}function R9(r,e){let t=!1;return r?r&&pn(r)&&r.length&&r.forEach(i=>{t=uv(i)}):t=!0,t}function C9(r){return typeof r=="number"}function Wr(r){return typeof r<"u"&&typeof r!==null}function N9(r){return!(!r||typeof r!="object"||!r.code||!d0(r.code,!1)||!r.message||!ar(r.message,!1))}function O9(r){return!(Ur(r)||!ar(r.method,!1))}function q9(r){return!(Ur(r)||Ur(r.result)&&Ur(r.error)||!d0(r.id,!1)||!ar(r.jsonrpc,!1))}function T9(r){return!(Ur(r)||!ar(r.name,!1))}function l1(r,e){return!(!Zc(e)||!u9(r).includes(e))}function F9(r,e,t){return ar(t,!1)?l9(r,e).includes(t):!1}function D9(r,e,t){return ar(t,!1)?d9(r,e).includes(t):!1}function d1(r,e,t){let i=null;const s=B9(r),a=L9(e),f=Object.keys(s),u=Object.keys(a),d=p1(Object.keys(r)),l=p1(Object.keys(e)),w=d.filter(x=>!l.includes(x));return w.length&&(i=Ae("NON_CONFORMING_NAMESPACES",`${t} namespaces keys don't satisfy requiredNamespaces.
      Required: ${w.toString()}
      Received: ${Object.keys(e).toString()}`)),As(f,u)||(i=Ae("NON_CONFORMING_NAMESPACES",`${t} namespaces chains don't satisfy required namespaces.
      Required: ${f.toString()}
      Approved: ${u.toString()}`)),Object.keys(e).forEach(x=>{if(!x.includes(":")||i)return;const C=da(e[x].accounts);C.includes(x)||(i=Ae("NON_CONFORMING_NAMESPACES",`${t} namespaces accounts don't satisfy namespace accounts for ${x}
        Required: ${x}
        Approved: ${C.toString()}`))}),f.forEach(x=>{i||(As(s[x].methods,a[x].methods)?As(s[x].events,a[x].events)||(i=Ae("NON_CONFORMING_NAMESPACES",`${t} namespaces events don't satisfy namespace events for ${x}`)):i=Ae("NON_CONFORMING_NAMESPACES",`${t} namespaces methods don't satisfy namespace methods for ${x}`))}),i}function B9(r){const e={};return Object.keys(r).forEach(t=>{var i;t.includes(":")?e[t]=r[t]:(i=r[t].chains)==null||i.forEach(s=>{e[s]={methods:r[t].methods,events:r[t].events}})}),e}function p1(r){return[...new Set(r.map(e=>e.includes(":")?e.split(":")[0]:e))]}function L9(r){const e={};return Object.keys(r).forEach(t=>{if(t.includes(":"))e[t]=r[t];else{const i=da(r[t].accounts);i==null||i.forEach(s=>{e[s]={accounts:r[t].accounts.filter(a=>a.includes(`${s}:`)),methods:r[t].methods,events:r[t].events}})}}),e}function U9(r,e){return d0(r,!1)&&r<=e.max&&r>=e.min}function g1(){const r=lo();return new Promise(e=>{switch(r){case ai.browser:e(z9());break;case ai.reactNative:e(k9());break;case ai.node:e($9());break;default:e(!0)}})}function z9(){return uo()&&(navigator==null?void 0:navigator.onLine)}async function k9(){if(ca()&&typeof global<"u"&&global!=null&&global.NetInfo){const r=await(global==null?void 0:global.NetInfo.fetch());return r==null?void 0:r.isConnected}return!0}function $9(){return!0}function j9(r){switch(lo()){case ai.browser:H9(r);break;case ai.reactNative:K9(r);break}}function H9(r){!ca()&&uo()&&(window.addEventListener("online",()=>r(!0)),window.addEventListener("offline",()=>r(!1)))}function K9(r){ca()&&typeof global<"u"&&global!=null&&global.NetInfo&&(global==null||global.NetInfo.addEventListener(e=>r(e==null?void 0:e.isConnected)))}const Au={};class $a{static get(e){return Au[e]}static set(e,t){Au[e]=t}static delete(e){delete Au[e]}}class G9 extends oa{constructor(e){super(),this.opts=e,this.protocol="wc",this.version=2}}let V9=class extends oa{constructor(e,t){super(),this.core=e,this.logger=t,this.records=new Map}},J9=class{constructor(e,t){this.logger=e,this.core=t}},Q9=class extends oa{constructor(e,t){super(),this.relayer=e,this.logger=t}},Y9=class extends oa{constructor(e){super()}},W9=class{constructor(e,t,i,s){this.core=e,this.logger=t,this.name=i}};class X9 extends oa{constructor(e,t){super(),this.relayer=e,this.logger=t}}let Z9=class extends oa{constructor(e,t){super(),this.core=e,this.logger=t}},e_=class{constructor(e,t,i){this.core=e,this.logger=t,this.store=i}},t_=class{constructor(e,t){this.projectId=e,this.logger=t}},r_=class{constructor(e,t,i){this.core=e,this.logger=t,this.telemetryEnabled=i}},i_=class{constructor(e){this.opts=e,this.protocol="wc",this.version=2}},n_=class{constructor(e){this.client=e}};const s_=()=>typeof WebSocket<"u"?WebSocket:typeof global<"u"&&typeof global.WebSocket<"u"?global.WebSocket:typeof window<"u"&&typeof window.WebSocket<"u"?window.WebSocket:typeof self<"u"&&typeof self.WebSocket<"u"?self.WebSocket:require("ws"),a_=()=>typeof WebSocket<"u"||typeof global<"u"&&typeof global.WebSocket<"u"||typeof window<"u"&&typeof window.WebSocket<"u"||typeof self<"u"&&typeof self.WebSocket<"u",v1=r=>r.split("?")[0],b1=10,o_=s_();class c_{constructor(e){if(this.url=e,this.events=new Bn.EventEmitter,this.registering=!1,!md(e))throw new Error(`Provided URL is not compatible with WebSocket connection: ${e}`);this.url=e}get connected(){return typeof this.socket<"u"}get connecting(){return this.registering}on(e,t){this.events.on(e,t)}once(e,t){this.events.once(e,t)}off(e,t){this.events.off(e,t)}removeListener(e,t){this.events.removeListener(e,t)}async open(e=this.url){await this.register(e)}async close(){return new Promise((e,t)=>{if(typeof this.socket>"u"){t(new Error("Connection already closed"));return}this.socket.onclose=i=>{this.onClose(i),e()},this.socket.close()})}async send(e){typeof this.socket>"u"&&(this.socket=await this.register());try{this.socket.send(Vu(e))}catch(t){this.onError(e.id,t)}}register(e=this.url){if(!md(e))throw new Error(`Provided URL is not compatible with WebSocket connection: ${e}`);if(this.registering){const t=this.events.getMaxListeners();return(this.events.listenerCount("register_error")>=t||this.events.listenerCount("open")>=t)&&this.events.setMaxListeners(t+1),new Promise((i,s)=>{this.events.once("register_error",a=>{this.resetMaxListeners(),s(a)}),this.events.once("open",()=>{if(this.resetMaxListeners(),typeof this.socket>"u")return s(new Error("WebSocket connection is missing or invalid"));i(this.socket)})})}return this.url=e,this.registering=!0,new Promise((t,i)=>{const s=new URLSearchParams(e).get("origin"),a=v5.isReactNative()?{headers:{origin:s}}:{rejectUnauthorized:!b5(e)},f=new o_(e,[],a);a_()?f.onerror=u=>{const d=u;i(this.emitError(d.error))}:f.on("error",u=>{i(this.emitError(u))}),f.onopen=()=>{this.onOpen(f),t(f)}})}onOpen(e){e.onmessage=t=>this.onPayload(t),e.onclose=t=>this.onClose(t),this.socket=e,this.registering=!1,this.events.emit("open")}onClose(e){this.socket=void 0,this.registering=!1,this.events.emit("close",e)}onPayload(e){if(typeof e.data>"u")return;const t=typeof e.data=="string"?jc(e.data):e.data;this.events.emit("payload",t)}onError(e,t){const i=this.parseError(t),s=i.message||i.toString(),a=Ju(e,s);this.events.emit("payload",a)}parseError(e,t=this.url){return m5(e,v1(t),"WS")}resetMaxListeners(){this.events.getMaxListeners()>b1&&this.events.setMaxListeners(b1)}emitError(e){const t=this.parseError(new Error((e==null?void 0:e.message)||`WebSocket connection failed for host: ${v1(this.url)}`));return this.events.emit("register_error",t),t}}var Wa={exports:{}};Wa.exports;var m1;function f_(){return m1||(m1=1,function(r,e){var t=200,i="__lodash_hash_undefined__",s=1,a=2,f=9007199254740991,u="[object Arguments]",d="[object Array]",l="[object AsyncFunction]",w="[object Boolean]",x="[object Date]",C="[object Error]",R="[object Function]",N="[object GeneratorFunction]",T="[object Map]",U="[object Number]",Q="[object Null]",F="[object Object]",V="[object Promise]",D="[object Proxy]",B="[object RegExp]",H="[object Set]",E="[object String]",$="[object Symbol]",ne="[object Undefined]",fe="[object WeakMap]",z="[object ArrayBuffer]",y="[object DataView]",c="[object Float32Array]",h="[object Float64Array]",p="[object Int8Array]",m="[object Int16Array]",_="[object Int32Array]",I="[object Uint8Array]",S="[object Uint8ClampedArray]",v="[object Uint16Array]",b="[object Uint32Array]",O=/[\\^$.*+?()[\]{}|]/g,W=/^\[object .+?Constructor\]$/,te=/^(?:0|[1-9]\d*)$/,P={};P[c]=P[h]=P[p]=P[m]=P[_]=P[I]=P[S]=P[v]=P[b]=!0,P[u]=P[d]=P[z]=P[w]=P[y]=P[x]=P[C]=P[R]=P[T]=P[U]=P[F]=P[B]=P[H]=P[E]=P[fe]=!1;var ee=typeof wc=="object"&&wc&&wc.Object===Object&&wc,k=typeof self=="object"&&self&&self.Object===Object&&self,G=ee||k||Function("return this")(),J=e&&!e.nodeType&&e,A=J&&!0&&r&&!r.nodeType&&r,K=A&&A.exports===J,ae=K&&ee.process,oe=function(){try{return ae&&ae.binding&&ae.binding("util")}catch{}}(),he=oe&&oe.isTypedArray;function be(Y,re){for(var pe=-1,Ue=Y==null?0:Y.length,$t=0,pt=[];++pe<Ue;){var Vt=Y[pe];re(Vt,pe,Y)&&(pt[$t++]=Vt)}return pt}function we(Y,re){for(var pe=-1,Ue=re.length,$t=Y.length;++pe<Ue;)Y[$t+pe]=re[pe];return Y}function Me(Y,re){for(var pe=-1,Ue=Y==null?0:Y.length;++pe<Ue;)if(re(Y[pe],pe,Y))return!0;return!1}function Qe(Y,re){for(var pe=-1,Ue=Array(Y);++pe<Y;)Ue[pe]=re(pe);return Ue}function Ce(Y){return function(re){return Y(re)}}function Te(Y,re){return Y.has(re)}function Se(Y,re){return Y==null?void 0:Y[re]}function me(Y){var re=-1,pe=Array(Y.size);return Y.forEach(function(Ue,$t){pe[++re]=[$t,Ue]}),pe}function Ne(Y,re){return function(pe){return Y(re(pe))}}function Oe(Y){var re=-1,pe=Array(Y.size);return Y.forEach(function(Ue){pe[++re]=Ue}),pe}var ve=Array.prototype,qe=Function.prototype,xe=Object.prototype,ye=G["__core-js_shared__"],Le=qe.toString,Pe=xe.hasOwnProperty,_e=function(){var Y=/[^.]+$/.exec(ye&&ye.keys&&ye.keys.IE_PROTO||"");return Y?"Symbol(src)_1."+Y:""}(),He=xe.toString,Ge=RegExp("^"+Le.call(Pe).replace(O,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Ee=K?G.Buffer:void 0,Ke=G.Symbol,ut=G.Uint8Array,Ve=xe.propertyIsEnumerable,wt=ve.splice,lt=Ke?Ke.toStringTag:void 0,Ye=Object.getOwnPropertySymbols,xt=Ee?Ee.isBuffer:void 0,Mt=Ne(Object.keys,Object),Fe=ei(G,"DataView"),Xe=ei(G,"Map"),tt=ei(G,"Promise"),De=ei(G,"Set"),et=ei(G,"WeakMap"),Ze=ei(Object,"create"),ze=yn(Fe),ft=yn(Xe),rt=yn(tt),ke=yn(De),it=yn(et),st=Ke?Ke.prototype:void 0,Be=st?st.valueOf:void 0;function We(Y){var re=-1,pe=Y==null?0:Y.length;for(this.clear();++re<pe;){var Ue=Y[re];this.set(Ue[0],Ue[1])}}function ht(){this.__data__=Ze?Ze(null):{},this.size=0}function $e(Y){var re=this.has(Y)&&delete this.__data__[Y];return this.size-=re?1:0,re}function Ot(Y){var re=this.__data__;if(Ze){var pe=re[Y];return pe===i?void 0:pe}return Pe.call(re,Y)?re[Y]:void 0}function qt(Y){var re=this.__data__;return Ze?re[Y]!==void 0:Pe.call(re,Y)}function at(Y,re){var pe=this.__data__;return this.size+=this.has(Y)?0:1,pe[Y]=Ze&&re===void 0?i:re,this}We.prototype.clear=ht,We.prototype.delete=$e,We.prototype.get=Ot,We.prototype.has=qt,We.prototype.set=at;function bt(Y){var re=-1,pe=Y==null?0:Y.length;for(this.clear();++re<pe;){var Ue=Y[re];this.set(Ue[0],Ue[1])}}function Er(){this.__data__=[],this.size=0}function Sr(Y){var re=this.__data__,pe=rs(re,Y);if(pe<0)return!1;var Ue=re.length-1;return pe==Ue?re.pop():wt.call(re,pe,1),--this.size,!0}function Mr(Y){var re=this.__data__,pe=rs(re,Y);return pe<0?void 0:re[pe][1]}function Ir(Y){return rs(this.__data__,Y)>-1}function Pr(Y,re){var pe=this.__data__,Ue=rs(pe,Y);return Ue<0?(++this.size,pe.push([Y,re])):pe[Ue][1]=re,this}bt.prototype.clear=Er,bt.prototype.delete=Sr,bt.prototype.get=Mr,bt.prototype.has=Ir,bt.prototype.set=Pr;function Xt(Y){var re=-1,pe=Y==null?0:Y.length;for(this.clear();++re<pe;){var Ue=Y[re];this.set(Ue[0],Ue[1])}}function $r(){this.size=0,this.__data__={hash:new We,map:new(Xe||bt),string:new We}}function Ii(Y){var re=Un(this,Y).delete(Y);return this.size-=re?1:0,re}function jr(Y){return Un(this,Y).get(Y)}function Pi(Y){return Un(this,Y).has(Y)}function Ri(Y,re){var pe=Un(this,Y),Ue=pe.size;return pe.set(Y,re),this.size+=pe.size==Ue?0:1,this}Xt.prototype.clear=$r,Xt.prototype.delete=Ii,Xt.prototype.get=jr,Xt.prototype.has=Pi,Xt.prototype.set=Ri;function Hr(Y){var re=-1,pe=Y==null?0:Y.length;for(this.__data__=new Xt;++re<pe;)this.add(Y[re])}function hi(Y){return this.__data__.set(Y,i),this}function ui(Y){return this.__data__.has(Y)}Hr.prototype.add=Hr.prototype.push=hi,Hr.prototype.has=ui;function fr(Y){var re=this.__data__=new bt(Y);this.size=re.size}function Ci(){this.__data__=new bt,this.size=0}function Ni(Y){var re=this.__data__,pe=re.delete(Y);return this.size=re.size,pe}function Oi(Y){return this.__data__.get(Y)}function ts(Y){return this.__data__.has(Y)}function mo(Y,re){var pe=this.__data__;if(pe instanceof bt){var Ue=pe.__data__;if(!Xe||Ue.length<t-1)return Ue.push([Y,re]),this.size=++pe.size,this;pe=this.__data__=new Xt(Ue)}return pe.set(Y,re),this.size=pe.size,this}fr.prototype.clear=Ci,fr.prototype.delete=Ni,fr.prototype.get=Oi,fr.prototype.has=ts,fr.prototype.set=mo;function yo(Y,re){var pe=qs(Y),Ue=!pe&&No(Y),$t=!pe&&!Ue&&ba(Y),pt=!pe&&!Ue&&!$t&&To(Y),Vt=pe||Ue||$t||pt,or=Vt?Qe(Y.length,String):[],Ct=or.length;for(var jt in Y)Pe.call(Y,jt)&&!(Vt&&(jt=="length"||$t&&(jt=="offset"||jt=="parent")||pt&&(jt=="buffer"||jt=="byteLength"||jt=="byteOffset")||Mo(jt,Ct)))&&or.push(jt);return or}function rs(Y,re){for(var pe=Y.length;pe--;)if(Co(Y[pe][0],re))return pe;return-1}function ga(Y,re,pe){var Ue=re(Y);return qs(Y)?Ue:we(Ue,pe(Y))}function is(Y){return Y==null?Y===void 0?ne:Q:lt&&lt in Object(Y)?Eo(Y):df(Y)}function va(Y){return ss(Y)&&is(Y)==u}function ns(Y,re,pe,Ue,$t){return Y===re?!0:Y==null||re==null||!ss(Y)&&!ss(re)?Y!==Y&&re!==re:wo(Y,re,pe,Ue,ns,$t)}function wo(Y,re,pe,Ue,$t,pt){var Vt=qs(Y),or=qs(re),Ct=Vt?d:Qi(Y),jt=or?d:Qi(re);Ct=Ct==u?F:Ct,jt=jt==u?F:jt;var rr=Ct==F,Kr=jt==F,cr=Ct==jt;if(cr&&ba(Y)){if(!ba(re))return!1;Vt=!0,rr=!1}if(cr&&!rr)return pt||(pt=new fr),Vt||To(Y)?Ns(Y,re,pe,Ue,$t,pt):lf(Y,re,Ct,pe,Ue,$t,pt);if(!(pe&s)){var Jt=rr&&Pe.call(Y,"__wrapped__"),Or=Kr&&Pe.call(re,"__wrapped__");if(Jt||Or){var qi=Jt?Y.value():Y,li=Or?re.value():re;return pt||(pt=new fr),$t(qi,li,pe,Ue,pt)}}return cr?(pt||(pt=new fr),xo(Y,re,pe,Ue,$t,pt)):!1}function uf(Y){if(!qo(Y)||Po(Y))return!1;var re=Ts(Y)?Ge:W;return re.test(yn(Y))}function _o(Y){return ss(Y)&&Oo(Y.length)&&!!P[is(Y)]}function Ao(Y){if(!Ro(Y))return Mt(Y);var re=[];for(var pe in Object(Y))Pe.call(Y,pe)&&pe!="constructor"&&re.push(pe);return re}function Ns(Y,re,pe,Ue,$t,pt){var Vt=pe&s,or=Y.length,Ct=re.length;if(or!=Ct&&!(Vt&&Ct>or))return!1;var jt=pt.get(Y);if(jt&&pt.get(re))return jt==re;var rr=-1,Kr=!0,cr=pe&a?new Hr:void 0;for(pt.set(Y,re),pt.set(re,Y);++rr<or;){var Jt=Y[rr],Or=re[rr];if(Ue)var qi=Vt?Ue(Or,Jt,rr,re,Y,pt):Ue(Jt,Or,rr,Y,re,pt);if(qi!==void 0){if(qi)continue;Kr=!1;break}if(cr){if(!Me(re,function(li,Yi){if(!Te(cr,Yi)&&(Jt===li||$t(Jt,li,pe,Ue,pt)))return cr.push(Yi)})){Kr=!1;break}}else if(!(Jt===Or||$t(Jt,Or,pe,Ue,pt))){Kr=!1;break}}return pt.delete(Y),pt.delete(re),Kr}function lf(Y,re,pe,Ue,$t,pt,Vt){switch(pe){case y:if(Y.byteLength!=re.byteLength||Y.byteOffset!=re.byteOffset)return!1;Y=Y.buffer,re=re.buffer;case z:return!(Y.byteLength!=re.byteLength||!pt(new ut(Y),new ut(re)));case w:case x:case U:return Co(+Y,+re);case C:return Y.name==re.name&&Y.message==re.message;case B:case E:return Y==re+"";case T:var or=me;case H:var Ct=Ue&s;if(or||(or=Oe),Y.size!=re.size&&!Ct)return!1;var jt=Vt.get(Y);if(jt)return jt==re;Ue|=a,Vt.set(Y,re);var rr=Ns(or(Y),or(re),Ue,$t,pt,Vt);return Vt.delete(Y),rr;case $:if(Be)return Be.call(Y)==Be.call(re)}return!1}function xo(Y,re,pe,Ue,$t,pt){var Vt=pe&s,or=Os(Y),Ct=or.length,jt=Os(re),rr=jt.length;if(Ct!=rr&&!Vt)return!1;for(var Kr=Ct;Kr--;){var cr=or[Kr];if(!(Vt?cr in re:Pe.call(re,cr)))return!1}var Jt=pt.get(Y);if(Jt&&pt.get(re))return Jt==re;var Or=!0;pt.set(Y,re),pt.set(re,Y);for(var qi=Vt;++Kr<Ct;){cr=or[Kr];var li=Y[cr],Yi=re[cr];if(Ue)var ma=Vt?Ue(Yi,li,cr,re,Y,pt):Ue(li,Yi,cr,Y,re,pt);if(!(ma===void 0?li===Yi||$t(li,Yi,pe,Ue,pt):ma)){Or=!1;break}qi||(qi=cr=="constructor")}if(Or&&!qi){var as=Y.constructor,pr=re.constructor;as!=pr&&"constructor"in Y&&"constructor"in re&&!(typeof as=="function"&&as instanceof as&&typeof pr=="function"&&pr instanceof pr)&&(Or=!1)}return pt.delete(Y),pt.delete(re),Or}function Os(Y){return ga(Y,vf,So)}function Un(Y,re){var pe=Y.__data__;return Io(re)?pe[typeof re=="string"?"string":"hash"]:pe.map}function ei(Y,re){var pe=Se(Y,re);return uf(pe)?pe:void 0}function Eo(Y){var re=Pe.call(Y,lt),pe=Y[lt];try{Y[lt]=void 0;var Ue=!0}catch{}var $t=He.call(Y);return Ue&&(re?Y[lt]=pe:delete Y[lt]),$t}var So=Ye?function(Y){return Y==null?[]:(Y=Object(Y),be(Ye(Y),function(re){return Ve.call(Y,re)}))}:kt,Qi=is;(Fe&&Qi(new Fe(new ArrayBuffer(1)))!=y||Xe&&Qi(new Xe)!=T||tt&&Qi(tt.resolve())!=V||De&&Qi(new De)!=H||et&&Qi(new et)!=fe)&&(Qi=function(Y){var re=is(Y),pe=re==F?Y.constructor:void 0,Ue=pe?yn(pe):"";if(Ue)switch(Ue){case ze:return y;case ft:return T;case rt:return V;case ke:return H;case it:return fe}return re});function Mo(Y,re){return re=re??f,!!re&&(typeof Y=="number"||te.test(Y))&&Y>-1&&Y%1==0&&Y<re}function Io(Y){var re=typeof Y;return re=="string"||re=="number"||re=="symbol"||re=="boolean"?Y!=="__proto__":Y===null}function Po(Y){return!!_e&&_e in Y}function Ro(Y){var re=Y&&Y.constructor,pe=typeof re=="function"&&re.prototype||xe;return Y===pe}function df(Y){return He.call(Y)}function yn(Y){if(Y!=null){try{return Le.call(Y)}catch{}try{return Y+""}catch{}}return""}function Co(Y,re){return Y===re||Y!==Y&&re!==re}var No=va(function(){return arguments}())?va:function(Y){return ss(Y)&&Pe.call(Y,"callee")&&!Ve.call(Y,"callee")},qs=Array.isArray;function pf(Y){return Y!=null&&Oo(Y.length)&&!Ts(Y)}var ba=xt||Ut;function gf(Y,re){return ns(Y,re)}function Ts(Y){if(!qo(Y))return!1;var re=is(Y);return re==R||re==N||re==l||re==D}function Oo(Y){return typeof Y=="number"&&Y>-1&&Y%1==0&&Y<=f}function qo(Y){var re=typeof Y;return Y!=null&&(re=="object"||re=="function")}function ss(Y){return Y!=null&&typeof Y=="object"}var To=he?Ce(he):_o;function vf(Y){return pf(Y)?yo(Y):Ao(Y)}function kt(){return[]}function Ut(){return!1}r.exports=gf}(Wa,Wa.exports)),Wa.exports}var h_=f_();const u_=y5(h_),lv="wc",dv=2,pv="core",gn=`${lv}@2:${pv}:`,l_={logger:"error"},d_={database:":memory:"},p_="crypto",y1="client_ed25519_seed",g_=Ie.ONE_DAY,v_="keychain",b_="0.3",m_="messages",y_="0.3",w_=Ie.SIX_HOURS,__="publisher",gv="irn",A_="error",vv="wss://relay.walletconnect.org",x_="relayer",Br={message:"relayer_message",message_ack:"relayer_message_ack",connect:"relayer_connect",disconnect:"relayer_disconnect",error:"relayer_error",connection_stalled:"relayer_connection_stalled",transport_closed:"relayer_transport_closed",publish:"relayer_publish"},E_="_subscription",Ai={payload:"payload",connect:"connect",disconnect:"disconnect",error:"error"},S_=.1,ku="2.17.0",Kt={link_mode:"link_mode",relay:"relay"},M_="0.3",I_="WALLETCONNECT_CLIENT_ID",w1="WALLETCONNECT_LINK_MODE_APPS",on={created:"subscription_created",deleted:"subscription_deleted",sync:"subscription_sync",resubscribed:"subscription_resubscribed"},P_="subscription",R_="0.3",C_=Ie.FIVE_SECONDS*1e3,N_="pairing",O_="0.3",ja={wc_pairingDelete:{req:{ttl:Ie.ONE_DAY,prompt:!1,tag:1e3},res:{ttl:Ie.ONE_DAY,prompt:!1,tag:1001}},wc_pairingPing:{req:{ttl:Ie.THIRTY_SECONDS,prompt:!1,tag:1002},res:{ttl:Ie.THIRTY_SECONDS,prompt:!1,tag:1003}},unregistered_method:{req:{ttl:Ie.ONE_DAY,prompt:!1,tag:0},res:{ttl:Ie.ONE_DAY,prompt:!1,tag:0}}},ws={create:"pairing_create",expire:"pairing_expire",delete:"pairing_delete",ping:"pairing_ping"},Ui={created:"history_created",updated:"history_updated",deleted:"history_deleted",sync:"history_sync"},q_="history",T_="0.3",F_="expirer",xi={created:"expirer_created",deleted:"expirer_deleted",expired:"expirer_expired",sync:"expirer_sync"},D_="0.3",B_="verify-api",L_="https://verify.walletconnect.com",bv="https://verify.walletconnect.org",ro=bv,U_=`${ro}/v3`,z_=[L_,bv],k_="echo",$_="https://echo.walletconnect.com",rn={pairing_started:"pairing_started",pairing_uri_validation_success:"pairing_uri_validation_success",pairing_uri_not_expired:"pairing_uri_not_expired",store_new_pairing:"store_new_pairing",subscribing_pairing_topic:"subscribing_pairing_topic",subscribe_pairing_topic_success:"subscribe_pairing_topic_success",existing_pairing:"existing_pairing",pairing_not_expired:"pairing_not_expired",emit_inactive_pairing:"emit_inactive_pairing",emit_session_proposal:"emit_session_proposal",subscribing_to_pairing_topic:"subscribing_to_pairing_topic"},Nn={no_wss_connection:"no_wss_connection",no_internet_connection:"no_internet_connection",malformed_pairing_uri:"malformed_pairing_uri",active_pairing_already_exists:"active_pairing_already_exists",subscribe_pairing_topic_failure:"subscribe_pairing_topic_failure",pairing_expired:"pairing_expired",proposal_expired:"proposal_expired",proposal_listener_not_found:"proposal_listener_not_found"},zi={session_approve_started:"session_approve_started",proposal_not_expired:"proposal_not_expired",session_namespaces_validation_success:"session_namespaces_validation_success",create_session_topic:"create_session_topic",subscribing_session_topic:"subscribing_session_topic",subscribe_session_topic_success:"subscribe_session_topic_success",publishing_session_approve:"publishing_session_approve",session_approve_publish_success:"session_approve_publish_success",store_session:"store_session",publishing_session_settle:"publishing_session_settle",session_settle_publish_success:"session_settle_publish_success"},bs={no_internet_connection:"no_internet_connection",no_wss_connection:"no_wss_connection",proposal_expired:"proposal_expired",subscribe_session_topic_failure:"subscribe_session_topic_failure",session_approve_publish_failure:"session_approve_publish_failure",session_settle_publish_failure:"session_settle_publish_failure",session_approve_namespace_validation_failure:"session_approve_namespace_validation_failure",proposal_not_found:"proposal_not_found"},ms={authenticated_session_approve_started:"authenticated_session_approve_started",create_authenticated_session_topic:"create_authenticated_session_topic",cacaos_verified:"cacaos_verified",store_authenticated_session:"store_authenticated_session",subscribing_authenticated_session_topic:"subscribing_authenticated_session_topic",subscribe_authenticated_session_topic_success:"subscribe_authenticated_session_topic_success",publishing_authenticated_session_approve:"publishing_authenticated_session_approve"},Ha={no_internet_connection:"no_internet_connection",invalid_cacao:"invalid_cacao",subscribe_authenticated_session_topic_failure:"subscribe_authenticated_session_topic_failure",authenticated_session_approve_publish_failure:"authenticated_session_approve_publish_failure",authenticated_session_pending_request_not_found:"authenticated_session_pending_request_not_found"},j_=.1,H_="event-client",K_=86400,G_="https://pulse.walletconnect.org/batch";function V_(r,e){if(r.length>=255)throw new TypeError("Alphabet too long");for(var t=new Uint8Array(256),i=0;i<t.length;i++)t[i]=255;for(var s=0;s<r.length;s++){var a=r.charAt(s),f=a.charCodeAt(0);if(t[f]!==255)throw new TypeError(a+" is ambiguous");t[f]=s}var u=r.length,d=r.charAt(0),l=Math.log(u)/Math.log(256),w=Math.log(256)/Math.log(u);function x(N){if(N instanceof Uint8Array||(ArrayBuffer.isView(N)?N=new Uint8Array(N.buffer,N.byteOffset,N.byteLength):Array.isArray(N)&&(N=Uint8Array.from(N))),!(N instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(N.length===0)return"";for(var T=0,U=0,Q=0,F=N.length;Q!==F&&N[Q]===0;)Q++,T++;for(var V=(F-Q)*w+1>>>0,D=new Uint8Array(V);Q!==F;){for(var B=N[Q],H=0,E=V-1;(B!==0||H<U)&&E!==-1;E--,H++)B+=256*D[E]>>>0,D[E]=B%u>>>0,B=B/u>>>0;if(B!==0)throw new Error("Non-zero carry");U=H,Q++}for(var $=V-U;$!==V&&D[$]===0;)$++;for(var ne=d.repeat(T);$<V;++$)ne+=r.charAt(D[$]);return ne}function C(N){if(typeof N!="string")throw new TypeError("Expected String");if(N.length===0)return new Uint8Array;var T=0;if(N[T]!==" "){for(var U=0,Q=0;N[T]===d;)U++,T++;for(var F=(N.length-T)*l+1>>>0,V=new Uint8Array(F);N[T];){var D=t[N.charCodeAt(T)];if(D===255)return;for(var B=0,H=F-1;(D!==0||B<Q)&&H!==-1;H--,B++)D+=u*V[H]>>>0,V[H]=D%256>>>0,D=D/256>>>0;if(D!==0)throw new Error("Non-zero carry");Q=B,T++}if(N[T]!==" "){for(var E=F-Q;E!==F&&V[E]===0;)E++;for(var $=new Uint8Array(U+(F-E)),ne=U;E!==F;)$[ne++]=V[E++];return $}}}function R(N){var T=C(N);if(T)return T;throw new Error(`Non-${e} character`)}return{encode:x,decodeUnsafe:C,decode:R}}var J_=V_,Q_=J_;const mv=r=>{if(r instanceof Uint8Array&&r.constructor.name==="Uint8Array")return r;if(r instanceof ArrayBuffer)return new Uint8Array(r);if(ArrayBuffer.isView(r))return new Uint8Array(r.buffer,r.byteOffset,r.byteLength);throw new Error("Unknown type, must be binary type")},Y_=r=>new TextEncoder().encode(r),W_=r=>new TextDecoder().decode(r);class X_{constructor(e,t,i){this.name=e,this.prefix=t,this.baseEncode=i}encode(e){if(e instanceof Uint8Array)return`${this.prefix}${this.baseEncode(e)}`;throw Error("Unknown type, must be binary type")}}class Z_{constructor(e,t,i){if(this.name=e,this.prefix=t,t.codePointAt(0)===void 0)throw new Error("Invalid prefix character");this.prefixCodePoint=t.codePointAt(0),this.baseDecode=i}decode(e){if(typeof e=="string"){if(e.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(e)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(e.slice(this.prefix.length))}else throw Error("Can only multibase decode strings")}or(e){return yv(this,e)}}class eA{constructor(e){this.decoders=e}or(e){return yv(this,e)}decode(e){const t=e[0],i=this.decoders[t];if(i)return i.decode(e);throw RangeError(`Unable to decode multibase string ${JSON.stringify(e)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}}const yv=(r,e)=>new eA({...r.decoders||{[r.prefix]:r},...e.decoders||{[e.prefix]:e}});class tA{constructor(e,t,i,s){this.name=e,this.prefix=t,this.baseEncode=i,this.baseDecode=s,this.encoder=new X_(e,t,i),this.decoder=new Z_(e,t,s)}encode(e){return this.encoder.encode(e)}decode(e){return this.decoder.decode(e)}}const ff=({name:r,prefix:e,encode:t,decode:i})=>new tA(r,e,t,i),bo=({prefix:r,name:e,alphabet:t})=>{const{encode:i,decode:s}=Q_(t,e);return ff({prefix:r,name:e,encode:i,decode:a=>mv(s(a))})},rA=(r,e,t,i)=>{const s={};for(let w=0;w<e.length;++w)s[e[w]]=w;let a=r.length;for(;r[a-1]==="=";)--a;const f=new Uint8Array(a*t/8|0);let u=0,d=0,l=0;for(let w=0;w<a;++w){const x=s[r[w]];if(x===void 0)throw new SyntaxError(`Non-${i} character`);d=d<<t|x,u+=t,u>=8&&(u-=8,f[l++]=255&d>>u)}if(u>=t||255&d<<8-u)throw new SyntaxError("Unexpected end of data");return f},iA=(r,e,t)=>{const i=e[e.length-1]==="=",s=(1<<t)-1;let a="",f=0,u=0;for(let d=0;d<r.length;++d)for(u=u<<8|r[d],f+=8;f>t;)f-=t,a+=e[s&u>>f];if(f&&(a+=e[s&u<<t-f]),i)for(;a.length*t&7;)a+="=";return a},xr=({name:r,prefix:e,bitsPerChar:t,alphabet:i})=>ff({prefix:e,name:r,encode(s){return iA(s,i,t)},decode(s){return rA(s,i,t,r)}}),nA=ff({prefix:"\0",name:"identity",encode:r=>W_(r),decode:r=>Y_(r)});var sA=Object.freeze({__proto__:null,identity:nA});const aA=xr({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1});var oA=Object.freeze({__proto__:null,base2:aA});const cA=xr({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3});var fA=Object.freeze({__proto__:null,base8:cA});const hA=bo({prefix:"9",name:"base10",alphabet:"0123456789"});var uA=Object.freeze({__proto__:null,base10:hA});const lA=xr({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),dA=xr({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4});var pA=Object.freeze({__proto__:null,base16:lA,base16upper:dA});const gA=xr({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),vA=xr({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),bA=xr({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),mA=xr({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),yA=xr({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),wA=xr({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),_A=xr({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),AA=xr({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),xA=xr({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5});var EA=Object.freeze({__proto__:null,base32:gA,base32upper:vA,base32pad:bA,base32padupper:mA,base32hex:yA,base32hexupper:wA,base32hexpad:_A,base32hexpadupper:AA,base32z:xA});const SA=bo({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),MA=bo({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"});var IA=Object.freeze({__proto__:null,base36:SA,base36upper:MA});const PA=bo({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),RA=bo({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"});var CA=Object.freeze({__proto__:null,base58btc:PA,base58flickr:RA});const NA=xr({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),OA=xr({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),qA=xr({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),TA=xr({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6});var FA=Object.freeze({__proto__:null,base64:NA,base64pad:OA,base64url:qA,base64urlpad:TA});const wv=Array.from("🚀🪐☄🛰🌌🌑🌒🌓🌔🌕🌖🌗🌘🌍🌏🌎🐉☀💻🖥💾💿😂❤😍🤣😊🙏💕😭😘👍😅👏😁🔥🥰💔💖💙😢🤔😆🙄💪😉☺👌🤗💜😔😎😇🌹🤦🎉💞✌✨🤷😱😌🌸🙌😋💗💚😏💛🙂💓🤩😄😀🖤😃💯🙈👇🎶😒🤭❣😜💋👀😪😑💥🙋😞😩😡🤪👊🥳😥🤤👉💃😳✋😚😝😴🌟😬🙃🍀🌷😻😓⭐✅🥺🌈😈🤘💦✔😣🏃💐☹🎊💘😠☝😕🌺🎂🌻😐🖕💝🙊😹🗣💫💀👑🎵🤞😛🔴😤🌼😫⚽🤙☕🏆🤫👈😮🙆🍻🍃🐶💁😲🌿🧡🎁⚡🌞🎈❌✊👋😰🤨😶🤝🚶💰🍓💢🤟🙁🚨💨🤬✈🎀🍺🤓😙💟🌱😖👶🥴▶➡❓💎💸⬇😨🌚🦋😷🕺⚠🙅😟😵👎🤲🤠🤧📌🔵💅🧐🐾🍒😗🤑🌊🤯🐷☎💧😯💆👆🎤🙇🍑❄🌴💣🐸💌📍🥀🤢👅💡💩👐📸👻🤐🤮🎼🥵🚩🍎🍊👼💍📣🥂"),DA=wv.reduce((r,e,t)=>(r[t]=e,r),[]),BA=wv.reduce((r,e,t)=>(r[e.codePointAt(0)]=t,r),[]);function LA(r){return r.reduce((e,t)=>(e+=DA[t],e),"")}function UA(r){const e=[];for(const t of r){const i=BA[t.codePointAt(0)];if(i===void 0)throw new Error(`Non-base256emoji character: ${t}`);e.push(i)}return new Uint8Array(e)}const zA=ff({prefix:"🚀",name:"base256emoji",encode:LA,decode:UA});var kA=Object.freeze({__proto__:null,base256emoji:zA}),$A=_v,_1=128,jA=-128,HA=Math.pow(2,31);function _v(r,e,t){e=e||[],t=t||0;for(var i=t;r>=HA;)e[t++]=r&255|_1,r/=128;for(;r&jA;)e[t++]=r&255|_1,r>>>=7;return e[t]=r|0,_v.bytes=t-i+1,e}var KA=$u,GA=128,A1=127;function $u(r,i){var t=0,i=i||0,s=0,a=i,f,u=r.length;do{if(a>=u)throw $u.bytes=0,new RangeError("Could not decode varint");f=r[a++],t+=s<28?(f&A1)<<s:(f&A1)*Math.pow(2,s),s+=7}while(f>=GA);return $u.bytes=a-i,t}var VA=Math.pow(2,7),JA=Math.pow(2,14),QA=Math.pow(2,21),YA=Math.pow(2,28),WA=Math.pow(2,35),XA=Math.pow(2,42),ZA=Math.pow(2,49),ex=Math.pow(2,56),tx=Math.pow(2,63),rx=function(r){return r<VA?1:r<JA?2:r<QA?3:r<YA?4:r<WA?5:r<XA?6:r<ZA?7:r<ex?8:r<tx?9:10},ix={encode:$A,decode:KA,encodingLength:rx},Av=ix;const x1=(r,e,t=0)=>(Av.encode(r,e,t),e),E1=r=>Av.encodingLength(r),ju=(r,e)=>{const t=e.byteLength,i=E1(r),s=i+E1(t),a=new Uint8Array(s+t);return x1(r,a,0),x1(t,a,i),a.set(e,s),new nx(r,t,e,a)};class nx{constructor(e,t,i,s){this.code=e,this.size=t,this.digest=i,this.bytes=s}}const xv=({name:r,code:e,encode:t})=>new sx(r,e,t);class sx{constructor(e,t,i){this.name=e,this.code=t,this.encode=i}digest(e){if(e instanceof Uint8Array){const t=this.encode(e);return t instanceof Uint8Array?ju(this.code,t):t.then(i=>ju(this.code,i))}else throw Error("Unknown type, must be binary type")}}const Ev=r=>async e=>new Uint8Array(await crypto.subtle.digest(r,e)),ax=xv({name:"sha2-256",code:18,encode:Ev("SHA-256")}),ox=xv({name:"sha2-512",code:19,encode:Ev("SHA-512")});var cx=Object.freeze({__proto__:null,sha256:ax,sha512:ox});const Sv=0,fx="identity",Mv=mv,hx=r=>ju(Sv,Mv(r)),ux={code:Sv,name:fx,encode:Mv,digest:hx};var lx=Object.freeze({__proto__:null,identity:ux});new TextEncoder,new TextDecoder;const S1={...sA,...oA,...fA,...uA,...pA,...EA,...IA,...CA,...FA,...kA};({...cx,...lx});function dx(r=0){return globalThis.Buffer!=null&&globalThis.Buffer.allocUnsafe!=null?globalThis.Buffer.allocUnsafe(r):new Uint8Array(r)}function Iv(r,e,t,i){return{name:r,prefix:e,encoder:{name:r,prefix:e,encode:t},decoder:{decode:i}}}const M1=Iv("utf8","u",r=>"u"+new TextDecoder("utf8").decode(r),r=>new TextEncoder().encode(r.substring(1))),xu=Iv("ascii","a",r=>{let e="a";for(let t=0;t<r.length;t++)e+=String.fromCharCode(r[t]);return e},r=>{r=r.substring(1);const e=dx(r.length);for(let t=0;t<r.length;t++)e[t]=r.charCodeAt(t);return e}),px={utf8:M1,"utf-8":M1,hex:S1.base16,latin1:xu,ascii:xu,binary:xu,...S1};function gx(r,e="utf8"){const t=px[e];if(!t)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?globalThis.Buffer.from(r,"utf8"):t.decoder.decode(`${t.prefix}${r}`)}class vx{constructor(e,t){this.core=e,this.logger=t,this.keychain=new Map,this.name=v_,this.version=b_,this.initialized=!1,this.storagePrefix=gn,this.init=async()=>{if(!this.initialized){const i=await this.getKeyChain();typeof i<"u"&&(this.keychain=i),this.initialized=!0}},this.has=i=>(this.isInitialized(),this.keychain.has(i)),this.set=async(i,s)=>{this.isInitialized(),this.keychain.set(i,s),await this.persist()},this.get=i=>{this.isInitialized();const s=this.keychain.get(i);if(typeof s>"u"){const{message:a}=Ae("NO_MATCHING_KEY",`${this.name}: ${i}`);throw new Error(a)}return s},this.del=async i=>{this.isInitialized(),this.keychain.delete(i),await this.persist()},this.core=e,this.logger=kr(t,this.name)}get context(){return fi(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}async setKeyChain(e){await this.core.storage.setItem(this.storageKey,bg(e))}async getKeyChain(){const e=await this.core.storage.getItem(this.storageKey);return typeof e<"u"?mg(e):void 0}async persist(){await this.setKeyChain(this.keychain)}isInitialized(){if(!this.initialized){const{message:e}=Ae("NOT_INITIALIZED",this.name);throw new Error(e)}}}class bx{constructor(e,t,i){this.core=e,this.logger=t,this.name=p_,this.randomSessionIdentifier=Uu(),this.initialized=!1,this.init=async()=>{this.initialized||(await this.keychain.init(),this.initialized=!0)},this.hasKeys=s=>(this.isInitialized(),this.keychain.has(s)),this.getClientId=async()=>{this.isInitialized();const s=await this.getClientSeed(),a=Ap(s);return dg(a.publicKey)},this.generateKeyPair=()=>{this.isInitialized();const s=H7();return this.setPrivateKey(s.publicKey,s.privateKey)},this.signJWT=async s=>{this.isInitialized();const a=await this.getClientSeed(),f=Ap(a),u=this.randomSessionIdentifier;return await S4(u,s,g_,f)},this.generateSharedKey=(s,a,f)=>{this.isInitialized();const u=this.getPrivateKey(s),d=K7(u,a);return this.setSymKey(d,f)},this.setSymKey=async(s,a)=>{this.isInitialized();const f=a||kc(s);return await this.keychain.set(f,s),f},this.deleteKeyPair=async s=>{this.isInitialized(),await this.keychain.del(s)},this.deleteSymKey=async s=>{this.isInitialized(),await this.keychain.del(s)},this.encode=async(s,a,f)=>{this.isInitialized();const u=fv(f),d=Vu(a);if(n1(u))return V7(d,f==null?void 0:f.encoding);if(i1(u)){const C=u.senderPublicKey,R=u.receiverPublicKey;s=await this.generateSharedKey(C,R)}const l=this.getSymKey(s),{type:w,senderPublicKey:x}=u;return G7({type:w,symKey:l,message:d,senderPublicKey:x,encoding:f==null?void 0:f.encoding})},this.decode=async(s,a,f)=>{this.isInitialized();const u=Y7(a,f);if(n1(u)){const d=Q7(a,f==null?void 0:f.encoding);return jc(d)}if(i1(u)){const d=u.receiverPublicKey,l=u.senderPublicKey;s=await this.generateSharedKey(d,l)}try{const d=this.getSymKey(s),l=J7({symKey:d,encoded:a,encoding:f==null?void 0:f.encoding});return jc(l)}catch(d){this.logger.error(`Failed to decode message from topic: '${s}', clientId: '${await this.getClientId()}'`),this.logger.error(d)}},this.getPayloadType=(s,a=es)=>{const f=so({encoded:s,encoding:a});return Ss(f.type)},this.getPayloadSenderPublicKey=(s,a=es)=>{const f=so({encoded:s,encoding:a});return f.senderPublicKey?yr(f.senderPublicKey,zr):void 0},this.core=e,this.logger=kr(t,this.name),this.keychain=i||new vx(this.core,this.logger)}get context(){return fi(this.logger)}async setPrivateKey(e,t){return await this.keychain.set(e,t),e}getPrivateKey(e){return this.keychain.get(e)}async getClientSeed(){let e="";try{e=this.keychain.get(y1)}catch{e=Uu(),await this.keychain.set(y1,e)}return gx(e,"base16")}getSymKey(e){return this.keychain.get(e)}isInitialized(){if(!this.initialized){const{message:e}=Ae("NOT_INITIALIZED",this.name);throw new Error(e)}}}class mx extends J9{constructor(e,t){super(e,t),this.logger=e,this.core=t,this.messages=new Map,this.name=m_,this.version=y_,this.initialized=!1,this.storagePrefix=gn,this.init=async()=>{if(!this.initialized){this.logger.trace("Initialized");try{const i=await this.getRelayerMessages();typeof i<"u"&&(this.messages=i),this.logger.debug(`Successfully Restored records for ${this.name}`),this.logger.trace({type:"method",method:"restore",size:this.messages.size})}catch(i){this.logger.debug(`Failed to Restore records for ${this.name}`),this.logger.error(i)}finally{this.initialized=!0}}},this.set=async(i,s)=>{this.isInitialized();const a=qn(s);let f=this.messages.get(i);return typeof f>"u"&&(f={}),typeof f[a]<"u"||(f[a]=s,this.messages.set(i,f),await this.persist()),a},this.get=i=>{this.isInitialized();let s=this.messages.get(i);return typeof s>"u"&&(s={}),s},this.has=(i,s)=>{this.isInitialized();const a=this.get(i),f=qn(s);return typeof a[f]<"u"},this.del=async i=>{this.isInitialized(),this.messages.delete(i),await this.persist()},this.logger=kr(e,this.name),this.core=t}get context(){return fi(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}async setRelayerMessages(e){await this.core.storage.setItem(this.storageKey,bg(e))}async getRelayerMessages(){const e=await this.core.storage.getItem(this.storageKey);return typeof e<"u"?mg(e):void 0}async persist(){await this.setRelayerMessages(this.messages)}isInitialized(){if(!this.initialized){const{message:e}=Ae("NOT_INITIALIZED",this.name);throw new Error(e)}}}class yx extends Q9{constructor(e,t){super(e,t),this.relayer=e,this.logger=t,this.events=new Bn.EventEmitter,this.name=__,this.queue=new Map,this.publishTimeout=Ie.toMiliseconds(Ie.ONE_MINUTE),this.failedPublishTimeout=Ie.toMiliseconds(Ie.ONE_SECOND),this.needsTransportRestart=!1,this.publish=async(i,s,a)=>{var f;this.logger.debug("Publishing Payload"),this.logger.trace({type:"method",method:"publish",params:{topic:i,message:s,opts:a}});const u=(a==null?void 0:a.ttl)||w_,d=zu(a),l=(a==null?void 0:a.prompt)||!1,w=(a==null?void 0:a.tag)||0,x=(a==null?void 0:a.id)||ea().toString(),C={topic:i,message:s,opts:{ttl:u,relay:d,prompt:l,tag:w,id:x,attestation:a==null?void 0:a.attestation}},R=`Failed to publish payload, please try again. id:${x} tag:${w}`,N=Date.now();let T,U=1;try{for(;T===void 0;){if(Date.now()-N>this.publishTimeout)throw new Error(R);this.logger.trace({id:x,attempts:U},`publisher.publish - attempt ${U}`),T=await await ta(this.rpcPublish(i,s,u,d,l,w,x,a==null?void 0:a.attestation).catch(Q=>this.logger.warn(Q)),this.publishTimeout,R),U++,T||await new Promise(Q=>setTimeout(Q,this.failedPublishTimeout))}this.relayer.events.emit(Br.publish,C),this.logger.debug("Successfully Published Payload"),this.logger.trace({type:"method",method:"publish",params:{id:x,topic:i,message:s,opts:a}})}catch(Q){if(this.logger.debug("Failed to Publish Payload"),this.logger.error(Q),(f=a==null?void 0:a.internal)!=null&&f.throwOnFailedPublish)throw Q;this.queue.set(x,C)}},this.on=(i,s)=>{this.events.on(i,s)},this.once=(i,s)=>{this.events.once(i,s)},this.off=(i,s)=>{this.events.off(i,s)},this.removeListener=(i,s)=>{this.events.removeListener(i,s)},this.relayer=e,this.logger=kr(t,this.name),this.registerEventListeners()}get context(){return fi(this.logger)}rpcPublish(e,t,i,s,a,f,u,d){var l,w,x,C;const R={method:Qa(s.protocol).publish,params:{topic:e,message:t,ttl:i,prompt:a,tag:f,attestation:d},id:u};return Ur((l=R.params)==null?void 0:l.prompt)&&((w=R.params)==null||delete w.prompt),Ur((x=R.params)==null?void 0:x.tag)&&((C=R.params)==null||delete C.tag),this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"message",direction:"outgoing",request:R}),this.relayer.request(R)}removeRequestFromQueue(e){this.queue.delete(e)}checkQueue(){this.queue.forEach(async e=>{const{topic:t,message:i,opts:s}=e;await this.publish(t,i,s)})}registerEventListeners(){this.relayer.core.heartbeat.on(oo.pulse,()=>{if(this.needsTransportRestart){this.needsTransportRestart=!1,this.relayer.events.emit(Br.connection_stalled);return}this.checkQueue()}),this.relayer.on(Br.message_ack,e=>{this.removeRequestFromQueue(e.id.toString())})}}class wx{constructor(){this.map=new Map,this.set=(e,t)=>{const i=this.get(e);this.exists(e,t)||this.map.set(e,[...i,t])},this.get=e=>this.map.get(e)||[],this.exists=(e,t)=>this.get(e).includes(t),this.delete=(e,t)=>{if(typeof t>"u"){this.map.delete(e);return}if(!this.map.has(e))return;const i=this.get(e);if(!this.exists(e,t))return;const s=i.filter(a=>a!==t);if(!s.length){this.map.delete(e);return}this.map.set(e,s)},this.clear=()=>{this.map.clear()}}get topics(){return Array.from(this.map.keys())}}var _x=Object.defineProperty,Ax=Object.defineProperties,xx=Object.getOwnPropertyDescriptors,I1=Object.getOwnPropertySymbols,Ex=Object.prototype.hasOwnProperty,Sx=Object.prototype.propertyIsEnumerable,P1=(r,e,t)=>e in r?_x(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t,Ka=(r,e)=>{for(var t in e||(e={}))Ex.call(e,t)&&P1(r,t,e[t]);if(I1)for(var t of I1(e))Sx.call(e,t)&&P1(r,t,e[t]);return r},Eu=(r,e)=>Ax(r,xx(e));class Mx extends X9{constructor(e,t){super(e,t),this.relayer=e,this.logger=t,this.subscriptions=new Map,this.topicMap=new wx,this.events=new Bn.EventEmitter,this.name=P_,this.version=R_,this.pending=new Map,this.cached=[],this.initialized=!1,this.pendingSubscriptionWatchLabel="pending_sub_watch_label",this.pollingInterval=20,this.storagePrefix=gn,this.subscribeTimeout=Ie.toMiliseconds(Ie.ONE_MINUTE),this.restartInProgress=!1,this.batchSubscribeTopicsLimit=500,this.pendingBatchMessages=[],this.init=async()=>{this.initialized||(this.logger.trace("Initialized"),this.registerEventListeners(),this.clientId=await this.relayer.core.crypto.getClientId(),await this.restore()),this.initialized=!0},this.subscribe=async(i,s)=>{this.isInitialized(),this.logger.debug("Subscribing Topic"),this.logger.trace({type:"method",method:"subscribe",params:{topic:i,opts:s}});try{const a=zu(s),f={topic:i,relay:a,transportType:s==null?void 0:s.transportType};this.pending.set(i,f);const u=await this.rpcSubscribe(i,a,s==null?void 0:s.transportType);return typeof u=="string"&&(this.onSubscribe(u,f),this.logger.debug("Successfully Subscribed Topic"),this.logger.trace({type:"method",method:"subscribe",params:{topic:i,opts:s}})),u}catch(a){throw this.logger.debug("Failed to Subscribe Topic"),this.logger.error(a),a}},this.unsubscribe=async(i,s)=>{await this.restartToComplete(),this.isInitialized(),typeof(s==null?void 0:s.id)<"u"?await this.unsubscribeById(i,s.id,s):await this.unsubscribeByTopic(i,s)},this.isSubscribed=async i=>{if(this.topics.includes(i))return!0;const s=`${this.pendingSubscriptionWatchLabel}_${i}`;return await new Promise((a,f)=>{const u=new Ie.Watch;u.start(s);const d=setInterval(()=>{!this.pending.has(i)&&this.topics.includes(i)&&(clearInterval(d),u.stop(s),a(!0)),u.elapsed(s)>=C_&&(clearInterval(d),u.stop(s),f(new Error("Subscription resolution timeout")))},this.pollingInterval)}).catch(()=>!1)},this.on=(i,s)=>{this.events.on(i,s)},this.once=(i,s)=>{this.events.once(i,s)},this.off=(i,s)=>{this.events.off(i,s)},this.removeListener=(i,s)=>{this.events.removeListener(i,s)},this.start=async()=>{await this.onConnect()},this.stop=async()=>{await this.onDisconnect()},this.restart=async()=>{this.restartInProgress=!0,await this.restore(),await this.reset(),this.restartInProgress=!1},this.relayer=e,this.logger=kr(t,this.name),this.clientId=""}get context(){return fi(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.relayer.core.customStoragePrefix+"//"+this.name}get length(){return this.subscriptions.size}get ids(){return Array.from(this.subscriptions.keys())}get values(){return Array.from(this.subscriptions.values())}get topics(){return this.topicMap.topics}hasSubscription(e,t){let i=!1;try{i=this.getSubscription(e).topic===t}catch{}return i}onEnable(){this.cached=[],this.initialized=!0}onDisable(){this.cached=this.values,this.subscriptions.clear(),this.topicMap.clear()}async unsubscribeByTopic(e,t){const i=this.topicMap.get(e);await Promise.all(i.map(async s=>await this.unsubscribeById(e,s,t)))}async unsubscribeById(e,t,i){this.logger.debug("Unsubscribing Topic"),this.logger.trace({type:"method",method:"unsubscribe",params:{topic:e,id:t,opts:i}});try{const s=zu(i);await this.rpcUnsubscribe(e,t,s);const a=Lt("USER_DISCONNECTED",`${this.name}, ${e}`);await this.onUnsubscribe(e,t,a),this.logger.debug("Successfully Unsubscribed Topic"),this.logger.trace({type:"method",method:"unsubscribe",params:{topic:e,id:t,opts:i}})}catch(s){throw this.logger.debug("Failed to Unsubscribe Topic"),this.logger.error(s),s}}async rpcSubscribe(e,t,i=Kt.relay){i===Kt.relay&&await this.restartToComplete();const s={method:Qa(t.protocol).subscribe,params:{topic:e}};this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:s});try{const a=qn(e+this.clientId);return i===Kt.link_mode?(setTimeout(()=>{(this.relayer.connected||this.relayer.connecting)&&this.relayer.request(s).catch(f=>this.logger.warn(f))},Ie.toMiliseconds(Ie.ONE_SECOND)),a):await await ta(this.relayer.request(s).catch(f=>this.logger.warn(f)),this.subscribeTimeout)?a:null}catch{this.logger.debug("Outgoing Relay Subscribe Payload stalled"),this.relayer.events.emit(Br.connection_stalled)}return null}async rpcBatchSubscribe(e){if(!e.length)return;const t=e[0].relay,i={method:Qa(t.protocol).batchSubscribe,params:{topics:e.map(s=>s.topic)}};this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:i});try{return await await ta(this.relayer.request(i).catch(s=>this.logger.warn(s)),this.subscribeTimeout)}catch{this.relayer.events.emit(Br.connection_stalled)}}async rpcBatchFetchMessages(e){if(!e.length)return;const t=e[0].relay,i={method:Qa(t.protocol).batchFetchMessages,params:{topics:e.map(a=>a.topic)}};this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:i});let s;try{s=await await ta(this.relayer.request(i).catch(a=>this.logger.warn(a)),this.subscribeTimeout)}catch{this.relayer.events.emit(Br.connection_stalled)}return s}rpcUnsubscribe(e,t,i){const s={method:Qa(i.protocol).unsubscribe,params:{topic:e,id:t}};return this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:s}),this.relayer.request(s)}onSubscribe(e,t){this.setSubscription(e,Eu(Ka({},t),{id:e})),this.pending.delete(t.topic)}onBatchSubscribe(e){e.length&&e.forEach(t=>{this.setSubscription(t.id,Ka({},t)),this.pending.delete(t.topic)})}async onUnsubscribe(e,t,i){this.events.removeAllListeners(t),this.hasSubscription(t,e)&&this.deleteSubscription(t,i),await this.relayer.messages.del(e)}async setRelayerSubscriptions(e){await this.relayer.core.storage.setItem(this.storageKey,e)}async getRelayerSubscriptions(){return await this.relayer.core.storage.getItem(this.storageKey)}setSubscription(e,t){this.logger.debug("Setting subscription"),this.logger.trace({type:"method",method:"setSubscription",id:e,subscription:t}),this.addSubscription(e,t)}addSubscription(e,t){this.subscriptions.set(e,Ka({},t)),this.topicMap.set(t.topic,e),this.events.emit(on.created,t)}getSubscription(e){this.logger.debug("Getting subscription"),this.logger.trace({type:"method",method:"getSubscription",id:e});const t=this.subscriptions.get(e);if(!t){const{message:i}=Ae("NO_MATCHING_KEY",`${this.name}: ${e}`);throw new Error(i)}return t}deleteSubscription(e,t){this.logger.debug("Deleting subscription"),this.logger.trace({type:"method",method:"deleteSubscription",id:e,reason:t});const i=this.getSubscription(e);this.subscriptions.delete(e),this.topicMap.delete(i.topic,e),this.events.emit(on.deleted,Eu(Ka({},i),{reason:t}))}async persist(){await this.setRelayerSubscriptions(this.values),this.events.emit(on.sync)}async reset(){if(this.cached.length){const e=Math.ceil(this.cached.length/this.batchSubscribeTopicsLimit);for(let t=0;t<e;t++){const i=this.cached.splice(0,this.batchSubscribeTopicsLimit);await this.batchFetchMessages(i),await this.batchSubscribe(i)}}this.events.emit(on.resubscribed)}async restore(){try{const e=await this.getRelayerSubscriptions();if(typeof e>"u"||!e.length)return;if(this.subscriptions.size){const{message:t}=Ae("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(t),this.logger.error(`${this.name}: ${JSON.stringify(this.values)}`),new Error(t)}this.cached=e,this.logger.debug(`Successfully Restored subscriptions for ${this.name}`),this.logger.trace({type:"method",method:"restore",subscriptions:this.values})}catch(e){this.logger.debug(`Failed to Restore subscriptions for ${this.name}`),this.logger.error(e)}}async batchSubscribe(e){if(!e.length)return;const t=await this.rpcBatchSubscribe(e);pn(t)&&this.onBatchSubscribe(t.map((i,s)=>Eu(Ka({},e[s]),{id:i})))}async batchFetchMessages(e){if(!e.length)return;this.logger.trace(`Fetching batch messages for ${e.length} subscriptions`);const t=await this.rpcBatchFetchMessages(e);t&&t.messages&&(this.pendingBatchMessages=this.pendingBatchMessages.concat(t.messages))}async onConnect(){await this.restart(),this.onEnable()}onDisconnect(){this.onDisable()}async checkPending(){if(!this.initialized||!this.relayer.connected)return;const e=[];this.pending.forEach(t=>{e.push(t)}),await this.batchSubscribe(e),this.pendingBatchMessages.length&&(await this.relayer.handleBatchMessageEvents(this.pendingBatchMessages),this.pendingBatchMessages=[])}registerEventListeners(){this.relayer.core.heartbeat.on(oo.pulse,async()=>{await this.checkPending()}),this.events.on(on.created,async e=>{const t=on.created;this.logger.info(`Emitting ${t}`),this.logger.debug({type:"event",event:t,data:e}),await this.persist()}),this.events.on(on.deleted,async e=>{const t=on.deleted;this.logger.info(`Emitting ${t}`),this.logger.debug({type:"event",event:t,data:e}),await this.persist()})}isInitialized(){if(!this.initialized){const{message:e}=Ae("NOT_INITIALIZED",this.name);throw new Error(e)}}async restartToComplete(){!this.relayer.connected&&!this.relayer.connecting&&await this.relayer.transportOpen(),this.restartInProgress&&await new Promise(e=>{const t=setInterval(()=>{this.restartInProgress||(clearInterval(t),e())},this.pollingInterval)})}}var Ix=Object.defineProperty,R1=Object.getOwnPropertySymbols,Px=Object.prototype.hasOwnProperty,Rx=Object.prototype.propertyIsEnumerable,C1=(r,e,t)=>e in r?Ix(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t,Cx=(r,e)=>{for(var t in e||(e={}))Px.call(e,t)&&C1(r,t,e[t]);if(R1)for(var t of R1(e))Rx.call(e,t)&&C1(r,t,e[t]);return r};class Nx extends Y9{constructor(e){super(e),this.protocol="wc",this.version=2,this.events=new Bn.EventEmitter,this.name=x_,this.transportExplicitlyClosed=!1,this.initialized=!1,this.connectionAttemptInProgress=!1,this.connectionStatusPollingInterval=20,this.staleConnectionErrors=["socket hang up","stalled","interrupted"],this.hasExperiencedNetworkDisruption=!1,this.requestsInFlight=new Map,this.heartBeatTimeout=Ie.toMiliseconds(Ie.THIRTY_SECONDS+Ie.ONE_SECOND),this.request=async t=>{var i,s;this.logger.debug("Publishing Request Payload");const a=t.id||ea().toString();await this.toEstablishConnection();try{const f=this.provider.request(t);this.requestsInFlight.set(a,{promise:f,request:t}),this.logger.trace({id:a,method:t.method,topic:(i=t.params)==null?void 0:i.topic},"relayer.request - attempt to publish...");const u=await new Promise(async(d,l)=>{const w=()=>{l(new Error(`relayer.request - publish interrupted, id: ${a}`))};this.provider.on(Ai.disconnect,w);const x=await f;this.provider.off(Ai.disconnect,w),d(x)});return this.logger.trace({id:a,method:t.method,topic:(s=t.params)==null?void 0:s.topic},"relayer.request - published"),u}catch(f){throw this.logger.debug(`Failed to Publish Request: ${a}`),f}finally{this.requestsInFlight.delete(a)}},this.resetPingTimeout=()=>{if(Vc())try{clearTimeout(this.pingTimeout),this.pingTimeout=setTimeout(()=>{var t,i,s;(s=(i=(t=this.provider)==null?void 0:t.connection)==null?void 0:i.socket)==null||s.terminate()},this.heartBeatTimeout)}catch(t){this.logger.warn(t)}},this.onPayloadHandler=t=>{this.onProviderPayload(t),this.resetPingTimeout()},this.onConnectHandler=()=>{this.logger.trace("relayer connected"),this.startPingTimeout(),this.events.emit(Br.connect)},this.onDisconnectHandler=()=>{this.logger.trace("relayer disconnected"),this.onProviderDisconnect()},this.onProviderErrorHandler=t=>{this.logger.error(t),this.events.emit(Br.error,t),this.logger.info("Fatal socket error received, closing transport"),this.transportClose()},this.registerProviderListeners=()=>{this.provider.on(Ai.payload,this.onPayloadHandler),this.provider.on(Ai.connect,this.onConnectHandler),this.provider.on(Ai.disconnect,this.onDisconnectHandler),this.provider.on(Ai.error,this.onProviderErrorHandler)},this.core=e.core,this.logger=typeof e.logger<"u"&&typeof e.logger!="string"?kr(e.logger,this.name):Qu(tf({level:e.logger||A_})),this.messages=new mx(this.logger,e.core),this.subscriber=new Mx(this,this.logger),this.publisher=new yx(this,this.logger),this.relayUrl=(e==null?void 0:e.relayUrl)||vv,this.projectId=e.projectId,this.bundleId=q4(),this.provider={}}async init(){if(this.logger.trace("Initialized"),this.registerEventListeners(),await Promise.all([this.messages.init(),this.subscriber.init()]),this.initialized=!0,this.subscriber.cached.length>0)try{await this.transportOpen()}catch(e){this.logger.warn(e)}}get context(){return fi(this.logger)}get connected(){var e,t,i;return((i=(t=(e=this.provider)==null?void 0:e.connection)==null?void 0:t.socket)==null?void 0:i.readyState)===1}get connecting(){var e,t,i;return((i=(t=(e=this.provider)==null?void 0:e.connection)==null?void 0:t.socket)==null?void 0:i.readyState)===0}async publish(e,t,i){this.isInitialized(),await this.publisher.publish(e,t,i),await this.recordMessageEvent({topic:e,message:t,publishedAt:Date.now(),transportType:Kt.relay})}async subscribe(e,t){var i;this.isInitialized(),(t==null?void 0:t.transportType)==="relay"&&await this.toEstablishConnection();let s=((i=this.subscriber.topicMap.get(e))==null?void 0:i[0])||"",a;const f=u=>{u.topic===e&&(this.subscriber.off(on.created,f),a())};return await Promise.all([new Promise(u=>{a=u,this.subscriber.on(on.created,f)}),new Promise(async u=>{s=await this.subscriber.subscribe(e,t)||s,u()})]),s}async unsubscribe(e,t){this.isInitialized(),await this.subscriber.unsubscribe(e,t)}on(e,t){this.events.on(e,t)}once(e,t){this.events.once(e,t)}off(e,t){this.events.off(e,t)}removeListener(e,t){this.events.removeListener(e,t)}async transportDisconnect(){if(!this.hasExperiencedNetworkDisruption&&this.connected&&this.requestsInFlight.size>0)try{await Promise.all(Array.from(this.requestsInFlight.values()).map(e=>e.promise))}catch(e){this.logger.warn(e)}this.hasExperiencedNetworkDisruption||this.connected?await ta(this.provider.disconnect(),2e3,"provider.disconnect()").catch(()=>this.onProviderDisconnect()):this.onProviderDisconnect()}async transportClose(){this.transportExplicitlyClosed=!0,await this.transportDisconnect()}async transportOpen(e){await this.confirmOnlineStateOrThrow(),e&&e!==this.relayUrl&&(this.relayUrl=e,await this.transportDisconnect()),await this.createProvider(),this.connectionAttemptInProgress=!0,this.transportExplicitlyClosed=!1;try{await new Promise(async(t,i)=>{const s=()=>{this.provider.off(Ai.disconnect,s),i(new Error("Connection interrupted while trying to subscribe"))};this.provider.on(Ai.disconnect,s),await ta(this.provider.connect(),Ie.toMiliseconds(Ie.ONE_MINUTE),`Socket stalled when trying to connect to ${this.relayUrl}`).catch(a=>{i(a)}).finally(()=>{clearTimeout(this.reconnectTimeout),this.reconnectTimeout=void 0}),this.subscriber.start().catch(a=>{this.logger.error(a),this.onDisconnectHandler()}),this.hasExperiencedNetworkDisruption=!1,t()})}catch(t){this.logger.error(t);const i=t;if(this.hasExperiencedNetworkDisruption=!0,!this.isConnectionStalled(i.message))throw t}finally{this.connectionAttemptInProgress=!1}}async restartTransport(e){this.connectionAttemptInProgress||(this.relayUrl=e||this.relayUrl,await this.confirmOnlineStateOrThrow(),await this.transportClose(),await this.transportOpen())}async confirmOnlineStateOrThrow(){if(!await g1())throw new Error("No internet connection detected. Please restart your network and try again.")}async handleBatchMessageEvents(e){if((e==null?void 0:e.length)===0){this.logger.trace("Batch message events is empty. Ignoring...");return}const t=e.sort((i,s)=>i.publishedAt-s.publishedAt);this.logger.trace(`Batch of ${t.length} message events sorted`);for(const i of t)try{await this.onMessageEvent(i)}catch(s){this.logger.warn(s)}this.logger.trace(`Batch of ${t.length} message events processed`)}async onLinkMessageEvent(e,t){const{topic:i}=e;if(!t.sessionExists){const s=dr(Ie.FIVE_MINUTES),a={topic:i,expiry:s,relay:{protocol:"irn"},active:!1};await this.core.pairing.pairings.set(i,a)}this.events.emit(Br.message,e),await this.recordMessageEvent(e)}startPingTimeout(){var e,t,i,s,a;if(Vc())try{(t=(e=this.provider)==null?void 0:e.connection)!=null&&t.socket&&((a=(s=(i=this.provider)==null?void 0:i.connection)==null?void 0:s.socket)==null||a.once("ping",()=>{this.resetPingTimeout()})),this.resetPingTimeout()}catch(f){this.logger.warn(f)}}isConnectionStalled(e){return this.staleConnectionErrors.some(t=>e.includes(t))}async createProvider(){this.provider.connection&&this.unregisterProviderListeners();const e=await this.core.crypto.signJWT(this.relayUrl);this.provider=new Gi(new c_(B4({sdkVersion:ku,protocol:this.protocol,version:this.version,relayUrl:this.relayUrl,projectId:this.projectId,auth:e,useOnCloseEvent:!0,bundleId:this.bundleId}))),this.registerProviderListeners()}async recordMessageEvent(e){const{topic:t,message:i}=e;await this.messages.set(t,i)}async shouldIgnoreMessageEvent(e){const{topic:t,message:i}=e;if(!i||i.length===0)return this.logger.debug(`Ignoring invalid/empty message: ${i}`),!0;if(!await this.subscriber.isSubscribed(t))return this.logger.debug(`Ignoring message for non-subscribed topic ${t}`),!0;const s=this.messages.has(t,i);return s&&this.logger.debug(`Ignoring duplicate message: ${i}`),s}async onProviderPayload(e){if(this.logger.debug("Incoming Relay Payload"),this.logger.trace({type:"payload",direction:"incoming",payload:e}),Yu(e)){if(!e.method.endsWith(E_))return;const t=e.params,{topic:i,message:s,publishedAt:a,attestation:f}=t.data,u={topic:i,message:s,publishedAt:a,transportType:Kt.relay,attestation:f};this.logger.debug("Emitting Relayer Payload"),this.logger.trace(Cx({type:"event",event:t.id},u)),this.events.emit(t.id,u),await this.acknowledgePayload(e),await this.onMessageEvent(u)}else Wu(e)&&this.events.emit(Br.message_ack,e)}async onMessageEvent(e){await this.shouldIgnoreMessageEvent(e)||(this.events.emit(Br.message,e),await this.recordMessageEvent(e))}async acknowledgePayload(e){const t=rf(e.id,!0);await this.provider.connection.send(t)}unregisterProviderListeners(){this.provider.off(Ai.payload,this.onPayloadHandler),this.provider.off(Ai.connect,this.onConnectHandler),this.provider.off(Ai.disconnect,this.onDisconnectHandler),this.provider.off(Ai.error,this.onProviderErrorHandler),clearTimeout(this.pingTimeout)}async registerEventListeners(){let e=await g1();j9(async t=>{e!==t&&(e=t,t?await this.restartTransport().catch(i=>this.logger.error(i)):(this.hasExperiencedNetworkDisruption=!0,await this.transportDisconnect(),this.transportExplicitlyClosed=!1))})}async onProviderDisconnect(){await this.subscriber.stop(),this.requestsInFlight.clear(),clearTimeout(this.pingTimeout),this.events.emit(Br.disconnect),this.connectionAttemptInProgress=!1,!this.transportExplicitlyClosed&&(this.reconnectTimeout||(this.reconnectTimeout=setTimeout(async()=>{await this.transportOpen().catch(e=>this.logger.error(e))},Ie.toMiliseconds(S_))))}isInitialized(){if(!this.initialized){const{message:e}=Ae("NOT_INITIALIZED",this.name);throw new Error(e)}}async toEstablishConnection(){await this.confirmOnlineStateOrThrow(),!this.connected&&(this.connectionAttemptInProgress&&await new Promise(e=>{const t=setInterval(()=>{this.connected&&(clearInterval(t),e())},this.connectionStatusPollingInterval)}),await this.transportOpen())}}var Ox=Object.defineProperty,N1=Object.getOwnPropertySymbols,qx=Object.prototype.hasOwnProperty,Tx=Object.prototype.propertyIsEnumerable,O1=(r,e,t)=>e in r?Ox(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t,q1=(r,e)=>{for(var t in e||(e={}))qx.call(e,t)&&O1(r,t,e[t]);if(N1)for(var t of N1(e))Tx.call(e,t)&&O1(r,t,e[t]);return r};class Ps extends W9{constructor(e,t,i,s=gn,a=void 0){super(e,t,i,s),this.core=e,this.logger=t,this.name=i,this.map=new Map,this.version=M_,this.cached=[],this.initialized=!1,this.storagePrefix=gn,this.recentlyDeleted=[],this.recentlyDeletedLimit=200,this.init=async()=>{this.initialized||(this.logger.trace("Initialized"),await this.restore(),this.cached.forEach(f=>{this.getKey&&f!==null&&!Ur(f)?this.map.set(this.getKey(f),f):w9(f)?this.map.set(f.id,f):_9(f)&&this.map.set(f.topic,f)}),this.cached=[],this.initialized=!0)},this.set=async(f,u)=>{this.isInitialized(),this.map.has(f)?await this.update(f,u):(this.logger.debug("Setting value"),this.logger.trace({type:"method",method:"set",key:f,value:u}),this.map.set(f,u),await this.persist())},this.get=f=>(this.isInitialized(),this.logger.debug("Getting value"),this.logger.trace({type:"method",method:"get",key:f}),this.getData(f)),this.getAll=f=>(this.isInitialized(),f?this.values.filter(u=>Object.keys(f).every(d=>u_(u[d],f[d]))):this.values),this.update=async(f,u)=>{this.isInitialized(),this.logger.debug("Updating value"),this.logger.trace({type:"method",method:"update",key:f,update:u});const d=q1(q1({},this.getData(f)),u);this.map.set(f,d),await this.persist()},this.delete=async(f,u)=>{this.isInitialized(),this.map.has(f)&&(this.logger.debug("Deleting value"),this.logger.trace({type:"method",method:"delete",key:f,reason:u}),this.map.delete(f),this.addToRecentlyDeleted(f),await this.persist())},this.logger=kr(t,this.name),this.storagePrefix=s,this.getKey=a}get context(){return fi(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}get length(){return this.map.size}get keys(){return Array.from(this.map.keys())}get values(){return Array.from(this.map.values())}addToRecentlyDeleted(e){this.recentlyDeleted.push(e),this.recentlyDeleted.length>=this.recentlyDeletedLimit&&this.recentlyDeleted.splice(0,this.recentlyDeletedLimit/2)}async setDataStore(e){await this.core.storage.setItem(this.storageKey,e)}async getDataStore(){return await this.core.storage.getItem(this.storageKey)}getData(e){const t=this.map.get(e);if(!t){if(this.recentlyDeleted.includes(e)){const{message:s}=Ae("MISSING_OR_INVALID",`Record was recently deleted - ${this.name}: ${e}`);throw this.logger.error(s),new Error(s)}const{message:i}=Ae("NO_MATCHING_KEY",`${this.name}: ${e}`);throw this.logger.error(i),new Error(i)}return t}async persist(){await this.setDataStore(this.values)}async restore(){try{const e=await this.getDataStore();if(typeof e>"u"||!e.length)return;if(this.map.size){const{message:t}=Ae("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(t),new Error(t)}this.cached=e,this.logger.debug(`Successfully Restored value for ${this.name}`),this.logger.trace({type:"method",method:"restore",value:this.values})}catch(e){this.logger.debug(`Failed to Restore value for ${this.name}`),this.logger.error(e)}}isInitialized(){if(!this.initialized){const{message:e}=Ae("NOT_INITIALIZED",this.name);throw new Error(e)}}}class Fx{constructor(e,t){this.core=e,this.logger=t,this.name=N_,this.version=O_,this.events=new Xu,this.initialized=!1,this.storagePrefix=gn,this.ignoredPayloadTypes=[Dn],this.registeredMethods=[],this.init=async()=>{this.initialized||(await this.pairings.init(),await this.cleanup(),this.registerRelayerEvents(),this.registerExpirerEvents(),this.initialized=!0,this.logger.trace("Initialized"))},this.register=({methods:i})=>{this.isInitialized(),this.registeredMethods=[...new Set([...this.registeredMethods,...i])]},this.create=async i=>{this.isInitialized();const s=Uu(),a=await this.core.crypto.setSymKey(s),f=dr(Ie.FIVE_MINUTES),u={protocol:gv},d={topic:a,expiry:f,relay:u,active:!1,methods:i==null?void 0:i.methods},l=f1({protocol:this.core.protocol,version:this.core.version,topic:a,symKey:s,relay:u,expiryTimestamp:f,methods:i==null?void 0:i.methods});return this.events.emit(ws.create,d),this.core.expirer.set(a,f),await this.pairings.set(a,d),await this.core.relayer.subscribe(a,{transportType:i==null?void 0:i.transportType}),{topic:a,uri:l}},this.pair=async i=>{this.isInitialized();const s=this.core.eventClient.createEvent({properties:{topic:i==null?void 0:i.uri,trace:[rn.pairing_started]}});this.isValidPair(i,s);const{topic:a,symKey:f,relay:u,expiryTimestamp:d,methods:l}=c1(i.uri);s.props.properties.topic=a,s.addTrace(rn.pairing_uri_validation_success),s.addTrace(rn.pairing_uri_not_expired);let w;if(this.pairings.keys.includes(a)){if(w=this.pairings.get(a),s.addTrace(rn.existing_pairing),w.active)throw s.setError(Nn.active_pairing_already_exists),new Error(`Pairing already exists: ${a}. Please try again with a new connection URI.`);s.addTrace(rn.pairing_not_expired)}const x=d||dr(Ie.FIVE_MINUTES),C={topic:a,relay:u,expiry:x,active:!1,methods:l};this.core.expirer.set(a,x),await this.pairings.set(a,C),s.addTrace(rn.store_new_pairing),i.activatePairing&&await this.activate({topic:a}),this.events.emit(ws.create,C),s.addTrace(rn.emit_inactive_pairing),this.core.crypto.keychain.has(a)||await this.core.crypto.setSymKey(f,a),s.addTrace(rn.subscribing_pairing_topic);try{await this.core.relayer.confirmOnlineStateOrThrow()}catch{s.setError(Nn.no_internet_connection)}try{await this.core.relayer.subscribe(a,{relay:u})}catch(R){throw s.setError(Nn.subscribe_pairing_topic_failure),R}return s.addTrace(rn.subscribe_pairing_topic_success),C},this.activate=async({topic:i})=>{this.isInitialized();const s=dr(Ie.THIRTY_DAYS);this.core.expirer.set(i,s),await this.pairings.update(i,{active:!0,expiry:s})},this.ping=async i=>{this.isInitialized(),await this.isValidPing(i);const{topic:s}=i;if(this.pairings.keys.includes(s)){const a=await this.sendRequest(s,"wc_pairingPing",{}),{done:f,resolve:u,reject:d}=ys();this.events.once(St("pairing_ping",a),({error:l})=>{l?d(l):u()}),await f()}},this.updateExpiry=async({topic:i,expiry:s})=>{this.isInitialized(),await this.pairings.update(i,{expiry:s})},this.updateMetadata=async({topic:i,metadata:s})=>{this.isInitialized(),await this.pairings.update(i,{peerMetadata:s})},this.getPairings=()=>(this.isInitialized(),this.pairings.values),this.disconnect=async i=>{this.isInitialized(),await this.isValidDisconnect(i);const{topic:s}=i;this.pairings.keys.includes(s)&&(await this.sendRequest(s,"wc_pairingDelete",Lt("USER_DISCONNECTED")),await this.deletePairing(s))},this.formatUriFromPairing=i=>{this.isInitialized();const{topic:s,relay:a,expiry:f,methods:u}=i,d=this.core.crypto.keychain.get(s);return f1({protocol:this.core.protocol,version:this.core.version,topic:s,symKey:d,relay:a,expiryTimestamp:f,methods:u})},this.sendRequest=async(i,s,a)=>{const f=_s(s,a),u=await this.core.crypto.encode(i,f),d=ja[s].req;return this.core.history.set(i,f),this.core.relayer.publish(i,u,d),f.id},this.sendResult=async(i,s,a)=>{const f=rf(i,a),u=await this.core.crypto.encode(s,f),d=await this.core.history.get(s,i),l=ja[d.request.method].res;await this.core.relayer.publish(s,u,l),await this.core.history.resolve(f)},this.sendError=async(i,s,a)=>{const f=Ju(i,a),u=await this.core.crypto.encode(s,f),d=await this.core.history.get(s,i),l=ja[d.request.method]?ja[d.request.method].res:ja.unregistered_method.res;await this.core.relayer.publish(s,u,l),await this.core.history.resolve(f)},this.deletePairing=async(i,s)=>{await this.core.relayer.unsubscribe(i),await Promise.all([this.pairings.delete(i,Lt("USER_DISCONNECTED")),this.core.crypto.deleteSymKey(i),s?Promise.resolve():this.core.expirer.del(i)])},this.cleanup=async()=>{const i=this.pairings.getAll().filter(s=>Yn(s.expiry));await Promise.all(i.map(s=>this.deletePairing(s.topic)))},this.onRelayEventRequest=i=>{const{topic:s,payload:a}=i;switch(a.method){case"wc_pairingPing":return this.onPairingPingRequest(s,a);case"wc_pairingDelete":return this.onPairingDeleteRequest(s,a);default:return this.onUnknownRpcMethodRequest(s,a)}},this.onRelayEventResponse=async i=>{const{topic:s,payload:a}=i,f=(await this.core.history.get(s,a.id)).request.method;switch(f){case"wc_pairingPing":return this.onPairingPingResponse(s,a);default:return this.onUnknownRpcMethodResponse(f)}},this.onPairingPingRequest=async(i,s)=>{const{id:a}=s;try{this.isValidPing({topic:i}),await this.sendResult(a,i,!0),this.events.emit(ws.ping,{id:a,topic:i})}catch(f){await this.sendError(a,i,f),this.logger.error(f)}},this.onPairingPingResponse=(i,s)=>{const{id:a}=s;setTimeout(()=>{Cn(s)?this.events.emit(St("pairing_ping",a),{}):nn(s)&&this.events.emit(St("pairing_ping",a),{error:s.error})},500)},this.onPairingDeleteRequest=async(i,s)=>{const{id:a}=s;try{this.isValidDisconnect({topic:i}),await this.deletePairing(i),this.events.emit(ws.delete,{id:a,topic:i})}catch(f){await this.sendError(a,i,f),this.logger.error(f)}},this.onUnknownRpcMethodRequest=async(i,s)=>{const{id:a,method:f}=s;try{if(this.registeredMethods.includes(f))return;const u=Lt("WC_METHOD_UNSUPPORTED",f);await this.sendError(a,i,u),this.logger.error(u)}catch(u){await this.sendError(a,i,u),this.logger.error(u)}},this.onUnknownRpcMethodResponse=i=>{this.registeredMethods.includes(i)||this.logger.error(Lt("WC_METHOD_UNSUPPORTED",i))},this.isValidPair=(i,s)=>{var a;if(!Wr(i)){const{message:u}=Ae("MISSING_OR_INVALID",`pair() params: ${i}`);throw s.setError(Nn.malformed_pairing_uri),new Error(u)}if(!y9(i.uri)){const{message:u}=Ae("MISSING_OR_INVALID",`pair() uri: ${i.uri}`);throw s.setError(Nn.malformed_pairing_uri),new Error(u)}const f=c1(i==null?void 0:i.uri);if(!((a=f==null?void 0:f.relay)!=null&&a.protocol)){const{message:u}=Ae("MISSING_OR_INVALID","pair() uri#relay-protocol");throw s.setError(Nn.malformed_pairing_uri),new Error(u)}if(!(f!=null&&f.symKey)){const{message:u}=Ae("MISSING_OR_INVALID","pair() uri#symKey");throw s.setError(Nn.malformed_pairing_uri),new Error(u)}if(f!=null&&f.expiryTimestamp&&Ie.toMiliseconds(f==null?void 0:f.expiryTimestamp)<Date.now()){s.setError(Nn.pairing_expired);const{message:u}=Ae("EXPIRED","pair() URI has expired. Please try again with a new connection URI.");throw new Error(u)}},this.isValidPing=async i=>{if(!Wr(i)){const{message:a}=Ae("MISSING_OR_INVALID",`ping() params: ${i}`);throw new Error(a)}const{topic:s}=i;await this.isValidPairingTopic(s)},this.isValidDisconnect=async i=>{if(!Wr(i)){const{message:a}=Ae("MISSING_OR_INVALID",`disconnect() params: ${i}`);throw new Error(a)}const{topic:s}=i;await this.isValidPairingTopic(s)},this.isValidPairingTopic=async i=>{if(!ar(i,!1)){const{message:s}=Ae("MISSING_OR_INVALID",`pairing topic should be a string: ${i}`);throw new Error(s)}if(!this.pairings.keys.includes(i)){const{message:s}=Ae("NO_MATCHING_KEY",`pairing topic doesn't exist: ${i}`);throw new Error(s)}if(Yn(this.pairings.get(i).expiry)){await this.deletePairing(i);const{message:s}=Ae("EXPIRED",`pairing topic: ${i}`);throw new Error(s)}},this.core=e,this.logger=kr(t,this.name),this.pairings=new Ps(this.core,this.logger,this.name,this.storagePrefix)}get context(){return fi(this.logger)}isInitialized(){if(!this.initialized){const{message:e}=Ae("NOT_INITIALIZED",this.name);throw new Error(e)}}registerRelayerEvents(){this.core.relayer.on(Br.message,async e=>{const{topic:t,message:i,transportType:s}=e;if(!this.pairings.keys.includes(t)||s===Kt.link_mode||this.ignoredPayloadTypes.includes(this.core.crypto.getPayloadType(i)))return;const a=await this.core.crypto.decode(t,i);try{Yu(a)?(this.core.history.set(t,a),this.onRelayEventRequest({topic:t,payload:a})):Wu(a)&&(await this.core.history.resolve(a),await this.onRelayEventResponse({topic:t,payload:a}),this.core.history.delete(t,a.id))}catch(f){this.logger.error(f)}})}registerExpirerEvents(){this.core.expirer.on(xi.expired,async e=>{const{topic:t}=wg(e.target);t&&this.pairings.keys.includes(t)&&(await this.deletePairing(t,!0),this.events.emit(ws.expire,{topic:t}))})}}class Dx extends V9{constructor(e,t){super(e,t),this.core=e,this.logger=t,this.records=new Map,this.events=new Bn.EventEmitter,this.name=q_,this.version=T_,this.cached=[],this.initialized=!1,this.storagePrefix=gn,this.init=async()=>{this.initialized||(this.logger.trace("Initialized"),await this.restore(),this.cached.forEach(i=>this.records.set(i.id,i)),this.cached=[],this.registerEventListeners(),this.initialized=!0)},this.set=(i,s,a)=>{if(this.isInitialized(),this.logger.debug("Setting JSON-RPC request history record"),this.logger.trace({type:"method",method:"set",topic:i,request:s,chainId:a}),this.records.has(s.id))return;const f={id:s.id,topic:i,request:{method:s.method,params:s.params||null},chainId:a,expiry:dr(Ie.THIRTY_DAYS)};this.records.set(f.id,f),this.persist(),this.events.emit(Ui.created,f)},this.resolve=async i=>{if(this.isInitialized(),this.logger.debug("Updating JSON-RPC response history record"),this.logger.trace({type:"method",method:"update",response:i}),!this.records.has(i.id))return;const s=await this.getRecord(i.id);typeof s.response>"u"&&(s.response=nn(i)?{error:i.error}:{result:i.result},this.records.set(s.id,s),this.persist(),this.events.emit(Ui.updated,s))},this.get=async(i,s)=>(this.isInitialized(),this.logger.debug("Getting record"),this.logger.trace({type:"method",method:"get",topic:i,id:s}),await this.getRecord(s)),this.delete=(i,s)=>{this.isInitialized(),this.logger.debug("Deleting record"),this.logger.trace({type:"method",method:"delete",id:s}),this.values.forEach(a=>{if(a.topic===i){if(typeof s<"u"&&a.id!==s)return;this.records.delete(a.id),this.events.emit(Ui.deleted,a)}}),this.persist()},this.exists=async(i,s)=>(this.isInitialized(),this.records.has(s)?(await this.getRecord(s)).topic===i:!1),this.on=(i,s)=>{this.events.on(i,s)},this.once=(i,s)=>{this.events.once(i,s)},this.off=(i,s)=>{this.events.off(i,s)},this.removeListener=(i,s)=>{this.events.removeListener(i,s)},this.logger=kr(t,this.name)}get context(){return fi(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}get size(){return this.records.size}get keys(){return Array.from(this.records.keys())}get values(){return Array.from(this.records.values())}get pending(){const e=[];return this.values.forEach(t=>{if(typeof t.response<"u")return;const i={topic:t.topic,request:_s(t.request.method,t.request.params,t.id),chainId:t.chainId};return e.push(i)}),e}async setJsonRpcRecords(e){await this.core.storage.setItem(this.storageKey,e)}async getJsonRpcRecords(){return await this.core.storage.getItem(this.storageKey)}getRecord(e){this.isInitialized();const t=this.records.get(e);if(!t){const{message:i}=Ae("NO_MATCHING_KEY",`${this.name}: ${e}`);throw new Error(i)}return t}async persist(){await this.setJsonRpcRecords(this.values),this.events.emit(Ui.sync)}async restore(){try{const e=await this.getJsonRpcRecords();if(typeof e>"u"||!e.length)return;if(this.records.size){const{message:t}=Ae("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(t),new Error(t)}this.cached=e,this.logger.debug(`Successfully Restored records for ${this.name}`),this.logger.trace({type:"method",method:"restore",records:this.values})}catch(e){this.logger.debug(`Failed to Restore records for ${this.name}`),this.logger.error(e)}}registerEventListeners(){this.events.on(Ui.created,e=>{const t=Ui.created;this.logger.info(`Emitting ${t}`),this.logger.debug({type:"event",event:t,record:e})}),this.events.on(Ui.updated,e=>{const t=Ui.updated;this.logger.info(`Emitting ${t}`),this.logger.debug({type:"event",event:t,record:e})}),this.events.on(Ui.deleted,e=>{const t=Ui.deleted;this.logger.info(`Emitting ${t}`),this.logger.debug({type:"event",event:t,record:e})}),this.core.heartbeat.on(oo.pulse,()=>{this.cleanup()})}cleanup(){try{this.isInitialized();let e=!1;this.records.forEach(t=>{Ie.toMiliseconds(t.expiry||0)-Date.now()<=0&&(this.logger.info(`Deleting expired history log: ${t.id}`),this.records.delete(t.id),this.events.emit(Ui.deleted,t,!1),e=!0)}),e&&this.persist()}catch(e){this.logger.warn(e)}}isInitialized(){if(!this.initialized){const{message:e}=Ae("NOT_INITIALIZED",this.name);throw new Error(e)}}}class Bx extends Z9{constructor(e,t){super(e,t),this.core=e,this.logger=t,this.expirations=new Map,this.events=new Bn.EventEmitter,this.name=F_,this.version=D_,this.cached=[],this.initialized=!1,this.storagePrefix=gn,this.init=async()=>{this.initialized||(this.logger.trace("Initialized"),await this.restore(),this.cached.forEach(i=>this.expirations.set(i.target,i)),this.cached=[],this.registerEventListeners(),this.initialized=!0)},this.has=i=>{try{const s=this.formatTarget(i);return typeof this.getExpiration(s)<"u"}catch{return!1}},this.set=(i,s)=>{this.isInitialized();const a=this.formatTarget(i),f={target:a,expiry:s};this.expirations.set(a,f),this.checkExpiry(a,f),this.events.emit(xi.created,{target:a,expiration:f})},this.get=i=>{this.isInitialized();const s=this.formatTarget(i);return this.getExpiration(s)},this.del=i=>{if(this.isInitialized(),this.has(i)){const s=this.formatTarget(i),a=this.getExpiration(s);this.expirations.delete(s),this.events.emit(xi.deleted,{target:s,expiration:a})}},this.on=(i,s)=>{this.events.on(i,s)},this.once=(i,s)=>{this.events.once(i,s)},this.off=(i,s)=>{this.events.off(i,s)},this.removeListener=(i,s)=>{this.events.removeListener(i,s)},this.logger=kr(t,this.name)}get context(){return fi(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}get length(){return this.expirations.size}get keys(){return Array.from(this.expirations.keys())}get values(){return Array.from(this.expirations.values())}formatTarget(e){if(typeof e=="string")return L4(e);if(typeof e=="number")return U4(e);const{message:t}=Ae("UNKNOWN_TYPE",`Target type: ${typeof e}`);throw new Error(t)}async setExpirations(e){await this.core.storage.setItem(this.storageKey,e)}async getExpirations(){return await this.core.storage.getItem(this.storageKey)}async persist(){await this.setExpirations(this.values),this.events.emit(xi.sync)}async restore(){try{const e=await this.getExpirations();if(typeof e>"u"||!e.length)return;if(this.expirations.size){const{message:t}=Ae("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(t),new Error(t)}this.cached=e,this.logger.debug(`Successfully Restored expirations for ${this.name}`),this.logger.trace({type:"method",method:"restore",expirations:this.values})}catch(e){this.logger.debug(`Failed to Restore expirations for ${this.name}`),this.logger.error(e)}}getExpiration(e){const t=this.expirations.get(e);if(!t){const{message:i}=Ae("NO_MATCHING_KEY",`${this.name}: ${e}`);throw this.logger.warn(i),new Error(i)}return t}checkExpiry(e,t){const{expiry:i}=t;Ie.toMiliseconds(i)-Date.now()<=0&&this.expire(e,t)}expire(e,t){this.expirations.delete(e),this.events.emit(xi.expired,{target:e,expiration:t})}checkExpirations(){this.core.relayer.connected&&this.expirations.forEach((e,t)=>this.checkExpiry(t,e))}registerEventListeners(){this.core.heartbeat.on(oo.pulse,()=>this.checkExpirations()),this.events.on(xi.created,e=>{const t=xi.created;this.logger.info(`Emitting ${t}`),this.logger.debug({type:"event",event:t,data:e}),this.persist()}),this.events.on(xi.expired,e=>{const t=xi.expired;this.logger.info(`Emitting ${t}`),this.logger.debug({type:"event",event:t,data:e}),this.persist()}),this.events.on(xi.deleted,e=>{const t=xi.deleted;this.logger.info(`Emitting ${t}`),this.logger.debug({type:"event",event:t,data:e}),this.persist()})}isInitialized(){if(!this.initialized){const{message:e}=Ae("NOT_INITIALIZED",this.name);throw new Error(e)}}}var Qt={};Object.defineProperty(Qt,"__esModule",{value:!0}),Qt.getLocalStorage=Qt.getLocalStorageOrThrow=Qt.getCrypto=Qt.getCryptoOrThrow=Qt.getLocation=Qt.getLocationOrThrow=Qt.getNavigator=Qt.getNavigatorOrThrow=Pv=Qt.getDocument=Qt.getDocumentOrThrow=Qt.getFromWindowOrThrow=Qt.getFromWindow=void 0;function Rs(r){let e;return typeof window<"u"&&typeof window[r]<"u"&&(e=window[r]),e}Qt.getFromWindow=Rs;function pa(r){const e=Rs(r);if(!e)throw new Error(`${r} is not defined in Window`);return e}Qt.getFromWindowOrThrow=pa;function Lx(){return pa("document")}Qt.getDocumentOrThrow=Lx;function Ux(){return Rs("document")}var Pv=Qt.getDocument=Ux;function zx(){return pa("navigator")}Qt.getNavigatorOrThrow=zx;function kx(){return Rs("navigator")}Qt.getNavigator=kx;function $x(){return pa("location")}Qt.getLocationOrThrow=$x;function jx(){return Rs("location")}Qt.getLocation=jx;function Hx(){return pa("crypto")}Qt.getCryptoOrThrow=Hx;function Kx(){return Rs("crypto")}Qt.getCrypto=Kx;function Gx(){return pa("localStorage")}Qt.getLocalStorageOrThrow=Gx;function Vx(){return Rs("localStorage")}Qt.getLocalStorage=Vx;class Jx extends e_{constructor(e,t,i){super(e,t,i),this.core=e,this.logger=t,this.store=i,this.name=B_,this.verifyUrlV3=U_,this.storagePrefix=gn,this.version=dv,this.init=async()=>{var s;this.isDevEnv||(this.publicKey=await this.store.getItem(this.storeKey),this.publicKey&&Ie.toMiliseconds((s=this.publicKey)==null?void 0:s.expiresAt)<Date.now()&&(this.logger.debug("verify v2 public key expired"),await this.removePublicKey()))},this.register=async s=>{if(!uo()||this.isDevEnv)return;const a=window.location.origin,{id:f,decryptedId:u}=s,d=`${this.verifyUrlV3}/attestation?projectId=${this.core.projectId}&origin=${a}&id=${f}&decryptedId=${u}`;try{const l=Pv(),w=this.startAbortTimer(Ie.ONE_SECOND*5),x=await new Promise((C,R)=>{const N=()=>{window.removeEventListener("message",U),l.body.removeChild(T),R("attestation aborted")};this.abortController.signal.addEventListener("abort",N);const T=l.createElement("iframe");T.src=d,T.style.display="none",T.addEventListener("error",N,{signal:this.abortController.signal});const U=Q=>{if(Q.data&&typeof Q.data=="string")try{const F=JSON.parse(Q.data);if(F.type==="verify_attestation"){if(Ou(F.attestation).payload.id!==f)return;clearInterval(w),l.body.removeChild(T),this.abortController.signal.removeEventListener("abort",N),window.removeEventListener("message",U),C(F.attestation===null?"":F.attestation)}}catch(F){this.logger.warn(F)}};l.body.appendChild(T),window.addEventListener("message",U,{signal:this.abortController.signal})});return this.logger.debug("jwt attestation",x),x}catch(l){this.logger.warn(l)}return""},this.resolve=async s=>{if(this.isDevEnv)return"";const{attestationId:a,hash:f,encryptedId:u}=s;if(a===""){this.logger.debug("resolve: attestationId is empty, skipping");return}if(a){if(Ou(a).payload.id!==u)return;const l=await this.isValidJwtAttestation(a);if(l){if(!l.isVerified){this.logger.warn("resolve: jwt attestation: origin url not verified");return}return l}}if(!f)return;const d=this.getVerifyUrl(s==null?void 0:s.verifyUrl);return this.fetchAttestation(f,d)},this.fetchAttestation=async(s,a)=>{this.logger.debug(`resolving attestation: ${s} from url: ${a}`);const f=this.startAbortTimer(Ie.ONE_SECOND*5),u=await fetch(`${a}/attestation/${s}?v2Supported=true`,{signal:this.abortController.signal});return clearTimeout(f),u.status===200?await u.json():void 0},this.getVerifyUrl=s=>{let a=s||ro;return z_.includes(a)||(this.logger.info(`verify url: ${a}, not included in trusted list, assigning default: ${ro}`),a=ro),a},this.fetchPublicKey=async()=>{try{this.logger.debug(`fetching public key from: ${this.verifyUrlV3}`);const s=this.startAbortTimer(Ie.FIVE_SECONDS),a=await fetch(`${this.verifyUrlV3}/public-key`,{signal:this.abortController.signal});return clearTimeout(s),await a.json()}catch(s){this.logger.warn(s)}},this.persistPublicKey=async s=>{this.logger.debug("persisting public key to local storage",s),await this.store.setItem(this.storeKey,s),this.publicKey=s},this.removePublicKey=async()=>{this.logger.debug("removing verify v2 public key from storage"),await this.store.removeItem(this.storeKey),this.publicKey=void 0},this.isValidJwtAttestation=async s=>{const a=await this.getPublicKey();try{if(a)return this.validateAttestation(s,a)}catch(u){this.logger.error(u),this.logger.warn("error validating attestation")}const f=await this.fetchAndPersistPublicKey();try{if(f)return this.validateAttestation(s,f)}catch(u){this.logger.error(u),this.logger.warn("error validating attestation")}},this.getPublicKey=async()=>this.publicKey?this.publicKey:await this.fetchAndPersistPublicKey(),this.fetchAndPersistPublicKey=async()=>{if(this.fetchPromise)return await this.fetchPromise,this.publicKey;this.fetchPromise=new Promise(async a=>{const f=await this.fetchPublicKey();f&&(await this.persistPublicKey(f),a(f))});const s=await this.fetchPromise;return this.fetchPromise=void 0,s},this.validateAttestation=(s,a)=>{const f=e9(s,a.publicKey),u={hasExpired:Ie.toMiliseconds(f.exp)<Date.now(),payload:f};if(u.hasExpired)throw this.logger.warn("resolve: jwt attestation expired"),new Error("JWT attestation expired");return{origin:u.payload.origin,isScam:u.payload.isScam,isVerified:u.payload.isVerified}},this.logger=kr(t,this.name),this.abortController=new AbortController,this.isDevEnv=n0(),this.init()}get storeKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//verify:public:key"}get context(){return fi(this.logger)}startAbortTimer(e){return this.abortController=new AbortController,setTimeout(()=>this.abortController.abort(),Ie.toMiliseconds(e))}}class Qx extends t_{constructor(e,t){super(e,t),this.projectId=e,this.logger=t,this.context=k_,this.registerDeviceToken=async i=>{const{clientId:s,token:a,notificationType:f,enableEncrypted:u=!1}=i,d=`${$_}/${this.projectId}/clients`;await fetch(d,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({client_id:s,type:f,token:a,always_raw:u})})},this.logger=kr(t,this.context)}}var Yx=Object.defineProperty,T1=Object.getOwnPropertySymbols,Wx=Object.prototype.hasOwnProperty,Xx=Object.prototype.propertyIsEnumerable,F1=(r,e,t)=>e in r?Yx(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t,Ga=(r,e)=>{for(var t in e||(e={}))Wx.call(e,t)&&F1(r,t,e[t]);if(T1)for(var t of T1(e))Xx.call(e,t)&&F1(r,t,e[t]);return r};class Zx extends r_{constructor(e,t,i=!0){super(e,t,i),this.core=e,this.logger=t,this.context=H_,this.storagePrefix=gn,this.storageVersion=j_,this.events=new Map,this.shouldPersist=!1,this.init=async()=>{if(!n0())try{const s={eventId:Pp(),timestamp:Date.now(),domain:this.getAppDomain(),props:{event:"INIT",type:"",properties:{client_id:await this.core.crypto.getClientId(),user_agent:vg(this.core.relayer.protocol,this.core.relayer.version,ku)}}};await this.sendEvent([s])}catch(s){this.logger.warn(s)}},this.createEvent=s=>{const{event:a="ERROR",type:f="",properties:{topic:u,trace:d}}=s,l=Pp(),w=this.core.projectId||"",x=Date.now(),C=Ga({eventId:l,timestamp:x,props:{event:a,type:f,properties:{topic:u,trace:d}},bundleId:w,domain:this.getAppDomain()},this.setMethods(l));return this.telemetryEnabled&&(this.events.set(l,C),this.shouldPersist=!0),C},this.getEvent=s=>{const{eventId:a,topic:f}=s;if(a)return this.events.get(a);const u=Array.from(this.events.values()).find(d=>d.props.properties.topic===f);if(u)return Ga(Ga({},u),this.setMethods(u.eventId))},this.deleteEvent=s=>{const{eventId:a}=s;this.events.delete(a),this.shouldPersist=!0},this.setEventListeners=()=>{this.core.heartbeat.on(oo.pulse,async()=>{this.shouldPersist&&await this.persist(),this.events.forEach(s=>{Ie.fromMiliseconds(Date.now())-Ie.fromMiliseconds(s.timestamp)>K_&&(this.events.delete(s.eventId),this.shouldPersist=!0)})})},this.setMethods=s=>({addTrace:a=>this.addTrace(s,a),setError:a=>this.setError(s,a)}),this.addTrace=(s,a)=>{const f=this.events.get(s);f&&(f.props.properties.trace.push(a),this.events.set(s,f),this.shouldPersist=!0)},this.setError=(s,a)=>{const f=this.events.get(s);f&&(f.props.type=a,f.timestamp=Date.now(),this.events.set(s,f),this.shouldPersist=!0)},this.persist=async()=>{await this.core.storage.setItem(this.storageKey,Array.from(this.events.values())),this.shouldPersist=!1},this.restore=async()=>{try{const s=await this.core.storage.getItem(this.storageKey)||[];if(!s.length)return;s.forEach(a=>{this.events.set(a.eventId,Ga(Ga({},a),this.setMethods(a.eventId)))})}catch(s){this.logger.warn(s)}},this.submit=async()=>{if(!this.telemetryEnabled||this.events.size===0)return;const s=[];for(const[a,f]of this.events)f.props.type&&s.push(f);if(s.length!==0)try{if((await this.sendEvent(s)).ok)for(const a of s)this.events.delete(a.eventId),this.shouldPersist=!0}catch(a){this.logger.warn(a)}},this.sendEvent=async s=>{const a=this.getAppDomain()?"":"&sp=desktop";return await fetch(`${G_}?projectId=${this.core.projectId}&st=events_sdk&sv=js-${ku}${a}`,{method:"POST",body:JSON.stringify(s)})},this.getAppDomain=()=>gg().url,this.logger=kr(t,this.context),this.telemetryEnabled=i,i?this.restore().then(async()=>{await this.submit(),this.setEventListeners()}):this.persist()}get storageKey(){return this.storagePrefix+this.storageVersion+this.core.customStoragePrefix+"//"+this.context}}var eE=Object.defineProperty,D1=Object.getOwnPropertySymbols,tE=Object.prototype.hasOwnProperty,rE=Object.prototype.propertyIsEnumerable,B1=(r,e,t)=>e in r?eE(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t,L1=(r,e)=>{for(var t in e||(e={}))tE.call(e,t)&&B1(r,t,e[t]);if(D1)for(var t of D1(e))rE.call(e,t)&&B1(r,t,e[t]);return r};class p0 extends G9{constructor(e){var t;super(e),this.protocol=lv,this.version=dv,this.name=pv,this.events=new Bn.EventEmitter,this.initialized=!1,this.on=(f,u)=>this.events.on(f,u),this.once=(f,u)=>this.events.once(f,u),this.off=(f,u)=>this.events.off(f,u),this.removeListener=(f,u)=>this.events.removeListener(f,u),this.dispatchEnvelope=({topic:f,message:u,sessionExists:d})=>{if(!f||!u)return;const l={topic:f,message:u,publishedAt:Date.now(),transportType:Kt.link_mode};this.relayer.onLinkMessageEvent(l,{sessionExists:d})},this.projectId=e==null?void 0:e.projectId,this.relayUrl=(e==null?void 0:e.relayUrl)||vv,this.customStoragePrefix=e!=null&&e.customStoragePrefix?`:${e.customStoragePrefix}`:"";const i=tf({level:typeof(e==null?void 0:e.logger)=="string"&&e.logger?e.logger:l_.logger}),{logger:s,chunkLoggerController:a}=w5({opts:i,maxSizeInBytes:e==null?void 0:e.maxLogBlobSizeInBytes,loggerOverride:e==null?void 0:e.logger});this.logChunkController=a,(t=this.logChunkController)!=null&&t.downloadLogsBlobInBrowser&&(window.downloadLogsBlobInBrowser=async()=>{var f,u;(f=this.logChunkController)!=null&&f.downloadLogsBlobInBrowser&&((u=this.logChunkController)==null||u.downloadLogsBlobInBrowser({clientId:await this.crypto.getClientId()}))}),this.logger=kr(s,this.name),this.heartbeat=new _5,this.crypto=new bx(this,this.logger,e==null?void 0:e.keychain),this.history=new Dx(this,this.logger),this.expirer=new Bx(this,this.logger),this.storage=e!=null&&e.storage?e.storage:new A5(L1(L1({},d_),e==null?void 0:e.storageOptions)),this.relayer=new Nx({core:this,logger:this.logger,relayUrl:this.relayUrl,projectId:this.projectId}),this.pairing=new Fx(this,this.logger),this.verify=new Jx(this,this.logger,this.storage),this.echoClient=new Qx(this.projectId||"",this.logger),this.linkModeSupportedApps=[],this.eventClient=new Zx(this,this.logger,e==null?void 0:e.telemetryEnabled)}static async init(e){const t=new p0(e);await t.initialize();const i=await t.crypto.getClientId();return await t.storage.setItem(I_,i),t}get context(){return fi(this.logger)}async start(){this.initialized||await this.initialize()}async getLogsBlob(){var e;return(e=this.logChunkController)==null?void 0:e.logsToBlob({clientId:await this.crypto.getClientId()})}async addLinkModeSupportedApp(e){this.linkModeSupportedApps.includes(e)||(this.linkModeSupportedApps.push(e),await this.storage.setItem(w1,this.linkModeSupportedApps))}async initialize(){this.logger.trace("Initialized");try{await this.crypto.init(),await this.history.init(),await this.expirer.init(),await this.relayer.init(),await this.heartbeat.init(),await this.pairing.init(),this.eventClient.init(),this.linkModeSupportedApps=await this.storage.getItem(w1)||[],this.initialized=!0,this.logger.info("Core Initialization Success")}catch(e){throw this.logger.warn(`Core Initialization Failure at epoch ${Date.now()}`,e),this.logger.error(e.message),e}}}const iE=p0,Rv="wc",Cv=2,Nv="client",g0=`${Rv}@${Cv}:${Nv}:`,Su={name:Nv,logger:"error"},U1="WALLETCONNECT_DEEPLINK_CHOICE",nE="proposal",Ov="Proposal expired",sE="session",Ys=Ie.SEVEN_DAYS,aE="engine",br={wc_sessionPropose:{req:{ttl:Ie.FIVE_MINUTES,prompt:!0,tag:1100},res:{ttl:Ie.FIVE_MINUTES,prompt:!1,tag:1101},reject:{ttl:Ie.FIVE_MINUTES,prompt:!1,tag:1120},autoReject:{ttl:Ie.FIVE_MINUTES,prompt:!1,tag:1121}},wc_sessionSettle:{req:{ttl:Ie.FIVE_MINUTES,prompt:!1,tag:1102},res:{ttl:Ie.FIVE_MINUTES,prompt:!1,tag:1103}},wc_sessionUpdate:{req:{ttl:Ie.ONE_DAY,prompt:!1,tag:1104},res:{ttl:Ie.ONE_DAY,prompt:!1,tag:1105}},wc_sessionExtend:{req:{ttl:Ie.ONE_DAY,prompt:!1,tag:1106},res:{ttl:Ie.ONE_DAY,prompt:!1,tag:1107}},wc_sessionRequest:{req:{ttl:Ie.FIVE_MINUTES,prompt:!0,tag:1108},res:{ttl:Ie.FIVE_MINUTES,prompt:!1,tag:1109}},wc_sessionEvent:{req:{ttl:Ie.FIVE_MINUTES,prompt:!0,tag:1110},res:{ttl:Ie.FIVE_MINUTES,prompt:!1,tag:1111}},wc_sessionDelete:{req:{ttl:Ie.ONE_DAY,prompt:!1,tag:1112},res:{ttl:Ie.ONE_DAY,prompt:!1,tag:1113}},wc_sessionPing:{req:{ttl:Ie.ONE_DAY,prompt:!1,tag:1114},res:{ttl:Ie.ONE_DAY,prompt:!1,tag:1115}},wc_sessionAuthenticate:{req:{ttl:Ie.ONE_HOUR,prompt:!0,tag:1116},res:{ttl:Ie.ONE_HOUR,prompt:!1,tag:1117},reject:{ttl:Ie.FIVE_MINUTES,prompt:!1,tag:1118},autoReject:{ttl:Ie.FIVE_MINUTES,prompt:!1,tag:1119}}},Mu={min:Ie.FIVE_MINUTES,max:Ie.SEVEN_DAYS},tn={idle:"IDLE",active:"ACTIVE"},oE="request",cE=["wc_sessionPropose","wc_sessionRequest","wc_authRequest","wc_sessionAuthenticate"],fE="wc",hE="auth",uE="authKeys",lE="pairingTopics",dE="requests",hf=`${fE}@${1.5}:${hE}:`,$c=`${hf}:PUB_KEY`;var pE=Object.defineProperty,gE=Object.defineProperties,vE=Object.getOwnPropertyDescriptors,z1=Object.getOwnPropertySymbols,bE=Object.prototype.hasOwnProperty,mE=Object.prototype.propertyIsEnumerable,k1=(r,e,t)=>e in r?pE(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t,er=(r,e)=>{for(var t in e||(e={}))bE.call(e,t)&&k1(r,t,e[t]);if(z1)for(var t of z1(e))mE.call(e,t)&&k1(r,t,e[t]);return r},ki=(r,e)=>gE(r,vE(e));class yE extends n_{constructor(e){super(e),this.name=aE,this.events=new Xu,this.initialized=!1,this.requestQueue={state:tn.idle,queue:[]},this.sessionRequestQueue={state:tn.idle,queue:[]},this.requestQueueDelay=Ie.ONE_SECOND,this.expectedPairingMethodMap=new Map,this.recentlyDeletedMap=new Map,this.recentlyDeletedLimit=200,this.relayMessageCache=[],this.init=async()=>{this.initialized||(await this.cleanup(),this.registerRelayerEvents(),this.registerExpirerEvents(),this.registerPairingEvents(),await this.registerLinkModeListeners(),this.client.core.pairing.register({methods:Object.keys(br)}),this.initialized=!0,setTimeout(()=>{this.sessionRequestQueue.queue=this.getPendingSessionRequests(),this.processSessionRequestQueue()},Ie.toMiliseconds(this.requestQueueDelay)))},this.connect=async t=>{this.isInitialized(),await this.confirmOnlineStateOrThrow();const i=ki(er({},t),{requiredNamespaces:t.requiredNamespaces||{},optionalNamespaces:t.optionalNamespaces||{}});await this.isValidConnect(i);const{pairingTopic:s,requiredNamespaces:a,optionalNamespaces:f,sessionProperties:u,relays:d}=i;let l=s,w,x=!1;try{l&&(x=this.client.core.pairing.pairings.get(l).active)}catch(D){throw this.client.logger.error(`connect() -> pairing.get(${l}) failed`),D}if(!l||!x){const{topic:D,uri:B}=await this.client.core.pairing.create();l=D,w=B}if(!l){const{message:D}=Ae("NO_MATCHING_KEY",`connect() pairing topic: ${l}`);throw new Error(D)}const C=await this.client.core.crypto.generateKeyPair(),R=br.wc_sessionPropose.req.ttl||Ie.FIVE_MINUTES,N=dr(R),T=er({requiredNamespaces:a,optionalNamespaces:f,relays:d??[{protocol:gv}],proposer:{publicKey:C,metadata:this.client.metadata},expiryTimestamp:N,pairingTopic:l},u&&{sessionProperties:u}),{reject:U,resolve:Q,done:F}=ys(R,Ov);this.events.once(St("session_connect"),async({error:D,session:B})=>{if(D)U(D);else if(B){B.self.publicKey=C;const H=ki(er({},B),{pairingTopic:T.pairingTopic,requiredNamespaces:T.requiredNamespaces,optionalNamespaces:T.optionalNamespaces,transportType:Kt.relay});await this.client.session.set(B.topic,H),await this.setExpiry(B.topic,B.expiry),l&&await this.client.core.pairing.updateMetadata({topic:l,metadata:B.peer.metadata}),this.cleanupDuplicatePairings(H),Q(H)}});const V=await this.sendRequest({topic:l,method:"wc_sessionPropose",params:T,throwOnFailedPublish:!0});return await this.setProposal(V,er({id:V},T)),{uri:w,approval:F}},this.pair=async t=>{this.isInitialized(),await this.confirmOnlineStateOrThrow();try{return await this.client.core.pairing.pair(t)}catch(i){throw this.client.logger.error("pair() failed"),i}},this.approve=async t=>{var i,s,a;const f=this.client.core.eventClient.createEvent({properties:{topic:(i=t==null?void 0:t.id)==null?void 0:i.toString(),trace:[zi.session_approve_started]}});try{this.isInitialized(),await this.confirmOnlineStateOrThrow()}catch($){throw f.setError(bs.no_internet_connection),$}try{await this.isValidProposalId(t==null?void 0:t.id)}catch($){throw this.client.logger.error(`approve() -> proposal.get(${t==null?void 0:t.id}) failed`),f.setError(bs.proposal_not_found),$}try{await this.isValidApprove(t)}catch($){throw this.client.logger.error("approve() -> isValidApprove() failed"),f.setError(bs.session_approve_namespace_validation_failure),$}const{id:u,relayProtocol:d,namespaces:l,sessionProperties:w,sessionConfig:x}=t,C=this.client.proposal.get(u);this.client.core.eventClient.deleteEvent({eventId:f.eventId});const{pairingTopic:R,proposer:N,requiredNamespaces:T,optionalNamespaces:U}=C;let Q=(s=this.client.core.eventClient)==null?void 0:s.getEvent({topic:R});Q||(Q=(a=this.client.core.eventClient)==null?void 0:a.createEvent({type:zi.session_approve_started,properties:{topic:R,trace:[zi.session_approve_started,zi.session_namespaces_validation_success]}}));const F=await this.client.core.crypto.generateKeyPair(),V=N.publicKey,D=await this.client.core.crypto.generateSharedKey(F,V),B=er(er({relay:{protocol:d??"irn"},namespaces:l,controller:{publicKey:F,metadata:this.client.metadata},expiry:dr(Ys)},w&&{sessionProperties:w}),x&&{sessionConfig:x}),H=Kt.relay;Q.addTrace(zi.subscribing_session_topic);try{await this.client.core.relayer.subscribe(D,{transportType:H})}catch($){throw Q.setError(bs.subscribe_session_topic_failure),$}Q.addTrace(zi.subscribe_session_topic_success);const E=ki(er({},B),{topic:D,requiredNamespaces:T,optionalNamespaces:U,pairingTopic:R,acknowledged:!1,self:B.controller,peer:{publicKey:N.publicKey,metadata:N.metadata},controller:F,transportType:Kt.relay});await this.client.session.set(D,E),Q.addTrace(zi.store_session);try{Q.addTrace(zi.publishing_session_settle),await this.sendRequest({topic:D,method:"wc_sessionSettle",params:B,throwOnFailedPublish:!0}).catch($=>{throw Q==null||Q.setError(bs.session_settle_publish_failure),$}),Q.addTrace(zi.session_settle_publish_success),Q.addTrace(zi.publishing_session_approve),await this.sendResult({id:u,topic:R,result:{relay:{protocol:d??"irn"},responderPublicKey:F},throwOnFailedPublish:!0}).catch($=>{throw Q==null||Q.setError(bs.session_approve_publish_failure),$}),Q.addTrace(zi.session_approve_publish_success)}catch($){throw this.client.logger.error($),this.client.session.delete(D,Lt("USER_DISCONNECTED")),await this.client.core.relayer.unsubscribe(D),$}return this.client.core.eventClient.deleteEvent({eventId:Q.eventId}),await this.client.core.pairing.updateMetadata({topic:R,metadata:N.metadata}),await this.client.proposal.delete(u,Lt("USER_DISCONNECTED")),await this.client.core.pairing.activate({topic:R}),await this.setExpiry(D,dr(Ys)),{topic:D,acknowledged:()=>Promise.resolve(this.client.session.get(D))}},this.reject=async t=>{this.isInitialized(),await this.confirmOnlineStateOrThrow();try{await this.isValidReject(t)}catch(f){throw this.client.logger.error("reject() -> isValidReject() failed"),f}const{id:i,reason:s}=t;let a;try{a=this.client.proposal.get(i).pairingTopic}catch(f){throw this.client.logger.error(`reject() -> proposal.get(${i}) failed`),f}a&&(await this.sendError({id:i,topic:a,error:s,rpcOpts:br.wc_sessionPropose.reject}),await this.client.proposal.delete(i,Lt("USER_DISCONNECTED")))},this.update=async t=>{this.isInitialized(),await this.confirmOnlineStateOrThrow();try{await this.isValidUpdate(t)}catch(x){throw this.client.logger.error("update() -> isValidUpdate() failed"),x}const{topic:i,namespaces:s}=t,{done:a,resolve:f,reject:u}=ys(),d=Js(),l=ea().toString(),w=this.client.session.get(i).namespaces;return this.events.once(St("session_update",d),({error:x})=>{x?u(x):f()}),await this.client.session.update(i,{namespaces:s}),await this.sendRequest({topic:i,method:"wc_sessionUpdate",params:{namespaces:s},throwOnFailedPublish:!0,clientRpcId:d,relayRpcId:l}).catch(x=>{this.client.logger.error(x),this.client.session.update(i,{namespaces:w}),u(x)}),{acknowledged:a}},this.extend=async t=>{this.isInitialized(),await this.confirmOnlineStateOrThrow();try{await this.isValidExtend(t)}catch(d){throw this.client.logger.error("extend() -> isValidExtend() failed"),d}const{topic:i}=t,s=Js(),{done:a,resolve:f,reject:u}=ys();return this.events.once(St("session_extend",s),({error:d})=>{d?u(d):f()}),await this.setExpiry(i,dr(Ys)),this.sendRequest({topic:i,method:"wc_sessionExtend",params:{},clientRpcId:s,throwOnFailedPublish:!0}).catch(d=>{u(d)}),{acknowledged:a}},this.request=async t=>{this.isInitialized();try{await this.isValidRequest(t)}catch(N){throw this.client.logger.error("request() -> isValidRequest() failed"),N}const{chainId:i,request:s,topic:a,expiry:f=br.wc_sessionRequest.req.ttl}=t,u=this.client.session.get(a);(u==null?void 0:u.transportType)===Kt.relay&&await this.confirmOnlineStateOrThrow();const d=Js(),l=ea().toString(),{done:w,resolve:x,reject:C}=ys(f,"Request expired. Please try again.");this.events.once(St("session_request",d),({error:N,result:T})=>{N?C(N):x(T)});const R=this.getAppLinkIfEnabled(u.peer.metadata,u.transportType);return R?(await this.sendRequest({clientRpcId:d,relayRpcId:l,topic:a,method:"wc_sessionRequest",params:{request:ki(er({},s),{expiryTimestamp:dr(f)}),chainId:i},expiry:f,throwOnFailedPublish:!0,appLink:R}).catch(N=>C(N)),this.client.events.emit("session_request_sent",{topic:a,request:s,chainId:i,id:d}),await w()):await Promise.all([new Promise(async N=>{await this.sendRequest({clientRpcId:d,relayRpcId:l,topic:a,method:"wc_sessionRequest",params:{request:ki(er({},s),{expiryTimestamp:dr(f)}),chainId:i},expiry:f,throwOnFailedPublish:!0}).catch(T=>C(T)),this.client.events.emit("session_request_sent",{topic:a,request:s,chainId:i,id:d}),N()}),new Promise(async N=>{var T;if(!((T=u.sessionConfig)!=null&&T.disableDeepLink)){const U=await $4(this.client.core.storage,U1);await z4({id:d,topic:a,wcDeepLink:U})}N()}),w()]).then(N=>N[2])},this.respond=async t=>{this.isInitialized(),await this.isValidRespond(t);const{topic:i,response:s}=t,{id:a}=s,f=this.client.session.get(i);f.transportType===Kt.relay&&await this.confirmOnlineStateOrThrow();const u=this.getAppLinkIfEnabled(f.peer.metadata,f.transportType);Cn(s)?await this.sendResult({id:a,topic:i,result:s.result,throwOnFailedPublish:!0,appLink:u}):nn(s)&&await this.sendError({id:a,topic:i,error:s.error,appLink:u}),this.cleanupAfterResponse(t)},this.ping=async t=>{this.isInitialized(),await this.confirmOnlineStateOrThrow();try{await this.isValidPing(t)}catch(s){throw this.client.logger.error("ping() -> isValidPing() failed"),s}const{topic:i}=t;if(this.client.session.keys.includes(i)){const s=Js(),a=ea().toString(),{done:f,resolve:u,reject:d}=ys();this.events.once(St("session_ping",s),({error:l})=>{l?d(l):u()}),await Promise.all([this.sendRequest({topic:i,method:"wc_sessionPing",params:{},throwOnFailedPublish:!0,clientRpcId:s,relayRpcId:a}),f()])}else this.client.core.pairing.pairings.keys.includes(i)&&await this.client.core.pairing.ping({topic:i})},this.emit=async t=>{this.isInitialized(),await this.confirmOnlineStateOrThrow(),await this.isValidEmit(t);const{topic:i,event:s,chainId:a}=t,f=ea().toString();await this.sendRequest({topic:i,method:"wc_sessionEvent",params:{event:s,chainId:a},throwOnFailedPublish:!0,relayRpcId:f})},this.disconnect=async t=>{this.isInitialized(),await this.confirmOnlineStateOrThrow(),await this.isValidDisconnect(t);const{topic:i}=t;if(this.client.session.keys.includes(i))await this.sendRequest({topic:i,method:"wc_sessionDelete",params:Lt("USER_DISCONNECTED"),throwOnFailedPublish:!0}),await this.deleteSession({topic:i,emitEvent:!1});else if(this.client.core.pairing.pairings.keys.includes(i))await this.client.core.pairing.disconnect({topic:i});else{const{message:s}=Ae("MISMATCHED_TOPIC",`Session or pairing topic not found: ${i}`);throw new Error(s)}},this.find=t=>(this.isInitialized(),this.client.session.getAll().filter(i=>b9(i,t))),this.getPendingSessionRequests=()=>this.client.pendingRequest.getAll(),this.authenticate=async(t,i)=>{var s;this.isInitialized(),this.isValidAuthenticate(t);const a=i&&this.client.core.linkModeSupportedApps.includes(i)&&((s=this.client.metadata.redirect)==null?void 0:s.linkMode),f=a?Kt.link_mode:Kt.relay;f===Kt.relay&&await this.confirmOnlineStateOrThrow();const{chains:u,statement:d="",uri:l,domain:w,nonce:x,type:C,exp:R,nbf:N,methods:T=[],expiry:U}=t,Q=[...t.resources||[]],{topic:F,uri:V}=await this.client.core.pairing.create({methods:["wc_sessionAuthenticate"],transportType:f});this.client.logger.info({message:"Generated new pairing",pairing:{topic:F,uri:V}});const D=await this.client.core.crypto.generateKeyPair(),B=kc(D);if(await Promise.all([this.client.auth.authKeys.set($c,{responseTopic:B,publicKey:D}),this.client.auth.pairingTopics.set(B,{topic:B,pairingTopic:F})]),await this.client.core.relayer.subscribe(B,{transportType:f}),this.client.logger.info(`sending request to new pairing topic: ${F}`),T.length>0){const{namespace:I}=Xa(u[0]);let S=L7(I,"request",T);zc(Q)&&(S=z7(S,Q.pop())),Q.push(S)}const H=U&&U>br.wc_sessionAuthenticate.req.ttl?U:br.wc_sessionAuthenticate.req.ttl,E={authPayload:{type:C??"caip122",chains:u,statement:d,aud:l,domain:w,version:"1",nonce:x,iat:new Date().toISOString(),exp:R,nbf:N,resources:Q},requester:{publicKey:D,metadata:this.client.metadata},expiryTimestamp:dr(H)},$={eip155:{chains:u,methods:[...new Set(["personal_sign",...T])],events:["chainChanged","accountsChanged"]}},ne={requiredNamespaces:{},optionalNamespaces:$,relays:[{protocol:"irn"}],pairingTopic:F,proposer:{publicKey:D,metadata:this.client.metadata},expiryTimestamp:dr(br.wc_sessionPropose.req.ttl)},{done:fe,resolve:z,reject:y}=ys(H,"Request expired"),c=async({error:I,session:S})=>{if(this.events.off(St("session_request",p),h),I)y(I);else if(S){S.self.publicKey=D,await this.client.session.set(S.topic,S),await this.setExpiry(S.topic,S.expiry),F&&await this.client.core.pairing.updateMetadata({topic:F,metadata:S.peer.metadata});const v=this.client.session.get(S.topic);await this.deleteProposal(m),z({session:v})}},h=async I=>{var S,v,b;if(await this.deletePendingAuthRequest(p,{message:"fulfilled",code:0}),I.error){const G=Lt("WC_METHOD_UNSUPPORTED","wc_sessionAuthenticate");return I.error.code===G.code?void 0:(this.events.off(St("session_connect"),c),y(I.error.message))}await this.deleteProposal(m),this.events.off(St("session_connect"),c);const{cacaos:O,responder:W}=I.result,te=[],P=[];for(const G of O){await Zp({cacao:G,projectId:this.client.core.projectId})||(this.client.logger.error(G,"Signature verification failed"),y(Lt("SESSION_SETTLEMENT_FAILED","Signature verification failed")));const{p:J}=G,A=zc(J.resources),K=[Xp(J.iss)],ae=Xc(J.iss);if(A){const oe=e1(A),he=t1(A);te.push(...oe),K.push(...he)}for(const oe of K)P.push(`${oe}:${ae}`)}const ee=await this.client.core.crypto.generateSharedKey(D,W.publicKey);let k;te.length>0&&(k={topic:ee,acknowledged:!0,self:{publicKey:D,metadata:this.client.metadata},peer:W,controller:W.publicKey,expiry:dr(Ys),requiredNamespaces:{},optionalNamespaces:{},relay:{protocol:"irn"},pairingTopic:F,namespaces:h1([...new Set(te)],[...new Set(P)]),transportType:f},await this.client.core.relayer.subscribe(ee,{transportType:f}),await this.client.session.set(ee,k),F&&await this.client.core.pairing.updateMetadata({topic:F,metadata:W.metadata}),k=this.client.session.get(ee)),(S=this.client.metadata.redirect)!=null&&S.linkMode&&(v=W.metadata.redirect)!=null&&v.linkMode&&(b=W.metadata.redirect)!=null&&b.universal&&i&&(this.client.core.addLinkModeSupportedApp(W.metadata.redirect.universal),this.client.session.update(ee,{transportType:Kt.link_mode})),z({auths:O,session:k})},p=Js(),m=Js();this.events.once(St("session_connect"),c),this.events.once(St("session_request",p),h);let _;try{if(a){const I=_s("wc_sessionAuthenticate",E,p);this.client.core.history.set(F,I);const S=await this.client.core.crypto.encode("",I,{type:vo,encoding:ka});_=Cc(i,F,S)}else await Promise.all([this.sendRequest({topic:F,method:"wc_sessionAuthenticate",params:E,expiry:t.expiry,throwOnFailedPublish:!0,clientRpcId:p}),this.sendRequest({topic:F,method:"wc_sessionPropose",params:ne,expiry:br.wc_sessionPropose.req.ttl,throwOnFailedPublish:!0,clientRpcId:m})])}catch(I){throw this.events.off(St("session_connect"),c),this.events.off(St("session_request",p),h),I}return await this.setProposal(m,er({id:m},ne)),await this.setAuthRequest(p,{request:ki(er({},E),{verifyContext:{}}),pairingTopic:F,transportType:f}),{uri:_??V,response:fe}},this.approveSessionAuthenticate=async t=>{const{id:i,auths:s}=t,a=this.client.core.eventClient.createEvent({properties:{topic:i.toString(),trace:[ms.authenticated_session_approve_started]}});try{this.isInitialized()}catch(U){throw a.setError(Ha.no_internet_connection),U}const f=this.getPendingAuthRequest(i);if(!f)throw a.setError(Ha.authenticated_session_pending_request_not_found),new Error(`Could not find pending auth request with id ${i}`);const u=f.transportType||Kt.relay;u===Kt.relay&&await this.confirmOnlineStateOrThrow();const d=f.requester.publicKey,l=await this.client.core.crypto.generateKeyPair(),w=kc(d),x={type:Dn,receiverPublicKey:d,senderPublicKey:l},C=[],R=[];for(const U of s){if(!await Zp({cacao:U,projectId:this.client.core.projectId})){a.setError(Ha.invalid_cacao);const B=Lt("SESSION_SETTLEMENT_FAILED","Signature verification failed");throw await this.sendError({id:i,topic:w,error:B,encodeOpts:x}),new Error(B.message)}a.addTrace(ms.cacaos_verified);const{p:Q}=U,F=zc(Q.resources),V=[Xp(Q.iss)],D=Xc(Q.iss);if(F){const B=e1(F),H=t1(F);C.push(...B),V.push(...H)}for(const B of V)R.push(`${B}:${D}`)}const N=await this.client.core.crypto.generateSharedKey(l,d);a.addTrace(ms.create_authenticated_session_topic);let T;if((C==null?void 0:C.length)>0){T={topic:N,acknowledged:!0,self:{publicKey:l,metadata:this.client.metadata},peer:{publicKey:d,metadata:f.requester.metadata},controller:d,expiry:dr(Ys),authentication:s,requiredNamespaces:{},optionalNamespaces:{},relay:{protocol:"irn"},pairingTopic:f.pairingTopic,namespaces:h1([...new Set(C)],[...new Set(R)]),transportType:u},a.addTrace(ms.subscribing_authenticated_session_topic);try{await this.client.core.relayer.subscribe(N,{transportType:u})}catch(U){throw a.setError(Ha.subscribe_authenticated_session_topic_failure),U}a.addTrace(ms.subscribe_authenticated_session_topic_success),await this.client.session.set(N,T),a.addTrace(ms.store_authenticated_session),await this.client.core.pairing.updateMetadata({topic:f.pairingTopic,metadata:f.requester.metadata})}a.addTrace(ms.publishing_authenticated_session_approve);try{await this.sendResult({topic:w,id:i,result:{cacaos:s,responder:{publicKey:l,metadata:this.client.metadata}},encodeOpts:x,throwOnFailedPublish:!0,appLink:this.getAppLinkIfEnabled(f.requester.metadata,u)})}catch(U){throw a.setError(Ha.authenticated_session_approve_publish_failure),U}return await this.client.auth.requests.delete(i,{message:"fulfilled",code:0}),await this.client.core.pairing.activate({topic:f.pairingTopic}),this.client.core.eventClient.deleteEvent({eventId:a.eventId}),{session:T}},this.rejectSessionAuthenticate=async t=>{this.isInitialized();const{id:i,reason:s}=t,a=this.getPendingAuthRequest(i);if(!a)throw new Error(`Could not find pending auth request with id ${i}`);a.transportType===Kt.relay&&await this.confirmOnlineStateOrThrow();const f=a.requester.publicKey,u=await this.client.core.crypto.generateKeyPair(),d=kc(f),l={type:Dn,receiverPublicKey:f,senderPublicKey:u};await this.sendError({id:i,topic:d,error:s,encodeOpts:l,rpcOpts:br.wc_sessionAuthenticate.reject,appLink:this.getAppLinkIfEnabled(a.requester.metadata,a.transportType)}),await this.client.auth.requests.delete(i,{message:"rejected",code:0}),await this.client.proposal.delete(i,Lt("USER_DISCONNECTED"))},this.formatAuthMessage=t=>{this.isInitialized();const{request:i,iss:s}=t;return iv(i,s)},this.processRelayMessageCache=()=>{setTimeout(async()=>{if(this.relayMessageCache.length!==0)for(;this.relayMessageCache.length>0;)try{const t=this.relayMessageCache.shift();t&&await this.onRelayMessage(t)}catch(t){this.client.logger.error(t)}},50)},this.cleanupDuplicatePairings=async t=>{if(t.pairingTopic)try{const i=this.client.core.pairing.pairings.get(t.pairingTopic),s=this.client.core.pairing.pairings.getAll().filter(a=>{var f,u;return((f=a.peerMetadata)==null?void 0:f.url)&&((u=a.peerMetadata)==null?void 0:u.url)===t.peer.metadata.url&&a.topic&&a.topic!==i.topic});if(s.length===0)return;this.client.logger.info(`Cleaning up ${s.length} duplicate pairing(s)`),await Promise.all(s.map(a=>this.client.core.pairing.disconnect({topic:a.topic}))),this.client.logger.info("Duplicate pairings clean up finished")}catch(i){this.client.logger.error(i)}},this.deleteSession=async t=>{var i;const{topic:s,expirerHasDeleted:a=!1,emitEvent:f=!0,id:u=0}=t,{self:d}=this.client.session.get(s);await this.client.core.relayer.unsubscribe(s),await this.client.session.delete(s,Lt("USER_DISCONNECTED")),this.addToRecentlyDeleted(s,"session"),this.client.core.crypto.keychain.has(d.publicKey)&&await this.client.core.crypto.deleteKeyPair(d.publicKey),this.client.core.crypto.keychain.has(s)&&await this.client.core.crypto.deleteSymKey(s),a||this.client.core.expirer.del(s),this.client.core.storage.removeItem(U1).catch(l=>this.client.logger.warn(l)),this.getPendingSessionRequests().forEach(l=>{l.topic===s&&this.deletePendingSessionRequest(l.id,Lt("USER_DISCONNECTED"))}),s===((i=this.sessionRequestQueue.queue[0])==null?void 0:i.topic)&&(this.sessionRequestQueue.state=tn.idle),f&&this.client.events.emit("session_delete",{id:u,topic:s})},this.deleteProposal=async(t,i)=>{if(i)try{const s=this.client.proposal.get(t),a=this.client.core.eventClient.getEvent({topic:s.pairingTopic});a==null||a.setError(bs.proposal_expired)}catch{}await Promise.all([this.client.proposal.delete(t,Lt("USER_DISCONNECTED")),i?Promise.resolve():this.client.core.expirer.del(t)]),this.addToRecentlyDeleted(t,"proposal")},this.deletePendingSessionRequest=async(t,i,s=!1)=>{await Promise.all([this.client.pendingRequest.delete(t,i),s?Promise.resolve():this.client.core.expirer.del(t)]),this.addToRecentlyDeleted(t,"request"),this.sessionRequestQueue.queue=this.sessionRequestQueue.queue.filter(a=>a.id!==t),s&&(this.sessionRequestQueue.state=tn.idle,this.client.events.emit("session_request_expire",{id:t}))},this.deletePendingAuthRequest=async(t,i,s=!1)=>{await Promise.all([this.client.auth.requests.delete(t,i),s?Promise.resolve():this.client.core.expirer.del(t)])},this.setExpiry=async(t,i)=>{this.client.session.keys.includes(t)&&(this.client.core.expirer.set(t,i),await this.client.session.update(t,{expiry:i}))},this.setProposal=async(t,i)=>{this.client.core.expirer.set(t,dr(br.wc_sessionPropose.req.ttl)),await this.client.proposal.set(t,i)},this.setAuthRequest=async(t,i)=>{const{request:s,pairingTopic:a,transportType:f=Kt.relay}=i;this.client.core.expirer.set(t,s.expiryTimestamp),await this.client.auth.requests.set(t,{authPayload:s.authPayload,requester:s.requester,expiryTimestamp:s.expiryTimestamp,id:t,pairingTopic:a,verifyContext:s.verifyContext,transportType:f})},this.setPendingSessionRequest=async t=>{const{id:i,topic:s,params:a,verifyContext:f}=t,u=a.request.expiryTimestamp||dr(br.wc_sessionRequest.req.ttl);this.client.core.expirer.set(i,u),await this.client.pendingRequest.set(i,{id:i,topic:s,params:a,verifyContext:f})},this.sendRequest=async t=>{const{topic:i,method:s,params:a,expiry:f,relayRpcId:u,clientRpcId:d,throwOnFailedPublish:l,appLink:w}=t,x=_s(s,a,d);let C;const R=!!w;try{const U=R?ka:es;C=await this.client.core.crypto.encode(i,x,{encoding:U})}catch(U){throw await this.cleanup(),this.client.logger.error(`sendRequest() -> core.crypto.encode() for topic ${i} failed`),U}let N;if(cE.includes(s)){const U=qn(JSON.stringify(x)),Q=qn(C);N=await this.client.core.verify.register({id:Q,decryptedId:U})}const T=br[s].req;if(T.attestation=N,f&&(T.ttl=f),u&&(T.id=u),this.client.core.history.set(i,x),R){const U=Cc(w,i,C);await global.Linking.openURL(U,this.client.name)}else{const U=br[s].req;f&&(U.ttl=f),u&&(U.id=u),l?(U.internal=ki(er({},U.internal),{throwOnFailedPublish:!0}),await this.client.core.relayer.publish(i,C,U)):this.client.core.relayer.publish(i,C,U).catch(Q=>this.client.logger.error(Q))}return x.id},this.sendResult=async t=>{const{id:i,topic:s,result:a,throwOnFailedPublish:f,encodeOpts:u,appLink:d}=t,l=rf(i,a);let w;const x=d&&typeof(global==null?void 0:global.Linking)<"u";try{const R=x?ka:es;w=await this.client.core.crypto.encode(s,l,ki(er({},u||{}),{encoding:R}))}catch(R){throw await this.cleanup(),this.client.logger.error(`sendResult() -> core.crypto.encode() for topic ${s} failed`),R}let C;try{C=await this.client.core.history.get(s,i)}catch(R){throw this.client.logger.error(`sendResult() -> history.get(${s}, ${i}) failed`),R}if(x){const R=Cc(d,s,w);await global.Linking.openURL(R,this.client.name)}else{const R=br[C.request.method].res;f?(R.internal=ki(er({},R.internal),{throwOnFailedPublish:!0}),await this.client.core.relayer.publish(s,w,R)):this.client.core.relayer.publish(s,w,R).catch(N=>this.client.logger.error(N))}await this.client.core.history.resolve(l)},this.sendError=async t=>{const{id:i,topic:s,error:a,encodeOpts:f,rpcOpts:u,appLink:d}=t,l=Ju(i,a);let w;const x=d&&typeof(global==null?void 0:global.Linking)<"u";try{const R=x?ka:es;w=await this.client.core.crypto.encode(s,l,ki(er({},f||{}),{encoding:R}))}catch(R){throw await this.cleanup(),this.client.logger.error(`sendError() -> core.crypto.encode() for topic ${s} failed`),R}let C;try{C=await this.client.core.history.get(s,i)}catch(R){throw this.client.logger.error(`sendError() -> history.get(${s}, ${i}) failed`),R}if(x){const R=Cc(d,s,w);await global.Linking.openURL(R,this.client.name)}else{const R=u||br[C.request.method].res;this.client.core.relayer.publish(s,w,R)}await this.client.core.history.resolve(l)},this.cleanup=async()=>{const t=[],i=[];this.client.session.getAll().forEach(s=>{let a=!1;Yn(s.expiry)&&(a=!0),this.client.core.crypto.keychain.has(s.topic)||(a=!0),a&&t.push(s.topic)}),this.client.proposal.getAll().forEach(s=>{Yn(s.expiryTimestamp)&&i.push(s.id)}),await Promise.all([...t.map(s=>this.deleteSession({topic:s})),...i.map(s=>this.deleteProposal(s))])},this.onRelayEventRequest=async t=>{this.requestQueue.queue.push(t),await this.processRequestsQueue()},this.processRequestsQueue=async()=>{if(this.requestQueue.state===tn.active){this.client.logger.info("Request queue already active, skipping...");return}for(this.client.logger.info(`Request queue starting with ${this.requestQueue.queue.length} requests`);this.requestQueue.queue.length>0;){this.requestQueue.state=tn.active;const t=this.requestQueue.queue.shift();if(t)try{await this.processRequest(t)}catch(i){this.client.logger.warn(i)}}this.requestQueue.state=tn.idle},this.processRequest=async t=>{const{topic:i,payload:s,attestation:a,transportType:f,encryptedId:u}=t,d=s.method;if(!this.shouldIgnorePairingRequest({topic:i,requestMethod:d}))switch(d){case"wc_sessionPropose":return await this.onSessionProposeRequest({topic:i,payload:s,attestation:a,encryptedId:u});case"wc_sessionSettle":return await this.onSessionSettleRequest(i,s);case"wc_sessionUpdate":return await this.onSessionUpdateRequest(i,s);case"wc_sessionExtend":return await this.onSessionExtendRequest(i,s);case"wc_sessionPing":return await this.onSessionPingRequest(i,s);case"wc_sessionDelete":return await this.onSessionDeleteRequest(i,s);case"wc_sessionRequest":return await this.onSessionRequest({topic:i,payload:s,attestation:a,encryptedId:u,transportType:f});case"wc_sessionEvent":return await this.onSessionEventRequest(i,s);case"wc_sessionAuthenticate":return await this.onSessionAuthenticateRequest({topic:i,payload:s,attestation:a,encryptedId:u,transportType:f});default:return this.client.logger.info(`Unsupported request method ${d}`)}},this.onRelayEventResponse=async t=>{const{topic:i,payload:s,transportType:a}=t,f=(await this.client.core.history.get(i,s.id)).request.method;switch(f){case"wc_sessionPropose":return this.onSessionProposeResponse(i,s,a);case"wc_sessionSettle":return this.onSessionSettleResponse(i,s);case"wc_sessionUpdate":return this.onSessionUpdateResponse(i,s);case"wc_sessionExtend":return this.onSessionExtendResponse(i,s);case"wc_sessionPing":return this.onSessionPingResponse(i,s);case"wc_sessionRequest":return this.onSessionRequestResponse(i,s);case"wc_sessionAuthenticate":return this.onSessionAuthenticateResponse(i,s);default:return this.client.logger.info(`Unsupported response method ${f}`)}},this.onRelayEventUnknownPayload=t=>{const{topic:i}=t,{message:s}=Ae("MISSING_OR_INVALID",`Decoded payload on topic ${i} is not identifiable as a JSON-RPC request or a response.`);throw new Error(s)},this.shouldIgnorePairingRequest=t=>{const{topic:i,requestMethod:s}=t,a=this.expectedPairingMethodMap.get(i);return!a||a.includes(s)?!1:!!(a.includes("wc_sessionAuthenticate")&&this.client.events.listenerCount("session_authenticate")>0)},this.onSessionProposeRequest=async t=>{const{topic:i,payload:s,attestation:a,encryptedId:f}=t,{params:u,id:d}=s;try{const l=this.client.core.eventClient.getEvent({topic:i});this.isValidConnect(er({},s.params));const w=u.expiryTimestamp||dr(br.wc_sessionPropose.req.ttl),x=er({id:d,pairingTopic:i,expiryTimestamp:w},u);await this.setProposal(d,x);const C=await this.getVerifyContext({attestationId:a,hash:qn(JSON.stringify(s)),encryptedId:f,metadata:x.proposer.metadata});this.client.events.listenerCount("session_proposal")===0&&(console.warn("No listener for session_proposal event"),l==null||l.setError(Nn.proposal_listener_not_found)),l==null||l.addTrace(rn.emit_session_proposal),this.client.events.emit("session_proposal",{id:d,params:x,verifyContext:C})}catch(l){await this.sendError({id:d,topic:i,error:l,rpcOpts:br.wc_sessionPropose.autoReject}),this.client.logger.error(l)}},this.onSessionProposeResponse=async(t,i,s)=>{const{id:a}=i;if(Cn(i)){const{result:f}=i;this.client.logger.trace({type:"method",method:"onSessionProposeResponse",result:f});const u=this.client.proposal.get(a);this.client.logger.trace({type:"method",method:"onSessionProposeResponse",proposal:u});const d=u.proposer.publicKey;this.client.logger.trace({type:"method",method:"onSessionProposeResponse",selfPublicKey:d});const l=f.responderPublicKey;this.client.logger.trace({type:"method",method:"onSessionProposeResponse",peerPublicKey:l});const w=await this.client.core.crypto.generateSharedKey(d,l);this.client.logger.trace({type:"method",method:"onSessionProposeResponse",sessionTopic:w});const x=await this.client.core.relayer.subscribe(w,{transportType:s});this.client.logger.trace({type:"method",method:"onSessionProposeResponse",subscriptionId:x}),await this.client.core.pairing.activate({topic:t})}else if(nn(i)){await this.client.proposal.delete(a,Lt("USER_DISCONNECTED"));const f=St("session_connect");if(this.events.listenerCount(f)===0)throw new Error(`emitting ${f} without any listeners, 954`);this.events.emit(St("session_connect"),{error:i.error})}},this.onSessionSettleRequest=async(t,i)=>{const{id:s,params:a}=i;try{this.isValidSessionSettleRequest(a);const{relay:f,controller:u,expiry:d,namespaces:l,sessionProperties:w,sessionConfig:x}=i.params,C=ki(er(er({topic:t,relay:f,expiry:d,namespaces:l,acknowledged:!0,pairingTopic:"",requiredNamespaces:{},optionalNamespaces:{},controller:u.publicKey,self:{publicKey:"",metadata:this.client.metadata},peer:{publicKey:u.publicKey,metadata:u.metadata}},w&&{sessionProperties:w}),x&&{sessionConfig:x}),{transportType:Kt.relay}),R=St("session_connect");if(this.events.listenerCount(R)===0)throw new Error(`emitting ${R} without any listeners 997`);this.events.emit(St("session_connect"),{session:C}),await this.sendResult({id:i.id,topic:t,result:!0,throwOnFailedPublish:!0})}catch(f){await this.sendError({id:s,topic:t,error:f}),this.client.logger.error(f)}},this.onSessionSettleResponse=async(t,i)=>{const{id:s}=i;Cn(i)?(await this.client.session.update(t,{acknowledged:!0}),this.events.emit(St("session_approve",s),{})):nn(i)&&(await this.client.session.delete(t,Lt("USER_DISCONNECTED")),this.events.emit(St("session_approve",s),{error:i.error}))},this.onSessionUpdateRequest=async(t,i)=>{const{params:s,id:a}=i;try{const f=`${t}_session_update`,u=$a.get(f);if(u&&this.isRequestOutOfSync(u,a)){this.client.logger.info(`Discarding out of sync request - ${a}`),this.sendError({id:a,topic:t,error:Lt("INVALID_UPDATE_REQUEST")});return}this.isValidUpdate(er({topic:t},s));try{$a.set(f,a),await this.client.session.update(t,{namespaces:s.namespaces}),await this.sendResult({id:a,topic:t,result:!0,throwOnFailedPublish:!0})}catch(d){throw $a.delete(f),d}this.client.events.emit("session_update",{id:a,topic:t,params:s})}catch(f){await this.sendError({id:a,topic:t,error:f}),this.client.logger.error(f)}},this.isRequestOutOfSync=(t,i)=>parseInt(i.toString().slice(0,-3))<=parseInt(t.toString().slice(0,-3)),this.onSessionUpdateResponse=(t,i)=>{const{id:s}=i,a=St("session_update",s);if(this.events.listenerCount(a)===0)throw new Error(`emitting ${a} without any listeners`);Cn(i)?this.events.emit(St("session_update",s),{}):nn(i)&&this.events.emit(St("session_update",s),{error:i.error})},this.onSessionExtendRequest=async(t,i)=>{const{id:s}=i;try{this.isValidExtend({topic:t}),await this.setExpiry(t,dr(Ys)),await this.sendResult({id:s,topic:t,result:!0,throwOnFailedPublish:!0}),this.client.events.emit("session_extend",{id:s,topic:t})}catch(a){await this.sendError({id:s,topic:t,error:a}),this.client.logger.error(a)}},this.onSessionExtendResponse=(t,i)=>{const{id:s}=i,a=St("session_extend",s);if(this.events.listenerCount(a)===0)throw new Error(`emitting ${a} without any listeners`);Cn(i)?this.events.emit(St("session_extend",s),{}):nn(i)&&this.events.emit(St("session_extend",s),{error:i.error})},this.onSessionPingRequest=async(t,i)=>{const{id:s}=i;try{this.isValidPing({topic:t}),await this.sendResult({id:s,topic:t,result:!0,throwOnFailedPublish:!0}),this.client.events.emit("session_ping",{id:s,topic:t})}catch(a){await this.sendError({id:s,topic:t,error:a}),this.client.logger.error(a)}},this.onSessionPingResponse=(t,i)=>{const{id:s}=i,a=St("session_ping",s);if(this.events.listenerCount(a)===0)throw new Error(`emitting ${a} without any listeners`);setTimeout(()=>{Cn(i)?this.events.emit(St("session_ping",s),{}):nn(i)&&this.events.emit(St("session_ping",s),{error:i.error})},500)},this.onSessionDeleteRequest=async(t,i)=>{const{id:s}=i;try{this.isValidDisconnect({topic:t,reason:i.params}),Promise.all([new Promise(a=>{this.client.core.relayer.once(Br.publish,async()=>{a(await this.deleteSession({topic:t,id:s}))})}),this.sendResult({id:s,topic:t,result:!0,throwOnFailedPublish:!0}),this.cleanupPendingSentRequestsForTopic({topic:t,error:Lt("USER_DISCONNECTED")})]).catch(a=>this.client.logger.error(a))}catch(a){this.client.logger.error(a)}},this.onSessionRequest=async t=>{var i,s,a;const{topic:f,payload:u,attestation:d,encryptedId:l,transportType:w}=t,{id:x,params:C}=u;try{await this.isValidRequest(er({topic:f},C));const R=this.client.session.get(f),N=await this.getVerifyContext({attestationId:d,hash:qn(JSON.stringify(_s("wc_sessionRequest",C,x))),encryptedId:l,metadata:R.peer.metadata,transportType:w}),T={id:x,topic:f,params:C,verifyContext:N};await this.setPendingSessionRequest(T),w===Kt.link_mode&&(i=R.peer.metadata.redirect)!=null&&i.universal&&this.client.core.addLinkModeSupportedApp((s=R.peer.metadata.redirect)==null?void 0:s.universal),(a=this.client.signConfig)!=null&&a.disableRequestQueue?this.emitSessionRequest(T):(this.addSessionRequestToSessionRequestQueue(T),this.processSessionRequestQueue())}catch(R){await this.sendError({id:x,topic:f,error:R}),this.client.logger.error(R)}},this.onSessionRequestResponse=(t,i)=>{const{id:s}=i,a=St("session_request",s);if(this.events.listenerCount(a)===0)throw new Error(`emitting ${a} without any listeners`);Cn(i)?this.events.emit(St("session_request",s),{result:i.result}):nn(i)&&this.events.emit(St("session_request",s),{error:i.error})},this.onSessionEventRequest=async(t,i)=>{const{id:s,params:a}=i;try{const f=`${t}_session_event_${a.event.name}`,u=$a.get(f);if(u&&this.isRequestOutOfSync(u,s)){this.client.logger.info(`Discarding out of sync request - ${s}`);return}this.isValidEmit(er({topic:t},a)),this.client.events.emit("session_event",{id:s,topic:t,params:a}),$a.set(f,s)}catch(f){await this.sendError({id:s,topic:t,error:f}),this.client.logger.error(f)}},this.onSessionAuthenticateResponse=(t,i)=>{const{id:s}=i;this.client.logger.trace({type:"method",method:"onSessionAuthenticateResponse",topic:t,payload:i}),Cn(i)?this.events.emit(St("session_request",s),{result:i.result}):nn(i)&&this.events.emit(St("session_request",s),{error:i.error})},this.onSessionAuthenticateRequest=async t=>{var i;const{topic:s,payload:a,attestation:f,encryptedId:u,transportType:d}=t;try{const{requester:l,authPayload:w,expiryTimestamp:x}=a.params,C=await this.getVerifyContext({attestationId:f,hash:qn(JSON.stringify(a)),encryptedId:u,metadata:l.metadata,transportType:d}),R={requester:l,pairingTopic:s,id:a.id,authPayload:w,verifyContext:C,expiryTimestamp:x};await this.setAuthRequest(a.id,{request:R,pairingTopic:s,transportType:d}),d===Kt.link_mode&&(i=l.metadata.redirect)!=null&&i.universal&&this.client.core.addLinkModeSupportedApp(l.metadata.redirect.universal),this.client.events.emit("session_authenticate",{topic:s,params:a.params,id:a.id,verifyContext:C})}catch(l){this.client.logger.error(l);const w=a.params.requester.publicKey,x=await this.client.core.crypto.generateKeyPair(),C=this.getAppLinkIfEnabled(a.params.requester.metadata,d),R={type:Dn,receiverPublicKey:w,senderPublicKey:x};await this.sendError({id:a.id,topic:s,error:l,encodeOpts:R,rpcOpts:br.wc_sessionAuthenticate.autoReject,appLink:C})}},this.addSessionRequestToSessionRequestQueue=t=>{this.sessionRequestQueue.queue.push(t)},this.cleanupAfterResponse=t=>{this.deletePendingSessionRequest(t.response.id,{message:"fulfilled",code:0}),setTimeout(()=>{this.sessionRequestQueue.state=tn.idle,this.processSessionRequestQueue()},Ie.toMiliseconds(this.requestQueueDelay))},this.cleanupPendingSentRequestsForTopic=({topic:t,error:i})=>{const s=this.client.core.history.pending;s.length>0&&s.filter(a=>a.topic===t&&a.request.method==="wc_sessionRequest").forEach(a=>{const f=a.request.id,u=St("session_request",f);if(this.events.listenerCount(u)===0)throw new Error(`emitting ${u} without any listeners`);this.events.emit(St("session_request",a.request.id),{error:i})})},this.processSessionRequestQueue=()=>{if(this.sessionRequestQueue.state===tn.active){this.client.logger.info("session request queue is already active.");return}const t=this.sessionRequestQueue.queue[0];if(!t){this.client.logger.info("session request queue is empty.");return}try{this.sessionRequestQueue.state=tn.active,this.emitSessionRequest(t)}catch(i){this.client.logger.error(i)}},this.emitSessionRequest=t=>{this.client.events.emit("session_request",t)},this.onPairingCreated=t=>{if(t.methods&&this.expectedPairingMethodMap.set(t.topic,t.methods),t.active)return;const i=this.client.proposal.getAll().find(s=>s.pairingTopic===t.topic);i&&this.onSessionProposeRequest({topic:t.topic,payload:_s("wc_sessionPropose",{requiredNamespaces:i.requiredNamespaces,optionalNamespaces:i.optionalNamespaces,relays:i.relays,proposer:i.proposer,sessionProperties:i.sessionProperties},i.id)})},this.isValidConnect=async t=>{if(!Wr(t)){const{message:d}=Ae("MISSING_OR_INVALID",`connect() params: ${JSON.stringify(t)}`);throw new Error(d)}const{pairingTopic:i,requiredNamespaces:s,optionalNamespaces:a,sessionProperties:f,relays:u}=t;if(Ur(i)||await this.isValidPairingTopic(i),!R9(u)){const{message:d}=Ae("MISSING_OR_INVALID",`connect() relays: ${u}`);throw new Error(d)}!Ur(s)&&ao(s)!==0&&this.validateNamespaces(s,"requiredNamespaces"),!Ur(a)&&ao(a)!==0&&this.validateNamespaces(a,"optionalNamespaces"),Ur(f)||this.validateSessionProps(f,"sessionProperties")},this.validateNamespaces=(t,i)=>{const s=P9(t,"connect()",i);if(s)throw new Error(s.message)},this.isValidApprove=async t=>{if(!Wr(t))throw new Error(Ae("MISSING_OR_INVALID",`approve() params: ${t}`).message);const{id:i,namespaces:s,relayProtocol:a,sessionProperties:f}=t;this.checkRecentlyDeleted(i),await this.isValidProposalId(i);const u=this.client.proposal.get(i),d=_u(s,"approve()");if(d)throw new Error(d.message);const l=d1(u.requiredNamespaces,s,"approve()");if(l)throw new Error(l.message);if(!ar(a,!0)){const{message:w}=Ae("MISSING_OR_INVALID",`approve() relayProtocol: ${a}`);throw new Error(w)}Ur(f)||this.validateSessionProps(f,"sessionProperties")},this.isValidReject=async t=>{if(!Wr(t)){const{message:a}=Ae("MISSING_OR_INVALID",`reject() params: ${t}`);throw new Error(a)}const{id:i,reason:s}=t;if(this.checkRecentlyDeleted(i),await this.isValidProposalId(i),!N9(s)){const{message:a}=Ae("MISSING_OR_INVALID",`reject() reason: ${JSON.stringify(s)}`);throw new Error(a)}},this.isValidSessionSettleRequest=t=>{if(!Wr(t)){const{message:l}=Ae("MISSING_OR_INVALID",`onSessionSettleRequest() params: ${t}`);throw new Error(l)}const{relay:i,controller:s,namespaces:a,expiry:f}=t;if(!uv(i)){const{message:l}=Ae("MISSING_OR_INVALID","onSessionSettleRequest() relay protocol should be a string");throw new Error(l)}const u=A9(s,"onSessionSettleRequest()");if(u)throw new Error(u.message);const d=_u(a,"onSessionSettleRequest()");if(d)throw new Error(d.message);if(Yn(f)){const{message:l}=Ae("EXPIRED","onSessionSettleRequest()");throw new Error(l)}},this.isValidUpdate=async t=>{if(!Wr(t)){const{message:d}=Ae("MISSING_OR_INVALID",`update() params: ${t}`);throw new Error(d)}const{topic:i,namespaces:s}=t;this.checkRecentlyDeleted(i),await this.isValidSessionTopic(i);const a=this.client.session.get(i),f=_u(s,"update()");if(f)throw new Error(f.message);const u=d1(a.requiredNamespaces,s,"update()");if(u)throw new Error(u.message)},this.isValidExtend=async t=>{if(!Wr(t)){const{message:s}=Ae("MISSING_OR_INVALID",`extend() params: ${t}`);throw new Error(s)}const{topic:i}=t;this.checkRecentlyDeleted(i),await this.isValidSessionTopic(i)},this.isValidRequest=async t=>{if(!Wr(t)){const{message:d}=Ae("MISSING_OR_INVALID",`request() params: ${t}`);throw new Error(d)}const{topic:i,request:s,chainId:a,expiry:f}=t;this.checkRecentlyDeleted(i),await this.isValidSessionTopic(i);const{namespaces:u}=this.client.session.get(i);if(!l1(u,a)){const{message:d}=Ae("MISSING_OR_INVALID",`request() chainId: ${a}`);throw new Error(d)}if(!O9(s)){const{message:d}=Ae("MISSING_OR_INVALID",`request() ${JSON.stringify(s)}`);throw new Error(d)}if(!F9(u,a,s.method)){const{message:d}=Ae("MISSING_OR_INVALID",`request() method: ${s.method}`);throw new Error(d)}if(f&&!U9(f,Mu)){const{message:d}=Ae("MISSING_OR_INVALID",`request() expiry: ${f}. Expiry must be a number (in seconds) between ${Mu.min} and ${Mu.max}`);throw new Error(d)}},this.isValidRespond=async t=>{var i;if(!Wr(t)){const{message:f}=Ae("MISSING_OR_INVALID",`respond() params: ${t}`);throw new Error(f)}const{topic:s,response:a}=t;try{await this.isValidSessionTopic(s)}catch(f){throw(i=t==null?void 0:t.response)!=null&&i.id&&this.cleanupAfterResponse(t),f}if(!q9(a)){const{message:f}=Ae("MISSING_OR_INVALID",`respond() response: ${JSON.stringify(a)}`);throw new Error(f)}},this.isValidPing=async t=>{if(!Wr(t)){const{message:s}=Ae("MISSING_OR_INVALID",`ping() params: ${t}`);throw new Error(s)}const{topic:i}=t;await this.isValidSessionOrPairingTopic(i)},this.isValidEmit=async t=>{if(!Wr(t)){const{message:u}=Ae("MISSING_OR_INVALID",`emit() params: ${t}`);throw new Error(u)}const{topic:i,event:s,chainId:a}=t;await this.isValidSessionTopic(i);const{namespaces:f}=this.client.session.get(i);if(!l1(f,a)){const{message:u}=Ae("MISSING_OR_INVALID",`emit() chainId: ${a}`);throw new Error(u)}if(!T9(s)){const{message:u}=Ae("MISSING_OR_INVALID",`emit() event: ${JSON.stringify(s)}`);throw new Error(u)}if(!D9(f,a,s.name)){const{message:u}=Ae("MISSING_OR_INVALID",`emit() event: ${JSON.stringify(s)}`);throw new Error(u)}},this.isValidDisconnect=async t=>{if(!Wr(t)){const{message:s}=Ae("MISSING_OR_INVALID",`disconnect() params: ${t}`);throw new Error(s)}const{topic:i}=t;await this.isValidSessionOrPairingTopic(i)},this.isValidAuthenticate=t=>{const{chains:i,uri:s,domain:a,nonce:f}=t;if(!Array.isArray(i)||i.length===0)throw new Error("chains is required and must be a non-empty array");if(!ar(s,!1))throw new Error("uri is required parameter");if(!ar(a,!1))throw new Error("domain is required parameter");if(!ar(f,!1))throw new Error("nonce is required parameter");if([...new Set(i.map(d=>Xa(d).namespace))].length>1)throw new Error("Multi-namespace requests are not supported. Please request single namespace only.");const{namespace:u}=Xa(i[0]);if(u!=="eip155")throw new Error("Only eip155 namespace is supported for authenticated sessions. Please use .connect() for non-eip155 chains.")},this.getVerifyContext=async t=>{const{attestationId:i,hash:s,encryptedId:a,metadata:f,transportType:u}=t,d={verified:{verifyUrl:f.verifyUrl||ro,validation:"UNKNOWN",origin:f.url||""}};try{if(u===Kt.link_mode){const w=this.getAppLinkIfEnabled(f,u);return d.verified.validation=w&&new URL(w).origin===new URL(f.url).origin?"VALID":"INVALID",d}const l=await this.client.core.verify.resolve({attestationId:i,hash:s,encryptedId:a,verifyUrl:f.verifyUrl});l&&(d.verified.origin=l.origin,d.verified.isScam=l.isScam,d.verified.validation=l.origin===new URL(f.url).origin?"VALID":"INVALID")}catch(l){this.client.logger.warn(l)}return this.client.logger.debug(`Verify context: ${JSON.stringify(d)}`),d},this.validateSessionProps=(t,i)=>{Object.values(t).forEach(s=>{if(!ar(s,!1)){const{message:a}=Ae("MISSING_OR_INVALID",`${i} must be in Record<string, string> format. Received: ${JSON.stringify(s)}`);throw new Error(a)}})},this.getPendingAuthRequest=t=>{const i=this.client.auth.requests.get(t);return typeof i=="object"?i:void 0},this.addToRecentlyDeleted=(t,i)=>{if(this.recentlyDeletedMap.set(t,i),this.recentlyDeletedMap.size>=this.recentlyDeletedLimit){let s=0;const a=this.recentlyDeletedLimit/2;for(const f of this.recentlyDeletedMap.keys()){if(s++>=a)break;this.recentlyDeletedMap.delete(f)}}},this.checkRecentlyDeleted=t=>{const i=this.recentlyDeletedMap.get(t);if(i){const{message:s}=Ae("MISSING_OR_INVALID",`Record was recently deleted - ${i}: ${t}`);throw new Error(s)}},this.isLinkModeEnabled=(t,i)=>{var s,a,f,u,d,l,w,x,C;return!t||i!==Kt.link_mode?!1:((a=(s=this.client.metadata)==null?void 0:s.redirect)==null?void 0:a.linkMode)===!0&&((u=(f=this.client.metadata)==null?void 0:f.redirect)==null?void 0:u.universal)!==void 0&&((l=(d=this.client.metadata)==null?void 0:d.redirect)==null?void 0:l.universal)!==""&&((w=t==null?void 0:t.redirect)==null?void 0:w.universal)!==void 0&&((x=t==null?void 0:t.redirect)==null?void 0:x.universal)!==""&&((C=t==null?void 0:t.redirect)==null?void 0:C.linkMode)===!0&&this.client.core.linkModeSupportedApps.includes(t.redirect.universal)&&typeof(global==null?void 0:global.Linking)<"u"},this.getAppLinkIfEnabled=(t,i)=>{var s;return this.isLinkModeEnabled(t,i)?(s=t==null?void 0:t.redirect)==null?void 0:s.universal:void 0},this.handleLinkModeMessage=({url:t})=>{if(!t||!t.includes("wc_ev")||!t.includes("topic"))return;const i=Ip(t,"topic")||"",s=decodeURIComponent(Ip(t,"wc_ev")||""),a=this.client.session.keys.includes(i);a&&this.client.session.update(i,{transportType:Kt.link_mode}),this.client.core.dispatchEnvelope({topic:i,message:s,sessionExists:a})},this.registerLinkModeListeners=async()=>{var t;if(n0()||ca()&&(t=this.client.metadata.redirect)!=null&&t.linkMode){const i=global==null?void 0:global.Linking;if(typeof i<"u"){i.addEventListener("url",this.handleLinkModeMessage,this.client.name);const s=await i.getInitialURL();s&&setTimeout(()=>{this.handleLinkModeMessage({url:s})},50)}}}}isInitialized(){if(!this.initialized){const{message:e}=Ae("NOT_INITIALIZED",this.name);throw new Error(e)}}async confirmOnlineStateOrThrow(){await this.client.core.relayer.confirmOnlineStateOrThrow()}registerRelayerEvents(){this.client.core.relayer.on(Br.message,e=>{!this.initialized||this.relayMessageCache.length>0?this.relayMessageCache.push(e):this.onRelayMessage(e)})}async onRelayMessage(e){const{topic:t,message:i,attestation:s,transportType:a}=e,{publicKey:f}=this.client.auth.authKeys.keys.includes($c)?this.client.auth.authKeys.get($c):{publicKey:void 0},u=await this.client.core.crypto.decode(t,i,{receiverPublicKey:f,encoding:a===Kt.link_mode?ka:es});try{Yu(u)?(this.client.core.history.set(t,u),this.onRelayEventRequest({topic:t,payload:u,attestation:s,transportType:a,encryptedId:qn(i)})):Wu(u)?(await this.client.core.history.resolve(u),await this.onRelayEventResponse({topic:t,payload:u,transportType:a}),this.client.core.history.delete(t,u.id)):this.onRelayEventUnknownPayload({topic:t,payload:u,transportType:a})}catch(d){this.client.logger.error(d)}}registerExpirerEvents(){this.client.core.expirer.on(xi.expired,async e=>{const{topic:t,id:i}=wg(e.target);if(i&&this.client.pendingRequest.keys.includes(i))return await this.deletePendingSessionRequest(i,Ae("EXPIRED"),!0);if(i&&this.client.auth.requests.keys.includes(i))return await this.deletePendingAuthRequest(i,Ae("EXPIRED"),!0);t?this.client.session.keys.includes(t)&&(await this.deleteSession({topic:t,expirerHasDeleted:!0}),this.client.events.emit("session_expire",{topic:t})):i&&(await this.deleteProposal(i,!0),this.client.events.emit("proposal_expire",{id:i}))})}registerPairingEvents(){this.client.core.pairing.events.on(ws.create,e=>this.onPairingCreated(e)),this.client.core.pairing.events.on(ws.delete,e=>{this.addToRecentlyDeleted(e.topic,"pairing")})}isValidPairingTopic(e){if(!ar(e,!1)){const{message:t}=Ae("MISSING_OR_INVALID",`pairing topic should be a string: ${e}`);throw new Error(t)}if(!this.client.core.pairing.pairings.keys.includes(e)){const{message:t}=Ae("NO_MATCHING_KEY",`pairing topic doesn't exist: ${e}`);throw new Error(t)}if(Yn(this.client.core.pairing.pairings.get(e).expiry)){const{message:t}=Ae("EXPIRED",`pairing topic: ${e}`);throw new Error(t)}}async isValidSessionTopic(e){if(!ar(e,!1)){const{message:t}=Ae("MISSING_OR_INVALID",`session topic should be a string: ${e}`);throw new Error(t)}if(this.checkRecentlyDeleted(e),!this.client.session.keys.includes(e)){const{message:t}=Ae("NO_MATCHING_KEY",`session topic doesn't exist: ${e}`);throw new Error(t)}if(Yn(this.client.session.get(e).expiry)){await this.deleteSession({topic:e});const{message:t}=Ae("EXPIRED",`session topic: ${e}`);throw new Error(t)}if(!this.client.core.crypto.keychain.has(e)){const{message:t}=Ae("MISSING_OR_INVALID",`session topic does not exist in keychain: ${e}`);throw await this.deleteSession({topic:e}),new Error(t)}}async isValidSessionOrPairingTopic(e){if(this.checkRecentlyDeleted(e),this.client.session.keys.includes(e))await this.isValidSessionTopic(e);else if(this.client.core.pairing.pairings.keys.includes(e))this.isValidPairingTopic(e);else if(ar(e,!1)){const{message:t}=Ae("NO_MATCHING_KEY",`session or pairing topic doesn't exist: ${e}`);throw new Error(t)}else{const{message:t}=Ae("MISSING_OR_INVALID",`session or pairing topic should be a string: ${e}`);throw new Error(t)}}async isValidProposalId(e){if(!C9(e)){const{message:t}=Ae("MISSING_OR_INVALID",`proposal id should be a number: ${e}`);throw new Error(t)}if(!this.client.proposal.keys.includes(e)){const{message:t}=Ae("NO_MATCHING_KEY",`proposal id doesn't exist: ${e}`);throw new Error(t)}if(Yn(this.client.proposal.get(e).expiryTimestamp)){await this.deleteProposal(e);const{message:t}=Ae("EXPIRED",`proposal id: ${e}`);throw new Error(t)}}}class wE extends Ps{constructor(e,t){super(e,t,nE,g0),this.core=e,this.logger=t}}class _E extends Ps{constructor(e,t){super(e,t,sE,g0),this.core=e,this.logger=t}}class AE extends Ps{constructor(e,t){super(e,t,oE,g0,i=>i.id),this.core=e,this.logger=t}}class xE extends Ps{constructor(e,t){super(e,t,uE,hf,()=>$c),this.core=e,this.logger=t}}class EE extends Ps{constructor(e,t){super(e,t,lE,hf),this.core=e,this.logger=t}}class SE extends Ps{constructor(e,t){super(e,t,dE,hf,i=>i.id),this.core=e,this.logger=t}}class ME{constructor(e,t){this.core=e,this.logger=t,this.authKeys=new xE(this.core,this.logger),this.pairingTopics=new EE(this.core,this.logger),this.requests=new SE(this.core,this.logger)}async init(){await this.authKeys.init(),await this.pairingTopics.init(),await this.requests.init()}}class v0 extends i_{constructor(e){super(e),this.protocol=Rv,this.version=Cv,this.name=Su.name,this.events=new Bn.EventEmitter,this.on=(i,s)=>this.events.on(i,s),this.once=(i,s)=>this.events.once(i,s),this.off=(i,s)=>this.events.off(i,s),this.removeListener=(i,s)=>this.events.removeListener(i,s),this.removeAllListeners=i=>this.events.removeAllListeners(i),this.connect=async i=>{try{return await this.engine.connect(i)}catch(s){throw this.logger.error(s.message),s}},this.pair=async i=>{try{return await this.engine.pair(i)}catch(s){throw this.logger.error(s.message),s}},this.approve=async i=>{try{return await this.engine.approve(i)}catch(s){throw this.logger.error(s.message),s}},this.reject=async i=>{try{return await this.engine.reject(i)}catch(s){throw this.logger.error(s.message),s}},this.update=async i=>{try{return await this.engine.update(i)}catch(s){throw this.logger.error(s.message),s}},this.extend=async i=>{try{return await this.engine.extend(i)}catch(s){throw this.logger.error(s.message),s}},this.request=async i=>{try{return await this.engine.request(i)}catch(s){throw this.logger.error(s.message),s}},this.respond=async i=>{try{return await this.engine.respond(i)}catch(s){throw this.logger.error(s.message),s}},this.ping=async i=>{try{return await this.engine.ping(i)}catch(s){throw this.logger.error(s.message),s}},this.emit=async i=>{try{return await this.engine.emit(i)}catch(s){throw this.logger.error(s.message),s}},this.disconnect=async i=>{try{return await this.engine.disconnect(i)}catch(s){throw this.logger.error(s.message),s}},this.find=i=>{try{return this.engine.find(i)}catch(s){throw this.logger.error(s.message),s}},this.getPendingSessionRequests=()=>{try{return this.engine.getPendingSessionRequests()}catch(i){throw this.logger.error(i.message),i}},this.authenticate=async(i,s)=>{try{return await this.engine.authenticate(i,s)}catch(a){throw this.logger.error(a.message),a}},this.formatAuthMessage=i=>{try{return this.engine.formatAuthMessage(i)}catch(s){throw this.logger.error(s.message),s}},this.approveSessionAuthenticate=async i=>{try{return await this.engine.approveSessionAuthenticate(i)}catch(s){throw this.logger.error(s.message),s}},this.rejectSessionAuthenticate=async i=>{try{return await this.engine.rejectSessionAuthenticate(i)}catch(s){throw this.logger.error(s.message),s}},this.name=(e==null?void 0:e.name)||Su.name,this.metadata=(e==null?void 0:e.metadata)||gg(),this.signConfig=e==null?void 0:e.signConfig;const t=typeof(e==null?void 0:e.logger)<"u"&&typeof(e==null?void 0:e.logger)!="string"?e.logger:Qu(tf({level:(e==null?void 0:e.logger)||Su.logger}));this.core=(e==null?void 0:e.core)||new iE(e),this.logger=kr(t,this.name),this.session=new _E(this.core,this.logger),this.proposal=new wE(this.core,this.logger),this.pendingRequest=new AE(this.core,this.logger),this.engine=new yE(this),this.auth=new ME(this.core,this.logger)}static async init(e){const t=new v0(e);return await t.initialize(),t}get context(){return fi(this.logger)}get pairing(){return this.core.pairing.pairings}async initialize(){this.logger.trace("Initialized");try{await this.core.start(),await this.session.init(),await this.proposal.init(),await this.pendingRequest.init(),await this.auth.init(),await this.engine.init(),this.logger.info("SignClient Initialization Success"),this.engine.processRelayMessageCache()}catch(e){throw this.logger.info("SignClient Initialization Failure"),this.logger.error(e.message),e}}}const $1="error",IE="wss://relay.walletconnect.org",PE="wc",RE="universal_provider",j1=`${PE}@2:${RE}:`,qv="https://rpc.walletconnect.org/v1/",Xs="generic",CE=`${qv}bundler`,Ji={DEFAULT_CHAIN_CHANGED:"default_chain_changed"};var Va=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Hu={exports:{}};/**
* @license
* Lodash <https://lodash.com/>
* Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
* Released under MIT license <https://lodash.com/license>
* Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
* Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
*/(function(r,e){(function(){var t,i="4.17.21",s=200,a="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",f="Expected a function",u="Invalid `variable` option passed into `_.template`",d="__lodash_hash_undefined__",l=500,w="__lodash_placeholder__",x=1,C=2,R=4,N=1,T=2,U=1,Q=2,F=4,V=8,D=16,B=32,H=64,E=128,$=256,ne=512,fe=30,z="...",y=800,c=16,h=1,p=2,m=3,_=1/0,I=9007199254740991,S=17976931348623157e292,v=NaN,b=4294967295,O=b-1,W=b>>>1,te=[["ary",E],["bind",U],["bindKey",Q],["curry",V],["curryRight",D],["flip",ne],["partial",B],["partialRight",H],["rearg",$]],P="[object Arguments]",ee="[object Array]",k="[object AsyncFunction]",G="[object Boolean]",J="[object Date]",A="[object DOMException]",K="[object Error]",ae="[object Function]",oe="[object GeneratorFunction]",he="[object Map]",be="[object Number]",we="[object Null]",Me="[object Object]",Qe="[object Promise]",Ce="[object Proxy]",Te="[object RegExp]",Se="[object Set]",me="[object String]",Ne="[object Symbol]",Oe="[object Undefined]",ve="[object WeakMap]",qe="[object WeakSet]",xe="[object ArrayBuffer]",ye="[object DataView]",Le="[object Float32Array]",Pe="[object Float64Array]",_e="[object Int8Array]",He="[object Int16Array]",Ge="[object Int32Array]",Ee="[object Uint8Array]",Ke="[object Uint8ClampedArray]",ut="[object Uint16Array]",Ve="[object Uint32Array]",wt=/\b__p \+= '';/g,lt=/\b(__p \+=) '' \+/g,Ye=/(__e\(.*?\)|\b__t\)) \+\n'';/g,xt=/&(?:amp|lt|gt|quot|#39);/g,Mt=/[&<>"']/g,Fe=RegExp(xt.source),Xe=RegExp(Mt.source),tt=/<%-([\s\S]+?)%>/g,De=/<%([\s\S]+?)%>/g,et=/<%=([\s\S]+?)%>/g,Ze=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,ze=/^\w*$/,ft=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,rt=/[\\^$.*+?()[\]{}|]/g,ke=RegExp(rt.source),it=/^\s+/,st=/\s/,Be=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,We=/\{\n\/\* \[wrapped with (.+)\] \*/,ht=/,? & /,$e=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,Ot=/[()=,{}\[\]\/\s]/,qt=/\\(\\)?/g,at=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,bt=/\w*$/,Er=/^[-+]0x[0-9a-f]+$/i,Sr=/^0b[01]+$/i,Mr=/^\[object .+?Constructor\]$/,Ir=/^0o[0-7]+$/i,Pr=/^(?:0|[1-9]\d*)$/,Xt=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,$r=/($^)/,Ii=/['\n\r\u2028\u2029\\]/g,jr="\\ud800-\\udfff",Pi="\\u0300-\\u036f",Ri="\\ufe20-\\ufe2f",Hr="\\u20d0-\\u20ff",hi=Pi+Ri+Hr,ui="\\u2700-\\u27bf",fr="a-z\\xdf-\\xf6\\xf8-\\xff",Ci="\\xac\\xb1\\xd7\\xf7",Ni="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",Oi="\\u2000-\\u206f",ts=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",mo="A-Z\\xc0-\\xd6\\xd8-\\xde",yo="\\ufe0e\\ufe0f",rs=Ci+Ni+Oi+ts,ga="['’]",is="["+jr+"]",va="["+rs+"]",ns="["+hi+"]",wo="\\d+",uf="["+ui+"]",_o="["+fr+"]",Ao="[^"+jr+rs+wo+ui+fr+mo+"]",Ns="\\ud83c[\\udffb-\\udfff]",lf="(?:"+ns+"|"+Ns+")",xo="[^"+jr+"]",Os="(?:\\ud83c[\\udde6-\\uddff]){2}",Un="[\\ud800-\\udbff][\\udc00-\\udfff]",ei="["+mo+"]",Eo="\\u200d",So="(?:"+_o+"|"+Ao+")",Qi="(?:"+ei+"|"+Ao+")",Mo="(?:"+ga+"(?:d|ll|m|re|s|t|ve))?",Io="(?:"+ga+"(?:D|LL|M|RE|S|T|VE))?",Po=lf+"?",Ro="["+yo+"]?",df="(?:"+Eo+"(?:"+[xo,Os,Un].join("|")+")"+Ro+Po+")*",yn="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",Co="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",No=Ro+Po+df,qs="(?:"+[uf,Os,Un].join("|")+")"+No,pf="(?:"+[xo+ns+"?",ns,Os,Un,is].join("|")+")",ba=RegExp(ga,"g"),gf=RegExp(ns,"g"),Ts=RegExp(Ns+"(?="+Ns+")|"+pf+No,"g"),Oo=RegExp([ei+"?"+_o+"+"+Mo+"(?="+[va,ei,"$"].join("|")+")",Qi+"+"+Io+"(?="+[va,ei+So,"$"].join("|")+")",ei+"?"+So+"+"+Mo,ei+"+"+Io,Co,yn,wo,qs].join("|"),"g"),qo=RegExp("["+Eo+jr+hi+yo+"]"),ss=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,To=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],vf=-1,kt={};kt[Le]=kt[Pe]=kt[_e]=kt[He]=kt[Ge]=kt[Ee]=kt[Ke]=kt[ut]=kt[Ve]=!0,kt[P]=kt[ee]=kt[xe]=kt[G]=kt[ye]=kt[J]=kt[K]=kt[ae]=kt[he]=kt[be]=kt[Me]=kt[Te]=kt[Se]=kt[me]=kt[ve]=!1;var Ut={};Ut[P]=Ut[ee]=Ut[xe]=Ut[ye]=Ut[G]=Ut[J]=Ut[Le]=Ut[Pe]=Ut[_e]=Ut[He]=Ut[Ge]=Ut[he]=Ut[be]=Ut[Me]=Ut[Te]=Ut[Se]=Ut[me]=Ut[Ne]=Ut[Ee]=Ut[Ke]=Ut[ut]=Ut[Ve]=!0,Ut[K]=Ut[ae]=Ut[ve]=!1;var Y={À:"A",Á:"A",Â:"A",Ã:"A",Ä:"A",Å:"A",à:"a",á:"a",â:"a",ã:"a",ä:"a",å:"a",Ç:"C",ç:"c",Ð:"D",ð:"d",È:"E",É:"E",Ê:"E",Ë:"E",è:"e",é:"e",ê:"e",ë:"e",Ì:"I",Í:"I",Î:"I",Ï:"I",ì:"i",í:"i",î:"i",ï:"i",Ñ:"N",ñ:"n",Ò:"O",Ó:"O",Ô:"O",Õ:"O",Ö:"O",Ø:"O",ò:"o",ó:"o",ô:"o",õ:"o",ö:"o",ø:"o",Ù:"U",Ú:"U",Û:"U",Ü:"U",ù:"u",ú:"u",û:"u",ü:"u",Ý:"Y",ý:"y",ÿ:"y",Æ:"Ae",æ:"ae",Þ:"Th",þ:"th",ß:"ss",Ā:"A",Ă:"A",Ą:"A",ā:"a",ă:"a",ą:"a",Ć:"C",Ĉ:"C",Ċ:"C",Č:"C",ć:"c",ĉ:"c",ċ:"c",č:"c",Ď:"D",Đ:"D",ď:"d",đ:"d",Ē:"E",Ĕ:"E",Ė:"E",Ę:"E",Ě:"E",ē:"e",ĕ:"e",ė:"e",ę:"e",ě:"e",Ĝ:"G",Ğ:"G",Ġ:"G",Ģ:"G",ĝ:"g",ğ:"g",ġ:"g",ģ:"g",Ĥ:"H",Ħ:"H",ĥ:"h",ħ:"h",Ĩ:"I",Ī:"I",Ĭ:"I",Į:"I",İ:"I",ĩ:"i",ī:"i",ĭ:"i",į:"i",ı:"i",Ĵ:"J",ĵ:"j",Ķ:"K",ķ:"k",ĸ:"k",Ĺ:"L",Ļ:"L",Ľ:"L",Ŀ:"L",Ł:"L",ĺ:"l",ļ:"l",ľ:"l",ŀ:"l",ł:"l",Ń:"N",Ņ:"N",Ň:"N",Ŋ:"N",ń:"n",ņ:"n",ň:"n",ŋ:"n",Ō:"O",Ŏ:"O",Ő:"O",ō:"o",ŏ:"o",ő:"o",Ŕ:"R",Ŗ:"R",Ř:"R",ŕ:"r",ŗ:"r",ř:"r",Ś:"S",Ŝ:"S",Ş:"S",Š:"S",ś:"s",ŝ:"s",ş:"s",š:"s",Ţ:"T",Ť:"T",Ŧ:"T",ţ:"t",ť:"t",ŧ:"t",Ũ:"U",Ū:"U",Ŭ:"U",Ů:"U",Ű:"U",Ų:"U",ũ:"u",ū:"u",ŭ:"u",ů:"u",ű:"u",ų:"u",Ŵ:"W",ŵ:"w",Ŷ:"Y",ŷ:"y",Ÿ:"Y",Ź:"Z",Ż:"Z",Ž:"Z",ź:"z",ż:"z",ž:"z",Ĳ:"IJ",ĳ:"ij",Œ:"Oe",œ:"oe",ŉ:"'n",ſ:"s"},re={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},pe={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},Ue={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},$t=parseFloat,pt=parseInt,Vt=typeof Va=="object"&&Va&&Va.Object===Object&&Va,or=typeof self=="object"&&self&&self.Object===Object&&self,Ct=Vt||or||Function("return this")(),jt=e&&!e.nodeType&&e,rr=jt&&!0&&r&&!r.nodeType&&r,Kr=rr&&rr.exports===jt,cr=Kr&&Vt.process,Jt=function(){try{var ie=rr&&rr.require&&rr.require("util").types;return ie||cr&&cr.binding&&cr.binding("util")}catch{}}(),Or=Jt&&Jt.isArrayBuffer,qi=Jt&&Jt.isDate,li=Jt&&Jt.isMap,Yi=Jt&&Jt.isRegExp,ma=Jt&&Jt.isSet,as=Jt&&Jt.isTypedArray;function pr(ie,ue,ce){switch(ce.length){case 0:return ie.call(ue);case 1:return ie.call(ue,ce[0]);case 2:return ie.call(ue,ce[0],ce[1]);case 3:return ie.call(ue,ce[0],ce[1],ce[2])}return ie.apply(ue,ce)}function Dv(ie,ue,ce,je){for(var dt=-1,Tt=ie==null?0:ie.length;++dt<Tt;){var hr=ie[dt];ue(je,hr,ce(hr),ie)}return je}function di(ie,ue){for(var ce=-1,je=ie==null?0:ie.length;++ce<je&&ue(ie[ce],ce,ie)!==!1;);return ie}function Bv(ie,ue){for(var ce=ie==null?0:ie.length;ce--&&ue(ie[ce],ce,ie)!==!1;);return ie}function y0(ie,ue){for(var ce=-1,je=ie==null?0:ie.length;++ce<je;)if(!ue(ie[ce],ce,ie))return!1;return!0}function zn(ie,ue){for(var ce=-1,je=ie==null?0:ie.length,dt=0,Tt=[];++ce<je;){var hr=ie[ce];ue(hr,ce,ie)&&(Tt[dt++]=hr)}return Tt}function Fo(ie,ue){var ce=ie==null?0:ie.length;return!!ce&&Fs(ie,ue,0)>-1}function bf(ie,ue,ce){for(var je=-1,dt=ie==null?0:ie.length;++je<dt;)if(ce(ue,ie[je]))return!0;return!1}function Yt(ie,ue){for(var ce=-1,je=ie==null?0:ie.length,dt=Array(je);++ce<je;)dt[ce]=ue(ie[ce],ce,ie);return dt}function kn(ie,ue){for(var ce=-1,je=ue.length,dt=ie.length;++ce<je;)ie[dt+ce]=ue[ce];return ie}function mf(ie,ue,ce,je){var dt=-1,Tt=ie==null?0:ie.length;for(je&&Tt&&(ce=ie[++dt]);++dt<Tt;)ce=ue(ce,ie[dt],dt,ie);return ce}function Lv(ie,ue,ce,je){var dt=ie==null?0:ie.length;for(je&&dt&&(ce=ie[--dt]);dt--;)ce=ue(ce,ie[dt],dt,ie);return ce}function yf(ie,ue){for(var ce=-1,je=ie==null?0:ie.length;++ce<je;)if(ue(ie[ce],ce,ie))return!0;return!1}var Uv=wf("length");function zv(ie){return ie.split("")}function kv(ie){return ie.match($e)||[]}function w0(ie,ue,ce){var je;return ce(ie,function(dt,Tt,hr){if(ue(dt,Tt,hr))return je=Tt,!1}),je}function Do(ie,ue,ce,je){for(var dt=ie.length,Tt=ce+(je?1:-1);je?Tt--:++Tt<dt;)if(ue(ie[Tt],Tt,ie))return Tt;return-1}function Fs(ie,ue,ce){return ue===ue?Zv(ie,ue,ce):Do(ie,_0,ce)}function $v(ie,ue,ce,je){for(var dt=ce-1,Tt=ie.length;++dt<Tt;)if(je(ie[dt],ue))return dt;return-1}function _0(ie){return ie!==ie}function A0(ie,ue){var ce=ie==null?0:ie.length;return ce?Af(ie,ue)/ce:v}function wf(ie){return function(ue){return ue==null?t:ue[ie]}}function _f(ie){return function(ue){return ie==null?t:ie[ue]}}function x0(ie,ue,ce,je,dt){return dt(ie,function(Tt,hr,Ht){ce=je?(je=!1,Tt):ue(ce,Tt,hr,Ht)}),ce}function jv(ie,ue){var ce=ie.length;for(ie.sort(ue);ce--;)ie[ce]=ie[ce].value;return ie}function Af(ie,ue){for(var ce,je=-1,dt=ie.length;++je<dt;){var Tt=ue(ie[je]);Tt!==t&&(ce=ce===t?Tt:ce+Tt)}return ce}function xf(ie,ue){for(var ce=-1,je=Array(ie);++ce<ie;)je[ce]=ue(ce);return je}function Hv(ie,ue){return Yt(ue,function(ce){return[ce,ie[ce]]})}function E0(ie){return ie&&ie.slice(0,P0(ie)+1).replace(it,"")}function ti(ie){return function(ue){return ie(ue)}}function Ef(ie,ue){return Yt(ue,function(ce){return ie[ce]})}function ya(ie,ue){return ie.has(ue)}function S0(ie,ue){for(var ce=-1,je=ie.length;++ce<je&&Fs(ue,ie[ce],0)>-1;);return ce}function M0(ie,ue){for(var ce=ie.length;ce--&&Fs(ue,ie[ce],0)>-1;);return ce}function Kv(ie,ue){for(var ce=ie.length,je=0;ce--;)ie[ce]===ue&&++je;return je}var Gv=_f(Y),Vv=_f(re);function Jv(ie){return"\\"+Ue[ie]}function Qv(ie,ue){return ie==null?t:ie[ue]}function Ds(ie){return qo.test(ie)}function Yv(ie){return ss.test(ie)}function Wv(ie){for(var ue,ce=[];!(ue=ie.next()).done;)ce.push(ue.value);return ce}function Sf(ie){var ue=-1,ce=Array(ie.size);return ie.forEach(function(je,dt){ce[++ue]=[dt,je]}),ce}function I0(ie,ue){return function(ce){return ie(ue(ce))}}function $n(ie,ue){for(var ce=-1,je=ie.length,dt=0,Tt=[];++ce<je;){var hr=ie[ce];(hr===ue||hr===w)&&(ie[ce]=w,Tt[dt++]=ce)}return Tt}function Bo(ie){var ue=-1,ce=Array(ie.size);return ie.forEach(function(je){ce[++ue]=je}),ce}function Xv(ie){var ue=-1,ce=Array(ie.size);return ie.forEach(function(je){ce[++ue]=[je,je]}),ce}function Zv(ie,ue,ce){for(var je=ce-1,dt=ie.length;++je<dt;)if(ie[je]===ue)return je;return-1}function e2(ie,ue,ce){for(var je=ce+1;je--;)if(ie[je]===ue)return je;return je}function Bs(ie){return Ds(ie)?r2(ie):Uv(ie)}function Ti(ie){return Ds(ie)?i2(ie):zv(ie)}function P0(ie){for(var ue=ie.length;ue--&&st.test(ie.charAt(ue)););return ue}var t2=_f(pe);function r2(ie){for(var ue=Ts.lastIndex=0;Ts.test(ie);)++ue;return ue}function i2(ie){return ie.match(Ts)||[]}function n2(ie){return ie.match(Oo)||[]}var s2=function ie(ue){ue=ue==null?Ct:Ls.defaults(Ct.Object(),ue,Ls.pick(Ct,To));var ce=ue.Array,je=ue.Date,dt=ue.Error,Tt=ue.Function,hr=ue.Math,Ht=ue.Object,Mf=ue.RegExp,a2=ue.String,pi=ue.TypeError,Lo=ce.prototype,o2=Tt.prototype,Us=Ht.prototype,Uo=ue["__core-js_shared__"],zo=o2.toString,Bt=Us.hasOwnProperty,c2=0,R0=function(){var n=/[^.]+$/.exec(Uo&&Uo.keys&&Uo.keys.IE_PROTO||"");return n?"Symbol(src)_1."+n:""}(),ko=Us.toString,f2=zo.call(Ht),h2=Ct._,u2=Mf("^"+zo.call(Bt).replace(rt,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),$o=Kr?ue.Buffer:t,jn=ue.Symbol,jo=ue.Uint8Array,C0=$o?$o.allocUnsafe:t,Ho=I0(Ht.getPrototypeOf,Ht),N0=Ht.create,O0=Us.propertyIsEnumerable,Ko=Lo.splice,q0=jn?jn.isConcatSpreadable:t,wa=jn?jn.iterator:t,os=jn?jn.toStringTag:t,Go=function(){try{var n=ls(Ht,"defineProperty");return n({},"",{}),n}catch{}}(),l2=ue.clearTimeout!==Ct.clearTimeout&&ue.clearTimeout,d2=je&&je.now!==Ct.Date.now&&je.now,p2=ue.setTimeout!==Ct.setTimeout&&ue.setTimeout,Vo=hr.ceil,Jo=hr.floor,If=Ht.getOwnPropertySymbols,g2=$o?$o.isBuffer:t,T0=ue.isFinite,v2=Lo.join,b2=I0(Ht.keys,Ht),ur=hr.max,Rr=hr.min,m2=je.now,y2=ue.parseInt,F0=hr.random,w2=Lo.reverse,Pf=ls(ue,"DataView"),_a=ls(ue,"Map"),Rf=ls(ue,"Promise"),zs=ls(ue,"Set"),Aa=ls(ue,"WeakMap"),xa=ls(Ht,"create"),Qo=Aa&&new Aa,ks={},_2=ds(Pf),A2=ds(_a),x2=ds(Rf),E2=ds(zs),S2=ds(Aa),Yo=jn?jn.prototype:t,Ea=Yo?Yo.valueOf:t,D0=Yo?Yo.toString:t;function L(n){if(Zt(n)&&!gt(n)&&!(n instanceof It)){if(n instanceof gi)return n;if(Bt.call(n,"__wrapped__"))return Bl(n)}return new gi(n)}var $s=function(){function n(){}return function(o){if(!Wt(o))return{};if(N0)return N0(o);n.prototype=o;var g=new n;return n.prototype=t,g}}();function Wo(){}function gi(n,o){this.__wrapped__=n,this.__actions__=[],this.__chain__=!!o,this.__index__=0,this.__values__=t}L.templateSettings={escape:tt,evaluate:De,interpolate:et,variable:"",imports:{_:L}},L.prototype=Wo.prototype,L.prototype.constructor=L,gi.prototype=$s(Wo.prototype),gi.prototype.constructor=gi;function It(n){this.__wrapped__=n,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=b,this.__views__=[]}function M2(){var n=new It(this.__wrapped__);return n.__actions__=Gr(this.__actions__),n.__dir__=this.__dir__,n.__filtered__=this.__filtered__,n.__iteratees__=Gr(this.__iteratees__),n.__takeCount__=this.__takeCount__,n.__views__=Gr(this.__views__),n}function I2(){if(this.__filtered__){var n=new It(this);n.__dir__=-1,n.__filtered__=!0}else n=this.clone(),n.__dir__*=-1;return n}function P2(){var n=this.__wrapped__.value(),o=this.__dir__,g=gt(n),M=o<0,q=g?n.length:0,j=zb(0,q,this.__views__),X=j.start,Z=j.end,se=Z-X,le=M?Z:X-1,de=this.__iteratees__,ge=de.length,Re=0,Je=Rr(se,this.__takeCount__);if(!g||!M&&q==se&&Je==se)return al(n,this.__actions__);var ot=[];e:for(;se--&&Re<Je;){le+=o;for(var yt=-1,ct=n[le];++yt<ge;){var Et=de[yt],Nt=Et.iteratee,ni=Et.type,Fr=Nt(ct);if(ni==p)ct=Fr;else if(!Fr){if(ni==h)continue e;break e}}ot[Re++]=ct}return ot}It.prototype=$s(Wo.prototype),It.prototype.constructor=It;function cs(n){var o=-1,g=n==null?0:n.length;for(this.clear();++o<g;){var M=n[o];this.set(M[0],M[1])}}function R2(){this.__data__=xa?xa(null):{},this.size=0}function C2(n){var o=this.has(n)&&delete this.__data__[n];return this.size-=o?1:0,o}function N2(n){var o=this.__data__;if(xa){var g=o[n];return g===d?t:g}return Bt.call(o,n)?o[n]:t}function O2(n){var o=this.__data__;return xa?o[n]!==t:Bt.call(o,n)}function q2(n,o){var g=this.__data__;return this.size+=this.has(n)?0:1,g[n]=xa&&o===t?d:o,this}cs.prototype.clear=R2,cs.prototype.delete=C2,cs.prototype.get=N2,cs.prototype.has=O2,cs.prototype.set=q2;function wn(n){var o=-1,g=n==null?0:n.length;for(this.clear();++o<g;){var M=n[o];this.set(M[0],M[1])}}function T2(){this.__data__=[],this.size=0}function F2(n){var o=this.__data__,g=Xo(o,n);if(g<0)return!1;var M=o.length-1;return g==M?o.pop():Ko.call(o,g,1),--this.size,!0}function D2(n){var o=this.__data__,g=Xo(o,n);return g<0?t:o[g][1]}function B2(n){return Xo(this.__data__,n)>-1}function L2(n,o){var g=this.__data__,M=Xo(g,n);return M<0?(++this.size,g.push([n,o])):g[M][1]=o,this}wn.prototype.clear=T2,wn.prototype.delete=F2,wn.prototype.get=D2,wn.prototype.has=B2,wn.prototype.set=L2;function _n(n){var o=-1,g=n==null?0:n.length;for(this.clear();++o<g;){var M=n[o];this.set(M[0],M[1])}}function U2(){this.size=0,this.__data__={hash:new cs,map:new(_a||wn),string:new cs}}function z2(n){var o=hc(this,n).delete(n);return this.size-=o?1:0,o}function k2(n){return hc(this,n).get(n)}function $2(n){return hc(this,n).has(n)}function j2(n,o){var g=hc(this,n),M=g.size;return g.set(n,o),this.size+=g.size==M?0:1,this}_n.prototype.clear=U2,_n.prototype.delete=z2,_n.prototype.get=k2,_n.prototype.has=$2,_n.prototype.set=j2;function fs(n){var o=-1,g=n==null?0:n.length;for(this.__data__=new _n;++o<g;)this.add(n[o])}function H2(n){return this.__data__.set(n,d),this}function K2(n){return this.__data__.has(n)}fs.prototype.add=fs.prototype.push=H2,fs.prototype.has=K2;function Fi(n){var o=this.__data__=new wn(n);this.size=o.size}function G2(){this.__data__=new wn,this.size=0}function V2(n){var o=this.__data__,g=o.delete(n);return this.size=o.size,g}function J2(n){return this.__data__.get(n)}function Q2(n){return this.__data__.has(n)}function Y2(n,o){var g=this.__data__;if(g instanceof wn){var M=g.__data__;if(!_a||M.length<s-1)return M.push([n,o]),this.size=++g.size,this;g=this.__data__=new _n(M)}return g.set(n,o),this.size=g.size,this}Fi.prototype.clear=G2,Fi.prototype.delete=V2,Fi.prototype.get=J2,Fi.prototype.has=Q2,Fi.prototype.set=Y2;function B0(n,o){var g=gt(n),M=!g&&ps(n),q=!g&&!M&&Jn(n),j=!g&&!M&&!q&&Gs(n),X=g||M||q||j,Z=X?xf(n.length,a2):[],se=Z.length;for(var le in n)(o||Bt.call(n,le))&&!(X&&(le=="length"||q&&(le=="offset"||le=="parent")||j&&(le=="buffer"||le=="byteLength"||le=="byteOffset")||Sn(le,se)))&&Z.push(le);return Z}function L0(n){var o=n.length;return o?n[zf(0,o-1)]:t}function W2(n,o){return uc(Gr(n),hs(o,0,n.length))}function X2(n){return uc(Gr(n))}function Cf(n,o,g){(g!==t&&!Di(n[o],g)||g===t&&!(o in n))&&An(n,o,g)}function Sa(n,o,g){var M=n[o];(!(Bt.call(n,o)&&Di(M,g))||g===t&&!(o in n))&&An(n,o,g)}function Xo(n,o){for(var g=n.length;g--;)if(Di(n[g][0],o))return g;return-1}function Z2(n,o,g,M){return Hn(n,function(q,j,X){o(M,q,g(q),X)}),M}function U0(n,o){return n&&Xi(o,gr(o),n)}function eb(n,o){return n&&Xi(o,Jr(o),n)}function An(n,o,g){o=="__proto__"&&Go?Go(n,o,{configurable:!0,enumerable:!0,value:g,writable:!0}):n[o]=g}function Nf(n,o){for(var g=-1,M=o.length,q=ce(M),j=n==null;++g<M;)q[g]=j?t:uh(n,o[g]);return q}function hs(n,o,g){return n===n&&(g!==t&&(n=n<=g?n:g),o!==t&&(n=n>=o?n:o)),n}function vi(n,o,g,M,q,j){var X,Z=o&x,se=o&C,le=o&R;if(g&&(X=q?g(n,M,q,j):g(n)),X!==t)return X;if(!Wt(n))return n;var de=gt(n);if(de){if(X=$b(n),!Z)return Gr(n,X)}else{var ge=Cr(n),Re=ge==ae||ge==oe;if(Jn(n))return fl(n,Z);if(ge==Me||ge==P||Re&&!q){if(X=se||Re?{}:Pl(n),!Z)return se?Nb(n,eb(X,n)):Cb(n,U0(X,n))}else{if(!Ut[ge])return q?n:{};X=jb(n,ge,Z)}}j||(j=new Fi);var Je=j.get(n);if(Je)return Je;j.set(n,X),id(n)?n.forEach(function(ct){X.add(vi(ct,o,g,ct,n,j))}):td(n)&&n.forEach(function(ct,Et){X.set(Et,vi(ct,o,g,Et,n,j))});var ot=le?se?Wf:Yf:se?Jr:gr,yt=de?t:ot(n);return di(yt||n,function(ct,Et){yt&&(Et=ct,ct=n[Et]),Sa(X,Et,vi(ct,o,g,Et,n,j))}),X}function tb(n){var o=gr(n);return function(g){return z0(g,n,o)}}function z0(n,o,g){var M=g.length;if(n==null)return!M;for(n=Ht(n);M--;){var q=g[M],j=o[q],X=n[q];if(X===t&&!(q in n)||!j(X))return!1}return!0}function k0(n,o,g){if(typeof n!="function")throw new pi(f);return Oa(function(){n.apply(t,g)},o)}function Ma(n,o,g,M){var q=-1,j=Fo,X=!0,Z=n.length,se=[],le=o.length;if(!Z)return se;g&&(o=Yt(o,ti(g))),M?(j=bf,X=!1):o.length>=s&&(j=ya,X=!1,o=new fs(o));e:for(;++q<Z;){var de=n[q],ge=g==null?de:g(de);if(de=M||de!==0?de:0,X&&ge===ge){for(var Re=le;Re--;)if(o[Re]===ge)continue e;se.push(de)}else j(o,ge,M)||se.push(de)}return se}var Hn=pl(Wi),$0=pl(qf,!0);function rb(n,o){var g=!0;return Hn(n,function(M,q,j){return g=!!o(M,q,j),g}),g}function Zo(n,o,g){for(var M=-1,q=n.length;++M<q;){var j=n[M],X=o(j);if(X!=null&&(Z===t?X===X&&!ii(X):g(X,Z)))var Z=X,se=j}return se}function ib(n,o,g,M){var q=n.length;for(g=mt(g),g<0&&(g=-g>q?0:q+g),M=M===t||M>q?q:mt(M),M<0&&(M+=q),M=g>M?0:sd(M);g<M;)n[g++]=o;return n}function j0(n,o){var g=[];return Hn(n,function(M,q,j){o(M,q,j)&&g.push(M)}),g}function wr(n,o,g,M,q){var j=-1,X=n.length;for(g||(g=Kb),q||(q=[]);++j<X;){var Z=n[j];o>0&&g(Z)?o>1?wr(Z,o-1,g,M,q):kn(q,Z):M||(q[q.length]=Z)}return q}var Of=gl(),H0=gl(!0);function Wi(n,o){return n&&Of(n,o,gr)}function qf(n,o){return n&&H0(n,o,gr)}function ec(n,o){return zn(o,function(g){return Mn(n[g])})}function us(n,o){o=Gn(o,n);for(var g=0,M=o.length;n!=null&&g<M;)n=n[Zi(o[g++])];return g&&g==M?n:t}function K0(n,o,g){var M=o(n);return gt(n)?M:kn(M,g(n))}function qr(n){return n==null?n===t?Oe:we:os&&os in Ht(n)?Ub(n):Xb(n)}function Tf(n,o){return n>o}function nb(n,o){return n!=null&&Bt.call(n,o)}function sb(n,o){return n!=null&&o in Ht(n)}function ab(n,o,g){return n>=Rr(o,g)&&n<ur(o,g)}function Ff(n,o,g){for(var M=g?bf:Fo,q=n[0].length,j=n.length,X=j,Z=ce(j),se=1/0,le=[];X--;){var de=n[X];X&&o&&(de=Yt(de,ti(o))),se=Rr(de.length,se),Z[X]=!g&&(o||q>=120&&de.length>=120)?new fs(X&&de):t}de=n[0];var ge=-1,Re=Z[0];e:for(;++ge<q&&le.length<se;){var Je=de[ge],ot=o?o(Je):Je;if(Je=g||Je!==0?Je:0,!(Re?ya(Re,ot):M(le,ot,g))){for(X=j;--X;){var yt=Z[X];if(!(yt?ya(yt,ot):M(n[X],ot,g)))continue e}Re&&Re.push(ot),le.push(Je)}}return le}function ob(n,o,g,M){return Wi(n,function(q,j,X){o(M,g(q),j,X)}),M}function Ia(n,o,g){o=Gn(o,n),n=Ol(n,o);var M=n==null?n:n[Zi(mi(o))];return M==null?t:pr(M,n,g)}function G0(n){return Zt(n)&&qr(n)==P}function cb(n){return Zt(n)&&qr(n)==xe}function fb(n){return Zt(n)&&qr(n)==J}function Pa(n,o,g,M,q){return n===o?!0:n==null||o==null||!Zt(n)&&!Zt(o)?n!==n&&o!==o:hb(n,o,g,M,Pa,q)}function hb(n,o,g,M,q,j){var X=gt(n),Z=gt(o),se=X?ee:Cr(n),le=Z?ee:Cr(o);se=se==P?Me:se,le=le==P?Me:le;var de=se==Me,ge=le==Me,Re=se==le;if(Re&&Jn(n)){if(!Jn(o))return!1;X=!0,de=!1}if(Re&&!de)return j||(j=new Fi),X||Gs(n)?Sl(n,o,g,M,q,j):Bb(n,o,se,g,M,q,j);if(!(g&N)){var Je=de&&Bt.call(n,"__wrapped__"),ot=ge&&Bt.call(o,"__wrapped__");if(Je||ot){var yt=Je?n.value():n,ct=ot?o.value():o;return j||(j=new Fi),q(yt,ct,g,M,j)}}return Re?(j||(j=new Fi),Lb(n,o,g,M,q,j)):!1}function ub(n){return Zt(n)&&Cr(n)==he}function Df(n,o,g,M){var q=g.length,j=q,X=!M;if(n==null)return!j;for(n=Ht(n);q--;){var Z=g[q];if(X&&Z[2]?Z[1]!==n[Z[0]]:!(Z[0]in n))return!1}for(;++q<j;){Z=g[q];var se=Z[0],le=n[se],de=Z[1];if(X&&Z[2]){if(le===t&&!(se in n))return!1}else{var ge=new Fi;if(M)var Re=M(le,de,se,n,o,ge);if(!(Re===t?Pa(de,le,N|T,M,ge):Re))return!1}}return!0}function V0(n){if(!Wt(n)||Vb(n))return!1;var o=Mn(n)?u2:Mr;return o.test(ds(n))}function lb(n){return Zt(n)&&qr(n)==Te}function db(n){return Zt(n)&&Cr(n)==Se}function pb(n){return Zt(n)&&bc(n.length)&&!!kt[qr(n)]}function J0(n){return typeof n=="function"?n:n==null?Qr:typeof n=="object"?gt(n)?W0(n[0],n[1]):Y0(n):vd(n)}function Bf(n){if(!Na(n))return b2(n);var o=[];for(var g in Ht(n))Bt.call(n,g)&&g!="constructor"&&o.push(g);return o}function gb(n){if(!Wt(n))return Wb(n);var o=Na(n),g=[];for(var M in n)M=="constructor"&&(o||!Bt.call(n,M))||g.push(M);return g}function Lf(n,o){return n<o}function Q0(n,o){var g=-1,M=Vr(n)?ce(n.length):[];return Hn(n,function(q,j,X){M[++g]=o(q,j,X)}),M}function Y0(n){var o=Zf(n);return o.length==1&&o[0][2]?Cl(o[0][0],o[0][1]):function(g){return g===n||Df(g,n,o)}}function W0(n,o){return th(n)&&Rl(o)?Cl(Zi(n),o):function(g){var M=uh(g,n);return M===t&&M===o?lh(g,n):Pa(o,M,N|T)}}function tc(n,o,g,M,q){n!==o&&Of(o,function(j,X){if(q||(q=new Fi),Wt(j))vb(n,o,X,g,tc,M,q);else{var Z=M?M(ih(n,X),j,X+"",n,o,q):t;Z===t&&(Z=j),Cf(n,X,Z)}},Jr)}function vb(n,o,g,M,q,j,X){var Z=ih(n,g),se=ih(o,g),le=X.get(se);if(le){Cf(n,g,le);return}var de=j?j(Z,se,g+"",n,o,X):t,ge=de===t;if(ge){var Re=gt(se),Je=!Re&&Jn(se),ot=!Re&&!Je&&Gs(se);de=se,Re||Je||ot?gt(Z)?de=Z:ir(Z)?de=Gr(Z):Je?(ge=!1,de=fl(se,!0)):ot?(ge=!1,de=hl(se,!0)):de=[]:qa(se)||ps(se)?(de=Z,ps(Z)?de=ad(Z):(!Wt(Z)||Mn(Z))&&(de=Pl(se))):ge=!1}ge&&(X.set(se,de),q(de,se,M,j,X),X.delete(se)),Cf(n,g,de)}function X0(n,o){var g=n.length;if(g)return o+=o<0?g:0,Sn(o,g)?n[o]:t}function Z0(n,o,g){o.length?o=Yt(o,function(j){return gt(j)?function(X){return us(X,j.length===1?j[0]:j)}:j}):o=[Qr];var M=-1;o=Yt(o,ti(nt()));var q=Q0(n,function(j,X,Z){var se=Yt(o,function(le){return le(j)});return{criteria:se,index:++M,value:j}});return jv(q,function(j,X){return Rb(j,X,g)})}function bb(n,o){return el(n,o,function(g,M){return lh(n,M)})}function el(n,o,g){for(var M=-1,q=o.length,j={};++M<q;){var X=o[M],Z=us(n,X);g(Z,X)&&Ra(j,Gn(X,n),Z)}return j}function mb(n){return function(o){return us(o,n)}}function Uf(n,o,g,M){var q=M?$v:Fs,j=-1,X=o.length,Z=n;for(n===o&&(o=Gr(o)),g&&(Z=Yt(n,ti(g)));++j<X;)for(var se=0,le=o[j],de=g?g(le):le;(se=q(Z,de,se,M))>-1;)Z!==n&&Ko.call(Z,se,1),Ko.call(n,se,1);return n}function tl(n,o){for(var g=n?o.length:0,M=g-1;g--;){var q=o[g];if(g==M||q!==j){var j=q;Sn(q)?Ko.call(n,q,1):jf(n,q)}}return n}function zf(n,o){return n+Jo(F0()*(o-n+1))}function yb(n,o,g,M){for(var q=-1,j=ur(Vo((o-n)/(g||1)),0),X=ce(j);j--;)X[M?j:++q]=n,n+=g;return X}function kf(n,o){var g="";if(!n||o<1||o>I)return g;do o%2&&(g+=n),o=Jo(o/2),o&&(n+=n);while(o);return g}function _t(n,o){return nh(Nl(n,o,Qr),n+"")}function wb(n){return L0(Vs(n))}function _b(n,o){var g=Vs(n);return uc(g,hs(o,0,g.length))}function Ra(n,o,g,M){if(!Wt(n))return n;o=Gn(o,n);for(var q=-1,j=o.length,X=j-1,Z=n;Z!=null&&++q<j;){var se=Zi(o[q]),le=g;if(se==="__proto__"||se==="constructor"||se==="prototype")return n;if(q!=X){var de=Z[se];le=M?M(de,se,Z):t,le===t&&(le=Wt(de)?de:Sn(o[q+1])?[]:{})}Sa(Z,se,le),Z=Z[se]}return n}var rl=Qo?function(n,o){return Qo.set(n,o),n}:Qr,Ab=Go?function(n,o){return Go(n,"toString",{configurable:!0,enumerable:!1,value:ph(o),writable:!0})}:Qr;function xb(n){return uc(Vs(n))}function bi(n,o,g){var M=-1,q=n.length;o<0&&(o=-o>q?0:q+o),g=g>q?q:g,g<0&&(g+=q),q=o>g?0:g-o>>>0,o>>>=0;for(var j=ce(q);++M<q;)j[M]=n[M+o];return j}function Eb(n,o){var g;return Hn(n,function(M,q,j){return g=o(M,q,j),!g}),!!g}function rc(n,o,g){var M=0,q=n==null?M:n.length;if(typeof o=="number"&&o===o&&q<=W){for(;M<q;){var j=M+q>>>1,X=n[j];X!==null&&!ii(X)&&(g?X<=o:X<o)?M=j+1:q=j}return q}return $f(n,o,Qr,g)}function $f(n,o,g,M){var q=0,j=n==null?0:n.length;if(j===0)return 0;o=g(o);for(var X=o!==o,Z=o===null,se=ii(o),le=o===t;q<j;){var de=Jo((q+j)/2),ge=g(n[de]),Re=ge!==t,Je=ge===null,ot=ge===ge,yt=ii(ge);if(X)var ct=M||ot;else le?ct=ot&&(M||Re):Z?ct=ot&&Re&&(M||!Je):se?ct=ot&&Re&&!Je&&(M||!yt):Je||yt?ct=!1:ct=M?ge<=o:ge<o;ct?q=de+1:j=de}return Rr(j,O)}function il(n,o){for(var g=-1,M=n.length,q=0,j=[];++g<M;){var X=n[g],Z=o?o(X):X;if(!g||!Di(Z,se)){var se=Z;j[q++]=X===0?0:X}}return j}function nl(n){return typeof n=="number"?n:ii(n)?v:+n}function ri(n){if(typeof n=="string")return n;if(gt(n))return Yt(n,ri)+"";if(ii(n))return D0?D0.call(n):"";var o=n+"";return o=="0"&&1/n==-1/0?"-0":o}function Kn(n,o,g){var M=-1,q=Fo,j=n.length,X=!0,Z=[],se=Z;if(g)X=!1,q=bf;else if(j>=s){var le=o?null:Fb(n);if(le)return Bo(le);X=!1,q=ya,se=new fs}else se=o?[]:Z;e:for(;++M<j;){var de=n[M],ge=o?o(de):de;if(de=g||de!==0?de:0,X&&ge===ge){for(var Re=se.length;Re--;)if(se[Re]===ge)continue e;o&&se.push(ge),Z.push(de)}else q(se,ge,g)||(se!==Z&&se.push(ge),Z.push(de))}return Z}function jf(n,o){return o=Gn(o,n),n=Ol(n,o),n==null||delete n[Zi(mi(o))]}function sl(n,o,g,M){return Ra(n,o,g(us(n,o)),M)}function ic(n,o,g,M){for(var q=n.length,j=M?q:-1;(M?j--:++j<q)&&o(n[j],j,n););return g?bi(n,M?0:j,M?j+1:q):bi(n,M?j+1:0,M?q:j)}function al(n,o){var g=n;return g instanceof It&&(g=g.value()),mf(o,function(M,q){return q.func.apply(q.thisArg,kn([M],q.args))},g)}function Hf(n,o,g){var M=n.length;if(M<2)return M?Kn(n[0]):[];for(var q=-1,j=ce(M);++q<M;)for(var X=n[q],Z=-1;++Z<M;)Z!=q&&(j[q]=Ma(j[q]||X,n[Z],o,g));return Kn(wr(j,1),o,g)}function ol(n,o,g){for(var M=-1,q=n.length,j=o.length,X={};++M<q;){var Z=M<j?o[M]:t;g(X,n[M],Z)}return X}function Kf(n){return ir(n)?n:[]}function Gf(n){return typeof n=="function"?n:Qr}function Gn(n,o){return gt(n)?n:th(n,o)?[n]:Dl(Ft(n))}var Sb=_t;function Vn(n,o,g){var M=n.length;return g=g===t?M:g,!o&&g>=M?n:bi(n,o,g)}var cl=l2||function(n){return Ct.clearTimeout(n)};function fl(n,o){if(o)return n.slice();var g=n.length,M=C0?C0(g):new n.constructor(g);return n.copy(M),M}function Vf(n){var o=new n.constructor(n.byteLength);return new jo(o).set(new jo(n)),o}function Mb(n,o){var g=o?Vf(n.buffer):n.buffer;return new n.constructor(g,n.byteOffset,n.byteLength)}function Ib(n){var o=new n.constructor(n.source,bt.exec(n));return o.lastIndex=n.lastIndex,o}function Pb(n){return Ea?Ht(Ea.call(n)):{}}function hl(n,o){var g=o?Vf(n.buffer):n.buffer;return new n.constructor(g,n.byteOffset,n.length)}function ul(n,o){if(n!==o){var g=n!==t,M=n===null,q=n===n,j=ii(n),X=o!==t,Z=o===null,se=o===o,le=ii(o);if(!Z&&!le&&!j&&n>o||j&&X&&se&&!Z&&!le||M&&X&&se||!g&&se||!q)return 1;if(!M&&!j&&!le&&n<o||le&&g&&q&&!M&&!j||Z&&g&&q||!X&&q||!se)return-1}return 0}function Rb(n,o,g){for(var M=-1,q=n.criteria,j=o.criteria,X=q.length,Z=g.length;++M<X;){var se=ul(q[M],j[M]);if(se){if(M>=Z)return se;var le=g[M];return se*(le=="desc"?-1:1)}}return n.index-o.index}function ll(n,o,g,M){for(var q=-1,j=n.length,X=g.length,Z=-1,se=o.length,le=ur(j-X,0),de=ce(se+le),ge=!M;++Z<se;)de[Z]=o[Z];for(;++q<X;)(ge||q<j)&&(de[g[q]]=n[q]);for(;le--;)de[Z++]=n[q++];return de}function dl(n,o,g,M){for(var q=-1,j=n.length,X=-1,Z=g.length,se=-1,le=o.length,de=ur(j-Z,0),ge=ce(de+le),Re=!M;++q<de;)ge[q]=n[q];for(var Je=q;++se<le;)ge[Je+se]=o[se];for(;++X<Z;)(Re||q<j)&&(ge[Je+g[X]]=n[q++]);return ge}function Gr(n,o){var g=-1,M=n.length;for(o||(o=ce(M));++g<M;)o[g]=n[g];return o}function Xi(n,o,g,M){var q=!g;g||(g={});for(var j=-1,X=o.length;++j<X;){var Z=o[j],se=M?M(g[Z],n[Z],Z,g,n):t;se===t&&(se=n[Z]),q?An(g,Z,se):Sa(g,Z,se)}return g}function Cb(n,o){return Xi(n,eh(n),o)}function Nb(n,o){return Xi(n,Ml(n),o)}function nc(n,o){return function(g,M){var q=gt(g)?Dv:Z2,j=o?o():{};return q(g,n,nt(M,2),j)}}function js(n){return _t(function(o,g){var M=-1,q=g.length,j=q>1?g[q-1]:t,X=q>2?g[2]:t;for(j=n.length>3&&typeof j=="function"?(q--,j):t,X&&Tr(g[0],g[1],X)&&(j=q<3?t:j,q=1),o=Ht(o);++M<q;){var Z=g[M];Z&&n(o,Z,M,j)}return o})}function pl(n,o){return function(g,M){if(g==null)return g;if(!Vr(g))return n(g,M);for(var q=g.length,j=o?q:-1,X=Ht(g);(o?j--:++j<q)&&M(X[j],j,X)!==!1;);return g}}function gl(n){return function(o,g,M){for(var q=-1,j=Ht(o),X=M(o),Z=X.length;Z--;){var se=X[n?Z:++q];if(g(j[se],se,j)===!1)break}return o}}function Ob(n,o,g){var M=o&U,q=Ca(n);function j(){var X=this&&this!==Ct&&this instanceof j?q:n;return X.apply(M?g:this,arguments)}return j}function vl(n){return function(o){o=Ft(o);var g=Ds(o)?Ti(o):t,M=g?g[0]:o.charAt(0),q=g?Vn(g,1).join(""):o.slice(1);return M[n]()+q}}function Hs(n){return function(o){return mf(pd(dd(o).replace(ba,"")),n,"")}}function Ca(n){return function(){var o=arguments;switch(o.length){case 0:return new n;case 1:return new n(o[0]);case 2:return new n(o[0],o[1]);case 3:return new n(o[0],o[1],o[2]);case 4:return new n(o[0],o[1],o[2],o[3]);case 5:return new n(o[0],o[1],o[2],o[3],o[4]);case 6:return new n(o[0],o[1],o[2],o[3],o[4],o[5]);case 7:return new n(o[0],o[1],o[2],o[3],o[4],o[5],o[6])}var g=$s(n.prototype),M=n.apply(g,o);return Wt(M)?M:g}}function qb(n,o,g){var M=Ca(n);function q(){for(var j=arguments.length,X=ce(j),Z=j,se=Ks(q);Z--;)X[Z]=arguments[Z];var le=j<3&&X[0]!==se&&X[j-1]!==se?[]:$n(X,se);if(j-=le.length,j<g)return _l(n,o,sc,q.placeholder,t,X,le,t,t,g-j);var de=this&&this!==Ct&&this instanceof q?M:n;return pr(de,this,X)}return q}function bl(n){return function(o,g,M){var q=Ht(o);if(!Vr(o)){var j=nt(g,3);o=gr(o),g=function(Z){return j(q[Z],Z,q)}}var X=n(o,g,M);return X>-1?q[j?o[X]:X]:t}}function ml(n){return En(function(o){var g=o.length,M=g,q=gi.prototype.thru;for(n&&o.reverse();M--;){var j=o[M];if(typeof j!="function")throw new pi(f);if(q&&!X&&fc(j)=="wrapper")var X=new gi([],!0)}for(M=X?M:g;++M<g;){j=o[M];var Z=fc(j),se=Z=="wrapper"?Xf(j):t;se&&rh(se[0])&&se[1]==(E|V|B|$)&&!se[4].length&&se[9]==1?X=X[fc(se[0])].apply(X,se[3]):X=j.length==1&&rh(j)?X[Z]():X.thru(j)}return function(){var le=arguments,de=le[0];if(X&&le.length==1&&gt(de))return X.plant(de).value();for(var ge=0,Re=g?o[ge].apply(this,le):de;++ge<g;)Re=o[ge].call(this,Re);return Re}})}function sc(n,o,g,M,q,j,X,Z,se,le){var de=o&E,ge=o&U,Re=o&Q,Je=o&(V|D),ot=o&ne,yt=Re?t:Ca(n);function ct(){for(var Et=arguments.length,Nt=ce(Et),ni=Et;ni--;)Nt[ni]=arguments[ni];if(Je)var Fr=Ks(ct),si=Kv(Nt,Fr);if(M&&(Nt=ll(Nt,M,q,Je)),j&&(Nt=dl(Nt,j,X,Je)),Et-=si,Je&&Et<le){var nr=$n(Nt,Fr);return _l(n,o,sc,ct.placeholder,g,Nt,nr,Z,se,le-Et)}var Bi=ge?g:this,Pn=Re?Bi[n]:n;return Et=Nt.length,Z?Nt=Zb(Nt,Z):ot&&Et>1&&Nt.reverse(),de&&se<Et&&(Nt.length=se),this&&this!==Ct&&this instanceof ct&&(Pn=yt||Ca(Pn)),Pn.apply(Bi,Nt)}return ct}function yl(n,o){return function(g,M){return ob(g,n,o(M),{})}}function ac(n,o){return function(g,M){var q;if(g===t&&M===t)return o;if(g!==t&&(q=g),M!==t){if(q===t)return M;typeof g=="string"||typeof M=="string"?(g=ri(g),M=ri(M)):(g=nl(g),M=nl(M)),q=n(g,M)}return q}}function Jf(n){return En(function(o){return o=Yt(o,ti(nt())),_t(function(g){var M=this;return n(o,function(q){return pr(q,M,g)})})})}function oc(n,o){o=o===t?" ":ri(o);var g=o.length;if(g<2)return g?kf(o,n):o;var M=kf(o,Vo(n/Bs(o)));return Ds(o)?Vn(Ti(M),0,n).join(""):M.slice(0,n)}function Tb(n,o,g,M){var q=o&U,j=Ca(n);function X(){for(var Z=-1,se=arguments.length,le=-1,de=M.length,ge=ce(de+se),Re=this&&this!==Ct&&this instanceof X?j:n;++le<de;)ge[le]=M[le];for(;se--;)ge[le++]=arguments[++Z];return pr(Re,q?g:this,ge)}return X}function wl(n){return function(o,g,M){return M&&typeof M!="number"&&Tr(o,g,M)&&(g=M=t),o=In(o),g===t?(g=o,o=0):g=In(g),M=M===t?o<g?1:-1:In(M),yb(o,g,M,n)}}function cc(n){return function(o,g){return typeof o=="string"&&typeof g=="string"||(o=yi(o),g=yi(g)),n(o,g)}}function _l(n,o,g,M,q,j,X,Z,se,le){var de=o&V,ge=de?X:t,Re=de?t:X,Je=de?j:t,ot=de?t:j;o|=de?B:H,o&=~(de?H:B),o&F||(o&=-4);var yt=[n,o,q,Je,ge,ot,Re,Z,se,le],ct=g.apply(t,yt);return rh(n)&&ql(ct,yt),ct.placeholder=M,Tl(ct,n,o)}function Qf(n){var o=hr[n];return function(g,M){if(g=yi(g),M=M==null?0:Rr(mt(M),292),M&&T0(g)){var q=(Ft(g)+"e").split("e"),j=o(q[0]+"e"+(+q[1]+M));return q=(Ft(j)+"e").split("e"),+(q[0]+"e"+(+q[1]-M))}return o(g)}}var Fb=zs&&1/Bo(new zs([,-0]))[1]==_?function(n){return new zs(n)}:bh;function Al(n){return function(o){var g=Cr(o);return g==he?Sf(o):g==Se?Xv(o):Hv(o,n(o))}}function xn(n,o,g,M,q,j,X,Z){var se=o&Q;if(!se&&typeof n!="function")throw new pi(f);var le=M?M.length:0;if(le||(o&=-97,M=q=t),X=X===t?X:ur(mt(X),0),Z=Z===t?Z:mt(Z),le-=q?q.length:0,o&H){var de=M,ge=q;M=q=t}var Re=se?t:Xf(n),Je=[n,o,g,M,q,de,ge,j,X,Z];if(Re&&Yb(Je,Re),n=Je[0],o=Je[1],g=Je[2],M=Je[3],q=Je[4],Z=Je[9]=Je[9]===t?se?0:n.length:ur(Je[9]-le,0),!Z&&o&(V|D)&&(o&=-25),!o||o==U)var ot=Ob(n,o,g);else o==V||o==D?ot=qb(n,o,Z):(o==B||o==(U|B))&&!q.length?ot=Tb(n,o,g,M):ot=sc.apply(t,Je);var yt=Re?rl:ql;return Tl(yt(ot,Je),n,o)}function xl(n,o,g,M){return n===t||Di(n,Us[g])&&!Bt.call(M,g)?o:n}function El(n,o,g,M,q,j){return Wt(n)&&Wt(o)&&(j.set(o,n),tc(n,o,t,El,j),j.delete(o)),n}function Db(n){return qa(n)?t:n}function Sl(n,o,g,M,q,j){var X=g&N,Z=n.length,se=o.length;if(Z!=se&&!(X&&se>Z))return!1;var le=j.get(n),de=j.get(o);if(le&&de)return le==o&&de==n;var ge=-1,Re=!0,Je=g&T?new fs:t;for(j.set(n,o),j.set(o,n);++ge<Z;){var ot=n[ge],yt=o[ge];if(M)var ct=X?M(yt,ot,ge,o,n,j):M(ot,yt,ge,n,o,j);if(ct!==t){if(ct)continue;Re=!1;break}if(Je){if(!yf(o,function(Et,Nt){if(!ya(Je,Nt)&&(ot===Et||q(ot,Et,g,M,j)))return Je.push(Nt)})){Re=!1;break}}else if(!(ot===yt||q(ot,yt,g,M,j))){Re=!1;break}}return j.delete(n),j.delete(o),Re}function Bb(n,o,g,M,q,j,X){switch(g){case ye:if(n.byteLength!=o.byteLength||n.byteOffset!=o.byteOffset)return!1;n=n.buffer,o=o.buffer;case xe:return!(n.byteLength!=o.byteLength||!j(new jo(n),new jo(o)));case G:case J:case be:return Di(+n,+o);case K:return n.name==o.name&&n.message==o.message;case Te:case me:return n==o+"";case he:var Z=Sf;case Se:var se=M&N;if(Z||(Z=Bo),n.size!=o.size&&!se)return!1;var le=X.get(n);if(le)return le==o;M|=T,X.set(n,o);var de=Sl(Z(n),Z(o),M,q,j,X);return X.delete(n),de;case Ne:if(Ea)return Ea.call(n)==Ea.call(o)}return!1}function Lb(n,o,g,M,q,j){var X=g&N,Z=Yf(n),se=Z.length,le=Yf(o),de=le.length;if(se!=de&&!X)return!1;for(var ge=se;ge--;){var Re=Z[ge];if(!(X?Re in o:Bt.call(o,Re)))return!1}var Je=j.get(n),ot=j.get(o);if(Je&&ot)return Je==o&&ot==n;var yt=!0;j.set(n,o),j.set(o,n);for(var ct=X;++ge<se;){Re=Z[ge];var Et=n[Re],Nt=o[Re];if(M)var ni=X?M(Nt,Et,Re,o,n,j):M(Et,Nt,Re,n,o,j);if(!(ni===t?Et===Nt||q(Et,Nt,g,M,j):ni)){yt=!1;break}ct||(ct=Re=="constructor")}if(yt&&!ct){var Fr=n.constructor,si=o.constructor;Fr!=si&&"constructor"in n&&"constructor"in o&&!(typeof Fr=="function"&&Fr instanceof Fr&&typeof si=="function"&&si instanceof si)&&(yt=!1)}return j.delete(n),j.delete(o),yt}function En(n){return nh(Nl(n,t,zl),n+"")}function Yf(n){return K0(n,gr,eh)}function Wf(n){return K0(n,Jr,Ml)}var Xf=Qo?function(n){return Qo.get(n)}:bh;function fc(n){for(var o=n.name+"",g=ks[o],M=Bt.call(ks,o)?g.length:0;M--;){var q=g[M],j=q.func;if(j==null||j==n)return q.name}return o}function Ks(n){var o=Bt.call(L,"placeholder")?L:n;return o.placeholder}function nt(){var n=L.iteratee||gh;return n=n===gh?J0:n,arguments.length?n(arguments[0],arguments[1]):n}function hc(n,o){var g=n.__data__;return Gb(o)?g[typeof o=="string"?"string":"hash"]:g.map}function Zf(n){for(var o=gr(n),g=o.length;g--;){var M=o[g],q=n[M];o[g]=[M,q,Rl(q)]}return o}function ls(n,o){var g=Qv(n,o);return V0(g)?g:t}function Ub(n){var o=Bt.call(n,os),g=n[os];try{n[os]=t;var M=!0}catch{}var q=ko.call(n);return M&&(o?n[os]=g:delete n[os]),q}var eh=If?function(n){return n==null?[]:(n=Ht(n),zn(If(n),function(o){return O0.call(n,o)}))}:mh,Ml=If?function(n){for(var o=[];n;)kn(o,eh(n)),n=Ho(n);return o}:mh,Cr=qr;(Pf&&Cr(new Pf(new ArrayBuffer(1)))!=ye||_a&&Cr(new _a)!=he||Rf&&Cr(Rf.resolve())!=Qe||zs&&Cr(new zs)!=Se||Aa&&Cr(new Aa)!=ve)&&(Cr=function(n){var o=qr(n),g=o==Me?n.constructor:t,M=g?ds(g):"";if(M)switch(M){case _2:return ye;case A2:return he;case x2:return Qe;case E2:return Se;case S2:return ve}return o});function zb(n,o,g){for(var M=-1,q=g.length;++M<q;){var j=g[M],X=j.size;switch(j.type){case"drop":n+=X;break;case"dropRight":o-=X;break;case"take":o=Rr(o,n+X);break;case"takeRight":n=ur(n,o-X);break}}return{start:n,end:o}}function kb(n){var o=n.match(We);return o?o[1].split(ht):[]}function Il(n,o,g){o=Gn(o,n);for(var M=-1,q=o.length,j=!1;++M<q;){var X=Zi(o[M]);if(!(j=n!=null&&g(n,X)))break;n=n[X]}return j||++M!=q?j:(q=n==null?0:n.length,!!q&&bc(q)&&Sn(X,q)&&(gt(n)||ps(n)))}function $b(n){var o=n.length,g=new n.constructor(o);return o&&typeof n[0]=="string"&&Bt.call(n,"index")&&(g.index=n.index,g.input=n.input),g}function Pl(n){return typeof n.constructor=="function"&&!Na(n)?$s(Ho(n)):{}}function jb(n,o,g){var M=n.constructor;switch(o){case xe:return Vf(n);case G:case J:return new M(+n);case ye:return Mb(n,g);case Le:case Pe:case _e:case He:case Ge:case Ee:case Ke:case ut:case Ve:return hl(n,g);case he:return new M;case be:case me:return new M(n);case Te:return Ib(n);case Se:return new M;case Ne:return Pb(n)}}function Hb(n,o){var g=o.length;if(!g)return n;var M=g-1;return o[M]=(g>1?"& ":"")+o[M],o=o.join(g>2?", ":" "),n.replace(Be,`{
/* [wrapped with `+o+`] */
`)}function Kb(n){return gt(n)||ps(n)||!!(q0&&n&&n[q0])}function Sn(n,o){var g=typeof n;return o=o??I,!!o&&(g=="number"||g!="symbol"&&Pr.test(n))&&n>-1&&n%1==0&&n<o}function Tr(n,o,g){if(!Wt(g))return!1;var M=typeof o;return(M=="number"?Vr(g)&&Sn(o,g.length):M=="string"&&o in g)?Di(g[o],n):!1}function th(n,o){if(gt(n))return!1;var g=typeof n;return g=="number"||g=="symbol"||g=="boolean"||n==null||ii(n)?!0:ze.test(n)||!Ze.test(n)||o!=null&&n in Ht(o)}function Gb(n){var o=typeof n;return o=="string"||o=="number"||o=="symbol"||o=="boolean"?n!=="__proto__":n===null}function rh(n){var o=fc(n),g=L[o];if(typeof g!="function"||!(o in It.prototype))return!1;if(n===g)return!0;var M=Xf(g);return!!M&&n===M[0]}function Vb(n){return!!R0&&R0 in n}var Jb=Uo?Mn:yh;function Na(n){var o=n&&n.constructor,g=typeof o=="function"&&o.prototype||Us;return n===g}function Rl(n){return n===n&&!Wt(n)}function Cl(n,o){return function(g){return g==null?!1:g[n]===o&&(o!==t||n in Ht(g))}}function Qb(n){var o=gc(n,function(M){return g.size===l&&g.clear(),M}),g=o.cache;return o}function Yb(n,o){var g=n[1],M=o[1],q=g|M,j=q<(U|Q|E),X=M==E&&g==V||M==E&&g==$&&n[7].length<=o[8]||M==(E|$)&&o[7].length<=o[8]&&g==V;if(!(j||X))return n;M&U&&(n[2]=o[2],q|=g&U?0:F);var Z=o[3];if(Z){var se=n[3];n[3]=se?ll(se,Z,o[4]):Z,n[4]=se?$n(n[3],w):o[4]}return Z=o[5],Z&&(se=n[5],n[5]=se?dl(se,Z,o[6]):Z,n[6]=se?$n(n[5],w):o[6]),Z=o[7],Z&&(n[7]=Z),M&E&&(n[8]=n[8]==null?o[8]:Rr(n[8],o[8])),n[9]==null&&(n[9]=o[9]),n[0]=o[0],n[1]=q,n}function Wb(n){var o=[];if(n!=null)for(var g in Ht(n))o.push(g);return o}function Xb(n){return ko.call(n)}function Nl(n,o,g){return o=ur(o===t?n.length-1:o,0),function(){for(var M=arguments,q=-1,j=ur(M.length-o,0),X=ce(j);++q<j;)X[q]=M[o+q];q=-1;for(var Z=ce(o+1);++q<o;)Z[q]=M[q];return Z[o]=g(X),pr(n,this,Z)}}function Ol(n,o){return o.length<2?n:us(n,bi(o,0,-1))}function Zb(n,o){for(var g=n.length,M=Rr(o.length,g),q=Gr(n);M--;){var j=o[M];n[M]=Sn(j,g)?q[j]:t}return n}function ih(n,o){if(!(o==="constructor"&&typeof n[o]=="function")&&o!="__proto__")return n[o]}var ql=Fl(rl),Oa=p2||function(n,o){return Ct.setTimeout(n,o)},nh=Fl(Ab);function Tl(n,o,g){var M=o+"";return nh(n,Hb(M,e6(kb(M),g)))}function Fl(n){var o=0,g=0;return function(){var M=m2(),q=c-(M-g);if(g=M,q>0){if(++o>=y)return arguments[0]}else o=0;return n.apply(t,arguments)}}function uc(n,o){var g=-1,M=n.length,q=M-1;for(o=o===t?M:o;++g<o;){var j=zf(g,q),X=n[j];n[j]=n[g],n[g]=X}return n.length=o,n}var Dl=Qb(function(n){var o=[];return n.charCodeAt(0)===46&&o.push(""),n.replace(ft,function(g,M,q,j){o.push(q?j.replace(qt,"$1"):M||g)}),o});function Zi(n){if(typeof n=="string"||ii(n))return n;var o=n+"";return o=="0"&&1/n==-1/0?"-0":o}function ds(n){if(n!=null){try{return zo.call(n)}catch{}try{return n+""}catch{}}return""}function e6(n,o){return di(te,function(g){var M="_."+g[0];o&g[1]&&!Fo(n,M)&&n.push(M)}),n.sort()}function Bl(n){if(n instanceof It)return n.clone();var o=new gi(n.__wrapped__,n.__chain__);return o.__actions__=Gr(n.__actions__),o.__index__=n.__index__,o.__values__=n.__values__,o}function t6(n,o,g){(g?Tr(n,o,g):o===t)?o=1:o=ur(mt(o),0);var M=n==null?0:n.length;if(!M||o<1)return[];for(var q=0,j=0,X=ce(Vo(M/o));q<M;)X[j++]=bi(n,q,q+=o);return X}function r6(n){for(var o=-1,g=n==null?0:n.length,M=0,q=[];++o<g;){var j=n[o];j&&(q[M++]=j)}return q}function i6(){var n=arguments.length;if(!n)return[];for(var o=ce(n-1),g=arguments[0],M=n;M--;)o[M-1]=arguments[M];return kn(gt(g)?Gr(g):[g],wr(o,1))}var n6=_t(function(n,o){return ir(n)?Ma(n,wr(o,1,ir,!0)):[]}),s6=_t(function(n,o){var g=mi(o);return ir(g)&&(g=t),ir(n)?Ma(n,wr(o,1,ir,!0),nt(g,2)):[]}),a6=_t(function(n,o){var g=mi(o);return ir(g)&&(g=t),ir(n)?Ma(n,wr(o,1,ir,!0),t,g):[]});function o6(n,o,g){var M=n==null?0:n.length;return M?(o=g||o===t?1:mt(o),bi(n,o<0?0:o,M)):[]}function c6(n,o,g){var M=n==null?0:n.length;return M?(o=g||o===t?1:mt(o),o=M-o,bi(n,0,o<0?0:o)):[]}function f6(n,o){return n&&n.length?ic(n,nt(o,3),!0,!0):[]}function h6(n,o){return n&&n.length?ic(n,nt(o,3),!0):[]}function u6(n,o,g,M){var q=n==null?0:n.length;return q?(g&&typeof g!="number"&&Tr(n,o,g)&&(g=0,M=q),ib(n,o,g,M)):[]}function Ll(n,o,g){var M=n==null?0:n.length;if(!M)return-1;var q=g==null?0:mt(g);return q<0&&(q=ur(M+q,0)),Do(n,nt(o,3),q)}function Ul(n,o,g){var M=n==null?0:n.length;if(!M)return-1;var q=M-1;return g!==t&&(q=mt(g),q=g<0?ur(M+q,0):Rr(q,M-1)),Do(n,nt(o,3),q,!0)}function zl(n){var o=n==null?0:n.length;return o?wr(n,1):[]}function l6(n){var o=n==null?0:n.length;return o?wr(n,_):[]}function d6(n,o){var g=n==null?0:n.length;return g?(o=o===t?1:mt(o),wr(n,o)):[]}function p6(n){for(var o=-1,g=n==null?0:n.length,M={};++o<g;){var q=n[o];M[q[0]]=q[1]}return M}function kl(n){return n&&n.length?n[0]:t}function g6(n,o,g){var M=n==null?0:n.length;if(!M)return-1;var q=g==null?0:mt(g);return q<0&&(q=ur(M+q,0)),Fs(n,o,q)}function v6(n){var o=n==null?0:n.length;return o?bi(n,0,-1):[]}var b6=_t(function(n){var o=Yt(n,Kf);return o.length&&o[0]===n[0]?Ff(o):[]}),m6=_t(function(n){var o=mi(n),g=Yt(n,Kf);return o===mi(g)?o=t:g.pop(),g.length&&g[0]===n[0]?Ff(g,nt(o,2)):[]}),y6=_t(function(n){var o=mi(n),g=Yt(n,Kf);return o=typeof o=="function"?o:t,o&&g.pop(),g.length&&g[0]===n[0]?Ff(g,t,o):[]});function w6(n,o){return n==null?"":v2.call(n,o)}function mi(n){var o=n==null?0:n.length;return o?n[o-1]:t}function _6(n,o,g){var M=n==null?0:n.length;if(!M)return-1;var q=M;return g!==t&&(q=mt(g),q=q<0?ur(M+q,0):Rr(q,M-1)),o===o?e2(n,o,q):Do(n,_0,q,!0)}function A6(n,o){return n&&n.length?X0(n,mt(o)):t}var x6=_t($l);function $l(n,o){return n&&n.length&&o&&o.length?Uf(n,o):n}function E6(n,o,g){return n&&n.length&&o&&o.length?Uf(n,o,nt(g,2)):n}function S6(n,o,g){return n&&n.length&&o&&o.length?Uf(n,o,t,g):n}var M6=En(function(n,o){var g=n==null?0:n.length,M=Nf(n,o);return tl(n,Yt(o,function(q){return Sn(q,g)?+q:q}).sort(ul)),M});function I6(n,o){var g=[];if(!(n&&n.length))return g;var M=-1,q=[],j=n.length;for(o=nt(o,3);++M<j;){var X=n[M];o(X,M,n)&&(g.push(X),q.push(M))}return tl(n,q),g}function sh(n){return n==null?n:w2.call(n)}function P6(n,o,g){var M=n==null?0:n.length;return M?(g&&typeof g!="number"&&Tr(n,o,g)?(o=0,g=M):(o=o==null?0:mt(o),g=g===t?M:mt(g)),bi(n,o,g)):[]}function R6(n,o){return rc(n,o)}function C6(n,o,g){return $f(n,o,nt(g,2))}function N6(n,o){var g=n==null?0:n.length;if(g){var M=rc(n,o);if(M<g&&Di(n[M],o))return M}return-1}function O6(n,o){return rc(n,o,!0)}function q6(n,o,g){return $f(n,o,nt(g,2),!0)}function T6(n,o){var g=n==null?0:n.length;if(g){var M=rc(n,o,!0)-1;if(Di(n[M],o))return M}return-1}function F6(n){return n&&n.length?il(n):[]}function D6(n,o){return n&&n.length?il(n,nt(o,2)):[]}function B6(n){var o=n==null?0:n.length;return o?bi(n,1,o):[]}function L6(n,o,g){return n&&n.length?(o=g||o===t?1:mt(o),bi(n,0,o<0?0:o)):[]}function U6(n,o,g){var M=n==null?0:n.length;return M?(o=g||o===t?1:mt(o),o=M-o,bi(n,o<0?0:o,M)):[]}function z6(n,o){return n&&n.length?ic(n,nt(o,3),!1,!0):[]}function k6(n,o){return n&&n.length?ic(n,nt(o,3)):[]}var $6=_t(function(n){return Kn(wr(n,1,ir,!0))}),j6=_t(function(n){var o=mi(n);return ir(o)&&(o=t),Kn(wr(n,1,ir,!0),nt(o,2))}),H6=_t(function(n){var o=mi(n);return o=typeof o=="function"?o:t,Kn(wr(n,1,ir,!0),t,o)});function K6(n){return n&&n.length?Kn(n):[]}function G6(n,o){return n&&n.length?Kn(n,nt(o,2)):[]}function V6(n,o){return o=typeof o=="function"?o:t,n&&n.length?Kn(n,t,o):[]}function ah(n){if(!(n&&n.length))return[];var o=0;return n=zn(n,function(g){if(ir(g))return o=ur(g.length,o),!0}),xf(o,function(g){return Yt(n,wf(g))})}function jl(n,o){if(!(n&&n.length))return[];var g=ah(n);return o==null?g:Yt(g,function(M){return pr(o,t,M)})}var J6=_t(function(n,o){return ir(n)?Ma(n,o):[]}),Q6=_t(function(n){return Hf(zn(n,ir))}),Y6=_t(function(n){var o=mi(n);return ir(o)&&(o=t),Hf(zn(n,ir),nt(o,2))}),W6=_t(function(n){var o=mi(n);return o=typeof o=="function"?o:t,Hf(zn(n,ir),t,o)}),X6=_t(ah);function Z6(n,o){return ol(n||[],o||[],Sa)}function e3(n,o){return ol(n||[],o||[],Ra)}var t3=_t(function(n){var o=n.length,g=o>1?n[o-1]:t;return g=typeof g=="function"?(n.pop(),g):t,jl(n,g)});function Hl(n){var o=L(n);return o.__chain__=!0,o}function r3(n,o){return o(n),n}function lc(n,o){return o(n)}var i3=En(function(n){var o=n.length,g=o?n[0]:0,M=this.__wrapped__,q=function(j){return Nf(j,n)};return o>1||this.__actions__.length||!(M instanceof It)||!Sn(g)?this.thru(q):(M=M.slice(g,+g+(o?1:0)),M.__actions__.push({func:lc,args:[q],thisArg:t}),new gi(M,this.__chain__).thru(function(j){return o&&!j.length&&j.push(t),j}))});function n3(){return Hl(this)}function s3(){return new gi(this.value(),this.__chain__)}function a3(){this.__values__===t&&(this.__values__=nd(this.value()));var n=this.__index__>=this.__values__.length,o=n?t:this.__values__[this.__index__++];return{done:n,value:o}}function o3(){return this}function c3(n){for(var o,g=this;g instanceof Wo;){var M=Bl(g);M.__index__=0,M.__values__=t,o?q.__wrapped__=M:o=M;var q=M;g=g.__wrapped__}return q.__wrapped__=n,o}function f3(){var n=this.__wrapped__;if(n instanceof It){var o=n;return this.__actions__.length&&(o=new It(this)),o=o.reverse(),o.__actions__.push({func:lc,args:[sh],thisArg:t}),new gi(o,this.__chain__)}return this.thru(sh)}function h3(){return al(this.__wrapped__,this.__actions__)}var u3=nc(function(n,o,g){Bt.call(n,g)?++n[g]:An(n,g,1)});function l3(n,o,g){var M=gt(n)?y0:rb;return g&&Tr(n,o,g)&&(o=t),M(n,nt(o,3))}function d3(n,o){var g=gt(n)?zn:j0;return g(n,nt(o,3))}var p3=bl(Ll),g3=bl(Ul);function v3(n,o){return wr(dc(n,o),1)}function b3(n,o){return wr(dc(n,o),_)}function m3(n,o,g){return g=g===t?1:mt(g),wr(dc(n,o),g)}function Kl(n,o){var g=gt(n)?di:Hn;return g(n,nt(o,3))}function Gl(n,o){var g=gt(n)?Bv:$0;return g(n,nt(o,3))}var y3=nc(function(n,o,g){Bt.call(n,g)?n[g].push(o):An(n,g,[o])});function w3(n,o,g,M){n=Vr(n)?n:Vs(n),g=g&&!M?mt(g):0;var q=n.length;return g<0&&(g=ur(q+g,0)),mc(n)?g<=q&&n.indexOf(o,g)>-1:!!q&&Fs(n,o,g)>-1}var _3=_t(function(n,o,g){var M=-1,q=typeof o=="function",j=Vr(n)?ce(n.length):[];return Hn(n,function(X){j[++M]=q?pr(o,X,g):Ia(X,o,g)}),j}),A3=nc(function(n,o,g){An(n,g,o)});function dc(n,o){var g=gt(n)?Yt:Q0;return g(n,nt(o,3))}function x3(n,o,g,M){return n==null?[]:(gt(o)||(o=o==null?[]:[o]),g=M?t:g,gt(g)||(g=g==null?[]:[g]),Z0(n,o,g))}var E3=nc(function(n,o,g){n[g?0:1].push(o)},function(){return[[],[]]});function S3(n,o,g){var M=gt(n)?mf:x0,q=arguments.length<3;return M(n,nt(o,4),g,q,Hn)}function M3(n,o,g){var M=gt(n)?Lv:x0,q=arguments.length<3;return M(n,nt(o,4),g,q,$0)}function I3(n,o){var g=gt(n)?zn:j0;return g(n,vc(nt(o,3)))}function P3(n){var o=gt(n)?L0:wb;return o(n)}function R3(n,o,g){(g?Tr(n,o,g):o===t)?o=1:o=mt(o);var M=gt(n)?W2:_b;return M(n,o)}function C3(n){var o=gt(n)?X2:xb;return o(n)}function N3(n){if(n==null)return 0;if(Vr(n))return mc(n)?Bs(n):n.length;var o=Cr(n);return o==he||o==Se?n.size:Bf(n).length}function O3(n,o,g){var M=gt(n)?yf:Eb;return g&&Tr(n,o,g)&&(o=t),M(n,nt(o,3))}var q3=_t(function(n,o){if(n==null)return[];var g=o.length;return g>1&&Tr(n,o[0],o[1])?o=[]:g>2&&Tr(o[0],o[1],o[2])&&(o=[o[0]]),Z0(n,wr(o,1),[])}),pc=d2||function(){return Ct.Date.now()};function T3(n,o){if(typeof o!="function")throw new pi(f);return n=mt(n),function(){if(--n<1)return o.apply(this,arguments)}}function Vl(n,o,g){return o=g?t:o,o=n&&o==null?n.length:o,xn(n,E,t,t,t,t,o)}function Jl(n,o){var g;if(typeof o!="function")throw new pi(f);return n=mt(n),function(){return--n>0&&(g=o.apply(this,arguments)),n<=1&&(o=t),g}}var oh=_t(function(n,o,g){var M=U;if(g.length){var q=$n(g,Ks(oh));M|=B}return xn(n,M,o,g,q)}),Ql=_t(function(n,o,g){var M=U|Q;if(g.length){var q=$n(g,Ks(Ql));M|=B}return xn(o,M,n,g,q)});function Yl(n,o,g){o=g?t:o;var M=xn(n,V,t,t,t,t,t,o);return M.placeholder=Yl.placeholder,M}function Wl(n,o,g){o=g?t:o;var M=xn(n,D,t,t,t,t,t,o);return M.placeholder=Wl.placeholder,M}function Xl(n,o,g){var M,q,j,X,Z,se,le=0,de=!1,ge=!1,Re=!0;if(typeof n!="function")throw new pi(f);o=yi(o)||0,Wt(g)&&(de=!!g.leading,ge="maxWait"in g,j=ge?ur(yi(g.maxWait)||0,o):j,Re="trailing"in g?!!g.trailing:Re);function Je(nr){var Bi=M,Pn=q;return M=q=t,le=nr,X=n.apply(Pn,Bi),X}function ot(nr){return le=nr,Z=Oa(Et,o),de?Je(nr):X}function yt(nr){var Bi=nr-se,Pn=nr-le,bd=o-Bi;return ge?Rr(bd,j-Pn):bd}function ct(nr){var Bi=nr-se,Pn=nr-le;return se===t||Bi>=o||Bi<0||ge&&Pn>=j}function Et(){var nr=pc();if(ct(nr))return Nt(nr);Z=Oa(Et,yt(nr))}function Nt(nr){return Z=t,Re&&M?Je(nr):(M=q=t,X)}function ni(){Z!==t&&cl(Z),le=0,M=se=q=Z=t}function Fr(){return Z===t?X:Nt(pc())}function si(){var nr=pc(),Bi=ct(nr);if(M=arguments,q=this,se=nr,Bi){if(Z===t)return ot(se);if(ge)return cl(Z),Z=Oa(Et,o),Je(se)}return Z===t&&(Z=Oa(Et,o)),X}return si.cancel=ni,si.flush=Fr,si}var F3=_t(function(n,o){return k0(n,1,o)}),D3=_t(function(n,o,g){return k0(n,yi(o)||0,g)});function B3(n){return xn(n,ne)}function gc(n,o){if(typeof n!="function"||o!=null&&typeof o!="function")throw new pi(f);var g=function(){var M=arguments,q=o?o.apply(this,M):M[0],j=g.cache;if(j.has(q))return j.get(q);var X=n.apply(this,M);return g.cache=j.set(q,X)||j,X};return g.cache=new(gc.Cache||_n),g}gc.Cache=_n;function vc(n){if(typeof n!="function")throw new pi(f);return function(){var o=arguments;switch(o.length){case 0:return!n.call(this);case 1:return!n.call(this,o[0]);case 2:return!n.call(this,o[0],o[1]);case 3:return!n.call(this,o[0],o[1],o[2])}return!n.apply(this,o)}}function L3(n){return Jl(2,n)}var U3=Sb(function(n,o){o=o.length==1&&gt(o[0])?Yt(o[0],ti(nt())):Yt(wr(o,1),ti(nt()));var g=o.length;return _t(function(M){for(var q=-1,j=Rr(M.length,g);++q<j;)M[q]=o[q].call(this,M[q]);return pr(n,this,M)})}),ch=_t(function(n,o){var g=$n(o,Ks(ch));return xn(n,B,t,o,g)}),Zl=_t(function(n,o){var g=$n(o,Ks(Zl));return xn(n,H,t,o,g)}),z3=En(function(n,o){return xn(n,$,t,t,t,o)});function k3(n,o){if(typeof n!="function")throw new pi(f);return o=o===t?o:mt(o),_t(n,o)}function $3(n,o){if(typeof n!="function")throw new pi(f);return o=o==null?0:ur(mt(o),0),_t(function(g){var M=g[o],q=Vn(g,0,o);return M&&kn(q,M),pr(n,this,q)})}function j3(n,o,g){var M=!0,q=!0;if(typeof n!="function")throw new pi(f);return Wt(g)&&(M="leading"in g?!!g.leading:M,q="trailing"in g?!!g.trailing:q),Xl(n,o,{leading:M,maxWait:o,trailing:q})}function H3(n){return Vl(n,1)}function K3(n,o){return ch(Gf(o),n)}function G3(){if(!arguments.length)return[];var n=arguments[0];return gt(n)?n:[n]}function V3(n){return vi(n,R)}function J3(n,o){return o=typeof o=="function"?o:t,vi(n,R,o)}function Q3(n){return vi(n,x|R)}function Y3(n,o){return o=typeof o=="function"?o:t,vi(n,x|R,o)}function W3(n,o){return o==null||z0(n,o,gr(o))}function Di(n,o){return n===o||n!==n&&o!==o}var X3=cc(Tf),Z3=cc(function(n,o){return n>=o}),ps=G0(function(){return arguments}())?G0:function(n){return Zt(n)&&Bt.call(n,"callee")&&!O0.call(n,"callee")},gt=ce.isArray,em=Or?ti(Or):cb;function Vr(n){return n!=null&&bc(n.length)&&!Mn(n)}function ir(n){return Zt(n)&&Vr(n)}function tm(n){return n===!0||n===!1||Zt(n)&&qr(n)==G}var Jn=g2||yh,rm=qi?ti(qi):fb;function im(n){return Zt(n)&&n.nodeType===1&&!qa(n)}function nm(n){if(n==null)return!0;if(Vr(n)&&(gt(n)||typeof n=="string"||typeof n.splice=="function"||Jn(n)||Gs(n)||ps(n)))return!n.length;var o=Cr(n);if(o==he||o==Se)return!n.size;if(Na(n))return!Bf(n).length;for(var g in n)if(Bt.call(n,g))return!1;return!0}function sm(n,o){return Pa(n,o)}function am(n,o,g){g=typeof g=="function"?g:t;var M=g?g(n,o):t;return M===t?Pa(n,o,t,g):!!M}function fh(n){if(!Zt(n))return!1;var o=qr(n);return o==K||o==A||typeof n.message=="string"&&typeof n.name=="string"&&!qa(n)}function om(n){return typeof n=="number"&&T0(n)}function Mn(n){if(!Wt(n))return!1;var o=qr(n);return o==ae||o==oe||o==k||o==Ce}function ed(n){return typeof n=="number"&&n==mt(n)}function bc(n){return typeof n=="number"&&n>-1&&n%1==0&&n<=I}function Wt(n){var o=typeof n;return n!=null&&(o=="object"||o=="function")}function Zt(n){return n!=null&&typeof n=="object"}var td=li?ti(li):ub;function cm(n,o){return n===o||Df(n,o,Zf(o))}function fm(n,o,g){return g=typeof g=="function"?g:t,Df(n,o,Zf(o),g)}function hm(n){return rd(n)&&n!=+n}function um(n){if(Jb(n))throw new dt(a);return V0(n)}function lm(n){return n===null}function dm(n){return n==null}function rd(n){return typeof n=="number"||Zt(n)&&qr(n)==be}function qa(n){if(!Zt(n)||qr(n)!=Me)return!1;var o=Ho(n);if(o===null)return!0;var g=Bt.call(o,"constructor")&&o.constructor;return typeof g=="function"&&g instanceof g&&zo.call(g)==f2}var hh=Yi?ti(Yi):lb;function pm(n){return ed(n)&&n>=-9007199254740991&&n<=I}var id=ma?ti(ma):db;function mc(n){return typeof n=="string"||!gt(n)&&Zt(n)&&qr(n)==me}function ii(n){return typeof n=="symbol"||Zt(n)&&qr(n)==Ne}var Gs=as?ti(as):pb;function gm(n){return n===t}function vm(n){return Zt(n)&&Cr(n)==ve}function bm(n){return Zt(n)&&qr(n)==qe}var mm=cc(Lf),ym=cc(function(n,o){return n<=o});function nd(n){if(!n)return[];if(Vr(n))return mc(n)?Ti(n):Gr(n);if(wa&&n[wa])return Wv(n[wa]());var o=Cr(n),g=o==he?Sf:o==Se?Bo:Vs;return g(n)}function In(n){if(!n)return n===0?n:0;if(n=yi(n),n===_||n===-1/0){var o=n<0?-1:1;return o*S}return n===n?n:0}function mt(n){var o=In(n),g=o%1;return o===o?g?o-g:o:0}function sd(n){return n?hs(mt(n),0,b):0}function yi(n){if(typeof n=="number")return n;if(ii(n))return v;if(Wt(n)){var o=typeof n.valueOf=="function"?n.valueOf():n;n=Wt(o)?o+"":o}if(typeof n!="string")return n===0?n:+n;n=E0(n);var g=Sr.test(n);return g||Ir.test(n)?pt(n.slice(2),g?2:8):Er.test(n)?v:+n}function ad(n){return Xi(n,Jr(n))}function wm(n){return n?hs(mt(n),-9007199254740991,I):n===0?n:0}function Ft(n){return n==null?"":ri(n)}var _m=js(function(n,o){if(Na(o)||Vr(o)){Xi(o,gr(o),n);return}for(var g in o)Bt.call(o,g)&&Sa(n,g,o[g])}),od=js(function(n,o){Xi(o,Jr(o),n)}),yc=js(function(n,o,g,M){Xi(o,Jr(o),n,M)}),Am=js(function(n,o,g,M){Xi(o,gr(o),n,M)}),xm=En(Nf);function Em(n,o){var g=$s(n);return o==null?g:U0(g,o)}var Sm=_t(function(n,o){n=Ht(n);var g=-1,M=o.length,q=M>2?o[2]:t;for(q&&Tr(o[0],o[1],q)&&(M=1);++g<M;)for(var j=o[g],X=Jr(j),Z=-1,se=X.length;++Z<se;){var le=X[Z],de=n[le];(de===t||Di(de,Us[le])&&!Bt.call(n,le))&&(n[le]=j[le])}return n}),Mm=_t(function(n){return n.push(t,El),pr(cd,t,n)});function Im(n,o){return w0(n,nt(o,3),Wi)}function Pm(n,o){return w0(n,nt(o,3),qf)}function Rm(n,o){return n==null?n:Of(n,nt(o,3),Jr)}function Cm(n,o){return n==null?n:H0(n,nt(o,3),Jr)}function Nm(n,o){return n&&Wi(n,nt(o,3))}function Om(n,o){return n&&qf(n,nt(o,3))}function qm(n){return n==null?[]:ec(n,gr(n))}function Tm(n){return n==null?[]:ec(n,Jr(n))}function uh(n,o,g){var M=n==null?t:us(n,o);return M===t?g:M}function Fm(n,o){return n!=null&&Il(n,o,nb)}function lh(n,o){return n!=null&&Il(n,o,sb)}var Dm=yl(function(n,o,g){o!=null&&typeof o.toString!="function"&&(o=ko.call(o)),n[o]=g},ph(Qr)),Bm=yl(function(n,o,g){o!=null&&typeof o.toString!="function"&&(o=ko.call(o)),Bt.call(n,o)?n[o].push(g):n[o]=[g]},nt),Lm=_t(Ia);function gr(n){return Vr(n)?B0(n):Bf(n)}function Jr(n){return Vr(n)?B0(n,!0):gb(n)}function Um(n,o){var g={};return o=nt(o,3),Wi(n,function(M,q,j){An(g,o(M,q,j),M)}),g}function zm(n,o){var g={};return o=nt(o,3),Wi(n,function(M,q,j){An(g,q,o(M,q,j))}),g}var km=js(function(n,o,g){tc(n,o,g)}),cd=js(function(n,o,g,M){tc(n,o,g,M)}),$m=En(function(n,o){var g={};if(n==null)return g;var M=!1;o=Yt(o,function(j){return j=Gn(j,n),M||(M=j.length>1),j}),Xi(n,Wf(n),g),M&&(g=vi(g,x|C|R,Db));for(var q=o.length;q--;)jf(g,o[q]);return g});function jm(n,o){return fd(n,vc(nt(o)))}var Hm=En(function(n,o){return n==null?{}:bb(n,o)});function fd(n,o){if(n==null)return{};var g=Yt(Wf(n),function(M){return[M]});return o=nt(o),el(n,g,function(M,q){return o(M,q[0])})}function Km(n,o,g){o=Gn(o,n);var M=-1,q=o.length;for(q||(q=1,n=t);++M<q;){var j=n==null?t:n[Zi(o[M])];j===t&&(M=q,j=g),n=Mn(j)?j.call(n):j}return n}function Gm(n,o,g){return n==null?n:Ra(n,o,g)}function Vm(n,o,g,M){return M=typeof M=="function"?M:t,n==null?n:Ra(n,o,g,M)}var hd=Al(gr),ud=Al(Jr);function Jm(n,o,g){var M=gt(n),q=M||Jn(n)||Gs(n);if(o=nt(o,4),g==null){var j=n&&n.constructor;q?g=M?new j:[]:Wt(n)?g=Mn(j)?$s(Ho(n)):{}:g={}}return(q?di:Wi)(n,function(X,Z,se){return o(g,X,Z,se)}),g}function Qm(n,o){return n==null?!0:jf(n,o)}function Ym(n,o,g){return n==null?n:sl(n,o,Gf(g))}function Wm(n,o,g,M){return M=typeof M=="function"?M:t,n==null?n:sl(n,o,Gf(g),M)}function Vs(n){return n==null?[]:Ef(n,gr(n))}function Xm(n){return n==null?[]:Ef(n,Jr(n))}function Zm(n,o,g){return g===t&&(g=o,o=t),g!==t&&(g=yi(g),g=g===g?g:0),o!==t&&(o=yi(o),o=o===o?o:0),hs(yi(n),o,g)}function ey(n,o,g){return o=In(o),g===t?(g=o,o=0):g=In(g),n=yi(n),ab(n,o,g)}function ty(n,o,g){if(g&&typeof g!="boolean"&&Tr(n,o,g)&&(o=g=t),g===t&&(typeof o=="boolean"?(g=o,o=t):typeof n=="boolean"&&(g=n,n=t)),n===t&&o===t?(n=0,o=1):(n=In(n),o===t?(o=n,n=0):o=In(o)),n>o){var M=n;n=o,o=M}if(g||n%1||o%1){var q=F0();return Rr(n+q*(o-n+$t("1e-"+((q+"").length-1))),o)}return zf(n,o)}var ry=Hs(function(n,o,g){return o=o.toLowerCase(),n+(g?ld(o):o)});function ld(n){return dh(Ft(n).toLowerCase())}function dd(n){return n=Ft(n),n&&n.replace(Xt,Gv).replace(gf,"")}function iy(n,o,g){n=Ft(n),o=ri(o);var M=n.length;g=g===t?M:hs(mt(g),0,M);var q=g;return g-=o.length,g>=0&&n.slice(g,q)==o}function ny(n){return n=Ft(n),n&&Xe.test(n)?n.replace(Mt,Vv):n}function sy(n){return n=Ft(n),n&&ke.test(n)?n.replace(rt,"\\$&"):n}var ay=Hs(function(n,o,g){return n+(g?"-":"")+o.toLowerCase()}),oy=Hs(function(n,o,g){return n+(g?" ":"")+o.toLowerCase()}),cy=vl("toLowerCase");function fy(n,o,g){n=Ft(n),o=mt(o);var M=o?Bs(n):0;if(!o||M>=o)return n;var q=(o-M)/2;return oc(Jo(q),g)+n+oc(Vo(q),g)}function hy(n,o,g){n=Ft(n),o=mt(o);var M=o?Bs(n):0;return o&&M<o?n+oc(o-M,g):n}function uy(n,o,g){n=Ft(n),o=mt(o);var M=o?Bs(n):0;return o&&M<o?oc(o-M,g)+n:n}function ly(n,o,g){return g||o==null?o=0:o&&(o=+o),y2(Ft(n).replace(it,""),o||0)}function dy(n,o,g){return(g?Tr(n,o,g):o===t)?o=1:o=mt(o),kf(Ft(n),o)}function py(){var n=arguments,o=Ft(n[0]);return n.length<3?o:o.replace(n[1],n[2])}var gy=Hs(function(n,o,g){return n+(g?"_":"")+o.toLowerCase()});function vy(n,o,g){return g&&typeof g!="number"&&Tr(n,o,g)&&(o=g=t),g=g===t?b:g>>>0,g?(n=Ft(n),n&&(typeof o=="string"||o!=null&&!hh(o))&&(o=ri(o),!o&&Ds(n))?Vn(Ti(n),0,g):n.split(o,g)):[]}var by=Hs(function(n,o,g){return n+(g?" ":"")+dh(o)});function my(n,o,g){return n=Ft(n),g=g==null?0:hs(mt(g),0,n.length),o=ri(o),n.slice(g,g+o.length)==o}function yy(n,o,g){var M=L.templateSettings;g&&Tr(n,o,g)&&(o=t),n=Ft(n),o=yc({},o,M,xl);var q=yc({},o.imports,M.imports,xl),j=gr(q),X=Ef(q,j),Z,se,le=0,de=o.interpolate||$r,ge="__p += '",Re=Mf((o.escape||$r).source+"|"+de.source+"|"+(de===et?at:$r).source+"|"+(o.evaluate||$r).source+"|$","g"),Je="//# sourceURL="+(Bt.call(o,"sourceURL")?(o.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++vf+"]")+`
`;n.replace(Re,function(ct,Et,Nt,ni,Fr,si){return Nt||(Nt=ni),ge+=n.slice(le,si).replace(Ii,Jv),Et&&(Z=!0,ge+=`' +
__e(`+Et+`) +
'`),Fr&&(se=!0,ge+=`';
`+Fr+`;
__p += '`),Nt&&(ge+=`' +
((__t = (`+Nt+`)) == null ? '' : __t) +
'`),le=si+ct.length,ct}),ge+=`';
`;var ot=Bt.call(o,"variable")&&o.variable;if(!ot)ge=`with (obj) {
`+ge+`
}
`;else if(Ot.test(ot))throw new dt(u);ge=(se?ge.replace(wt,""):ge).replace(lt,"$1").replace(Ye,"$1;"),ge="function("+(ot||"obj")+`) {
`+(ot?"":`obj || (obj = {});
`)+"var __t, __p = ''"+(Z?", __e = _.escape":"")+(se?`, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
`:`;
`)+ge+`return __p
}`;var yt=gd(function(){return Tt(j,Je+"return "+ge).apply(t,X)});if(yt.source=ge,fh(yt))throw yt;return yt}function wy(n){return Ft(n).toLowerCase()}function _y(n){return Ft(n).toUpperCase()}function Ay(n,o,g){if(n=Ft(n),n&&(g||o===t))return E0(n);if(!n||!(o=ri(o)))return n;var M=Ti(n),q=Ti(o),j=S0(M,q),X=M0(M,q)+1;return Vn(M,j,X).join("")}function xy(n,o,g){if(n=Ft(n),n&&(g||o===t))return n.slice(0,P0(n)+1);if(!n||!(o=ri(o)))return n;var M=Ti(n),q=M0(M,Ti(o))+1;return Vn(M,0,q).join("")}function Ey(n,o,g){if(n=Ft(n),n&&(g||o===t))return n.replace(it,"");if(!n||!(o=ri(o)))return n;var M=Ti(n),q=S0(M,Ti(o));return Vn(M,q).join("")}function Sy(n,o){var g=fe,M=z;if(Wt(o)){var q="separator"in o?o.separator:q;g="length"in o?mt(o.length):g,M="omission"in o?ri(o.omission):M}n=Ft(n);var j=n.length;if(Ds(n)){var X=Ti(n);j=X.length}if(g>=j)return n;var Z=g-Bs(M);if(Z<1)return M;var se=X?Vn(X,0,Z).join(""):n.slice(0,Z);if(q===t)return se+M;if(X&&(Z+=se.length-Z),hh(q)){if(n.slice(Z).search(q)){var le,de=se;for(q.global||(q=Mf(q.source,Ft(bt.exec(q))+"g")),q.lastIndex=0;le=q.exec(de);)var ge=le.index;se=se.slice(0,ge===t?Z:ge)}}else if(n.indexOf(ri(q),Z)!=Z){var Re=se.lastIndexOf(q);Re>-1&&(se=se.slice(0,Re))}return se+M}function My(n){return n=Ft(n),n&&Fe.test(n)?n.replace(xt,t2):n}var Iy=Hs(function(n,o,g){return n+(g?" ":"")+o.toUpperCase()}),dh=vl("toUpperCase");function pd(n,o,g){return n=Ft(n),o=g?t:o,o===t?Yv(n)?n2(n):kv(n):n.match(o)||[]}var gd=_t(function(n,o){try{return pr(n,t,o)}catch(g){return fh(g)?g:new dt(g)}}),Py=En(function(n,o){return di(o,function(g){g=Zi(g),An(n,g,oh(n[g],n))}),n});function Ry(n){var o=n==null?0:n.length,g=nt();return n=o?Yt(n,function(M){if(typeof M[1]!="function")throw new pi(f);return[g(M[0]),M[1]]}):[],_t(function(M){for(var q=-1;++q<o;){var j=n[q];if(pr(j[0],this,M))return pr(j[1],this,M)}})}function Cy(n){return tb(vi(n,x))}function ph(n){return function(){return n}}function Ny(n,o){return n==null||n!==n?o:n}var Oy=ml(),qy=ml(!0);function Qr(n){return n}function gh(n){return J0(typeof n=="function"?n:vi(n,x))}function Ty(n){return Y0(vi(n,x))}function Fy(n,o){return W0(n,vi(o,x))}var Dy=_t(function(n,o){return function(g){return Ia(g,n,o)}}),By=_t(function(n,o){return function(g){return Ia(n,g,o)}});function vh(n,o,g){var M=gr(o),q=ec(o,M);g==null&&!(Wt(o)&&(q.length||!M.length))&&(g=o,o=n,n=this,q=ec(o,gr(o)));var j=!(Wt(g)&&"chain"in g)||!!g.chain,X=Mn(n);return di(q,function(Z){var se=o[Z];n[Z]=se,X&&(n.prototype[Z]=function(){var le=this.__chain__;if(j||le){var de=n(this.__wrapped__),ge=de.__actions__=Gr(this.__actions__);return ge.push({func:se,args:arguments,thisArg:n}),de.__chain__=le,de}return se.apply(n,kn([this.value()],arguments))})}),n}function Ly(){return Ct._===this&&(Ct._=h2),this}function bh(){}function Uy(n){return n=mt(n),_t(function(o){return X0(o,n)})}var zy=Jf(Yt),ky=Jf(y0),$y=Jf(yf);function vd(n){return th(n)?wf(Zi(n)):mb(n)}function jy(n){return function(o){return n==null?t:us(n,o)}}var Hy=wl(),Ky=wl(!0);function mh(){return[]}function yh(){return!1}function Gy(){return{}}function Vy(){return""}function Jy(){return!0}function Qy(n,o){if(n=mt(n),n<1||n>I)return[];var g=b,M=Rr(n,b);o=nt(o),n-=b;for(var q=xf(M,o);++g<n;)o(g);return q}function Yy(n){return gt(n)?Yt(n,Zi):ii(n)?[n]:Gr(Dl(Ft(n)))}function Wy(n){var o=++c2;return Ft(n)+o}var Xy=ac(function(n,o){return n+o},0),Zy=Qf("ceil"),e5=ac(function(n,o){return n/o},1),t5=Qf("floor");function r5(n){return n&&n.length?Zo(n,Qr,Tf):t}function i5(n,o){return n&&n.length?Zo(n,nt(o,2),Tf):t}function n5(n){return A0(n,Qr)}function s5(n,o){return A0(n,nt(o,2))}function a5(n){return n&&n.length?Zo(n,Qr,Lf):t}function o5(n,o){return n&&n.length?Zo(n,nt(o,2),Lf):t}var c5=ac(function(n,o){return n*o},1),f5=Qf("round"),h5=ac(function(n,o){return n-o},0);function u5(n){return n&&n.length?Af(n,Qr):0}function l5(n,o){return n&&n.length?Af(n,nt(o,2)):0}return L.after=T3,L.ary=Vl,L.assign=_m,L.assignIn=od,L.assignInWith=yc,L.assignWith=Am,L.at=xm,L.before=Jl,L.bind=oh,L.bindAll=Py,L.bindKey=Ql,L.castArray=G3,L.chain=Hl,L.chunk=t6,L.compact=r6,L.concat=i6,L.cond=Ry,L.conforms=Cy,L.constant=ph,L.countBy=u3,L.create=Em,L.curry=Yl,L.curryRight=Wl,L.debounce=Xl,L.defaults=Sm,L.defaultsDeep=Mm,L.defer=F3,L.delay=D3,L.difference=n6,L.differenceBy=s6,L.differenceWith=a6,L.drop=o6,L.dropRight=c6,L.dropRightWhile=f6,L.dropWhile=h6,L.fill=u6,L.filter=d3,L.flatMap=v3,L.flatMapDeep=b3,L.flatMapDepth=m3,L.flatten=zl,L.flattenDeep=l6,L.flattenDepth=d6,L.flip=B3,L.flow=Oy,L.flowRight=qy,L.fromPairs=p6,L.functions=qm,L.functionsIn=Tm,L.groupBy=y3,L.initial=v6,L.intersection=b6,L.intersectionBy=m6,L.intersectionWith=y6,L.invert=Dm,L.invertBy=Bm,L.invokeMap=_3,L.iteratee=gh,L.keyBy=A3,L.keys=gr,L.keysIn=Jr,L.map=dc,L.mapKeys=Um,L.mapValues=zm,L.matches=Ty,L.matchesProperty=Fy,L.memoize=gc,L.merge=km,L.mergeWith=cd,L.method=Dy,L.methodOf=By,L.mixin=vh,L.negate=vc,L.nthArg=Uy,L.omit=$m,L.omitBy=jm,L.once=L3,L.orderBy=x3,L.over=zy,L.overArgs=U3,L.overEvery=ky,L.overSome=$y,L.partial=ch,L.partialRight=Zl,L.partition=E3,L.pick=Hm,L.pickBy=fd,L.property=vd,L.propertyOf=jy,L.pull=x6,L.pullAll=$l,L.pullAllBy=E6,L.pullAllWith=S6,L.pullAt=M6,L.range=Hy,L.rangeRight=Ky,L.rearg=z3,L.reject=I3,L.remove=I6,L.rest=k3,L.reverse=sh,L.sampleSize=R3,L.set=Gm,L.setWith=Vm,L.shuffle=C3,L.slice=P6,L.sortBy=q3,L.sortedUniq=F6,L.sortedUniqBy=D6,L.split=vy,L.spread=$3,L.tail=B6,L.take=L6,L.takeRight=U6,L.takeRightWhile=z6,L.takeWhile=k6,L.tap=r3,L.throttle=j3,L.thru=lc,L.toArray=nd,L.toPairs=hd,L.toPairsIn=ud,L.toPath=Yy,L.toPlainObject=ad,L.transform=Jm,L.unary=H3,L.union=$6,L.unionBy=j6,L.unionWith=H6,L.uniq=K6,L.uniqBy=G6,L.uniqWith=V6,L.unset=Qm,L.unzip=ah,L.unzipWith=jl,L.update=Ym,L.updateWith=Wm,L.values=Vs,L.valuesIn=Xm,L.without=J6,L.words=pd,L.wrap=K3,L.xor=Q6,L.xorBy=Y6,L.xorWith=W6,L.zip=X6,L.zipObject=Z6,L.zipObjectDeep=e3,L.zipWith=t3,L.entries=hd,L.entriesIn=ud,L.extend=od,L.extendWith=yc,vh(L,L),L.add=Xy,L.attempt=gd,L.camelCase=ry,L.capitalize=ld,L.ceil=Zy,L.clamp=Zm,L.clone=V3,L.cloneDeep=Q3,L.cloneDeepWith=Y3,L.cloneWith=J3,L.conformsTo=W3,L.deburr=dd,L.defaultTo=Ny,L.divide=e5,L.endsWith=iy,L.eq=Di,L.escape=ny,L.escapeRegExp=sy,L.every=l3,L.find=p3,L.findIndex=Ll,L.findKey=Im,L.findLast=g3,L.findLastIndex=Ul,L.findLastKey=Pm,L.floor=t5,L.forEach=Kl,L.forEachRight=Gl,L.forIn=Rm,L.forInRight=Cm,L.forOwn=Nm,L.forOwnRight=Om,L.get=uh,L.gt=X3,L.gte=Z3,L.has=Fm,L.hasIn=lh,L.head=kl,L.identity=Qr,L.includes=w3,L.indexOf=g6,L.inRange=ey,L.invoke=Lm,L.isArguments=ps,L.isArray=gt,L.isArrayBuffer=em,L.isArrayLike=Vr,L.isArrayLikeObject=ir,L.isBoolean=tm,L.isBuffer=Jn,L.isDate=rm,L.isElement=im,L.isEmpty=nm,L.isEqual=sm,L.isEqualWith=am,L.isError=fh,L.isFinite=om,L.isFunction=Mn,L.isInteger=ed,L.isLength=bc,L.isMap=td,L.isMatch=cm,L.isMatchWith=fm,L.isNaN=hm,L.isNative=um,L.isNil=dm,L.isNull=lm,L.isNumber=rd,L.isObject=Wt,L.isObjectLike=Zt,L.isPlainObject=qa,L.isRegExp=hh,L.isSafeInteger=pm,L.isSet=id,L.isString=mc,L.isSymbol=ii,L.isTypedArray=Gs,L.isUndefined=gm,L.isWeakMap=vm,L.isWeakSet=bm,L.join=w6,L.kebabCase=ay,L.last=mi,L.lastIndexOf=_6,L.lowerCase=oy,L.lowerFirst=cy,L.lt=mm,L.lte=ym,L.max=r5,L.maxBy=i5,L.mean=n5,L.meanBy=s5,L.min=a5,L.minBy=o5,L.stubArray=mh,L.stubFalse=yh,L.stubObject=Gy,L.stubString=Vy,L.stubTrue=Jy,L.multiply=c5,L.nth=A6,L.noConflict=Ly,L.noop=bh,L.now=pc,L.pad=fy,L.padEnd=hy,L.padStart=uy,L.parseInt=ly,L.random=ty,L.reduce=S3,L.reduceRight=M3,L.repeat=dy,L.replace=py,L.result=Km,L.round=f5,L.runInContext=ie,L.sample=P3,L.size=N3,L.snakeCase=gy,L.some=O3,L.sortedIndex=R6,L.sortedIndexBy=C6,L.sortedIndexOf=N6,L.sortedLastIndex=O6,L.sortedLastIndexBy=q6,L.sortedLastIndexOf=T6,L.startCase=by,L.startsWith=my,L.subtract=h5,L.sum=u5,L.sumBy=l5,L.template=yy,L.times=Qy,L.toFinite=In,L.toInteger=mt,L.toLength=sd,L.toLower=wy,L.toNumber=yi,L.toSafeInteger=wm,L.toString=Ft,L.toUpper=_y,L.trim=Ay,L.trimEnd=xy,L.trimStart=Ey,L.truncate=Sy,L.unescape=My,L.uniqueId=Wy,L.upperCase=Iy,L.upperFirst=dh,L.each=Kl,L.eachRight=Gl,L.first=kl,vh(L,function(){var n={};return Wi(L,function(o,g){Bt.call(L.prototype,g)||(n[g]=o)}),n}(),{chain:!1}),L.VERSION=i,di(["bind","bindKey","curry","curryRight","partial","partialRight"],function(n){L[n].placeholder=L}),di(["drop","take"],function(n,o){It.prototype[n]=function(g){g=g===t?1:ur(mt(g),0);var M=this.__filtered__&&!o?new It(this):this.clone();return M.__filtered__?M.__takeCount__=Rr(g,M.__takeCount__):M.__views__.push({size:Rr(g,b),type:n+(M.__dir__<0?"Right":"")}),M},It.prototype[n+"Right"]=function(g){return this.reverse()[n](g).reverse()}}),di(["filter","map","takeWhile"],function(n,o){var g=o+1,M=g==h||g==m;It.prototype[n]=function(q){var j=this.clone();return j.__iteratees__.push({iteratee:nt(q,3),type:g}),j.__filtered__=j.__filtered__||M,j}}),di(["head","last"],function(n,o){var g="take"+(o?"Right":"");It.prototype[n]=function(){return this[g](1).value()[0]}}),di(["initial","tail"],function(n,o){var g="drop"+(o?"":"Right");It.prototype[n]=function(){return this.__filtered__?new It(this):this[g](1)}}),It.prototype.compact=function(){return this.filter(Qr)},It.prototype.find=function(n){return this.filter(n).head()},It.prototype.findLast=function(n){return this.reverse().find(n)},It.prototype.invokeMap=_t(function(n,o){return typeof n=="function"?new It(this):this.map(function(g){return Ia(g,n,o)})}),It.prototype.reject=function(n){return this.filter(vc(nt(n)))},It.prototype.slice=function(n,o){n=mt(n);var g=this;return g.__filtered__&&(n>0||o<0)?new It(g):(n<0?g=g.takeRight(-n):n&&(g=g.drop(n)),o!==t&&(o=mt(o),g=o<0?g.dropRight(-o):g.take(o-n)),g)},It.prototype.takeRightWhile=function(n){return this.reverse().takeWhile(n).reverse()},It.prototype.toArray=function(){return this.take(b)},Wi(It.prototype,function(n,o){var g=/^(?:filter|find|map|reject)|While$/.test(o),M=/^(?:head|last)$/.test(o),q=L[M?"take"+(o=="last"?"Right":""):o],j=M||/^find/.test(o);q&&(L.prototype[o]=function(){var X=this.__wrapped__,Z=M?[1]:arguments,se=X instanceof It,le=Z[0],de=se||gt(X),ge=function(Et){var Nt=q.apply(L,kn([Et],Z));return M&&Re?Nt[0]:Nt};de&&g&&typeof le=="function"&&le.length!=1&&(se=de=!1);var Re=this.__chain__,Je=!!this.__actions__.length,ot=j&&!Re,yt=se&&!Je;if(!j&&de){X=yt?X:new It(this);var ct=n.apply(X,Z);return ct.__actions__.push({func:lc,args:[ge],thisArg:t}),new gi(ct,Re)}return ot&&yt?n.apply(this,Z):(ct=this.thru(ge),ot?M?ct.value()[0]:ct.value():ct)})}),di(["pop","push","shift","sort","splice","unshift"],function(n){var o=Lo[n],g=/^(?:push|sort|unshift)$/.test(n)?"tap":"thru",M=/^(?:pop|shift)$/.test(n);L.prototype[n]=function(){var q=arguments;if(M&&!this.__chain__){var j=this.value();return o.apply(gt(j)?j:[],q)}return this[g](function(X){return o.apply(gt(X)?X:[],q)})}}),Wi(It.prototype,function(n,o){var g=L[o];if(g){var M=g.name+"";Bt.call(ks,M)||(ks[M]=[]),ks[M].push({name:o,func:g})}}),ks[sc(t,Q).name]=[{name:"wrapper",func:t}],It.prototype.clone=M2,It.prototype.reverse=I2,It.prototype.value=P2,L.prototype.at=i3,L.prototype.chain=n3,L.prototype.commit=s3,L.prototype.next=a3,L.prototype.plant=c3,L.prototype.reverse=f3,L.prototype.toJSON=L.prototype.valueOf=L.prototype.value=h3,L.prototype.first=L.prototype.head,wa&&(L.prototype[wa]=o3),L},Ls=s2();rr?((rr.exports=Ls)._=Ls,jt._=Ls):Ct._=Ls}).call(Va)})(Hu,Hu.exports);var NE=Object.defineProperty,OE=Object.defineProperties,qE=Object.getOwnPropertyDescriptors,H1=Object.getOwnPropertySymbols,TE=Object.prototype.hasOwnProperty,FE=Object.prototype.propertyIsEnumerable,K1=(r,e,t)=>e in r?NE(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t,Nc=(r,e)=>{for(var t in e||(e={}))TE.call(e,t)&&K1(r,t,e[t]);if(H1)for(var t of H1(e))FE.call(e,t)&&K1(r,t,e[t]);return r},DE=(r,e)=>OE(r,qE(e));function Ki(r,e,t){var i;const s=Xa(r);return((i=e.rpcMap)==null?void 0:i[s.reference])||`${qv}?chainId=${s.namespace}:${s.reference}&projectId=${t}`}function Cs(r){return r.includes(":")?r.split(":")[1]:r}function Tv(r){return r.map(e=>`${e.split(":")[0]}:${e.split(":")[1]}`)}function BE(r,e){const t=Object.keys(e.namespaces).filter(s=>s.includes(r));if(!t.length)return[];const i=[];return t.forEach(s=>{const a=e.namespaces[s].accounts;i.push(...a)}),i}function Iu(r={},e={}){const t=G1(r),i=G1(e);return Hu.exports.merge(t,i)}function G1(r){var e,t,i,s;const a={};if(!ao(r))return a;for(const[f,u]of Object.entries(r)){const d=l0(f)?[f]:u.chains,l=u.methods||[],w=u.events||[],x=u.rpcMap||{},C=Ya(f);a[C]=DE(Nc(Nc({},a[C]),u),{chains:Dc(d,(e=a[C])==null?void 0:e.chains),methods:Dc(l,(t=a[C])==null?void 0:t.methods),events:Dc(w,(i=a[C])==null?void 0:i.events),rpcMap:Nc(Nc({},x),(s=a[C])==null?void 0:s.rpcMap)})}return a}function LE(r){return r.includes(":")?r.split(":")[2]:r}function V1(r){const e={};for(const[t,i]of Object.entries(r)){const s=i.methods||[],a=i.events||[],f=i.accounts||[],u=l0(t)?[t]:i.chains?i.chains:Tv(i.accounts);e[t]={chains:u,methods:s,events:a,accounts:f}}return e}function Pu(r){return typeof r=="number"?r:r.includes("0x")?parseInt(r,16):(r=r.includes(":")?r.split(":")[1]:r,isNaN(Number(r))?r:Number(r))}const Fv={},Dt=r=>Fv[r],Ru=(r,e)=>{Fv[r]=e};class UE{constructor(e){this.name="polkadot",this.namespace=e.namespace,this.events=Dt("events"),this.client=Dt("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,t){this.httpProviders[e]||this.setHttpProvider(e,t),this.chainId=e,this.events.emit(Ji.DEFAULT_CHAIN_CHANGED,`${this.name}:${e}`)}getAccounts(){const e=this.namespace.accounts;return e?e.filter(t=>t.split(":")[1]===this.chainId.toString()).map(t=>t.split(":")[2])||[]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(t=>{var i;const s=Cs(t);e[s]=this.createHttpProvider(s,(i=this.namespace.rpcMap)==null?void 0:i[t])}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,t=this.httpProviders[e];if(typeof t>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return t}setHttpProvider(e,t){const i=this.createHttpProvider(e,t);i&&(this.httpProviders[e]=i)}createHttpProvider(e,t){const i=t||Ki(e,this.namespace,this.client.core.projectId);if(!i)throw new Error(`No RPC url provided for chainId: ${e}`);return new Gi(new vn(i,Dt("disableProviderPing")))}}var zE=Object.defineProperty,kE=Object.defineProperties,$E=Object.getOwnPropertyDescriptors,J1=Object.getOwnPropertySymbols,jE=Object.prototype.hasOwnProperty,HE=Object.prototype.propertyIsEnumerable,Q1=(r,e,t)=>e in r?zE(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t,Y1=(r,e)=>{for(var t in e||(e={}))jE.call(e,t)&&Q1(r,t,e[t]);if(J1)for(var t of J1(e))HE.call(e,t)&&Q1(r,t,e[t]);return r},W1=(r,e)=>kE(r,$E(e));class KE{constructor(e){this.name="eip155",this.namespace=e.namespace,this.events=Dt("events"),this.client=Dt("client"),this.httpProviders=this.createHttpProviders(),this.chainId=parseInt(this.getDefaultChain())}async request(e){switch(e.request.method){case"eth_requestAccounts":return this.getAccounts();case"eth_accounts":return this.getAccounts();case"wallet_switchEthereumChain":return await this.handleSwitchChain(e);case"eth_chainId":return parseInt(this.getDefaultChain());case"wallet_getCapabilities":return await this.getCapabilities(e);case"wallet_getCallsStatus":return await this.getCallStatus(e)}return this.namespace.methods.includes(e.request.method)?await this.client.request(e):this.getHttpProvider().request(e.request)}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}setDefaultChain(e,t){this.httpProviders[e]||this.setHttpProvider(parseInt(e),t),this.chainId=parseInt(e),this.events.emit(Ji.DEFAULT_CHAIN_CHANGED,`${this.name}:${e}`)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId.toString();if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}createHttpProvider(e,t){const i=t||Ki(`${this.name}:${e}`,this.namespace,this.client.core.projectId);if(!i)throw new Error(`No RPC url provided for chainId: ${e}`);return new Gi(new vn(i,Dt("disableProviderPing")))}setHttpProvider(e,t){const i=this.createHttpProvider(e,t);i&&(this.httpProviders[e]=i)}createHttpProviders(){const e={};return this.namespace.chains.forEach(t=>{var i;const s=parseInt(Cs(t));e[s]=this.createHttpProvider(s,(i=this.namespace.rpcMap)==null?void 0:i[t])}),e}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(t=>t.split(":")[1]===this.chainId.toString()).map(t=>t.split(":")[2]))]:[]}getHttpProvider(){const e=this.chainId,t=this.httpProviders[e];if(typeof t>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return t}async handleSwitchChain(e){var t,i;let s=e.request.params?(t=e.request.params[0])==null?void 0:t.chainId:"0x0";s=s.startsWith("0x")?s:`0x${s}`;const a=parseInt(s,16);if(this.isChainApproved(a))this.setDefaultChain(`${a}`);else if(this.namespace.methods.includes("wallet_switchEthereumChain"))await this.client.request({topic:e.topic,request:{method:e.request.method,params:[{chainId:s}]},chainId:(i=this.namespace.chains)==null?void 0:i[0]}),this.setDefaultChain(`${a}`);else throw new Error(`Failed to switch to chain 'eip155:${a}'. The chain is not approved or the wallet does not support 'wallet_switchEthereumChain' method.`);return null}isChainApproved(e){return this.namespace.chains.includes(`${this.name}:${e}`)}async getCapabilities(e){var t,i,s;const a=(i=(t=e.request)==null?void 0:t.params)==null?void 0:i[0];if(!a)throw new Error("Missing address parameter in `wallet_getCapabilities` request");const f=this.client.session.get(e.topic),u=((s=f==null?void 0:f.sessionProperties)==null?void 0:s.capabilities)||{};if(u!=null&&u[a])return u==null?void 0:u[a];const d=await this.client.request(e);try{await this.client.session.update(e.topic,{sessionProperties:W1(Y1({},f.sessionProperties||{}),{capabilities:W1(Y1({},u||{}),{[a]:d})})})}catch(l){console.warn("Failed to update session with capabilities",l)}return d}async getCallStatus(e){var t,i;const s=this.client.session.get(e.topic),a=(t=s.sessionProperties)==null?void 0:t.bundler_name;if(a){const u=this.getBundlerUrl(e.chainId,a);try{return await this.getUserOperationReceipt(u,e)}catch(d){console.warn("Failed to fetch call status from bundler",d,u)}}const f=(i=s.sessionProperties)==null?void 0:i.bundler_url;if(f)try{return await this.getUserOperationReceipt(f,e)}catch(u){console.warn("Failed to fetch call status from custom bundler",u,f)}if(this.namespace.methods.includes(e.request.method))return await this.client.request(e);throw new Error("Fetching call status not approved by the wallet.")}async getUserOperationReceipt(e,t){var i;const s=new URL(e),a=await fetch(s,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(_s("eth_getUserOperationReceipt",[(i=t.request.params)==null?void 0:i[0]]))});if(!a.ok)throw new Error(`Failed to fetch user operation receipt - ${a.status}`);return await a.json()}getBundlerUrl(e,t){return`${CE}?projectId=${this.client.core.projectId}&chainId=${e}&bundler=${t}`}}class GE{constructor(e){this.name="solana",this.namespace=e.namespace,this.events=Dt("events"),this.client=Dt("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,t){this.httpProviders[e]||this.setHttpProvider(e,t),this.chainId=e,this.events.emit(Ji.DEFAULT_CHAIN_CHANGED,`${this.name}:${e}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(t=>t.split(":")[1]===this.chainId.toString()).map(t=>t.split(":")[2]))]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(t=>{var i;const s=Cs(t);e[s]=this.createHttpProvider(s,(i=this.namespace.rpcMap)==null?void 0:i[t])}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,t=this.httpProviders[e];if(typeof t>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return t}setHttpProvider(e,t){const i=this.createHttpProvider(e,t);i&&(this.httpProviders[e]=i)}createHttpProvider(e,t){const i=t||Ki(e,this.namespace,this.client.core.projectId);if(!i)throw new Error(`No RPC url provided for chainId: ${e}`);return new Gi(new vn(i,Dt("disableProviderPing")))}}class VE{constructor(e){this.name="cosmos",this.namespace=e.namespace,this.events=Dt("events"),this.client=Dt("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,t){this.httpProviders[e]||this.setHttpProvider(e,t),this.chainId=e,this.events.emit(Ji.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(t=>t.split(":")[1]===this.chainId.toString()).map(t=>t.split(":")[2]))]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(t=>{var i;const s=Cs(t);e[s]=this.createHttpProvider(s,(i=this.namespace.rpcMap)==null?void 0:i[t])}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,t=this.httpProviders[e];if(typeof t>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return t}setHttpProvider(e,t){const i=this.createHttpProvider(e,t);i&&(this.httpProviders[e]=i)}createHttpProvider(e,t){const i=t||Ki(e,this.namespace,this.client.core.projectId);if(!i)throw new Error(`No RPC url provided for chainId: ${e}`);return new Gi(new vn(i,Dt("disableProviderPing")))}}class JE{constructor(e){this.name="algorand",this.namespace=e.namespace,this.events=Dt("events"),this.client=Dt("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,t){if(!this.httpProviders[e]){const i=t||Ki(`${this.name}:${e}`,this.namespace,this.client.core.projectId);if(!i)throw new Error(`No RPC url provided for chainId: ${e}`);this.setHttpProvider(e,i)}this.chainId=e,this.events.emit(Ji.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(t=>t.split(":")[1]===this.chainId.toString()).map(t=>t.split(":")[2]))]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(t=>{var i;e[t]=this.createHttpProvider(t,(i=this.namespace.rpcMap)==null?void 0:i[t])}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,t=this.httpProviders[e];if(typeof t>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return t}setHttpProvider(e,t){const i=this.createHttpProvider(e,t);i&&(this.httpProviders[e]=i)}createHttpProvider(e,t){const i=t||Ki(e,this.namespace,this.client.core.projectId);return typeof i>"u"?void 0:new Gi(new vn(i,Dt("disableProviderPing")))}}class QE{constructor(e){this.name="cip34",this.namespace=e.namespace,this.events=Dt("events"),this.client=Dt("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,t){this.httpProviders[e]||this.setHttpProvider(e,t),this.chainId=e,this.events.emit(Ji.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(t=>t.split(":")[1]===this.chainId.toString()).map(t=>t.split(":")[2]))]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(t=>{const i=this.getCardanoRPCUrl(t),s=Cs(t);e[s]=this.createHttpProvider(s,i)}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,t=this.httpProviders[e];if(typeof t>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return t}getCardanoRPCUrl(e){const t=this.namespace.rpcMap;if(t)return t[e]}setHttpProvider(e,t){const i=this.createHttpProvider(e,t);i&&(this.httpProviders[e]=i)}createHttpProvider(e,t){const i=t||this.getCardanoRPCUrl(e);if(!i)throw new Error(`No RPC url provided for chainId: ${e}`);return new Gi(new vn(i,Dt("disableProviderPing")))}}class YE{constructor(e){this.name="elrond",this.namespace=e.namespace,this.events=Dt("events"),this.client=Dt("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,t){this.httpProviders[e]||this.setHttpProvider(e,t),this.chainId=e,this.events.emit(Ji.DEFAULT_CHAIN_CHANGED,`${this.name}:${e}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(t=>t.split(":")[1]===this.chainId.toString()).map(t=>t.split(":")[2]))]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(t=>{var i;const s=Cs(t);e[s]=this.createHttpProvider(s,(i=this.namespace.rpcMap)==null?void 0:i[t])}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,t=this.httpProviders[e];if(typeof t>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return t}setHttpProvider(e,t){const i=this.createHttpProvider(e,t);i&&(this.httpProviders[e]=i)}createHttpProvider(e,t){const i=t||Ki(e,this.namespace,this.client.core.projectId);if(!i)throw new Error(`No RPC url provided for chainId: ${e}`);return new Gi(new vn(i,Dt("disableProviderPing")))}}class WE{constructor(e){this.name="multiversx",this.namespace=e.namespace,this.events=Dt("events"),this.client=Dt("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,t){this.httpProviders[e]||this.setHttpProvider(e,t),this.chainId=e,this.events.emit(Ji.DEFAULT_CHAIN_CHANGED,`${this.name}:${e}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(t=>t.split(":")[1]===this.chainId.toString()).map(t=>t.split(":")[2]))]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(t=>{var i;const s=Cs(t);e[s]=this.createHttpProvider(s,(i=this.namespace.rpcMap)==null?void 0:i[t])}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,t=this.httpProviders[e];if(typeof t>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return t}setHttpProvider(e,t){const i=this.createHttpProvider(e,t);i&&(this.httpProviders[e]=i)}createHttpProvider(e,t){const i=t||Ki(e,this.namespace,this.client.core.projectId);if(!i)throw new Error(`No RPC url provided for chainId: ${e}`);return new Gi(new vn(i,Dt("disableProviderPing")))}}class XE{constructor(e){this.name="near",this.namespace=e.namespace,this.events=Dt("events"),this.client=Dt("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,t){if(this.chainId=e,!this.httpProviders[e]){const i=t||Ki(`${this.name}:${e}`,this.namespace);if(!i)throw new Error(`No RPC url provided for chainId: ${e}`);this.setHttpProvider(e,i)}this.events.emit(Ji.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getAccounts(){const e=this.namespace.accounts;return e?e.filter(t=>t.split(":")[1]===this.chainId.toString()).map(t=>t.split(":")[2])||[]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(t=>{var i;e[t]=this.createHttpProvider(t,(i=this.namespace.rpcMap)==null?void 0:i[t])}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,t=this.httpProviders[e];if(typeof t>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return t}setHttpProvider(e,t){const i=this.createHttpProvider(e,t);i&&(this.httpProviders[e]=i)}createHttpProvider(e,t){const i=t||Ki(e,this.namespace);return typeof i>"u"?void 0:new Gi(new vn(i,Dt("disableProviderPing")))}}class ZE{constructor(e){this.name=Xs,this.namespace=e.namespace,this.events=Dt("events"),this.client=Dt("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace.chains=[...new Set((this.namespace.chains||[]).concat(e.chains||[]))],this.namespace.accounts=[...new Set((this.namespace.accounts||[]).concat(e.accounts||[]))],this.namespace.methods=[...new Set((this.namespace.methods||[]).concat(e.methods||[]))],this.namespace.events=[...new Set((this.namespace.events||[]).concat(e.events||[]))],this.httpProviders=this.createHttpProviders()}requestAccounts(){return this.getAccounts()}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider(e.chainId).request(e.request)}setDefaultChain(e,t){this.httpProviders[e]||this.setHttpProvider(e,t),this.chainId=e,this.events.emit(Ji.DEFAULT_CHAIN_CHANGED,`${this.name}:${e}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(t=>t.split(":")[1]===this.chainId.toString()).map(t=>t.split(":")[2]))]:[]}createHttpProviders(){var e,t;const i={};return(t=(e=this.namespace)==null?void 0:e.accounts)==null||t.forEach(s=>{const a=Xa(s);i[`${a.namespace}:${a.reference}`]=this.createHttpProvider(s)}),i}getHttpProvider(e){const t=this.httpProviders[e];if(typeof t>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return t}setHttpProvider(e,t){const i=this.createHttpProvider(e,t);i&&(this.httpProviders[e]=i)}createHttpProvider(e,t){const i=t||Ki(e,this.namespace,this.client.core.projectId);if(!i)throw new Error(`No RPC url provided for chainId: ${e}`);return new Gi(new vn(i,Dt("disableProviderPing")))}}var eS=Object.defineProperty,tS=Object.defineProperties,rS=Object.getOwnPropertyDescriptors,X1=Object.getOwnPropertySymbols,iS=Object.prototype.hasOwnProperty,nS=Object.prototype.propertyIsEnumerable,Z1=(r,e,t)=>e in r?eS(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t,Oc=(r,e)=>{for(var t in e||(e={}))iS.call(e,t)&&Z1(r,t,e[t]);if(X1)for(var t of X1(e))nS.call(e,t)&&Z1(r,t,e[t]);return r},Cu=(r,e)=>tS(r,rS(e));class b0{constructor(e){this.events=new Xu,this.rpcProviders={},this.shouldAbortPairingAttempt=!1,this.maxPairingAttempts=10,this.disableProviderPing=!1,this.providerOpts=e,this.logger=typeof(e==null?void 0:e.logger)<"u"&&typeof(e==null?void 0:e.logger)!="string"?e.logger:Qu(tf({level:(e==null?void 0:e.logger)||$1})),this.disableProviderPing=(e==null?void 0:e.disableProviderPing)||!1}static async init(e){const t=new b0(e);return await t.initialize(),t}async request(e,t,i){const[s,a]=this.validateChain(t);if(!this.session)throw new Error("Please call connect() before request()");return await this.getProvider(s).request({request:Oc({},e),chainId:`${s}:${a}`,topic:this.session.topic,expiry:i})}sendAsync(e,t,i,s){const a=new Date().getTime();this.request(e,i,s).then(f=>t(null,rf(a,f))).catch(f=>t(f,void 0))}async enable(){if(!this.client)throw new Error("Sign Client not initialized");return this.session||await this.connect({namespaces:this.namespaces,optionalNamespaces:this.optionalNamespaces,sessionProperties:this.sessionProperties}),await this.requestAccounts()}async disconnect(){var e;if(!this.session)throw new Error("Please call connect() before enable()");await this.client.disconnect({topic:(e=this.session)==null?void 0:e.topic,reason:Lt("USER_DISCONNECTED")}),await this.cleanup()}async connect(e){if(!this.client)throw new Error("Sign Client not initialized");if(this.setNamespaces(e),await this.cleanupPendingPairings(),!e.skipPairing)return await this.pair(e.pairingTopic)}async authenticate(e,t){if(!this.client)throw new Error("Sign Client not initialized");this.setNamespaces(e),await this.cleanupPendingPairings();const{uri:i,response:s}=await this.client.authenticate(e,t);i&&(this.uri=i,this.events.emit("display_uri",i));const a=await s();if(this.session=a.session,this.session){const f=V1(this.session.namespaces);this.namespaces=Iu(this.namespaces,f),this.persist("namespaces",this.namespaces),this.onConnect()}return a}on(e,t){this.events.on(e,t)}once(e,t){this.events.once(e,t)}removeListener(e,t){this.events.removeListener(e,t)}off(e,t){this.events.off(e,t)}get isWalletConnect(){return!0}async pair(e){this.shouldAbortPairingAttempt=!1;let t=0;do{if(this.shouldAbortPairingAttempt)throw new Error("Pairing aborted");if(t>=this.maxPairingAttempts)throw new Error("Max auto pairing attempts reached");const{uri:i,approval:s}=await this.client.connect({pairingTopic:e,requiredNamespaces:this.namespaces,optionalNamespaces:this.optionalNamespaces,sessionProperties:this.sessionProperties});i&&(this.uri=i,this.events.emit("display_uri",i)),await s().then(a=>{this.session=a;const f=V1(a.namespaces);this.namespaces=Iu(this.namespaces,f),this.persist("namespaces",this.namespaces)}).catch(a=>{if(a.message!==Ov)throw a;t++})}while(!this.session);return this.onConnect(),this.session}setDefaultChain(e,t){try{if(!this.session)return;const[i,s]=this.validateChain(e),a=this.getProvider(i);a.name===Xs?a.setDefaultChain(`${i}:${s}`,t):a.setDefaultChain(s,t)}catch(i){if(!/Please call connect/.test(i.message))throw i}}async cleanupPendingPairings(e={}){this.logger.info("Cleaning up inactive pairings...");const t=this.client.pairing.getAll();if(pn(t)){for(const i of t)e.deletePairings?this.client.core.expirer.set(i.topic,0):await this.client.core.relayer.subscriber.unsubscribe(i.topic);this.logger.info(`Inactive pairings cleared: ${t.length}`)}}abortPairingAttempt(){this.shouldAbortPairingAttempt=!0}async checkStorage(){if(this.namespaces=await this.getFromStore("namespaces"),this.optionalNamespaces=await this.getFromStore("optionalNamespaces")||{},this.client.session.length){const e=this.client.session.keys.length-1;this.session=this.client.session.get(this.client.session.keys[e]),this.createProviders()}}async initialize(){this.logger.trace("Initialized"),await this.createClient(),await this.checkStorage(),this.registerEventListeners()}async createClient(){this.client=this.providerOpts.client||await v0.init({core:this.providerOpts.core,logger:this.providerOpts.logger||$1,relayUrl:this.providerOpts.relayUrl||IE,projectId:this.providerOpts.projectId,metadata:this.providerOpts.metadata,storageOptions:this.providerOpts.storageOptions,storage:this.providerOpts.storage,name:this.providerOpts.name,customStoragePrefix:this.providerOpts.customStoragePrefix,telemetryEnabled:this.providerOpts.telemetryEnabled}),this.logger.trace("SignClient Initialized")}createProviders(){if(!this.client)throw new Error("Sign Client not initialized");if(!this.session)throw new Error("Session not initialized. Please call connect() before enable()");const e=[...new Set(Object.keys(this.session.namespaces).map(t=>Ya(t)))];Ru("client",this.client),Ru("events",this.events),Ru("disableProviderPing",this.disableProviderPing),e.forEach(t=>{if(!this.session)return;const i=BE(t,this.session),s=Tv(i),a=Iu(this.namespaces,this.optionalNamespaces),f=Cu(Oc({},a[t]),{accounts:i,chains:s});switch(t){case"eip155":this.rpcProviders[t]=new KE({namespace:f});break;case"algorand":this.rpcProviders[t]=new JE({namespace:f});break;case"solana":this.rpcProviders[t]=new GE({namespace:f});break;case"cosmos":this.rpcProviders[t]=new VE({namespace:f});break;case"polkadot":this.rpcProviders[t]=new UE({namespace:f});break;case"cip34":this.rpcProviders[t]=new QE({namespace:f});break;case"elrond":this.rpcProviders[t]=new YE({namespace:f});break;case"multiversx":this.rpcProviders[t]=new WE({namespace:f});break;case"near":this.rpcProviders[t]=new XE({namespace:f});break;default:this.rpcProviders[Xs]?this.rpcProviders[Xs].updateNamespace(f):this.rpcProviders[Xs]=new ZE({namespace:f})}})}registerEventListeners(){if(typeof this.client>"u")throw new Error("Sign Client is not initialized");this.client.on("session_ping",e=>{this.events.emit("session_ping",e)}),this.client.on("session_event",e=>{const{params:t}=e,{event:i}=t;if(i.name==="accountsChanged"){const s=i.data;s&&pn(s)&&this.events.emit("accountsChanged",s.map(LE))}else if(i.name==="chainChanged"){const s=t.chainId,a=t.event.data,f=Ya(s),u=Pu(s)!==Pu(a)?`${f}:${Pu(a)}`:s;this.onChainChanged(u)}else this.events.emit(i.name,i.data);this.events.emit("session_event",e)}),this.client.on("session_update",({topic:e,params:t})=>{var i;const{namespaces:s}=t,a=(i=this.client)==null?void 0:i.session.get(e);this.session=Cu(Oc({},a),{namespaces:s}),this.onSessionUpdate(),this.events.emit("session_update",{topic:e,params:t})}),this.client.on("session_delete",async e=>{await this.cleanup(),this.events.emit("session_delete",e),this.events.emit("disconnect",Cu(Oc({},Lt("USER_DISCONNECTED")),{data:e.topic}))}),this.on(Ji.DEFAULT_CHAIN_CHANGED,e=>{this.onChainChanged(e,!0)})}getProvider(e){return this.rpcProviders[e]||this.rpcProviders[Xs]}onSessionUpdate(){Object.keys(this.rpcProviders).forEach(e=>{var t;this.getProvider(e).updateNamespace((t=this.session)==null?void 0:t.namespaces[e])})}setNamespaces(e){const{namespaces:t,optionalNamespaces:i,sessionProperties:s}=e;t&&Object.keys(t).length&&(this.namespaces=t),i&&Object.keys(i).length&&(this.optionalNamespaces=i),this.sessionProperties=s,this.persist("namespaces",t),this.persist("optionalNamespaces",i)}validateChain(e){const[t,i]=(e==null?void 0:e.split(":"))||["",""];if(!this.namespaces||!Object.keys(this.namespaces).length)return[t,i];if(t&&!Object.keys(this.namespaces||{}).map(f=>Ya(f)).includes(t))throw new Error(`Namespace '${t}' is not configured. Please call connect() first with namespace config.`);if(t&&i)return[t,i];const s=Ya(Object.keys(this.namespaces)[0]),a=this.rpcProviders[s].getDefaultChain();return[s,a]}async requestAccounts(){const[e]=this.validateChain();return await this.getProvider(e).requestAccounts()}onChainChanged(e,t=!1){if(!this.namespaces)return;const[i,s]=this.validateChain(e);s&&(t||this.getProvider(i).setDefaultChain(s),this.namespaces[i]?this.namespaces[i].defaultChain=s:this.namespaces[`${i}:${s}`]?this.namespaces[`${i}:${s}`].defaultChain=s:this.namespaces[`${i}:${s}`]={defaultChain:s},this.persist("namespaces",this.namespaces),this.events.emit("chainChanged",s))}onConnect(){this.createProviders(),this.events.emit("connect",{session:this.session})}async cleanup(){this.session=void 0,this.namespaces=void 0,this.optionalNamespaces=void 0,this.sessionProperties=void 0,this.persist("namespaces",void 0),this.persist("optionalNamespaces",void 0),this.persist("sessionProperties",void 0),await this.cleanupPendingPairings({deletePairings:!0})}persist(e,t){this.client.core.storage.setItem(`${j1}/${e}`,t)}async getFromStore(e){return await this.client.core.storage.getItem(`${j1}/${e}`)}}const sS=b0,aS="wc",oS="ethereum_provider",cS=`${aS}@2:${oS}:`,fS="https://rpc.walletconnect.org/v1/",Ku=["eth_sendTransaction","personal_sign"],hS=["eth_accounts","eth_requestAccounts","eth_sendRawTransaction","eth_sign","eth_signTransaction","eth_signTypedData","eth_signTypedData_v3","eth_signTypedData_v4","eth_sendTransaction","personal_sign","wallet_switchEthereumChain","wallet_addEthereumChain","wallet_getPermissions","wallet_requestPermissions","wallet_registerOnboarding","wallet_watchAsset","wallet_scanQRCode","wallet_sendCalls","wallet_getCapabilities","wallet_getCallsStatus","wallet_showCallsStatus"],Gu=["chainChanged","accountsChanged"],uS=["chainChanged","accountsChanged","message","disconnect","connect"];var lS=Object.defineProperty,dS=Object.defineProperties,pS=Object.getOwnPropertyDescriptors,eg=Object.getOwnPropertySymbols,gS=Object.prototype.hasOwnProperty,vS=Object.prototype.propertyIsEnumerable,tg=(r,e,t)=>e in r?lS(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t,Zs=(r,e)=>{for(var t in e||(e={}))gS.call(e,t)&&tg(r,t,e[t]);if(eg)for(var t of eg(e))vS.call(e,t)&&tg(r,t,e[t]);return r},Nu=(r,e)=>dS(r,pS(e));function ef(r){return Number(r[0].split(":")[1])}function qc(r){return`0x${r.toString(16)}`}function bS(r){const{chains:e,optionalChains:t,methods:i,optionalMethods:s,events:a,optionalEvents:f,rpcMap:u}=r;if(!pn(e))throw new Error("Invalid chains");const d={chains:e,methods:i||Ku,events:a||Gu,rpcMap:Zs({},e.length?{[ef(e)]:u[ef(e)]}:{})},l=a==null?void 0:a.filter(R=>!Gu.includes(R)),w=i==null?void 0:i.filter(R=>!Ku.includes(R));if(!t&&!f&&!s&&!(l!=null&&l.length)&&!(w!=null&&w.length))return{required:e.length?d:void 0};const x=(l==null?void 0:l.length)&&(w==null?void 0:w.length)||!t,C={chains:[...new Set(x?d.chains.concat(t||[]):t)],methods:[...new Set(d.methods.concat(s!=null&&s.length?s:hS))],events:[...new Set(d.events.concat(f!=null&&f.length?f:uS))],rpcMap:u};return{required:e.length?d:void 0,optional:t.length?C:void 0}}class m0{constructor(){this.events=new Bn.EventEmitter,this.namespace="eip155",this.accounts=[],this.chainId=1,this.STORAGE_KEY=cS,this.on=(e,t)=>(this.events.on(e,t),this),this.once=(e,t)=>(this.events.once(e,t),this),this.removeListener=(e,t)=>(this.events.removeListener(e,t),this),this.off=(e,t)=>(this.events.off(e,t),this),this.parseAccount=e=>this.isCompatibleChainId(e)?this.parseAccountId(e).address:e,this.signer={},this.rpc={}}static async init(e){const t=new m0;return await t.initialize(e),t}async request(e,t){return await this.signer.request(e,this.formatChainId(this.chainId),t)}sendAsync(e,t,i){this.signer.sendAsync(e,t,this.formatChainId(this.chainId),i)}get connected(){return this.signer.client?this.signer.client.core.relayer.connected:!1}get connecting(){return this.signer.client?this.signer.client.core.relayer.connecting:!1}async enable(){return this.session||await this.connect(),await this.request({method:"eth_requestAccounts"})}async connect(e){if(!this.signer.client)throw new Error("Provider not initialized. Call init() first");this.loadConnectOpts(e);const{required:t,optional:i}=bS(this.rpc);try{const s=await new Promise(async(f,u)=>{var d;this.rpc.showQrModal&&((d=this.modal)==null||d.subscribeModal(l=>{!l.open&&!this.signer.session&&(this.signer.abortPairingAttempt(),u(new Error("Connection request reset. Please try again.")))})),await this.signer.connect(Nu(Zs({namespaces:Zs({},t&&{[this.namespace]:t})},i&&{optionalNamespaces:{[this.namespace]:i}}),{pairingTopic:e==null?void 0:e.pairingTopic})).then(l=>{f(l)}).catch(l=>{u(new Error(l.message))})});if(!s)return;const a=xp(s.namespaces,[this.namespace]);this.setChainIds(this.rpc.chains.length?this.rpc.chains:a),this.setAccounts(a),this.events.emit("connect",{chainId:qc(this.chainId)})}catch(s){throw this.signer.logger.error(s),s}finally{this.modal&&this.modal.closeModal()}}async authenticate(e,t){if(!this.signer.client)throw new Error("Provider not initialized. Call init() first");this.loadConnectOpts({chains:e==null?void 0:e.chains});try{const i=await new Promise(async(a,f)=>{var u;this.rpc.showQrModal&&((u=this.modal)==null||u.subscribeModal(d=>{!d.open&&!this.signer.session&&(this.signer.abortPairingAttempt(),f(new Error("Connection request reset. Please try again.")))})),await this.signer.authenticate(Nu(Zs({},e),{chains:this.rpc.chains}),t).then(d=>{a(d)}).catch(d=>{f(new Error(d.message))})}),s=i.session;if(s){const a=xp(s.namespaces,[this.namespace]);this.setChainIds(this.rpc.chains.length?this.rpc.chains:a),this.setAccounts(a),this.events.emit("connect",{chainId:qc(this.chainId)})}return i}catch(i){throw this.signer.logger.error(i),i}finally{this.modal&&this.modal.closeModal()}}async disconnect(){this.session&&await this.signer.disconnect(),this.reset()}get isWalletConnect(){return!0}get session(){return this.signer.session}registerEventListeners(){this.signer.on("session_event",e=>{const{params:t}=e,{event:i}=t;i.name==="accountsChanged"?(this.accounts=this.parseAccounts(i.data),this.events.emit("accountsChanged",this.accounts)):i.name==="chainChanged"?this.setChainId(this.formatChainId(i.data)):this.events.emit(i.name,i.data),this.events.emit("session_event",e)}),this.signer.on("chainChanged",e=>{const t=parseInt(e);this.chainId=t,this.events.emit("chainChanged",qc(this.chainId)),this.persist()}),this.signer.on("session_update",e=>{this.events.emit("session_update",e)}),this.signer.on("session_delete",e=>{this.reset(),this.events.emit("session_delete",e),this.events.emit("disconnect",Nu(Zs({},Lt("USER_DISCONNECTED")),{data:e.topic,name:"USER_DISCONNECTED"}))}),this.signer.on("display_uri",e=>{var t,i;this.rpc.showQrModal&&((t=this.modal)==null||t.closeModal(),(i=this.modal)==null||i.openModal({uri:e})),this.events.emit("display_uri",e)})}switchEthereumChain(e){this.request({method:"wallet_switchEthereumChain",params:[{chainId:e.toString(16)}]})}isCompatibleChainId(e){return typeof e=="string"?e.startsWith(`${this.namespace}:`):!1}formatChainId(e){return`${this.namespace}:${e}`}parseChainId(e){return Number(e.split(":")[1])}setChainIds(e){const t=e.filter(i=>this.isCompatibleChainId(i)).map(i=>this.parseChainId(i));t.length&&(this.chainId=t[0],this.events.emit("chainChanged",qc(this.chainId)),this.persist())}setChainId(e){if(this.isCompatibleChainId(e)){const t=this.parseChainId(e);this.chainId=t,this.switchEthereumChain(t)}}parseAccountId(e){const[t,i,s]=e.split(":");return{chainId:`${t}:${i}`,address:s}}setAccounts(e){this.accounts=e.filter(t=>this.parseChainId(this.parseAccountId(t).chainId)===this.chainId).map(t=>this.parseAccountId(t).address),this.events.emit("accountsChanged",this.accounts)}getRpcConfig(e){var t,i;const s=(t=e==null?void 0:e.chains)!=null?t:[],a=(i=e==null?void 0:e.optionalChains)!=null?i:[],f=s.concat(a);if(!f.length)throw new Error("No chains specified in either `chains` or `optionalChains`");const u=s.length?(e==null?void 0:e.methods)||Ku:[],d=s.length?(e==null?void 0:e.events)||Gu:[],l=(e==null?void 0:e.optionalMethods)||[],w=(e==null?void 0:e.optionalEvents)||[],x=(e==null?void 0:e.rpcMap)||this.buildRpcMap(f,e.projectId),C=(e==null?void 0:e.qrModalOptions)||void 0;return{chains:s==null?void 0:s.map(R=>this.formatChainId(R)),optionalChains:a.map(R=>this.formatChainId(R)),methods:u,events:d,optionalMethods:l,optionalEvents:w,rpcMap:x,showQrModal:!!(e!=null&&e.showQrModal),qrModalOptions:C,projectId:e.projectId,metadata:e.metadata}}buildRpcMap(e,t){const i={};return e.forEach(s=>{i[s]=this.getRpcUrl(s,t)}),i}async initialize(e){if(this.rpc=this.getRpcConfig(e),this.chainId=this.rpc.chains.length?ef(this.rpc.chains):ef(this.rpc.optionalChains),this.signer=await sS.init({projectId:this.rpc.projectId,metadata:this.rpc.metadata,disableProviderPing:e.disableProviderPing,relayUrl:e.relayUrl,storageOptions:e.storageOptions,customStoragePrefix:e.customStoragePrefix,telemetryEnabled:e.telemetryEnabled}),this.registerEventListeners(),await this.loadPersistedSession(),this.rpc.showQrModal){let t;try{const{WalletConnectModal:i}=await x5(()=>import("./index-CCVXPQLC.js").then(s=>s.i),__vite__mapDeps([0,1,2]));t=i}catch{throw new Error("To use QR modal, please install @walletconnect/modal package")}if(t)try{this.modal=new t(Zs({projectId:this.rpc.projectId},this.rpc.qrModalOptions))}catch(i){throw this.signer.logger.error(i),new Error("Could not generate WalletConnectModal Instance")}}}loadConnectOpts(e){if(!e)return;const{chains:t,optionalChains:i,rpcMap:s}=e;t&&pn(t)&&(this.rpc.chains=t.map(a=>this.formatChainId(a)),t.forEach(a=>{this.rpc.rpcMap[a]=(s==null?void 0:s[a])||this.getRpcUrl(a)})),i&&pn(i)&&(this.rpc.optionalChains=[],this.rpc.optionalChains=i==null?void 0:i.map(a=>this.formatChainId(a)),i.forEach(a=>{this.rpc.rpcMap[a]=(s==null?void 0:s[a])||this.getRpcUrl(a)}))}getRpcUrl(e,t){var i;return((i=this.rpc.rpcMap)==null?void 0:i[e])||`${fS}?chainId=eip155:${e}&projectId=${t||this.rpc.projectId}`}async loadPersistedSession(){if(this.session)try{const e=await this.signer.client.core.storage.getItem(`${this.STORAGE_KEY}/chainId`),t=this.session.namespaces[`${this.namespace}:${e}`]?this.session.namespaces[`${this.namespace}:${e}`]:this.session.namespaces[this.namespace];this.setChainIds(e?[this.formatChainId(e)]:t==null?void 0:t.accounts),this.setAccounts(t==null?void 0:t.accounts)}catch(e){this.signer.logger.error("Failed to load persisted session, clearing state..."),this.signer.logger.error(e),await this.disconnect().catch(t=>this.signer.logger.warn(t))}}reset(){this.chainId=1,this.accounts=[]}persist(){this.session&&this.signer.client.core.storage.setItem(`${this.STORAGE_KEY}/chainId`,this.chainId)}parseAccounts(e){return typeof e=="string"||e instanceof String?[this.parseAccount(e)]:e.map(t=>this.parseAccount(t))}}const NS=m0;export{NS as EthereumProvider,uS as OPTIONAL_EVENTS,hS as OPTIONAL_METHODS,Gu as REQUIRED_EVENTS,Ku as REQUIRED_METHODS,m0 as default};
